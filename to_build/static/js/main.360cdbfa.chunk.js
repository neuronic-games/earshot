(this["webpackJsonpbinaural-meet"]=this["webpackJsonpbinaural-meet"]||[]).push([[0],{278:function(e,t){},535:function(e,t){},536:function(e,t){},537:function(e,t){},544:function(e,t){},545:function(e,t){},546:function(e,t){},547:function(e,t){},548:function(e,t){},553:function(e,t,n){"use strict";n.r(t);var i=n(14);var o=function(e){var t=new URL(decodeURI(e)),n=["room","name","headphone","speaker","cameraOn","muteMic","testBot","skipEntrance"].reduce((function(e,n){return e[n]=t.searchParams.get(n),e}),{});return n.room=t.pathname.substr(1).replace(/[./@]/,"_")+(n.room?n.room:""),n}(window.location.href),a=n(24);function r(e){if(!e)throw new Error("Not a truthy value")}/Chrome/.test(navigator.userAgent),/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);function s(e,t){var n,i=new Map(e),o=Object(a.a)(t);try{for(o.s();!(n=o.n()).done;){var r=n.value;i.delete(r[0])}}catch(s){o.e(s)}finally{o.f()}return i}function c(){return!!navigator.userAgent.match(/iPhone|Android.+Mobile/)}function l(){return window.parent.screen.width<window.parent.screen.height}function u(e){return e.host===window.location.host&&e.pathname===window.location.pathname}var p=n(35);function h(e){return Math.abs(Math.sign(e.a)*Math.sqrt(Math.pow(e.a,2)+Math.pow(e.c,2)))}function v(e){return Math.abs(Math.sign(e.d)*Math.sqrt(Math.pow(e.b,2)+Math.pow(e.d,2)))}function m(e){return Math.atan2(-e.c,e.a)}function f(e,t,n){var i,o=(new DOMMatrix).translate(-e[0],-e[1]),a=(i=new DOMMatrix).translateSelf.apply(i,Object(p.a)(e));return[a,t,o,n].reduce((function(e,t){return e.multiplySelf(t)}),new DOMMatrix)}function b(e,t){return[e.a*t[0]+e.c*t[1]+e.e,e.b*t[0]+e.d*t[1]+e.f]}function g(e,t){return[e.a*t[0]+e.c*t[1],e.b*t[0]+e.d*t[1]]}function j(e,t){return[e[0]+t[0],e[1]+t[1]]}function A(e,t){return[e[0]-t[0],e[1]-t[1]]}function O(e,t){return t.map((function(t){return e*t}))}function y(e,t){return[e*t[0],e*t[1]]}function x(e){var t=0;return e.forEach((function(e){return t+=e*e})),Math.sqrt(t)}function C(e){return e*Math.PI/180}function w(e){return 180*e/Math.PI}function S(e,t){var n=C(e.orientation),i=Math.sin(n),o=Math.cos(n),a=[t.position[0]-e.position[0],t.position[1]-e.position[1]],r=[a[1]*i+a[0]*o,a[1]*o-a[0]*i],s=t.orientation-e.orientation;return{position:r,orientation:s<0?s+360:s}}function k(e){var t=C(e.orientation);return{position:[e.position[0],0,-e.position[1]],orientation:[Math.sin(t),0,Math.cos(t)]}}function T(e,t){var n=e*(Math.PI/180),i=Math.cos(n),o=Math.sin(n);return[i*t[0]-o*t[1],o*t[0]+i*t[1]]}function I(e,t){return e[0]*t[0]+e[1]*t[1]}function E(e){return Math.sqrt(e.reduce((function(e,t){return e+t*t}),0))}function P(e,t){if(0===e.orientation)return[e.position[1],e.position[0]+t[0],e.position[1]+t[1],e.position[0]];var n=T(e.orientation,e.position),i=T(e.orientation,[t[0],0]),o=T(e.orientation,[0,t[1]]),a=[n[0],n[0]+i[0],n[0]+o[0],n[0]+i[0]+o[0]],r=[n[1],n[1]+i[1],n[1]+o[1],n[1]+i[1]+o[1]];return a.sort((function(e,t){return e-t})),r.sort((function(e,t){return e-t})),[r[0],a[3],r[3],a[0]]}function M(e,t,n){return n[3]<=e[0]-t&&e[0]+t<=n[1]&&n[0]<=e[1]-t&&e[1]+t<=n[2]}function R(e){return Math.round(100*e)/100}function D(e){return"".concat(R(e.position[0]),",").concat(R(e.position[1]),",").concat(R(e.orientation))}function B(e){return"".concat(e.position[0],",").concat(e.position[1],",").concat(e.show?"t":"")}function N(e){var t=e.split(",");return{position:[Number(t[0]),Number(t[1])],orientation:Number(t[2])}}function z(e){var t=e.split(",");return{position:[Number(t[0]),Number(t[1])],show:!!t[2]}}function F(e){return function(){return new Promise((function(t,n){try{e(),t()}catch(i){throw n(i),i}}))}}function L(e){for(var t=0,n=0;n!==e.length;n+=1)t=e.charCodeAt(n)+13*t;var i=t%4096;return[17*(Math.floor(i/256)%16),17*(Math.floor(i/16)%16),17*(Math.floor(i)%16)]}function U(e){return Q(e)?[255,255,136]:[0,0,136]}function Q(e){return e[0]+e[1]+.2*e[2]<340}function G(e){return[255-e[0],255-e[1],255-e[2]]}function Y(e){var t=[Math.floor(e[0]),Math.floor(e[1]),Math.floor(e[2])],n=t[1],i=t[2];return"#".concat("0".concat(t[0].toString(16)).slice(-2)).concat("0".concat(n.toString(16)).slice(-2)).concat("0".concat(i.toString(16)).slice(-2))}function H(e){return function(e){var t=e[0]/17,n=e[1]/17,i=e[2]/17,o=Q(e)?"#FF8":"#008";return["#".concat(t.toString(16)).concat(n.toString(16)).concat(i.toString(16)),o,"#".concat((15-t).toString(16)).concat((15-n).toString(16)).concat((15-i).toString(16))]}(L(e))}function W(e,t){return"rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat(t,")")}var J=n(18),V=n(13),K=(n(54),n(2)),X=n(3),Z=n(228),q=n(281),_=n(627),$=n(135);function ee(e,t){return Z.a.t(e,t)}function te(){return Object(_.a)()}var ne={en:{translation:{enAbout:"A video chat with a 2D map, where you will hear others' voices based on the location. It holds multiple conversations in a venue parallelly, and you may walk around between them. Sharing screens, cameras, texts, images, YouTube, and documents on google drive are supported. You may drop or paste on the map.",enTopPageUrl:"https://scrapbox.io/binaural-meet/Top_page",enMoreInfo:"... more info",YourName:"MY NAME",Venue:"MEETING SPACE",EnterTheVenue:"Enter the venue",Contents:"Contents","Create and Share":"Create and Share","Share Text":"Share Text","Share iframe":"Share web page (Can't display many sites)","Share image":"Share image","Share zone image":"Share zone image","Select video camera to share":"Select video camera to share","Meeting Space":"Meeting Space",shareImport:"_Load...",shareImportTip:"Load the shared content from the downloaded .json file.",shareDownload:"_Save Meeting Space",shareDownloadTip:"Download all shared contents except screen sharing and cameras to a file.",shareIframe:"I_frame",shareIframeTip:"Web pages that can be displayed are limited to those that can be displayed in an iframe.",shareText:"_Text (can paste directly)",sharePaste:"Paste from clipboard (_v)",sharePasteTip:"Ctrl+V / Cmd+V shortcut directly works on the map. URL to PDF, images, YouTube, Google Docs",shareImage:"Ima_ge (can paste directly)",shareZoneImage:"_Chat Zone",shareImageTip:"Image files will be uploaded to gyazo.com. You can also paste the URL of the image.",shareGDrive:"Import Files from Google Drive",shareGDriveTip:"Upload any available file from Google Drive",shareWhiteboard:"_Whiteboard",shareWhiteboardTip:"Place the wbo.ophir.dev whiteboard.",shareEditEnd:"Stop editing",shareCamera:"_Camera",shareScreenBackground:"Screen as the _background",stopScreenBackground:"Stop _background screen",shareScreenContent:"_Screen",shareScreenContentTip:"Reducing the screen update frequency (fps) will reduce the network load.",stopScreen:"C_lose all screen and camera windows",frameRateSetting:"Frame rate:",fps:"fps",shareMouse:"_Mouse cursor",shareMouseTip:"Show the mouse cursor to other participants. The avatar also always gazes at the mouse cursor.",stopMouse:"Stop sharing _Mouse cursor",recorderMenuTitle:"_Record and playback",recorderStart:"Start _recording",recorderStop:"Stop _recording",playerStop:"Stop _playback",playerPlayfile:"_Load and play",ttCreateAndshare:"_Create and share",ttMicMute:"_Mic mute",ttPlayAndRec:"_Record and Playback",headphoneL1Chrome:"Stereo headphone (Caution: no echo cancel)",headphoneL1:"Stereo headphone",headphoneL2:"Monaural speaker",etConnection:"No connection",emConnection:"Please check internet connection. Binaural Meet uses https. If internet is OK, the server may have problems.",etMicPermission:"No permission to use microphone",emMicPermission:"Your browser does not permit to use microphone. Please give me the permission and reload your browser.",etNoMic:"No microphone",emNoMic:"Please check if your PC has a microphone. Binaural Meet requires it.",emClose:"Close",emNeverShow:"Never show this in this session",etNoChannel:"No data channel",emNoChannel:"Please check firewall setting. Binaural Meet connect to https (port 443/TCP) and port 8801-8810/UDP or 80/TCP.",etDataConnection:"Data connection failed",etRtcConnection:"Media connection failed",emDataConnection:"Please check firewall setting. Binaural Meet connect to https (port 443/TCP).",emRtcConnection:"Please check firewall setting. Binaural Meet connect to https (port 443/TCP).",etRetry:"Please reload",emRetry:"The connection had been cut off once. Please click the reload button of the browser.",imageDropzoneText:"Drag and drop images here or click",lsTitle:"Avatar and notification setting",lsName:"Name",lsColor:"Color",lsColorAvatar:"Avatar",lsColorText:"Text",lsAutoColor:"Auto",lsImage:"Avatar image",lsEmail:"Input email to use Gravatar's image",lsImageFile:"Upload file to use image file",btSave:"Save and close",btCancel:"Cancel change",lsNotifyCall:"Called",lsNotifyTouch:"Touched",lsNotifyNear:"Approached",lsNotifyYarn:"Yarn phone",rsCall:"Call",lsNotification:"Notification",rsConnectYarnPhone:"Connect yarn phone",rsCutYarnPhone:"Disconnect yarn phone",rsChatTo:"Send chat only to {{name}}",ctPin:"Lock position and size",ctUnpin:"Unlock position and size",ctEdit:"Start editing (No view sync)",ctEndEdit:"End editing (Sync view)",ctUploadZone:"Upload and share",ctEditIframe:"Browse page (No sync)",ctEndEditIframe:"End browse (No sync)",ctEditText:"Edit (No scroll sync)",ctEndEditText:"End edit (Sync scroll)",ctEditWhiteboard:"Edit (No scroll sync)",ctEndEditWhiteboard:"End edit (No scroll sync)",ctEditGDrive:"Edit/Update (No scroll sync)",ctEndEditGDrive:"End edit (No auto-update)",ctEndEditYoutube:"Sync play pos",ctEditYoutube:"No sync",ctMoveTop:"Move to the top",ctMoveBottom:"Move to the bottom",ctWallpaper:"Make this wallpaper",ctUnWallpaper:"Remove this from wallpaper",ctCopyToClipboard:"Copy to clipboard",ctMaximize:"Zoom and move to maximize this content",ctUnMaximize:"Unmaximize and restore the view",ctDelete:"Delete",ctClose:"Close",ctName:"Titile",ctFocus:"Show it in the center",ctFrameVisible:"Normal frame",ctFrameInvisible:"Invisible frame",ctOpenAudioZone:"Meeting space",ctClosedAudioZone:"Sound proof room",ctNotAudioZone:"Just an image",ctOpaque:"Opaque",ctTransparent:"Transparent",ctGenerateAvatar:"Customize Avatar",deleteMsg:"Remove",upload:"Upload",Save:"Save",Clear:"Clear",Cancel:"Cancel",broadcastMyVoice:"Broadcast my voice",showTrackedFace:"Show only facial feature points",trackWholeBody:"Track whole body",soundLocalizationBasedOn:"Sound localization based on",stereoNote:"Are you really using headphones?",stereoNoteDesc:"If you use it with a speaker, it will echo back the other party's voice, making it very difficult for the other party to speak.",stereoConfirmed:"Confirmed and change into headphone mode",stereoCancel:"Keep loudspeaker mode",slAvatar:"Avatar (avatar's direction)",slUser:"User (top is front)",usage:"How to use",cmJoined:"{{name}} joined.",cmLeft:"{{name}} Left.",cmNameChanged:"{{old}} changed its name to {{new}}.",cmCallBy:"{{name}} called you.",cmCallTo:"You called {{name}}.",cmToAll:"To all",cmToName:"To {{name}}",cmSend:"Send (CTRL+Enter)",cmPrivateFrom:"Private from {{name}}",cmPrivateTo:"Private to {{name}}",noCalled:"{{name}} called you.",noTouched:"{{name}} touched you.",noNear:"{{name}} approached you.",noYarn:"{{name}} connected yarn.",afkTitle:"In away from keyboard mode (L / Esc)",afkMessage:"Hit any key or click mouse to return.",gdFailed:"The file in Google Drive could not be accessed.\r\nChange the file-sharing settings so that everyone on the Internet can see it.",videoLimit:"Limit on the number of video streams",audioLimit:"Limit on the number of audio streams",connectionStatus:"Connection Status",deleteImageMsg:"Remove Image?",deleteZoneMsg:"Remove Chat Zone?",deleteTextMsg:"Remove Text?",deleteYes:"Remove",ctKick:"Kick user from meeting",deleteNo:"Don't Remove",copyClipboard:"Meeting address copied to clipboard",deleteAlert:"ALERT",ctProximity:"Enable Chat Zone",ctUnProximity:"Disable Chat Zone",ctStopWatchOn:"Start zone stopwatch",ctStopWatchOff:"Stop zone stopwatch",ctScaleRotate:"Enable Scale and Rotate",ctUnScaleRotate:"Disable Scale and Rotate",settingPreference:"_Preferences...",meetingSpace:"_Meeting Space",meetingDesc:"Meeting Description",broadcastMyVideo:"Broadcast my video",broadcastMySpeakVideo:"Speak & Show",stereoswitch:"Stereo sound (via headset)"}},ja:{translation:{enAbout:"\u4f4d\u7f6e\u306b\u5fdc\u3058\u3066\u58f0\u304c\u5c4a\u304f2D\u30de\u30c3\u30d7\u4ed8\u304d\u30d3\u30c7\u30aa\u30c1\u30e3\u30c3\u30c8\u3067\u3059\u3002\u4f1a\u5834\u5185\u306b\u8907\u6570\u306e\u4f1a\u8a71\u304c\u4e26\u7acb\u3057\u3001\u4f1a\u8a71\u9593\u3092\u6b69\u304d\u56de\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u753b\u9762\u3001\u30ab\u30e1\u30e9\u3001\u30c6\u30ad\u30b9\u30c8\u3001\u753b\u50cf\u3001YouTube\u3001Google\u30c9\u30e9\u30a4\u30d6\u306e\u6587\u66f8\u3092\u5171\u6709\u3067\u304d\u307e\u3059\u3002\u30de\u30c3\u30d7\u306bURL\u7b49\u3092\u30c9\u30ed\u30c3\u30d7/\u30da\u30fc\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002",enTopPageUrl:"https://scrapbox.io/binaural-meet/%E3%83%88%E3%83%83%E3%83%97%E3%83%9A%E3%83%BC%E3%82%B8",enMoreInfo:"\u8a73\u7d30",YourName:"\u304a\u540d\u524d\u3092\u5165\u529b\u304f\u3060\u3055\u3044",Venue:"\u4f1a\u5834\u540d",EnterTheVenue:"\u5165\u5834",Contents:"\u5171\u6709",createAndShareTitle:"\u5171\u6709 (_c)","Create and Share":"\u30c6\u30ad\u30b9\u30c8\u306e\u5171\u6709","Share Text":"\u30c6\u30ad\u30b9\u30c8\u306e\u5171\u6709","Share iframe":"\u30c6\u30ad\u30b9\u30c8\u306e\u5171\u6709","Share image":"\u30c6\u30ad\u30b9\u30c8\u306e\u5171\u6709","Share zone image":"\u30c6\u30ad\u30b9\u30c8\u306e\u5171\u6709","Select video camera to share":"\u30c6\u30ad\u30b9\u30c8\u306e\u5171\u6709","Meeting Space":"\u30c6\u30ad\u30b9\u30c8\u306e\u5171\u6709",shareImport:"\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30a4\u30f3\u30dd\u30fc\u30c8 (_i)",shareImportTip:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u3001\u5171\u6709\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002",shareDownload:"\u30d5\u30a1\u30a4\u30eb\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 (_d)",shareDownloadTip:"\u753b\u9762\u5171\u6709\u3068\u30ab\u30e1\u30e9\u4ee5\u5916\u306e\u5168\u5171\u6709\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002",shareIframe:"Web\u30da\u30fc\u30b8 (_f)",shareIframeTip:"\u8868\u793a\u3067\u304d\u308bWeb\u30da\u30fc\u30b8\u306fiframe\u3067\u8868\u793a\u3067\u304d\u308b\u3082\u306e\u306b\u9650\u3089\u308c\u307e\u3059\u3002",shareText:"\u30c6\u30ad\u30b9\u30c8 (_t / \u76f4\u63a5\u30da\u30fc\u30b9\u30c8\u53ef)",sharePaste:"\u30da\u30fc\u30b9\u30c8 (_v)",sharePasteTip:"\u30de\u30c3\u30d7\u4e0a\u3067 Ctrl+V / Cmd+V \u3067\u3082\u8cbc\u4ed8\u3051\u3067\u304d\u307e\u3059\u3002PDF\u3001\u753b\u50cf\u3001YouTube\u3001Google Docs\u3078\u306eURL\u3092\u8a8d\u8b58\u3057\u307e\u3059\u3002",shareImage:"\u753b\u50cf (_g)",shareZoneImage:"\u753b\u50cf (_g / \u76f4\u63a5\u30da\u30fc\u30b9\u30c8\u53ef)",shareImageTip:"\u30de\u30c3\u30d7\u4e0a\u3067 Ctrl+V / Cmd+V \u3067\u8cbc\u4ed8\u3051\u3067\u304d\u307e\u3059\u3002\u753b\u50cf\u306f gyazo.com \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002\u753b\u50cf\u306eURL\u3082\u8cbc\u4ed8\u3051\u3067\u304d\u307e\u3059\u3002",shareGDrive:"Import Files from Google Drive",shareGDriveTip:"Upload any available file from Google Drive",shareWhiteboard:"\u30db\u30ef\u30a4\u30c8\u30dc\u30fc\u30c9 (_w)",shareWhiteboardTip:"wbo.ophir.dev \u306e\u30db\u30ef\u30a4\u30c8\u30dc\u30fc\u30c9\u3092\u7f6e\u304d\u307e\u3059\u3002",deleteMsg:"\u6620\u50cf\u30b9\u30c8\u30ea",ctGenerateAvatar:"\u9632\u97f3\u4f1a\u8b70\u5ba4",ctUploadZone:"\u4e0d\u900f\u660e",shareEditEnd:"\u7de8\u96c6\u7d42\u4e86",shareCamera:"\u30d3\u30c7\u30aa\u30ab\u30e1\u30e9 (_c)",shareScreenBackground:"\u80cc\u666f\u306b\u753b\u9762\u5171\u6709 (_b)",stopScreenBackground:"\u80cc\u666f\u306e\u753b\u9762\u5171\u6709\u3092\u505c\u6b62 (_b)",shareScreenContent:"\u753b\u9762\u5171\u6709 (_s)",shareScreenContentTip:"\u753b\u9762\u66f4\u65b0\u306e\u983b\u5ea6(fps)\u3092\u4e0b\u3052\u308b\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8ca0\u8377\u304c\u6e1b\u308a\u307e\u3059\u3002",stopScreen:"\u753b\u9762\u5171\u6709\u30fb\u30ab\u30e1\u30e9\u3092\u3059\u3079\u3066\u9589\u3058\u308b (_l)",shareMouse:"\u30de\u30a6\u30b9\u30ab\u30fc\u30bd\u30eb (_m)",shareMouseTip:"\u30de\u30a6\u30b9\u30ab\u30fc\u30bd\u30eb\u304c\u4ed6\u306e\u53c2\u52a0\u8005\u306b\u3082\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30a2\u30d0\u30bf\u30fc\u306e\u76ee\u3082\u30de\u30a6\u30b9\u30ab\u30fc\u30bd\u30eb\u3092\u5411\u3044\u3066\u3044\u307e\u3059\u3002",recorderMenuTitle:"\u9332\u753b\u3068\u518d\u751f(_r)",recorderStart:"\u9332\u753b\u958b\u59cb(_r)",recorderStop:"\u9332\u753b\u505c\u6b62(_r)",playerStop:"\u518d\u751f\u505c\u6b62(_p)",playerPlayfile:"\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f(_l)",ttCreateAndshare:"\u4f5c\u6210\u3068\u5171\u6709 (_c)",ttPlayAndRec:"\u9332\u753b\u3068\u518d\u751f (_r)",stopMouse:"\u30de\u30a6\u30b9\u30ab\u30fc\u30bd\u30eb\u306e\u5171\u6709\u505c\u6b62 (_m)",frameRateSetting:"\u30d5\u30ec\u30fc\u30e0\u30ec\u30fc\u30c8",fps:"fps",ttMicMute:"\u30de\u30a4\u30af\u306e\u30df\u30e5\u30fc\u30c8 (_m)",headphoneL1Chrome:"\u30d8\u30c3\u30c9\u30d5\u30a9\u30f3 (\u30b9\u30c6\u30ec\u30aa / \u6ce8\u610f:\u30a8\u30b3\u30ad\u30e3\u30f3\u306a\u3057)",headphoneL1:"\u30d8\u30c3\u30c9\u30d5\u30a9\u30f3 (\u30b9\u30c6\u30ec\u30aa)",headphoneL2:"\u30b9\u30d4\u30fc\u30ab\u30fc (\u30e2\u30ce\u30e9\u30eb)",etConnection:"\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u306a\u3057",emConnection:"\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002Binaural Meet\u306f https \u3092\u4f7f\u3044\u307e\u3059\u3002\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u306e\u554f\u984c\u3067\u306a\u3051\u308c\u3070\u3001\u30b5\u30fc\u30d0\u306e\u554f\u984c\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002",etMicPermission:"\u30de\u30a4\u30af\u5229\u7528\u4e0d\u53ef",emMicPermission:"\u30d6\u30e9\u30a6\u30b6\u304c\u30de\u30a4\u30af\u306e\u5229\u7528\u3092\u8a31\u53ef\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30d6\u30e9\u30a6\u30b6\u306eURL\u306e\u5de6\u306e\u9375\u306e\u30a2\u30a4\u30b3\u30f3\u304b\u3089\u8a31\u53ef\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u3092\u30ea\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002",etNoMic:"\u30de\u30a4\u30af\u304c\u3042\u308a\u307e\u305b\u3093",emNoMic:"Binaural Meet\u306b\u306f\u30de\u30a4\u30af\u304c\u5fc5\u8981\u3067\u3059\u3002\u30d1\u30bd\u30b3\u30f3\u306b\u30de\u30a4\u30af\u304c\u3064\u3044\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002",emClose:"\u9589\u3058\u308b",emNeverShow:"\u3053\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u306f\u8868\u793a\u3057\u306a\u3044",etDataConnection:"\u30c7\u30fc\u30bf\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3067\u304d\u307e\u305b\u3093",etRtcConnection:"\u30e1\u30c7\u30a3\u30a2\u30b5\u30fc\u30d0\u306b\u901a\u4fe1\u304c\u3067\u304d\u307e\u305b\u3093",emDataConnection:"\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002Binaural Meet \u306f https(443\u756a)\u30dd\u30fc\u30c8\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002",emRtcConnection:"\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002Binaural Meet \u306f https(443\u756a)\u30dd\u30fc\u30c8\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002",etRetry:"\u30d6\u30e9\u30a6\u30b6\u306e\u66f4\u65b0\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044",emRetry:"\u4e00\u5ea6\u63a5\u7d9a\u304c\u5207\u308c\u307e\u3057\u305f\u3002\u30d6\u30e9\u30a6\u30b6\u306e\u66f4\u65b0(\u30ea\u30ed\u30fc\u30c9)\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002",imageDropzoneText:"\u753b\u50cf\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u304b\u3001\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044",lsTitle:"\u30a2\u30d0\u30bf\u30fc\u3068\u901a\u77e5\u306e\u8a2d\u5b9a",lsColor:"\u8272",lsColorAvatar:"\u30a2\u30d0\u30bf\u30fc\u8272",lsColorText:"\u6587\u5b57\u8272",lsAutoColor:"\u81ea\u52d5",lsName:"\u304a\u540d\u524d",lsImage:"\u30a2\u30d0\u30bf\u30fc\u306e\u753b\u50cf",lsEmail:"Gravatar\u306e\u753b\u50cf\u3092\u4f7f\u3046\u5834\u5408\u306fEmail\u3092\u5165\u529b",lsImageFile:"\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u5408\u306f\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9",btSave:"\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b",btCancel:" \u3082\u3068\u306b\u623b\u3059 ",lsNotification:"\u901a\u77e5\u306e\u8a2d\u5b9a",lsNotifyCall:"\u547c\u51fa",lsNotifyTouch:"\u63a5\u89e6",lsNotifyNear:"\u63a5\u8fd1",lsNotifyYarn:"\u7cf8\u96fb\u8a71",rsCall:"\u547c\u3073\u51fa\u3059",rsConnectYarnPhone:"\u7cf8\u96fb\u8a71\u3092\u3064\u306a\u3050",rsCutYarnPhone:"\u7cf8\u96fb\u8a71\u3092\u5207\u308b",rsChatTo:"{{name}}\u3060\u3051\u306b\u30c1\u30e3\u30c3\u30c8\u3092\u9001\u308b",ctPin:"\u4f4d\u7f6e/\u30b5\u30a4\u30ba\u3092\u56fa\u5b9a\u3059\u308b",ctUnpin:"\u4f4d\u7f6e/\u30b5\u30a4\u30ba\u3092\u53ef\u5909\u306b\u3059\u308b",ctEditIframe:"\u30da\u30fc\u30b8\u3092\u30d6\u30e9\u30a6\u30ba (\u975e\u540c\u671f)",ctEndEditIframe:"\u30d6\u30e9\u30a6\u30ba\u3092\u7d42\u4e86 (\u540c\u671f\u306a\u3057)",ctEditText:"\u7de8\u96c6\u958b\u59cb (\u8868\u793a\u4f4d\u7f6e\u306f\u975e\u540c\u671f)",ctEndEditText:"\u7de8\u96c6\u7d42\u4e86 (\u8868\u793a\u4f4d\u7f6e\u3092\u540c\u671f)",ctEditWhiteboard:"\u7de8\u96c6\u958b\u59cb (\u8868\u793a\u4f4d\u7f6e\u306f\u975e\u540c\u671f)",ctEndEditWhiteboard:"\u7de8\u96c6\u7d42\u4e86 (\u8868\u793a\u4f4d\u7f6e\u306f\u975e\u540c\u671f)",ctEditGDrive:"\u7de8\u96c6\u958b\u59cb\u30fb\u8868\u793a\u66f4\u65b0 (\u8868\u793a\u4f4d\u7f6e\u306f\u975e\u540c\u671f)",ctEndEditGDrive:"\u7de8\u96c6\u7d42\u4e86 (\u81ea\u52d5\u66f4\u65b0\u306a\u3057)",ctEndEditYoutube:"\u518d\u751f\u4f4d\u7f6e\u3092\u540c\u671f",ctEditYoutube:"\u540c\u671f\u3057\u306a\u3044",ctMoveTop:"\u4e00\u756a\u4e0a\u306b\u79fb\u52d5",ctMoveBottom:"\u4e00\u756a\u4e0b\u306b\u79fb\u52d5",ctWallpaper:"\u58c1\u7d19\u306b\u3059\u308b",ctUnWallpaper:"\u58c1\u7d19\u304b\u3089\u306f\u305a\u3059",ctCopyToClipboard:"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc",ctMaximize:"\u6700\u5927\u5316\u3059\u308b\u3088\u3046\u306b\u62e1\u5927\u3059\u308b",ctUnMaximize:"\u6700\u5927\u5316\u3068\u62e1\u5927\u3092\u623b\u3059",ctFocus:"\u4e2d\u592e\u306b\u8868\u793a",ctDelete:"\u524a\u9664\u3059\u308b",ctClose:"\u9589\u3058\u308b",ctName:"\u30bf\u30a4\u30c8\u30eb",ctFrameVisible:"\u30d5\u30ec\u30fc\u30e0\u3042\u308a",ctFrameInvisible:"\u30d5\u30ec\u30fc\u30e0\u306a\u3057",ctOpenAudioZone:"\u4f1a\u8b70\u5834\u6240",ctClosedAudioZone:"\u9632\u97f3\u4f1a\u8b70\u5ba4",ctNotAudioZone:"\u305f\u3060\u306e\u753b\u50cf",ctOpaque:"\u4e0d\u900f\u660e",ctTransparent:"\u900f\u660e",upload:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9",Save:"\u4fdd\u5b58",Clear:"\u30af\u30ea\u30a2",Cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",broadcastMyVoice:"\u58f0\u3092\u5168\u54e1\u306b\u5c4a\u3051\u308b",showTrackedFace:"\u9854\u306e\u7279\u5fb4\u70b9\u306e\u307f\u8868\u793a",trackWholeBody:"\u5168\u8eab\u3092\u30c8\u30e9\u30c3\u30af",soundLocalizationBasedOn:"\u97f3\u50cf\u5b9a\u4f4d\u306e\u5411\u304d\u306e\u57fa\u6e96",stereoNote:"\u672c\u5f53\u306b\u30d8\u30c3\u30c9\u30d5\u30a9\u30f3\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304b\uff1f",stereoNoteDesc:"\u30b9\u30d4\u30fc\u30ab\u30fc\u3067\u4f7f\u7528\u3059\u308b\u3068\u76f8\u624b\u306e\u58f0\u3092\u30a8\u30b3\u30fc\u30d0\u30c3\u30af\u3057\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u76f8\u624b\u304c\u3068\u3066\u3082\u8a71\u3057\u306b\u304f\u304f\u306a\u308a\u307e\u3059\u3002",stereoConfirmed:"\u78ba\u8a8d\u3057\u305f\u306e\u3067\u3001\u30d8\u30c3\u30c9\u30d5\u30a9\u30f3\u30e2\u30fc\u30c9\u306b\u5909\u66f4",stereoCancel:"\u30b9\u30d4\u30fc\u30ab\u30e2\u30fc\u30c9\u306e\u307e\u307e\u306b\u3059\u308b",slAvatar:"\u30a2\u30d0\u30bf\u30fc\u306e\u5411\u304d",slUser:"\u30e6\u30fc\u30b6\u30fc\u306e\u5411\u304d(\u4e0a\u304c\u524d)",usage:"\u4f7f\u3044\u65b9",cmJoined:"{{name}}\u304c\u53c2\u52a0\u3002",cmLeft:"{{name}}\u304c\u9000\u51fa\u3002",cmNameChanged:"{{old}} \u304c {{new}} \u306b\u540d\u524d\u3092\u5909\u66f4\u3002",cmCallBy:"{{name}}\u304c\u3042\u306a\u305f\u3092\u547c\u3073\u307e\u3057\u305f\u3002",cmCallTo:"\u3042\u306a\u305f\u304c{{name}}\u3092\u547c\u3073\u307e\u3057\u305f\u3002",cmToAll:"\u5168\u54e1\u3078",cmToName:"{{name}}\u3078",cmSend:"\u9001\u4fe1 (CTRL+Enter)",cmPrivateFrom:"{{name}}\u304b\u3089\u500b\u4eba\u5b9b",cmPrivateTo:"\u81ea\u5206\u304b\u3089{{name}}\u5b9b",noCalled:"{{name}}\u304c\u547c\u3073\u307e\u3057\u305f\u3002",noTouched:"{{name}}\u304c\u89e6\u308c\u307e\u3057\u305f\u3002",noNear:"{{name}}\u304c\u8fd1\u3065\u304d\u307e\u3057\u305f\u3002",noYarn:"{{name}}\u304c\u7cf8\u96fb\u8a71\u3092\u3064\u306a\u304e\u307e\u3057\u305f\u3002",afkTitle:"\u96e2\u5e2d\u4e2d\u30e2\u30fc\u30c9 (L / Esc)",afkMessage:"\u30ad\u30fc\u304b\u30de\u30a6\u30b9\u30af\u30ea\u30c3\u30af\u3067\u623b\u308a\u307e\u3059\u3002",gdFailed:"Google Drive\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\r\n\u30d5\u30a1\u30a4\u30eb\u3092\u5171\u6709\u8a2d\u5b9a\u3092\u5909\u3048\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u5168\u54e1\u304c\u95b2\u89a7\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",videoLimit:"\u6620\u50cf\u30b9\u30c8\u30ea\u30fc\u30e0\u6570\u306e\u4e0a\u9650",audioLimit:"\u97f3\u58f0\u30b9\u30c8\u30ea\u30fc\u30e0\u6570\u306e\u4e0a\u9650",connectionStatus:"\u901a\u4fe1\u72b6\u614b",deleteImageMsg:"\u6620\u50cf\u30b9\u30c8\u30ea\u30fc\u30e0\u6570\u306e\u4e0a\u9650?",deleteZoneMsg:"\u6620\u50cf\u30b9\u30c8\u30ea\u30fc\u30e0\u6570\u306e\u4e0a\u9650?",deleteTextMsg:"\u6620\u50cf\u30b9\u30c8\u30ea\u30fc\u30e0\u6570\u306e\u4e0a\u9650?",deleteYes:"\u901a\u4fe1\u72b6\u614b",deleteNo:"\u901a\u4fe1\u72b6\u614b",copyClipboard:"\u901a\u4fe1\u72b6\u614b",deleteAlert:"\u901a\u4fe1\u72b6\u614b",ctProximity:"\u4f4d\u7f6e/\u30b5\u30a4\u30ba\u3092\u56fa\u5b9a\u3059\u308b",ctUnProximity:"\u4f4d\u7f6e/\u30b5\u30a4\u30ba\u3092\u53ef\u5909\u306b\u3059\u308b",ctScaleRotate:"\u4f4d\u7f6e/\u30b5\u30a4\u30ba\u3092\u53ef\u5909\u306b\u3059\u308b",ctUnScaleRotate:"\u4f4d\u7f6e/\u30b5\u30a4\u30ba\u3092\u53ef\u5909\u306b\u3059\u308b",ctStopWatchOn:"\u4f4d\u7f6e/\u30b5\u30a4\u30ba\u3092\u53ef\u5909\u306b\u3059\u308b",ctStopWatchOff:"\u4f4d\u7f6e/\u30b5\u30a4\u30ba\u3092\u53ef\u5909\u306b\u3059\u308b",ctKick:"\u4e2d\u592e\u306b\u8868\u793a",settingPreference:"\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30a4\u30f3\u30dd\u30fc\u30c8 (_i)",meetingSpace:"\u30d5\u30a1\u30a4\u30eb\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 (_d)",meetingDesc:"\u30d5\u30a1\u30a4\u30eb\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 (_d)",broadcastMyVideo:"\u58f0\u3092\u5168\u54e1\u306b\u5c4a\u3051\u308b",broadcastMySpeakVideo:"\u58f0\u3092\u5168\u54e1\u306b\u5c4a\u3051\u308b",stereoswitch:"\u58f0\u3092\u5168\u54e1\u306b\u5c4a\u3051\u308b"}}},ie=Object.keys(ne),oe={resources:ne,supportedLngs:ie,fallbackLng:ie[0],interpolation:{escapeValue:!1}};var ae=60,re={name:"",email:"",avatarSrc:"",color:[],textColor:[],randomAvatar:[],faceTrack:!1,notifyCall:!0,notifyTouch:!1,notifyNear:!1,notifyYarn:!1},se={name:"",avatarSrc:"",color:[],textColor:[],randomAvatar:[]},ce={located:!0,onStage:!1,awayFromKeyboard:!1},le={height:0,center:[0,0]};var ue,de,pe,he,ve,me,fe=n(5),be=n(44),ge=n(25),je=n(11),Ae=n(12),Oe=n(282),ye=n.n(Oe),xe=(ue=Object(K.a)((function e(){Object(X.a)(this,e),Object(J.a)(this,"audioInputDevice",de,this),Object(J.a)(this,"videoInputDevice",pe,this),Object(J.a)(this,"audioOutputDevice",he,this),Object(fe.g)(this)})),de=Object(V.a)(ue.prototype,"audioInputDevice",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),pe=Object(V.a)(ue.prototype,"videoInputDevice",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),he=Object(V.a)(ue.prototype,"audioOutputDevice",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ue),Ce=5e3,we=[0,0],Se=n(37),ke=n.n(Se);var Te,Ie,Ee,Pe,Me,Re,De,Be,Ne,ze,Fe,Le,Ue,Qe,Ge,Ye,He,We,Je,Ve,Ke,Xe,Ze,qe,_e,$e,et,tt,nt,it,ot,at,rt,st,ct,lt,ut,dt,pt,ht,vt,mt,ft,bt,gt,jt,At,Ot,yt,xt,Ct,wt,St,kt,Tt,It,Et,Pt,Mt,Rt,Dt,Bt,Nt,zt,Ft,Lt,Ut,Qt,Gt,Yt,Ht,Wt,Jt,Vt,Kt,Xt,Zt,qt,_t,$t,en,tn,nn,on,an,rn,sn,cn={pose:{position:[we[0],we[1]],orientation:0}},ln=(ve=function(){function e(){Object(X.a)(this,e),Object(J.a)(this,"pose",me,this),this.pose=ke.a.cloneDeep(cn.pose),Object(fe.g)(this)}return Object(K.a)(e,null,[{key:"fromPlain",value:function(t){(new e).pose=function(e){return Object(fe.h)(e,void 0,{deep:!1})}(ke.a.cloneDeep(t.pose))}}]),e}(),me=Object(V.a)(ve.prototype,"pose",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve),un=(Te=fe.h.ref,Ie=fe.h.ref,Ee=function(){function e(){Object(X.a)(this,e),Object(J.a)(this,"audio",Pe,this),Object(J.a)(this,"avatar",Me,this),Object(J.a)(this,"avatarOk",Re,this),Object(fe.g)(this)}return Object(K.a)(e,[{key:"audioStream",get:function(){if(this.audio){var e=new MediaStream;return this.audio&&e.addTrack(this.audio),e}}},{key:"avatarStream",get:function(){if(this.avatar){var e=new MediaStream;return this.avatar&&e.addTrack(this.avatar),e}}},{key:"onMuteChanged",value:function(e,t){e===this.avatar&&(this.avatarOk=!t)}}]),e}(),Pe=Object(V.a)(Ee.prototype,"audio",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Me=Object(V.a)(Ee.prototype,"avatar",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Re=Object(V.a)(Ee.prototype,"avatarOk",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!this.avatar||!this.avatar.muted}}),Object(V.a)(Ee.prototype,"audioStream",[fe.d],Object.getOwnPropertyDescriptor(Ee.prototype,"audioStream"),Ee.prototype),Object(V.a)(Ee.prototype,"avatarStream",[fe.d],Object.getOwnPropertyDescriptor(Ee.prototype,"avatarStream"),Ee.prototype),Object(V.a)(Ee.prototype,"onMuteChanged",[fe.b],Object.getOwnPropertyDescriptor(Ee.prototype,"onMuteChanged"),Ee.prototype),Ee),dn=(De=Object(K.a)((function e(){Object(X.a)(this,e),Object(J.a)(this,"micMuted",Be,this),Object(J.a)(this,"speakerMuted",Ne,this),Object(J.a)(this,"headphone",ze,this),Object(J.a)(this,"emoticon",Fe,this),Object(J.a)(this,"pingIcon",Le,this),Object(J.a)(this,"pingX",Ue,this),Object(J.a)(this,"pingY",Qe,this),Object(J.a)(this,"remoteID",Ge,this),Object(J.a)(this,"remoteX",Ye,this),Object(J.a)(this,"remoteY",He,this),Object(fe.g)(this)})),Be=Object(V.a)(De.prototype,"micMuted",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ne=Object(V.a)(De.prototype,"speakerMuted",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ze=Object(V.a)(De.prototype,"headphone",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fe=Object(V.a)(De.prototype,"emoticon",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Le=Object(V.a)(De.prototype,"pingIcon",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ue=Object(V.a)(De.prototype,"pingX",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qe=Object(V.a)(De.prototype,"pingY",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ge=Object(V.a)(De.prototype,"remoteID",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ye=Object(V.a)(De.prototype,"remoteX",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),He=Object(V.a)(De.prototype,"remoteY",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),De),pn=(We=fe.h.shallow,Je=fe.h.shallow,Ve=fe.h.shallow,Ke=fe.h.shallow,Xe=fe.h.ref,Ze=fe.b.bound,qe=function(e){Object(je.a)(n,e);var t=Object(Ae.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(X.a)(this,n),e=t.call(this),Object(J.a)(e,"id",_e,Object(ge.a)(e)),Object(J.a)(e,"zIndex",$e,Object(ge.a)(e)),Object(J.a)(e,"physics",et,Object(ge.a)(e)),Object(J.a)(e,"viewpoint",tt,Object(ge.a)(e)),Object(J.a)(e,"mouse",nt,Object(ge.a)(e)),Object(J.a)(e,"information",it,Object(ge.a)(e)),Object(J.a)(e,"muteAudio",ot,Object(ge.a)(e)),Object(J.a)(e,"muteSpeaker",at,Object(ge.a)(e)),Object(J.a)(e,"muteVideo",rt,Object(ge.a)(e)),Object(J.a)(e,"audioLevel",st,Object(ge.a)(e)),Object(J.a)(e,"recording",ct,Object(ge.a)(e)),Object(J.a)(e,"quality",lt,Object(ge.a)(e)),Object(J.a)(e,"vrmRigs",ut,Object(ge.a)(e)),e.information=i?re:se,Object(fe.g)(Object(ge.a)(e)),e}return Object(K.a)(n,[{key:"setAudioLevel",value:function(e){this.audioLevel=e}},{key:"showAudio",get:function(){return!this.muteAudio}},{key:"showVideo",get:function(){return!this.muteVideo}},{key:"getColor",value:function(){var e=this.information.color;e.length||(e=this.information.name.length?L(this.information.name):[208,208,224]);var t=this.information.textColor;t.length||(t=U(e));var n=G(e);return[Y(e),Y(t),Y(n)]}},{key:"getColorRGB",value:function(){return this.information.color.length?this.information.color:L(this.information.name)}},{key:"getTextColorRGB",value:function(){var e=this.information.textColor;if(!e.length){var t=this.information.color;t.length||(t=L(this.information.name)),e=U(t)}return e}},{key:"setPhysics",value:function(e){Object.assign(this.physics,e)}}]),n}(ln),_e=Object(V.a)(qe.prototype,"id",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$e=Object(V.a)(qe.prototype,"zIndex",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),et=Object(V.a)(qe.prototype,"physics",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ce}}),tt=Object(V.a)(qe.prototype,"viewpoint",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return le}}),nt=Object(V.a)(qe.prototype,"mouse",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:[0,0],show:!1}}}),it=Object(V.a)(qe.prototype,"information",[Ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=Object(V.a)(qe.prototype,"muteAudio",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at=Object(V.a)(qe.prototype,"muteSpeaker",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rt=Object(V.a)(qe.prototype,"muteVideo",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),st=Object(V.a)(qe.prototype,"audioLevel",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(V.a)(qe.prototype,"setAudioLevel",[fe.b],Object.getOwnPropertyDescriptor(qe.prototype,"setAudioLevel"),qe.prototype),ct=Object(V.a)(qe.prototype,"recording",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(V.a)(qe.prototype,"showAudio",[fe.d],Object.getOwnPropertyDescriptor(qe.prototype,"showAudio"),qe.prototype),Object(V.a)(qe.prototype,"showVideo",[fe.d],Object.getOwnPropertyDescriptor(qe.prototype,"showVideo"),qe.prototype),lt=Object(V.a)(qe.prototype,"quality",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ut=Object(V.a)(qe.prototype,"vrmRigs",[Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(V.a)(qe.prototype,"setPhysics",[Ze],Object.getOwnPropertyDescriptor(qe.prototype,"setPhysics"),qe.prototype),qe),hn=["email"],vn=(dt=fe.h.shallow,pt=fe.h.ref,ht=fe.h.ref,vt=fe.b.bound,mt=fe.b.bound,ft=fe.b.bound,bt=function(e){Object(je.a)(n,e);var t=Object(Ae.a)(n);function n(){var e;return Object(X.a)(this,n),(e=t.call(this,!0)).devicePreference=new xe,Object(J.a)(e,"tracks",gt,Object(ge.a)(e)),Object(J.a)(e,"useStereoAudio",jt,Object(ge.a)(e)),Object(J.a)(e,"emoticon",At,Object(ge.a)(e)),Object(J.a)(e,"pingIcon",Ot,Object(ge.a)(e)),Object(J.a)(e,"pingX",yt,Object(ge.a)(e)),Object(J.a)(e,"pingY",xt,Object(ge.a)(e)),Object(J.a)(e,"remoteID",Ct,Object(ge.a)(e)),Object(J.a)(e,"remoteX",wt,Object(ge.a)(e)),Object(J.a)(e,"remoteY",St,Object(ge.a)(e)),Object(J.a)(e,"headphoneConfirmed",kt,Object(ge.a)(e)),Object(J.a)(e,"thirdPersonView",Tt,Object(ge.a)(e)),Object(J.a)(e,"soundLocalizationBase",It,Object(ge.a)(e)),Object(J.a)(e,"uploaderPreference",Et,Object(ge.a)(e)),Object(J.a)(e,"zone",Pt,Object(ge.a)(e)),Object(J.a)(e,"remoteVideoLimit",Mt,Object(ge.a)(e)),Object(J.a)(e,"remoteAudioLimit",Rt,Object(ge.a)(e)),Object(J.a)(e,"audioInputDevice",Dt,Object(ge.a)(e)),Object(J.a)(e,"videoInputDevice",Bt,Object(ge.a)(e)),Object(J.a)(e,"audioOutputDevice",Nt,Object(ge.a)(e)),e.information=e.information,Object(J.a)(e,"informationToSend",zt,Object(ge.a)(e)),e.informationToSend=void 0,Object(fe.g)(Object(ge.a)(e)),e.loadInformationFromStorage(),o.name&&(e.information.name=o.name),e.useStereoAudio=null!==o.headphone,e.muteAudio=null!==o.muteMic,e.muteVideo=null===o.cameraOn,e.emoticon="",e.pingIcon=!1,e.pingX=0,e.pingY=0,e.remoteID="",e.remoteX=0,e.remoteY=0,e.loadMediaSettingsFromStorage(),e.loadPhysicsFromStorage(),Object(fe.c)((function(){var t="https://www.gravatar.com/avatar/",n="https://binaural.me/public_packages/uploader/vrm",i=e.information.avatarSrc;if((!i||i.includes(t,0)||i.includes(n,0))&&e.information.email){var o=e.information.email.trim();if(o.includes(n)&&".vrm"===o.slice(-4))i=o;else{var a=ye()(e.information.email.trim().toLowerCase());i="".concat(t).concat(a,"?d=404")}}i&&(".vrm"===i.slice(-4)?e.information.avatarSrc=i:function(e){var t=new Image;return t.src=e,new Promise((function(n,i){t.onload=function(){n(e)},t.onerror=function(){i("")}}))}(i).then((function(t){e.information.avatarSrc=t})).catch((function(){e.information.avatarSrc=""})))})),e}return Object(K.a)(n,[{key:"setThirdPersonView",value:function(e){this.thirdPersonView=e}},{key:"trackStates",get:function(){return{micMuted:this.muteAudio,speakerMuted:this.muteSpeaker,headphone:this.useStereoAudio,emoticon:this.emoticon,pingIcon:this.pingIcon,pingX:this.pingX,pingY:this.pingY,remoteID:this.remoteID,remoteX:this.remoteX,remoteY:this.remoteY}}},{key:"sendInformation",value:function(){var e=this.information,t=(e.email,Object(be.a)(e,hn));this.informationToSend=t}},{key:"saveInformationToStorage",value:function(e){var t=sessionStorage;e&&(t=localStorage),t.setItem("localParticipantInformation",JSON.stringify(this.information))}},{key:"loadInformationFromStorage",value:function(){var e=localStorage;sessionStorage.getItem("localParticipantInformation")&&(e=sessionStorage);var t=e.getItem("localParticipantInformation");t&&Object.assign(this.information,JSON.parse(t))}},{key:"updateViewpointCenter",value:function(e){var t=e.toWindow(this.pose.position);this.viewpoint.center=A(y(.5,e.screenSize),t)}},{key:"saveMediaSettingsToStorage",value:function(){var e={stream:{muteVideo:this.muteVideo,muteAudio:this.muteAudio,muteSpeaker:this.muteSpeaker},device:this.devicePreference,headphone:this.useStereoAudio,soundLocalizationBase:this.soundLocalizationBase,uploadPreference:this.uploaderPreference};localStorage.setItem("localParticipantStreamControl",JSON.stringify(e)),sessionStorage.setItem("localParticipantStreamControl",JSON.stringify(e))}},{key:"loadMediaSettingsFromStorage",value:function(e){var t=localStorage.getItem("localParticipantStreamControl"),n=sessionStorage.getItem("localParticipantStreamControl"),i=void 0,o=void 0;t&&(i=JSON.parse(t)),n&&(o=JSON.parse(n));var a=i;a&&(a.stream.muteVideo=!0,o&&(a.stream.muteVideo=o.stream.muteVideo),e?Object.assign(e,a):(Object.assign(this,a.stream),Object.assign(this.devicePreference,a.device),this.useStereoAudio=a.headphone,this.soundLocalizationBase=a.soundLocalizationBase))}},{key:"savePhysicsToStorage",value:function(e){var t=sessionStorage;e&&(t=localStorage);var n={pose:this.pose,physics:this.physics};t.setItem("localParticipantPhysics",JSON.stringify(n))}},{key:"loadPhysicsFromStorage",value:function(){var e=localStorage;sessionStorage.getItem("localParticipantPhysics")&&(e=sessionStorage);var t=e.getItem("localParticipantPhysics");if(t){var n=JSON.parse(t);Object.assign(this.physics,n.physics),Object.assign(this.pose,n.pose)}}}]),n}(pn),gt=Object(V.a)(bt.prototype,"tracks",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new un}}),jt=Object(V.a)(bt.prototype,"useStereoAudio",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),At=Object(V.a)(bt.prototype,"emoticon",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ot=Object(V.a)(bt.prototype,"pingIcon",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yt=Object(V.a)(bt.prototype,"pingX",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xt=Object(V.a)(bt.prototype,"pingY",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ct=Object(V.a)(bt.prototype,"remoteID",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wt=Object(V.a)(bt.prototype,"remoteX",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),St=Object(V.a)(bt.prototype,"remoteY",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),kt=Object(V.a)(bt.prototype,"headphoneConfirmed",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tt=Object(V.a)(bt.prototype,"thirdPersonView",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return config.thirdPersonView}}),It=Object(V.a)(bt.prototype,"soundLocalizationBase",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return config.soundLocalizationBase?config.soundLocalizationBase:"user"}}),Et=Object(V.a)(bt.prototype,"uploaderPreference",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return config.uploaderPreference?config.uploaderPreference:"gyazo"}}),Pt=Object(V.a)(bt.prototype,"zone",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Mt=Object(V.a)(bt.prototype,"remoteVideoLimit",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return config.remoteVideoLimit||-1}}),Rt=Object(V.a)(bt.prototype,"remoteAudioLimit",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return config.remoteAudioLimit||-1}}),Dt=Object(V.a)(bt.prototype,"audioInputDevice",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Bt=Object(V.a)(bt.prototype,"videoInputDevice",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Nt=Object(V.a)(bt.prototype,"audioOutputDevice",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),zt=Object(V.a)(bt.prototype,"informationToSend",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(V.a)(bt.prototype,"setThirdPersonView",[fe.b],Object.getOwnPropertyDescriptor(bt.prototype,"setThirdPersonView"),bt.prototype),Object(V.a)(bt.prototype,"trackStates",[fe.d],Object.getOwnPropertyDescriptor(bt.prototype,"trackStates"),bt.prototype),Object(V.a)(bt.prototype,"sendInformation",[fe.b],Object.getOwnPropertyDescriptor(bt.prototype,"sendInformation"),bt.prototype),Object(V.a)(bt.prototype,"loadInformationFromStorage",[vt],Object.getOwnPropertyDescriptor(bt.prototype,"loadInformationFromStorage"),bt.prototype),Object(V.a)(bt.prototype,"updateViewpointCenter",[fe.b],Object.getOwnPropertyDescriptor(bt.prototype,"updateViewpointCenter"),bt.prototype),Object(V.a)(bt.prototype,"loadMediaSettingsFromStorage",[mt],Object.getOwnPropertyDescriptor(bt.prototype,"loadMediaSettingsFromStorage"),bt.prototype),Object(V.a)(bt.prototype,"loadPhysicsFromStorage",[ft],Object.getOwnPropertyDescriptor(bt.prototype,"loadPhysicsFromStorage"),bt.prototype),bt),mn=(Ft=fe.h.ref,Lt=function(e){Object(je.a)(n,e);var t=Object(Ae.a)(n);function n(e){var i;return Object(X.a)(this,n),(i=t.call(this)).information=i.information,i.informationReceived=!1,Object(J.a)(i,"trackStates",Ut,Object(ge.a)(i)),Object(J.a)(i,"called",Qt,Object(ge.a)(i)),Object(J.a)(i,"inLocalsZone",Gt,Object(ge.a)(i)),Object(J.a)(i,"closedZone",Yt,Object(ge.a)(i)),Object(J.a)(i,"videoBlob",Ht,Object(ge.a)(i)),Object(J.a)(i,"audioBlob",Wt,Object(ge.a)(i)),i.lastDistance=0,Object(fe.g)(Object(ge.a)(i)),i.id=e,i}return Object(K.a)(n,[{key:"call",value:function(){this.called=!0}}]),n}(pn),Ut=Object(V.a)(Lt.prototype,"trackStates",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dn}}),Qt=Object(V.a)(Lt.prototype,"called",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gt=Object(V.a)(Lt.prototype,"inLocalsZone",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yt=Object(V.a)(Lt.prototype,"closedZone",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Ht=Object(V.a)(Lt.prototype,"videoBlob",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=Object(V.a)(Lt.prototype,"audioBlob",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(V.a)(Lt.prototype,"call",[fe.b],Object.getOwnPropertyDescriptor(Lt.prototype,"call"),Lt.prototype),Lt),fn=(Jt=fe.h.shallow,Vt=fe.h.ref,Kt=function(e){Object(je.a)(n,e);var t=Object(Ae.a)(n);function n(e){var i;return Object(X.a)(this,n),(i=t.call(this)).information=i.information,i.informationReceived=!1,Object(J.a)(i,"tracks",Xt,Object(ge.a)(i)),Object(J.a)(i,"trackStates",Zt,Object(ge.a)(i)),Object(J.a)(i,"called",qt,Object(ge.a)(i)),Object(J.a)(i,"inLocalsZone",_t,Object(ge.a)(i)),Object(J.a)(i,"closedZone",$t,Object(ge.a)(i)),i.lastDistance=0,Object(fe.g)(Object(ge.a)(i)),i.id=e,i}return Object(K.a)(n,[{key:"call",value:function(){this.called=!0}}]),n}(pn),Xt=Object(V.a)(Kt.prototype,"tracks",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new un}}),Zt=Object(V.a)(Kt.prototype,"trackStates",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new dn}}),qt=Object(V.a)(Kt.prototype,"called",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_t=Object(V.a)(Kt.prototype,"inLocalsZone",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$t=Object(V.a)(Kt.prototype,"closedZone",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(V.a)(Kt.prototype,"call",[fe.b],Object.getOwnPropertyDescriptor(Kt.prototype,"call"),Kt.prototype),Kt),bn=new(en=fe.h.shallow,tn=fe.h.shallow,nn=function(){function e(){Object(X.a)(this,e),Object(J.a)(this,"remote",on,this),this.local_=fe.h.box(new vn),Object(J.a)(this,"playback",an,this),Object(J.a)(this,"yarnPhones",rn,this),Object(J.a)(this,"yarnPhoneUpdated",sn,this),Object(fe.g)(this)}return Object(K.a)(e,[{key:"count",get:function(){return this.remote.size}},{key:"local",get:function(){return this.local_.get()}},{key:"localId",get:function(){return this.local.id}},{key:"setLocalId",value:function(e){this.local.id=e}},{key:"join",value:function(e){var t=new fn(e);return t.physics.located=!1,this.remote.set(e,t),t}},{key:"getOrCreateRemote",value:function(e){var t=this.remote.get(e);return t||(t=this.join(e)),t}},{key:"getRemote",value:function(e){return this.remote.get(e)}},{key:"leave",value:function(e){this.remote.delete(e)}},{key:"leaveAll",value:function(){this.remote.clear(),this.setLocalId("")}},{key:"find",value:function(e){return e===this.localId?this.local:this.remote.get(e)}},{key:"getOrCreatePlayback",value:function(e){var t=this.playback.get(e);return t||(t=new mn(e),this.playback.set(e,t)),t}},{key:"removePlayback",value:function(e){return this.playback.delete(e)}},{key:"addRemoteTrack",value:function(e,t){var n=bn.getOrCreateRemote(e);"audio"===t.kind?n.tracks.audio=t:n.tracks.avatar=t}},{key:"removeRemoteTrack",value:function(e,t){var n=this.remote.get(e);return!!n&&("audio"===t?n.tracks.audio=void 0:n.tracks.avatar=void 0,!0)}},{key:"isLocal",value:function(e){return e===this.localId}},{key:"audibleArea",value:function(){return[this.local.pose.position[0],this.local.pose.position[1],420]}}]),e}(),on=Object(V.a)(nn.prototype,"remote",[en],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),an=Object(V.a)(nn.prototype,"playback",[tn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),rn=Object(V.a)(nn.prototype,"yarnPhones",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),sn=Object(V.a)(nn.prototype,"yarnPhoneUpdated",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(V.a)(nn.prototype,"count",[fe.d],Object.getOwnPropertyDescriptor(nn.prototype,"count"),nn.prototype),Object(V.a)(nn.prototype,"local",[fe.d],Object.getOwnPropertyDescriptor(nn.prototype,"local"),nn.prototype),Object(V.a)(nn.prototype,"localId",[fe.d],Object.getOwnPropertyDescriptor(nn.prototype,"localId"),nn.prototype),Object(V.a)(nn.prototype,"setLocalId",[fe.b],Object.getOwnPropertyDescriptor(nn.prototype,"setLocalId"),nn.prototype),Object(V.a)(nn.prototype,"join",[fe.b],Object.getOwnPropertyDescriptor(nn.prototype,"join"),nn.prototype),Object(V.a)(nn.prototype,"getOrCreateRemote",[fe.b],Object.getOwnPropertyDescriptor(nn.prototype,"getOrCreateRemote"),nn.prototype),Object(V.a)(nn.prototype,"leave",[fe.b],Object.getOwnPropertyDescriptor(nn.prototype,"leave"),nn.prototype),Object(V.a)(nn.prototype,"leaveAll",[fe.b],Object.getOwnPropertyDescriptor(nn.prototype,"leaveAll"),nn.prototype),nn);d.participants=bn;var gn,jn,An,On=bn,yn=Object(K.a)((function e(t,n,i,o,a,r,s){Object(X.a)(this,e),this.type="text",this.text=void 0,this.pid=void 0,this.name=void 0,this.avatarUrl=void 0,this.timestamp=void 0,this.colors=void 0,this.text=t,this.pid=n,this.name=i,this.avatarUrl=o,this.colors=a,this.timestamp=r,this.type=s})),xn=new(gn=function(){function e(){Object(X.a)(this,e),Object(J.a)(this,"messages",jn,this),Object(J.a)(this,"sendTo",An,this),Object(fe.g)(this)}return Object(K.a)(e,[{key:"limitMessages",value:function(){xn.messages.length>1e3&&xn.messages.splice(0,xn.messages.length-1e3)}},{key:"addMessage",value:function(e){this.messages.push(e),this.limitMessages()}},{key:"participantNameChanged",value:function(e,t){var n=On.find(e);if(n){var i=new yn("",n.id,n.information.name,n.information.avatarSrc,n.getColor(),Date.now(),"log");i.text=ee("cmNameChanged",{old:t,new:i.name}),this.addMessage(i)}}},{key:"participantJoined",value:function(e){var t=On.find(e);if(t){var n=new yn("",t.id,t.information.name,t.information.avatarSrc,t.getColor(),Date.now(),"log");n.text=ee("cmJoined",{name:n.name}),this.addMessage(n)}}},{key:"participantLeft",value:function(e){var t=On.find(e);if(t){var n=new yn("",t.id,t.information.name,t.information.avatarSrc,t.getColor(),Date.now(),"log");n.text=ee("cmLeft",{name:n.name}),this.addMessage(n)}}},{key:"calledBy",value:function(e){var t=new yn("",e.id,e.information.name,e.information.avatarSrc,e.getColor(),Date.now(),"called");t.text=ee("cmCallBy",{name:t.name}),this.addMessage(t)}},{key:"callTo",value:function(e){var t=new yn("",e.id,e.information.name,e.information.avatarSrc,e.getColor(),Date.now(),"callTo");t.text=ee("cmCallTo",{name:t.name}),this.addMessage(t)}}]),e}(),jn=Object(V.a)(gn.prototype,"messages",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),An=Object(V.a)(gn.prototype,"sendTo",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(V.a)(gn.prototype,"limitMessages",[fe.b],Object.getOwnPropertyDescriptor(gn.prototype,"limitMessages"),gn.prototype),Object(V.a)(gn.prototype,"addMessage",[fe.b],Object.getOwnPropertyDescriptor(gn.prototype,"addMessage"),gn.prototype),gn),Cn=xn,wn=n(10),Sn=Object(wn.a)(Object(wn.a)({},{PARTICIPANT_AFK:"p_afk",PARTICIPANT_TRACKSTATES:"p_trackSt",PARTICIPANT_VIEWPOINT:"p_viewpoint"}),{},{PARTICIPANT_INFO:"p_info",PARTICIPANT_VRMRIG:"p_vrm"}),kn={PARTICIPANT_TRACKLIMITS:"m_track_limits",YARN_PHONE:"YARN_PHONE",CHAT_MESSAGE:"m_chat",CALL_REMOTE:"call_remote",MUTE_VIDEO:"m_mute_video",MUTE_AUDIO:"m_mute_audio",AUDIO_LEVEL:"m_audio_level",RELOAD_BROWSER:"m_reload",KICK:"m_kick"},Tn=(new Set(Object.values(kn)),{CONTENT_UPDATE_REQUEST:"c_update",CONTENT_INFO_UPDATE:"c_info_update"}),In=new Set(Object.values(Tn)),En={CONTENT_REMOVE_REQUEST:"c_remove",PARTICIPANT_OUT:"p_out",MOUSE_OUT:"m_out",CONTENT_OUT:"c_out"},Pn=new Set(Object.values(En)),Mn={CONTENT_UPDATE_REQUEST_BY_ID:"c_update_by_id",REQUEST_ALL:"req_all",REQUEST_RANGE:"req_range",REQUEST_PARTICIPANT_STATES:"req_p_state"},Rn=Object(wn.a)(Object(wn.a)(Object(wn.a)(Object(wn.a)(Object(wn.a)(Object(wn.a)(Object(wn.a)({},Tn),En),kn),Sn),{PARTICIPANT_POSE:"mp",PARTICIPANT_MOUSE:"mm",PARTICIPANT_ON_STAGE:"p_onStage"}),Mn),{},{PARTICIPANT_LEFT:"m_participant_left",ROOM_PROP:"room_prop",REQUEST_TO:"req_to",FRAGMENT_HEAD:"frag_head",FRAGMENT_CONTENT:"frag_cont"});function Dn(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;delete i.playback,delete i.zIndex,delete i.zones}}catch(o){n.e(o)}finally{n.f()}return e}function Bn(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.overlapZones=[],i.surroundingZones=[]}}catch(o){n.e(o)}finally{n.f()}return e}var Nn=100,zn=31536e5;function Fn(e){return"text"===e.type||"pdf"===e.type}function Ln(e){return e&&("text"===e.type||"iframe"===e.type||"pdf"===e.type||"whiteboard"===e.type||"gdrive"===e.type||"youtube"===e.type)}function Un(e){return e&&e.zorder<=zn}var Qn=1048576;function Gn(e,t){return e.time-t.time}var Yn=n(116),Hn=config.corsProxyUrl||"https://binaural.me/cors_proxy/";function Wn(e){var t=e;return["http://","https://"].forEach((function(n){e.substring(0,n.length)===n&&(t=e.substring(n.length))})),t="".concat(Hn).concat(t)}var Jn=n(69),Vn=n(22),Kn=n.n(Vn),Xn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"858773398697-vki2lito392c5dlss9s31ap077nn0qbd.apps.googleusercontent.com",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binarual-meet",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"AIzaSyAADCXxUujmh0VqXIzJofwl03MA5O8v8EQ",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:["https://www.googleapis.com/auth/drive.file"];Object(X.a)(this,e),this.clientId=void 0,this.clientSecret=void 0,this.appId=void 0,this.apiToken=void 0,this.scopes=void 0,this.loadState=0,this.clientId=t,this.clientSecret=n,this.appId=i,this.apiToken=o,this.scopes=a,gapi.load("auth",{callback:this.onAuthApiLoad.bind(this)})}return Object(K.a)(e,[{key:"onAuthApiLoad",value:function(){this.loadState++,gapi.client.load("drive","v3",this.onDriveLoad.bind(this))}},{key:"onDriveLoad",value:function(){this.loadState++}},{key:"login",value:function(){var e=Object(Jn.a)(Kn.a.mark((function e(){var t,n=this;return Kn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){console.log(gapi.auth),gapi.auth.authorize({client_id:n.clientId,scope:n.scopes,immediate:!0},(function(i){return i.error?gapi.auth.authorize({client_id:n.clientId,scope:n.scopes,immediate:!1},(function(n){return n.error?t(n):e(n)})):e(i)}))}));case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadFileToGoogleDrive",value:function(){var e=Object(Jn.a)(Kn.a.mark((function e(t){var n,i,o,a,r,s,c,l;return Kn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.login();case 2:return e.next=4,gapi.client.drive.files.list({q:"name='Binaural Meet Files' and mimeType='application/vnd.google-apps.folder' and not trashed=true"});case 4:if(n=e.sent,i=n.result.files,o="",null!==i&&void 0!==i&&i.length){e.next=15;break}return a={name:"Binaural Meet Files",mimeType:"application/vnd.google-apps.folder"},e.next=11,gapi.client.drive.files.create({resource:a});case 11:r=e.sent,o=JSON.parse(r.body).id,e.next=16;break;case 15:o=i[0].id||"";case 16:return s={name:t.name,mimeType:t.type,parents:[o]},(c=new FormData).append("metadata",new Blob([JSON.stringify(s)],{type:"application/json"})),c.append("file",t),e.next=22,fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:new Headers({Authorization:"Bearer "+gapi.auth.getToken().access_token}),body:c}).then((function(e){return e.json()}));case 22:return l=e.sent,e.next=25,gapi.client.drive.permissions.create({fileId:l.id,resource:{role:"reader",type:"anyone"}});case 25:return e.abrupt("return","https://drive.google.com/uc?export=view&id=".concat(l.id));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zn=new Xn;function qn(e){return new Promise((function(t,n){var i=new FormData;i.append("access_token","e9889a51fca19f2712ec046016b7ec0808953103e32cd327b91f11bfddaa8533"),i.append("imagedata",e),fetch("https://upload.gyazo.com/api/upload",{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){t(e.url)})).catch((function(e){"TypeError: Failed to fetch"==="".concat(e)?n("type"):(console.error(e),n(""))}))}))}var _n,$n=Object.assign({},cn,{name:"",ownerName:"",ownerURL:"",color:[],textColor:[],type:"",url:"",size:[0,0],originalSize:[0,0],id:"",zorder:0,pinned:!1,overlapZones:[],surroundingZones:[],shareType:"",showTitle:!1,contentDesc:"",showStopWatch:!1,stopWatchToggle:!1,stopWatchReset:!1,scaleRotateToggle:!1,baseImage:"",baseIcon:"",baseColor:""}),ei=Object(K.a)((function e(){Object(X.a)(this,e),this.name=void 0,this.ownerName=void 0,this.ownerURL=void 0,this.color=void 0,this.textColor=void 0,this.type=void 0,this.url=void 0,this.id=void 0,this.zorder=void 0,this.pinned=void 0,this.pose=void 0,this.size=void 0,this.overlapZones=void 0,this.surroundingZones=void 0,this.originalSize=void 0,this.noFrame=void 0,this.opacity=void 0,this.shareType=void 0,this.showTitle=void 0,this.contentDesc=void 0,this.showStopWatch=void 0,this.stopWatchToggle=void 0,this.stopWatchReset=void 0,this.scaleRotateToggle=void 0,this.baseImage=void 0,this.baseIcon=void 0,this.baseColor=void 0,Object.assign(this,ke.a.cloneDeep($n))}));function ti(){var e=new ei;return e.ownerName=On.local.information.name,e.color=On.local.information.color,e.textColor=On.local.information.textColor,e.ownerURL=On.local.information.avatarSrc,e.zorder=Date.now(),e}function ni(e,t,n){e.type="pdf",e.url=t,e.pose.position[0]=n.mouseOnMap[0],e.pose.position[1]=n.mouseOnMap[1],e.size[0]=500,e.size[1]=1.41421356*e.size[0]}function ii(e,t,n,i,o){return new Promise((function(r,s){var c=ti(),l=new URL(e);if("youtu.be"===l.hostname||"youtube.com"===l.hostname||"www.youtube.com"===l.hostname){var u=l.search.slice(1).split("&"),d=new Map(u.map((function(e){return e.split("=")})));"youtu.be"===l.hostname&&d.set("v",l.pathname.slice(1)),c.url="";var p,h=Object(a.a)(d);try{for(h.s();!(p=h.n()).done;){var v=p.value;""===c.url?c.url="".concat(v[0],"=").concat(v[1]):c.url="".concat(c.url,"&").concat(v[0],"=").concat(v[1])}}catch(b){h.e(b)}finally{h.f()}c.type="youtube","contextmenu"===o?(c.pose.position[0]=Number(n),c.pose.position[1]=Number(i)):(c.pose.position[0]=t.mouseOnMap[0],c.pose.position[1]=t.mouseOnMap[1]),c.size[0]=640,c.size[1]=380}else if("drive.google.com"===l.hostname||"docs.google.com"===l.hostname){c.type="gdrive";var m=l.pathname.slice(l.pathname.indexOf("/d/")+3),f=m.slice(0,m.indexOf("/"));c.url="id=".concat(f),c.pose.position[0]=t.mouseOnMap[0],c.pose.position[1]=t.mouseOnMap[1],c.size[0]=900,c.size[1]=700}else"wbo.ophir.dev"===l.hostname?(c.type="whiteboard",c.url=e,c.pose.position[0]=t.mouseOnMap[0],c.pose.position[1]=t.mouseOnMap[1],c.size[0]=700,c.size[1]=740):".pdf"===l.pathname.substring(l.pathname.length-4)||".PDF"===l.pathname.substring(l.pathname.length-4)?ni(c,e,t):function(e){return new Promise((function(t,n){var i=new XMLHttpRequest;i.timeout=5e3,i.open("GET",e),i.onreadystatechange=function(){if(this.readyState===this.LOADING){var e=this.getResponseHeader("Content-Type");this.abort(),t(e)}},i.send()}))}(Wn(e)).then((function(n){"application/pdf"===n&&(ni(c,e,t),r(c))})).finally((function(){c.type||(c.type="iframe",c.url=e,c.pose.position[0]=t.mouseOnMap[0],c.pose.position[1]=t.mouseOnMap[1],c.size[0]=600,c.size[1]=800,r(c))}));c.type&&(r(c),Go("".concat(c.type," created url = ").concat(c.url)))}))}function oi(e,t,n,i,o){var a=ti();a.type="text";var r={messages:[{message:e,pid:On.localId,name:On.local.information.name,color:On.local.information.color,textColor:On.local.information.textColor,time:Date.now()}],scroll:[0,0]};a.url=JSON.stringify(r),"contextmenu"===o?(a.pose.position[0]=Number(n),a.pose.position[1]=Number(i)):(a.pose.position[0]=t.mouseOnMap[0],a.pose.position[1]=t.mouseOnMap[1]);var s=Math.ceil(Math.sqrt(e.length));return a.size[0]=Math.max(20*s,200),a.size[1]=Math.max(25*s,s?25:75),a}function ai(e,t,n,i,o,a,r,s,c){return new Promise((function(l,u){i&&"gyazo"!==i?Zn.uploadFileToGoogleDrive(e).then((function(e){ri(e,t,n,o,a,r,s,c).then(l).catch(u)})):qn(e).then((function(e){ri(e,t,n,o,a,r,s,c).then(l)})).catch((function(i){"type"===i?Zn.uploadFileToGoogleDrive(e).then((function(e){ri(e,t,n,o,a,r,s,c).then(l)})).catch(u):u(i)}))}))}function ri(e,t,n,i,o,a,r,s){var c=new Promise((function(c,l){(function(e){return new Promise((function(t,n){var i=new Image;i.src=e,i.onload=function(){var e=[i.width,i.height];t(e)},i.onerror=function(){n([0,0])}}))})(e).then((function(l){var u=ti();u.type="img","image"===i?u.shareType="img":"zoneimage"===i?u.shareType="zoneimg":"roomImage"===i&&(u.shareType="roomimg"),u.contentDesc=String(null===s||void 0===s?void 0:s.toString()),u.noFrame=!0,u.scaleRotateToggle=!0,u.url=e,u.size=[l[0],l[1]],u.originalSize=[l[0],l[1]];for(var d=0;d<u.pose.position.length;d+=1)n?"contextmenu"===r?(u.pose.position[0]=Number(o),u.pose.position[1]=Number(a)):u.pose.position[d]=t.mouseOnMap[d]+n[d]:u.pose.position[d]=t.mouseOnMap[d]-.5*u.size[d];c(u)}))}));return c}function si(e){}function ci(e,t,n){return console.error("createContentOfPdf called."),new Promise((function(e,t){if(gapi){gapi.client.init({apiKey:"AIzaSyCE4B2cKycH0fVmBznwfr1ynnNf2qNEU9M",clientId:"188672642721-3f8u1671ecugbl2ukhjmb18nv283upm0.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.appdata",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}).then((function(){console.log("Before getAuthInstance"),_n=gapi.auth2.getAuthInstance(),console.log("Before listen updateSigninStatus"),_n.isSignedIn.listen(si)}),(function(e){console.log("gapi.client.init failed:",e)}))}}))}function li(e,t,n,i,o,a){var r=ti();r.type=n,r.url="","contextmenu"===a?(r.pose.position[0]=Number(i),r.pose.position[1]=Number(o)):(r.pose.position[0]=t.mouseOnMap[0],r.pose.position[1]=t.mouseOnMap[1]);var s=e.find((function(e){return"video"===e.kind})),c=null===s||void 0===s?void 0:s.getSettings();return r.originalSize=c?[c.width||0,c.height||0]:[0,0],r.size=[(r.originalSize[0]||640)/2,(r.originalSize[1]||360)/2],r}function ui(e,t,n,i,o){return new Promise((function(a,r){var s=void 0;if(0===e.indexOf("http://")||0===e.indexOf("https://")){var c=new URL(e),l=e.slice(-4);u(c)?((s=oi(e,t,n,i,o)).name="! recursive reference",a(s)):".jpg"===l||".JPG"===l||"jpeg"===l||"JPEG"===l||".png"===l||".PNG"===l||".gif"===l||".GIF"===l||".svg"===l||".SVG"===l?ri(e,t).then((function(e){e.name=c.pathname,a(e)})).catch(r):ii(e,t,n,i,o).then((function(r){"iframe"===r.type&&((r=oi(e,t,n,i,o)).name="".concat(c.host).concat(c.pathname).concat(c.search)),"youtube"===r.type?r.name="".concat(c.search.substring(1)):r.name="".concat(c.host).concat(c.pathname).concat(c.search),a(r)})).catch(r)}else(s=oi(e,t,n,i,o)).name=e.substring(0,20),a(s)}))}function di(e){var t=document.createElement("textarea");t.value=e,t.selectionStart=0,t.selectionEnd=t.value.length;var n=t.style;n.position="fixed",n.left="-100%",document.body.appendChild(t),t.focus();var i=document.execCommand("copy");return t.blur(),document.body.removeChild(t),i}function pi(e,t){var n=t.get("id"),i=t.get("mimeType");i=i||"";var o="application/vnd.google-apps.",a="https://drive.google.com/file/d/".concat(n,"/preview");if(e||function(e){return!!e&&("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e||"application/vnd.google-apps.spreadsheet"===e||"application/vnd.google-apps.document"===e||"application/vnd.google-apps.presentation"===e)}(i))if(i.substr(0,o.length)===o){var r=i.substr(o.length);"failed"!==r&&("spreadsheet"===r&&(r="spreadsheets"),a="https://docs.google.com/".concat(r,"/d/").concat(n,"/edit"))}else if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===i){a="https://docs.google.com/".concat("spreadsheets","/d/").concat(n,"/edit")}return a}function hi(e){var t=e.indexOf("?"),n=t>=0?e.substr(t):e;return new Map(n.split("&").map((function(e){return e.split("=")})))}function vi(e){if(Un(e)){var t=ea.sorted.findIndex((function(e){return e.zorder>zn}));if(t<0&&(t=ea.sorted.length),(t-=1)>=0){var n=ea.sorted[t].zorder+1;e.zorder=n<=zn?n:zn}}else e.zorder=Math.floor(Date.now()/Nn)}function mi(e){if(Un(e)){var t=ea.sorted[0];t!==e&&(e.zorder=t.zorder-1)}else{var n=ea.sorted.find((function(e){return e.zorder>zn}));n?e.zorder=n.zorder-1:vi(e)}}var fi,bi,gi,ji,Ai=n(283),Oi=["type","peer","transport","iceServers"],yi=function(e){},xi=function(){function e(){Object(X.a)(this,e),this.peer_="",this.connected=!1,this.mainServer=void 0,this.device=void 0,this.handlers=new Map,this.promises=new Map,this.messageNumber=1,this.emitter=new Yn.EventEmitter,this.handlers.set("connect",this.onConnect),this.handlers.set("createTransport",this.onCreateTransport),this.handlers.set("rtpCapabilities",this.onRtpCapabilities),this.handlers.set("connectTransport",this.onConnectTransport),this.handlers.set("produceTransport",this.onProduceTransport),this.handlers.set("closeProducer",this.onCloseProducer),this.handlers.set("consumeTransport",this.onConsumeTransport),this.handlers.set("resumeConsumer",this.onResumeConsumer),this.handlers.set("remoteUpdate",this.onRemoteUpdate),this.handlers.set("remoteLeft",this.onRemoteLeft);try{this.device=new Ai.Device}catch(t){"UnsupportedError"===t.name&&console.warn("browser not supported")}}return Object(K.a)(e,[{key:"peer",get:function(){return this.peer_}},{key:"isConnected",value:function(){var e;return this.connected&&(null===(e=this.mainServer)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}},{key:"connect",value:function(e,t){var n=this;return yi("rtcConn connect(".concat(e,", ").concat(t,")")),new Promise((function(i,o){n.mainServer=new WebSocket(config.mainServer);var a=function(){var a={type:"connect",peer:t};n.sendWithPromise(a,i,o,e)},r=function(e){var t=JSON.parse(e.data),i=n.handlers.get(t.type);i?i.bind(n)(t):console.error("unhandled message ".concat(t.type," received"),t)},s=function(){yi("onClose() for mainServer"),n.connected=!1,n.emit("disconnect"),setTimeout((function(){n.mainServer=new WebSocket(config.mainServer),l()}),5e3)},c=function(){var e;console.error("Error in WebSocket for ".concat(config.mainServer)),null===(e=n.mainServer)||void 0===e||e.close(3e3,"onError"),s()},l=function(){var e,t,i,o;null===(e=n.mainServer)||void 0===e||e.addEventListener("error",c),null===(t=n.mainServer)||void 0===t||t.addEventListener("message",r),null===(i=n.mainServer)||void 0===i||i.addEventListener("open",a),null===(o=n.mainServer)||void 0===o||o.addEventListener("close",s)};l()}))}},{key:"disconnect",value:function(){var e;null===(e=this.mainServer)||void 0===e||e.close(),this.peer_=""}},{key:"setMessageSerialNumber",value:function(e){this.messageNumber++,e.sn=this.messageNumber}},{key:"setMessagePromise",value:function(e,t,n,i){this.setMessageSerialNumber(e),this.promises.set(e.sn,{resolve:t,reject:n,arg:i})}},{key:"getMessageArg",value:function(e){var t;if(e.sn)return null===(t=this.promises.get(e.sn))||void 0===t?void 0:t.arg}},{key:"sendWithPromise",value:function(e,t,n,i){this.mainServer?(this.setMessagePromise(e,t,n,i),this.mainServer.send(JSON.stringify(e))):n&&n("no mainServer")}},{key:"resolveMessage",value:function(e,t){var n,i=e.sn;i&&(null===(n=this.promises.get(i))||void 0===n||n.resolve(t),this.promises.delete(i))}},{key:"rejectMessage",value:function(e,t){var n=e.sn;if(n){var i,o=null===(i=this.promises.get(n))||void 0===i?void 0:i.reject;o&&o(t),this.promises.delete(n)}}},{key:"loadDevice",value:function(e){var t=this;return new Promise((function(n,i){var o={type:"rtpCapabilities",peer:e};t.sendWithPromise(o,n,i)}))}},{key:"onRtpCapabilities",value:function(e){var t,n=this,i=e;null===(t=this.device)||void 0===t||t.load({routerRtpCapabilities:i.rtpCapabilities}).then((function(){n.resolveMessage(e)}))}},{key:"onConnect",value:function(e){var t=this;yi("onConnect( ".concat(JSON.stringify(e)));var n=e;this.peer_=n.peer;var i=this.getMessageArg(n);if(!this.mainServer)throw this.rejectMessage(n),new Error("No connection has been established.");var o={type:"join",peer:n.peer,room:i};yi("join sent ".concat(JSON.stringify(o))),this.mainServer.send(JSON.stringify(o)),this.loadDevice(n.peer).then((function(){t.resolveMessage(n,n.peer),t.connected=!0,t.emitter.emit("connect")}))}},{key:"createTransport",value:function(e,t){var n=this;return"receive"!==e||t||console.error("createTransport(): remote must be specified."),new Promise((function(i,o){var a={type:"createTransport",peer:n.peer,remote:t,dir:e};n.sendWithPromise(a,i,o,t)}))}},{key:"onCreateTransport",value:function(e){var t,n,i,o=e,a=(o.type,o.peer,o.transport),r=o.iceServers,s=Object(be.a)(o,Oi),c=Object(wn.a)(Object(wn.a)({id:a},s),{},{iceServers:r,iceTransportPolicy:"all"});"send"===o.dir?t=null===(n=this.device)||void 0===n?void 0:n.createSendTransport(c):t=null===(i=this.device)||void 0===i?void 0:i.createRecvTransport(c);if(t){var l=this.getMessageArg(o);!function(e,t,n){if(!e.appData.stat){var i=Object(wn.a)(Object(wn.a)({},Ci),{},{dir:t});e.appData.stat=Object(fe.h)(i),e.observer.addListener("close",(function(){!function(e){e.appData.interval&&window.clearInterval(e.appData.interval);delete e.appData.interval}(e)}))}var o=new Map,a=new Map;e.appData.interval=window.setInterval((function(){var i=e.appData.stat;null===e||void 0===e||e.getStats().then((function(e){var r,s=Array.from(e.keys());if("send"===t){var c=s.filter((function(e){return e.includes("RTCOutboundRTPVideoStream")||e.includes("RTCOutboundRTPAudioStream")})).map((function(e){return e.substring("RTCOutboundRTP".length)})).map((function(t){return{id:t,local:e.get("RTCOutboundRTP".concat(t)),remote:e.get("RTCRemoteInboundRtp".concat(t))}}));r=c.map((function(n){var i,a,r,s,c=o.get(n.id),l=null!==c&&void 0!==c&&null!==(i=c.local)&&void 0!==i&&i.timestamp?(n.local.timestamp-c.local.timestamp)/1e3:0;return n.local.codecId&&e.get(n.local.codecId),{dir:t,id:n.id,bytesPerSec:l&&n.local.bytesSent&&null!==c&&void 0!==c&&null!==(a=c.local)&&void 0!==a&&a.bytesSent?(n.local.bytesSent-c.local.bytesSent)/l:0,codec:n.local.codecId?e.get(n.local.codecId).mimeType:void 0,targetBitrate:n.local.targetBitrate,fractionLost:null===(r=n.remote)||void 0===r?void 0:r.fractionLost,roundTripTime:null===(s=n.remote)||void 0===s?void 0:s.roundTripTime}})),o=new Map(c.map((function(e){return[e.id,e]})))}else{var l=s.filter((function(e){return e.includes("RTCInboundRTPVideoStream")||e.includes("RTCInboundRTPAudioStream")})).map((function(e){return e.substring("RTCInboundRTP".length)})).map((function(t){return{id:t,local:e.get("RTCInboundRTP".concat(t)),remote:e.get("RTCRemoteOutboundRTP".concat(t))}}));r=l.map((function(n){var i,o,r,s,c=a.get(n.id),l=null!==c&&void 0!==c&&null!==(i=c.local)&&void 0!==i&&i.timestamp?(n.local.timestamp-c.local.timestamp)/1e3:0;return n.local.codecId&&e.get(n.local.codecId),{dir:t,id:n.id,bytesPerSec:l&&n.local.bytesReceived&&null!==c&&void 0!==c&&null!==(o=c.local)&&void 0!==o&&o.bytesReceived?(n.local.bytesReceived-c.local.bytesReceived)/l:0,codec:n.local.codecId?e.get(n.local.codecId).mimeType:void 0,jitter:n.local.jitter,fractionLost:null===(r=n.remote)||void 0===r?void 0:r.fractionLost,roundTripTime:null===(s=n.remote)||void 0===s?void 0:s.roundTripTime}})),a=new Map(l.map((function(e){return[e.id,e]})))}i.fractionLost=void 0,i.roundTripTime=void 0,i.jitter=void 0,wi("fractionLost",i,r),wi("roundTripTime",i,r),wi("jitter",i,r);var u=s.find((function(e){return"RTCTransport"===e.substring(0,"RTCTransport".length)}));if(u){var d=e.get(u),p=(d.timestamp-i.timestamp)/1e3;i.timestamp=d.timestamp,d.bytesReceived&&(i.receivedBytePerSec=Math.floor((d.bytesReceived-i.bytesReceived)/p),i.bytesReceived=d.bytesReceived),d.bytesSent&&(i.sentBytePerSec=Math.floor((d.bytesSent-i.bytesSent)/p),i.bytesSent=d.bytesSent);var h=d.selectedCandidatePairId;if(h){var v=e.get(h),m=e.get(v.localCandidateId);i.turn=m.url;var f=e.get(v.remoteCandidateId);i.remoteServer="".concat(f.address,":").concat(f.port,"/").concat(f.protocol)}}var b=void 0;if(void 0!==i.fractionLost||void 0!==i.roundTripTime||void 0!==i.jitter){var g=i.fractionLost?i.fractionLost:0,j=i.roundTripTime?i.roundTripTime:0,A=!j&&i.jitter?i.jitter:0;b=100-100*(g>1e-10?Math.pow(g,-10):0)-100*j-100*A,b=Math.max(Math.min(b,100),0)}i.quality=b,i.streams=r;var O="send"===t?On.local:On.getRemote(n);O&&(O.quality=i.quality)})).catch()}),5e3)}(t,o.dir,l),this.resolveMessage(o,t)}this.rejectMessage(o)}},{key:"connectTransport",value:function(e,t,n){var i=this;return new Promise((function(o,a){var r={type:"connectTransport",peer:i.peer,remote:n,dtlsParameters:t,transport:e.id};i.sendWithPromise(r,o,a)}))}},{key:"onConnectTransport",value:function(e){var t=e;t.error?this.rejectMessage(t,t.error):this.resolveMessage(t,"")}},{key:"produceTransport",value:function(e){var t=this;return new Promise((function(n,i){var o=Object(wn.a)({type:"produceTransport",peer:t.peer},e);t.sendWithPromise(o,n,i)}))}},{key:"onProduceTransport",value:function(e){var t=e;t.error?this.rejectMessage(t,t.error):this.resolveMessage(t,t.producer)}},{key:"closeProducer",value:function(e){var t=this;return new Promise((function(n,i){var o={type:"closeProducer",peer:t.peer,producer:e};t.sendWithPromise(o,n,i)}))}},{key:"onCloseProducer",value:function(e){var t=e;t.error?this.rejectMessage(t,t.error):this.resolveMessage(t)}},{key:"consumeTransport",value:function(e,t){var n=this;return new Promise((function(i,o){var a={type:"consumeTransport",peer:n.peer,remote:t.peer.peer,rtpCapabilities:n.device.rtpCapabilities,transport:e,producer:t.id};n.sendWithPromise(a,i,o)}))}},{key:"onConsumeTransport",value:function(e){var t=e;if(t.error)this.rejectMessage(t,t.error);else{var n={id:t.consumer,producerId:t.producer,kind:t.kind,rtpParameters:t.rtpParameters};this.resolveMessage(t,n)}}},{key:"resumeConsumer",value:function(e,t){var n=this;return new Promise((function(i,o){var a={type:"resumeConsumer",peer:n.peer,remote:t,consumer:e};n.sendWithPromise(a,i,o)}))}},{key:"onResumeConsumer",value:function(e){var t=e;t.error?this.rejectMessage(t,t.error):this.resolveMessage(t)}},{key:"addListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListener",value:function(){this.emitter.removeAllListeners()}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.emitter.emit(e,n)}},{key:"onRemoteUpdate",value:function(e){var t=e;this.emit("remoteUpdate",t.remotes)}},{key:"onRemoteLeft",value:function(e){var t=e;this.emit("remoteLeft",t.remotes)}}]),e}(),Ci={timestamp:0,bytesSent:0,bytesReceived:0,streams:[],dir:"send"};function wi(e,t,n){var i=t,o=n,r=0;i[e]=void 0;var s,c=Object(a.a)(o);try{for(c.s();!(s=c.n()).done;){var l=s.value;l[e]&&(i[e]=l[e]+(i[e]?i[e]:0),r++)}}catch(u){c.e(u)}finally{c.f()}i[e]&&(i[e]/=r)}function Si(e){return("0"+e).slice(-2)}function ki(e){void 0===e&&(e=Date.now());var t=new Date(e);return"".concat(function(e){return("000"+e).slice(-4)}(t.getFullYear()),".").concat(Si(t.getMonth()+1),".").concat(Si(t.getDay()),"_")+"".concat(Si(t.getHours()),".").concat(Si(t.getMinutes()))}var Ti=new(n(284).a)("recorderDb");Ti.version(1).stores({records:"++id, title, room, duration, time",recMessages:"++id",recMedias:"id",blobs:"++id"});var Ii,Ei,Pi,Mi,Ri,Di,Bi,Ni,zi=Ti.records,Fi=Ti.recMedias,Li=Ti.recMessages,Ui=Ti.blobs,Qi=function(){function e(t,n,i,o,a){Object(X.a)(this,e),this.media=void 0,this.id=void 0,this.pid=void 0,this.cid=void 0,this.role=void 0,this.kind=void 0,this.startTime=0,this.endTime=0,this.blobs=[],this.onData=function(){},this.id=o,this.role=n,this.pid=null===a||void 0===a?void 0:a.pid,this.cid=null===a||void 0===a?void 0:a.cid,this.kind=i,this.media=new MediaRecorder(t),this.media.addEventListener("dataavailable",this.onDataAvailable.bind(this)),this.media.addEventListener("stop",this.onStop.bind(this))}return Object(K.a)(e,[{key:"stream",get:function(){return this.media.stream}},{key:"state",get:function(){return this.media.state}},{key:"start",value:function(){"inactive"===this.media.state?(this.media.start(),this.startTime=Date.now()):console.error("Failed to start. Media for cid:".concat(this.cid," pid:").concat(this.pid)+" is already in ".concat(this.media.state,"."),this)}},{key:"stop",value:function(){"inactive"!==this.media.state&&this.media.stop()}},{key:"requestData",value:function(){"inactive"!==this.media.state&&this.media.requestData()}},{key:"onStop",value:function(){this.endTime=Date.now()}},{key:"onDataAvailable",value:function(e){var t=e.data;this.blobs.push(t),this.onData(this)}}]),e}(),Gi=Object(K.a)((function e(t,n){Object(X.a)(this,e),this.msg=void 0,this.time=void 0,this.msg=t,this.time=n||Date.now()})),Yi=(fi=function(){function e(){Object(X.a)(this,e),this.medias=new Map,this.messages=[],Object(J.a)(this,"recording",bi,this),this.startTime=0,this.endTime=0,this.intervalTimer=0,this.stoppedMedias=[],this.disposers=[],this.MessageTypesToRecord=new Set([Rn.PARTICIPANT_INFO,Rn.PARTICIPANT_POSE,Rn.PARTICIPANT_MOUSE,Rn.PARTICIPANT_AFK,Rn.PARTICIPANT_TRACKSTATES,Rn.PARTICIPANT_VIEWPOINT,Rn.PARTICIPANT_ON_STAGE,Rn.CONTENT_UPDATE_REQUEST,Rn.CONTENT_REMOVE_REQUEST]),this.lastMessageValues=new Map,this.converting=!1,Object(fe.g)(this)}return Object(K.a)(e,[{key:"clear",value:function(){this.medias.clear(),this.messages=[],this.stoppedMedias=[],this.startTime=0,this.endTime=0,this.lastMessageValues.clear()}},{key:"start",value:function(e){var t=this;this.clear(),this.recording=!0,this.startTime=Date.now();var n={room:Qo.room,time:this.startTime,duration:0,title:"",blob:void 0};zi.add(n),this.disposers.push(Object(fe.c)((function(){t.observeAndRecordMedia()})));var i=Dn(e.contents.all);this.messages.push({msg:{t:Rn.CONTENT_UPDATE_REQUEST,v:JSON.stringify(i)},time:Date.now()});var o=Array.from(e.participants.remote.values());o.unshift(e.participants.local);for(var a=0,r=o;a<r.length;a++){var s=r[a];this.messages.push({msg:{t:Rn.PARTICIPANT_INFO,p:s.id,v:JSON.stringify(s.information)},time:Date.now()}),this.messages.push({msg:{t:Rn.PARTICIPANT_POSE,p:s.id,v:JSON.stringify(D(s.pose))},time:Date.now()}),this.messages.push({msg:{t:Rn.PARTICIPANT_MOUSE,p:s.id,v:JSON.stringify(B(s.mouse))},time:Date.now()})}this.intervalTimer&&window.clearInterval(this.intervalTimer),this.intervalTimer=window.setInterval((function(){t.saveDiffToDB()}),3e3)}},{key:"stop",value:function(){var e=this;this.intervalTimer&&(window.clearInterval(this.intervalTimer),this.intervalTimer=0);var t,n=Object(a.a)(this.disposers);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(i){n.e(i)}finally{n.f()}return this.disposers=[],new Promise((function(t,n){e.stopMediaRecordings().then((function(i){e.endTime=Date.now(),e.makeRecord(i).then((function(e){Ui.clear().then((function(){Fi.clear().then((function(){Li.clear().then((function(){return t(e)}))}))}))})).catch(n)}))}))}},{key:"recordMessage",value:function(e){this.recording&&this.MessageTypesToRecord.has(e.t)&&(e.t===Rn.PARTICIPANT_MOUSE||e.t===Rn.PARTICIPANT_POSE?this.lastMessageValues.get(e.t)!==e.v&&(this.lastMessageValues.set(e.t,e.v),this.messages.push(new Gi(e))):this.messages.push(new Gi(e)))}},{key:"saveDiffToDB",value:function(){var e=this;return new Promise((function(t){var n=Array.from(e.medias.values()),i=n.length+1,o=function(){0===--i&&t()};e.saveMediaRecordings().then((function(){var e,t=Object(a.a)(n);try{var i=function(){var t=e.value;Fi.get(t.id).then((function(e){var n=e||{id:t.id,startTime:t.startTime,endTime:t.endTime,pid:t.pid,cid:t.cid,role:t.role,kind:t.kind,blobs:[]};n.startTime=t.startTime,n.endTime=t.endTime;var i,r=t.blobs.slice(n.blobs.length),s=0,c=Object(a.a)(r);try{for(c.s();!(i=c.n()).done;){var l={blob:i.value};Ui.add(l).then((function(e){n.blobs.push(e),++s===r.length&&Fi.put(n,n.id).then((function(){o()}))}))}}catch(u){c.e(u)}finally{c.f()}}))};for(t.s();!(e=t.n()).done;)i()}catch(r){t.e(r)}finally{t.f()}})),Li.toArray().then((function(t){var n=t.reduce((function(e,t){return e+t.length}),0);if(e.messages.length>n){var i=e.messages.slice(n),a={messages:i,length:i.length};Li.add(a).then((function(){o()}))}else o()}))}))}},{key:"convertDiffsToRecord",value:function(){var e=this,t=0;return new Promise((function(n,i){Ji.recording||e.converting?i():(e.converting=!0,zi.where({title:""}).count((function(o){0!==o?Li.toArray((function(o){Fi.toArray((function(r){var s=[];o.length||r.length?function(){e.messages=[];var c,l=1,u=function(){0===--l&&Li.clear().then((function(){Fi.clear().then((function(){Ui.clear().then((function(){e.endTime=t,e.makeRecord(s,!0).then((function(t){e.converting=!1,n(t)})).catch(i)}))}))}))},d=Object(a.a)(o);try{for(d.s();!(c=d.n()).done;){var h,v,m=c.value,f=Object(a.a)(m.messages);try{for(f.s();!(v=f.n()).done;){var b=v.value;t=Math.max(b.time,t)}}catch(O){f.e(O)}finally{f.f()}(h=e.messages).push.apply(h,Object(p.a)(m.messages))}}catch(O){d.e(O)}finally{d.f()}var g,j=Object(a.a)(r);try{var A=function(){var e=g.value;t=Math.max(e.endTime,e.startTime,t);var n=Array(e.blobs.length);l+=n.length;var i={id:e.id,pid:e.pid,cid:e.cid,role:e.role,kind:e.kind,startTime:e.startTime,endTime:e.endTime,blobs:n};s.push(i),e.blobs.forEach((function(e,t){Ui.get(e).then((function(e){n[t]=e.blob,u()}))}))};for(j.s();!(g=j.n()).done;)A()}catch(O){j.e(O)}finally{j.f()}u()}():i()}))})):i()})))}))}},{key:"stopMediaRecordings",value:function(){var e=this;this.recording=!1;var t=0;return new Promise((function(n,i){var o=function(){++t===r.length&&n(r)},r=e.stoppedMedias;if(r.push.apply(r,Object(p.a)(e.medias.values())),r.length){var s,c=Object(a.a)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;"inactive"===l.state?o():(l.onData=function(){o()},l.stop())}}catch(u){c.e(u)}finally{c.f()}}else n(r)}))}},{key:"makeRecord",value:function(e,t){var n=this;return new Promise((function(i,o){zi.where({title:""}).toArray().then((function(r){if(r.length){var s=r.pop();t&&(n.startTime=s.time);var c,l=t?s.room:Qo.room,u=n.makeBlob(e),d={id:s.id,room:l,time:n.startTime,duration:n.endTime-n.startTime,title:"BMR_".concat(l,"_").concat(ki(n.startTime)),blob:u},p=r.length+1,h=function(){0===--p&&i(d)},v=Object(a.a)(r);try{for(v.s();!(c=v.n()).done;){var m=c.value;zi.delete(m.id).then(h)}}catch(b){v.e(b)}finally{v.f()}zi.put(d,d.id).then((function(){h()})).catch((function(){o("Failed to add record to IndexedDB")}))}else{var f="The record created when starts to record not found in db.";console.error(f),o(f)}}))}))}},{key:"makeBlob",value:function(e){var t=[],n=[],i={startTime:this.startTime,endTime:this.endTime,messages:this.messages},o=new Blob([JSON.stringify(i)],{type:"application/json"}),r={role:"message",size:o.size,kind:"json"};t.push(o),n.push(r);var s,c=Object(a.a)(e);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l.blobs.length){var u=new Blob(l.blobs),d={pid:l.pid,cid:l.cid,role:l.role,size:u.size,kind:l.kind,time:l.startTime,duration:l.endTime-l.startTime};u.size&&(t.push(u),n.push(d))}}}catch(h){c.e(h)}finally{c.f()}t.unshift(new Blob([JSON.stringify(n)],{type:"application/json"}));var p=new Uint32Array(1);return p[0]=t[0].size,t.unshift(new Blob([p])),new Blob(t,{type:"application/octet-stream"})}},{key:"saveMediaRecordings",value:function(){var e=this,t=0;return new Promise((function(n,i){function o(){++t===r.length&&n(r)}var r=Array.from(e.medias.values());if(r.length){var s,c=Object(a.a)(r);try{var l=function(){var e=s.value;"inactive"===e.state?o():(e.onData=function(){e.onData=function(){},e.endTime=Date.now(),o()},e.requestData())};for(c.s();!(s=c.n()).done;)l()}catch(u){c.e(u)}finally{c.f()}}else n(r)}))}},{key:"observeAndRecordMedia",value:function(){var e=new Set(this.medias.keys()),t=Array.from(On.remote.values());t.push(On.local);for(var n=0,i=t;n<i.length;n++){var o=i[n],r="pv_".concat(o.id);if(e.delete(r),o.tracks.avatarStream){if(!this.medias.has(r)){var s=new Qi(o.tracks.avatarStream,"avatar","video",r,{pid:o.id});this.medias.set(r,s),s.start()}}else{var c=this.medias.get(r);c&&(c.stop(),this.stoppedMedias.push(c),this.medias.delete(r))}var l="pa_".concat(o.id);if(o.tracks.audioStream){if(!this.medias.has(l)){var u=new Qi(o.tracks.audioStream,"avatar","audio",l,{pid:o.id});this.medias.set(l,u),u.start()}}else{var d=this.medias.get(l);d&&(d.stop(),this.stoppedMedias.push(d),this.medias.delete(l))}}var p,h=ea.getAllRtcContentIds(),v=Object(a.a)(h);try{for(v.s();!(p=v.n()).done;){var m=p.value,f=ea.find(m);if(f&&("screen"===f.type||"camera"===f.type)){var b,g=ea.contentTracks.get(m).tracks,j=Object(a.a)(g);try{for(j.s();!(b=j.n()).done;){var A=b.value,O=void 0;if(O="audio"===A.kind?"ca_".concat(f.id):"cv_".concat(f.id),e.delete(O),!this.medias.has(O)){var y=new MediaStream([A]),x=new Qi(y,f.type,A.kind,O,{cid:f.id});this.medias.set(O,x),x.start(),console.log("Rec for ".concat(O,": ").concat(JSON.stringify(x)))}}}catch(T){j.e(T)}finally{j.f()}}}}catch(T){v.e(T)}finally{v.f()}var C,w=Object(a.a)(e);try{for(w.s();!(C=w.n()).done;){var S=C.value,k=this.medias.get(S);k&&(k.stop(),this.stoppedMedias.push(k),this.medias.delete(S))}}catch(T){w.e(T)}finally{w.f()}}}]),e}(),bi=Object(V.a)(fi.prototype,"recording",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fi),Hi=Object(K.a)((function e(t,n){Object(X.a)(this,e),this.blob=void 0,this.time=void 0,this.duration=void 0,this.cid=void 0,this.pid=void 0,this.role=void 0,this.kind=void 0,this.blob=t,this.time=n.time,this.duration=n.duration,this.cid=n.cid,this.pid=n.pid,this.role=n.role,"audio"===n.kind||"video"===n.kind?this.kind=n.kind:this.kind="invalid"})),Wi=(gi=function(){function e(){Object(X.a)(this,e),this.messages=[],this.medias=[],this.startTime=0,this.endTime=0,Object(J.a)(this,"playing",ji,this),this.pids=new Set,this.cids=new Set,Object(fe.g)(this)}return Object(K.a)(e,[{key:"clear",value:function(){this.messages=[],this.medias=[],this.startTime=0,this.endTime=0}},{key:"load",value:function(e){var t=this;return this.clear(),new Promise((function(n){var i=0;e.slice(i,i+4).arrayBuffer().then((function(o){i+=4;var r=new Int32Array(o)[0],s=0;e.slice(i,i+r).text().then((function(o){i+=r;var c,l=JSON.parse(o),u=Object(a.a)(l);try{var d=function(){var o=c.value;"message"===o.role?e.slice(i,i+o.size).text().then((function(e){var i=JSON.parse(e);t.messages=i.messages,t.startTime=i.startTime,t.endTime=i.endTime,++s===l.length&&n(t)})):e.slice(i,i+o.size).arrayBuffer().then((function(e){var i=new Blob([e]);t.medias.push(new Hi(i,o)),++s===l.length&&n(t)})),i+=o.size};for(u.s();!(c=u.n()).done;)d()}catch(p){u.e(p)}finally{u.f()}e.size!==i&&console.error("archive size ".concat(e.size," not matched to end of blobs ").concat(i,"."))}))}))}))}},{key:"play",value:function(){var e=this;this.playing=!0;var t=Array.from(this.messages),n=Array.from(this.medias);t.sort((function(e,t){return e.time-t.time})),n.sort((function(e,t){return e.time-t.time}));var i=this.startTime,o=Date.now()-this.startTime;!function a(){for(i=Date.now()-o;t.length&&t[0].time<i;){var r=t.shift();Vi.playMessage(r.msg)}for(var s=function(){var t=n.shift();Vi.playMedia(t),t.duration&&setTimeout((function(){e.stopMedia(t)}),t.duration)};n.length&&n[0].time<i;)s();i<Vi.endTime?setTimeout((function(){a()}),30):e.cleanup()}()}},{key:"stop",value:function(){Vi.endTime=0}},{key:"cleanup",value:function(){this.playing=!1,this.pids.forEach((function(e){On.removePlayback(e)})),this.cids.forEach((function(e){ea.removePlayback(e)}))}},{key:"stopMedia",value:function(e){if(e.pid&&"avatar"===e.role){var t="p_".concat(e.pid),n=On.playback.get(t);n&&(n.videoBlob=void 0)}}},{key:"playMedia",value:function(e){if(e.pid){var t="p_".concat(e.pid);this.pids.add(t);var n=On.getOrCreatePlayback(t);"audio"===e.kind?n.audioBlob=e.blob:"video"===e.kind?n.videoBlob=e.blob:console.error("Unknown media kind ".concat(e.kind))}else if(e.cid){var i="p_".concat(e.cid);this.cids.add(i);var o=ea.getOrCreatePlayback(i);"audio"===e.kind?o.audioBlob=e.blob:"video"===e.kind?(o.videoBlob=e.blob,o.url=URL.createObjectURL(e.blob)):console.error("Unknown media kind ".concat(e.kind)),ea.updatePlayback(o)}}},{key:"playMessage",value:function(e){var t=e.p?"p_".concat(e.p):"";t&&this.pids.add(t);var n=t?On.getOrCreatePlayback(t):void 0,i=!0,o=JSON.parse(e.v);if(n)switch(i=!1,e.t){case Rn.PARTICIPANT_INFO:n.information=o;break;case Rn.PARTICIPANT_POSE:n.pose=N(o);break;case Rn.PARTICIPANT_MOUSE:n.mouse=z(o);break;case Rn.PARTICIPANT_AFK:n.physics.awayFromKeyboard=o;break;case Rn.PARTICIPANT_TRACKSTATES:Object.assign(n.trackStates,o);break;case Rn.PARTICIPANT_VIEWPOINT:Object.assign(n.viewpoint,o);break;case Rn.PARTICIPANT_ON_STAGE:n.physics.onStage=o;break;case Rn.PARTICIPANT_VRMRIG:n.vrmRigs=o;break;default:i=!0}if(i)switch(i=!1,e.t){case Rn.CONTENT_UPDATE_REQUEST:this.onContentUpdateRequest(e);break;case Rn.CONTENT_REMOVE_REQUEST:this.onContentRemoveRequest(e);break;default:i=!0}i&&console.warn("Playback did not handle message:",e)}},{key:"onContentUpdateRequest",value:function(e){var t,n=JSON.parse(e.v),i=Object(a.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.id="p_".concat(o.id);var r=ea.findPlayback(o.id);r&&(o.audioBlob=r.audioBlob,o.videoBlob=r.videoBlob,o.url=r.url),"camera"!==o.type&&"screen"!==o.type||(o.type="camera"===o.type?"playbackCamera":"playbackScreen"),ea.updatePlayback(o),this.cids.add(o.id)}}catch(s){i.e(s)}finally{i.f()}}},{key:"onContentRemoveRequest",value:function(e){var t,n=JSON.parse(e.v),i=Object(a.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;ea.removePlayback("p_".concat(o))}}catch(r){i.e(r)}finally{i.f()}}}]),e}(),ji=Object(V.a)(gi.prototype,"playing",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gi),Ji=new Yi,Vi=new Wi;d.recorder=Ji,d.player=Vi;var Ki=new(Ii=function(){function e(){Object(X.a)(this,e),this.defaultBackgroundFill=[255,255,255],this.defaultBackgroundColor=[255,255,255],Object(J.a)(this,"roomProps",Ei,this),Object(J.a)(this,"password",Pi,this),Object(J.a)(this,"newPassword",Mi,this),Object(J.a)(this,"passMatched",Ri,this),Object(J.a)(this,"backgroundFill",Di,this),Object(J.a)(this,"backgroundColor",Bi,this),Object(J.a)(this,"roomDetails",Ni,this),Object(fe.g)(this)}return Object(K.a)(e,[{key:"onUpdateProp",value:function(e,t){switch(void 0===t?this.roomProps.delete(e):this.roomProps.set(e,t),e){case"backgroundFill":this.backgroundFill=t?JSON.parse(t):this.defaultBackgroundFill;break;case"backgroundColor":this.backgroundColor=t?JSON.parse(t):this.defaultBackgroundColor;break;case"roomDetails":this.roomDetails=t?JSON.parse(t):this.roomDetails}}}]),e}(),Ei=Object(V.a)(Ii.prototype,"roomProps",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Pi=Object(V.a)(Ii.prototype,"password",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Mi=Object(V.a)(Ii.prototype,"newPassword",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ri=Object(V.a)(Ii.prototype,"passMatched",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Di=Object(V.a)(Ii.prototype,"backgroundFill",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.defaultBackgroundFill}}),Bi=Object(V.a)(Ii.prototype,"backgroundColor",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.defaultBackgroundColor}}),Ni=Object(V.a)(Ii.prototype,"roomDetails",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return JSON.stringify({name:"",image:"",desc:""})}}),Object(V.a)(Ii.prototype,"onUpdateProp",[fe.b],Object.getOwnPropertyDescriptor(Ii.prototype,"onUpdateProp"),Ii.prototype),Ii);function Xi(){"granted"!==Notification.permission&&"denied"!==Notification.permission&&Notification.requestPermission()}function Zi(e,t){"granted"===Notification.permission&&new Notification(e,t)}var qi=function(){},_i=function(){function e(t){Object(X.a)(this,e),this.connection=void 0,this.disposers=[],this.connection=t}return Object(K.a)(e,[{key:"sendAllAboutMe",value:function(e){qi("sendAllAboutMe called."),this.sendPoseMessage(e),this.sendMouseMessage(),On.local.sendInformation(),this.sendOnStage(),this.sendTrackStates(),this.sendViewpointNow(),this.sendMyContents(),this.sendAfkChanged()}},{key:"sendPoseMessage",value:function(e){var t=D(On.local.pose);this.connection.sendMessage(Rn.PARTICIPANT_POSE,t,void 0,e)}},{key:"sendMouseMessage",value:function(){var e=B(On.local.mouse);this.connection.sendMessage(Rn.PARTICIPANT_MOUSE,e)}},{key:"sendParticipantInfo",value:function(){if(On.local.informationToSend){this.connection.sendMessage(Rn.PARTICIPANT_INFO,Object(wn.a)({},On.local.informationToSend));for(var e=On.local.information.name;"_"===e.slice(0,1);)e=e.slice(1)}}},{key:"sendAudioLevel",value:function(){this.connection.sendMessage(Rn.AUDIO_LEVEL,On.local.audioLevel)}},{key:"sendOnStage",value:function(){this.connection.sendMessage(Rn.PARTICIPANT_ON_STAGE,On.local.physics.onStage)}},{key:"sendTrackStates",value:function(){this.connection.sendMessage(Rn.PARTICIPANT_TRACKSTATES,Object(wn.a)({},On.local.trackStates))}},{key:"sendViewpointNow",value:function(){this.connection.sendMessage(Rn.PARTICIPANT_VIEWPOINT,Object(wn.a)({},On.local.viewpoint))}},{key:"sendAfkChanged",value:function(){this.connection.sendMessage(Rn.PARTICIPANT_AFK,On.local.physics.awayFromKeyboard)}},{key:"sendTrackLimits",value:function(e,t){this.connection.sendMessage(Rn.PARTICIPANT_TRACKLIMITS,t||[On.local.remoteVideoLimit,On.local.remoteAudioLimit],e||void 0)}},{key:"sendVrmRig",value:function(){this.connection.sendMessage(Rn.PARTICIPANT_VRMRIG,On.local.vrmRigs),this.connection.flushSendMessages()}},{key:"sendContentUpdateRequest",value:function(e,t){var n=Dn(t);this.connection.sendMessage(Rn.CONTENT_UPDATE_REQUEST,n,e)}},{key:"sendContentRemoveRequest",value:function(e,t){this.connection.sendMessage(Rn.CONTENT_REMOVE_REQUEST,t,e)}},{key:"sendMyContents",value:function(){this.sendContentUpdateRequest("",Array.from(ea.roomContents.values()))}},{key:"onRoomProp",value:function(e,t){Ki.onUpdateProp(e,t)}},{key:"onParticipantTrackLimits",value:function(e){On.local.remoteVideoLimit=e[0],On.local.remoteAudioLimit=e[1]}},{key:"onParticipantVrmRig",value:function(e,t){if(e){var n=On.getRemote(e);n&&(n.vrmRigs=t)}}},{key:"onParticipantLeft",value:function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;Cn.participantLeft(i),On.leave(i)}}catch(o){n.e(o)}finally{n.f()}}},{key:"onChatMessage",value:function(e,t){r(e);var n=On.find(e);n&&Cn.addMessage(new yn(t.msg,n.id,n.information.name,n.information.avatarSrc,n.getColor(),t.ts,t.to?"private":"text"))}},{key:"onCallRemote",value:function(e){r(e);var t=On.find(e);t&&(Cn.calledBy(t),On.local.information.notifyCall&&Zi(ee("noCalled",{name:null===t||void 0===t?void 0:t.information.name}),{icon:"./favicon.ico"}))}},{key:"onAfkChanged",value:function(e,t){r(e);var n=On.find(e);n&&(n.physics.awayFromKeyboard=t)}},{key:"onKicked",value:function(e,t){var n,i=this;r(e),da.setType("kicked",null===(n=On.remote.get(e))||void 0===n?void 0:n.information.name,t);var o=window.localStorage.getItem("kickTimes"),a=void 0,s=[];this.connection.room&&(o&&(a=(s=JSON.parse(o)).find((function(e){return e.room===i.connection.room}))),a||(a={room:this.connection.room,time:0},s.push(a)),a.time=Date.now(),window.localStorage.setItem("kickTimes",JSON.stringify(s))),setTimeout((function(){window.location.reload()}),1e4)}},{key:"onParticipantOut",value:function(e){e.forEach((function(e){var t=On.find(e);t&&(t.physics.located=!1)}))}},{key:"onMouseOut",value:function(e){e.forEach((function(e){var t=On.find(e);t&&(t.mouse.position=[Qn,Qn])}))}},{key:"onContentOut",value:function(e){e.forEach((function(e){var t=ea.find(e);if(t){var n=Object.assign({},t);n.pose={position:[Qn,Qn],orientation:t.pose.orientation},ea.updateByRemoteRequest([n])}}))}},{key:"onParticipantInfo",value:function(e,t){if(r(e),null===o.testBot&&e!==On.localId){var n=On.getOrCreateRemote(e);if(!n)return;var i=n.information.name;Object.assign(n.information,t),i!==n.information.name&&(i===se.name?Cn.participantJoined(e):Cn.participantNameChanged(e,i)),n.informationReceived=!0,qi("Info of ".concat(e," received."))}}},{key:"onParticipantTrackState",value:function(e,t){if(r(e),null===o.testBot&&e!==On.localId){var n=On.getRemote(e);if(!n)return;Object.assign(n.trackStates,t)}}},{key:"onParticipantPose",value:function(e,t){if(r(e),e!==On.localId){var n=On.getRemote(e);if(!n)return;var i=N(t),o=On.local;if(n.pose.orientation=i.orientation,n.pose.position=i.position,n.physics.located=!0,o.information.notifyNear||o.information.notifyTouch){var a=x(A(n.pose.position,o.pose.position));n.lastDistance>60&&a<=60&&o.information.notifyTouch?Zi(ee("noTouched",{name:n.information.name}),{icon:"./favicon.ico"}):n.lastDistance>180&&a<180&&o.information.notifyNear&&Zi(ee("noNear",{name:n.information.name}),{icon:"./favicon.ico"}),n.lastDistance=a}}}},{key:"onParticipantAudioLevel",value:function(e,t){if(e&&e!==On.localId){var n=On.getRemote(e);n&&(n.audioLevel=t)}}},{key:"onParticipantMouse",value:function(e,t){r(e);var n=z(t);if(null===o.testBot&&e!==On.localId){var i=On.getRemote(e);i&&Object.assign(i.mouse,n)}}},{key:"onParticipantOnStage",value:function(e,t){if(r(e),e!==On.localId){var n=On.getRemote(e);n&&(n.physics.onStage=t)}}},{key:"onParticipantViewpoint",value:function(e,t){if(r(e),null===o.testBot&&e!==On.localId){var n=On.getRemote(e);n&&Object.assign(n.viewpoint,t)}}},{key:"onYarnPhone",value:function(e,t){if(r(e),t.find((function(e){return e===On.localId}))){if(!On.yarnPhones.has(e)&&(On.yarnPhones.add(e),On.local.information.notifyYarn)){var n=On.find(e);n&&Zi(ee("noYarn",{name:n.information.name}),{icon:"./favicon.ico"})}}else On.yarnPhones.delete(e)}},{key:"onMuteVideo",value:function(e){var t={};On.local.loadMediaSettingsFromStorage(t),On.local.muteVideo=e||t.stream.muteVideo}},{key:"onMuteAudio",value:function(e){var t={};On.local.loadMediaSettingsFromStorage(t),On.local.muteAudio=e||t.stream.muteAudio}},{key:"onReloadBrower",value:function(){window.location.reload()}},{key:"onContentInfoUpdate",value:function(e){r(config.bmRelayServer),e.forEach((function(e){return ea.roomContentsInfo.set(e.id,e)}))}},{key:"onContentUpdateRequest",value:function(e){var t=Bn(e);ea.updateByRemoteRequest(t)}},{key:"onContentRemoveRequest",value:function(e){ea.removeByRemoteRequest(e)}},{key:"observeStart",value:function(){var e=this;this.disposers.push(Object(fe.c)((function(){On.remote.forEach((function(t){t.called&&(t.called=!1,e.connection.sendMessage(Rn.CALL_REMOTE,{},t.id),Cn.callTo(t))}))}))),this.disposers.push(Object(fe.c)(this.sendAfkChanged.bind(this))),this.disposers.push(Object(fe.c)(this.sendParticipantInfo.bind(this))),this.disposers.push(Object(fe.c)(this.sendAudioLevel.bind(this))),this.disposers.push(Object(fe.c)(this.sendTrackStates.bind(this))),this.disposers.push(Object(fe.c)(this.sendPoseMessage.bind(this,!1))),this.disposers.push(Object(fe.c)(this.sendMouseMessage.bind(this))),this.disposers.push(Object(fe.c)(this.sendViewpointNow.bind(this))),this.disposers.push(Object(fe.c)(this.sendOnStage.bind(this))),this.disposers.push(Object(fe.c)(this.sendVrmRig.bind(this)));this.disposers.push(Object(fe.c)((function(){On.yarnPhoneUpdated&&(On.yarnPhoneUpdated=!1,e.connection.sendMessage(Rn.YARN_PHONE,Array.from(On.yarnPhones)))})))}},{key:"observeEnd",value:function(){this.disposers.forEach((function(e){return e()}))}},{key:"onBmMessage",value:function(e){qi("Recv data msg: ".concat(e.map((function(e){return e.t})).reduce((function(e,t){return"".concat(e," ").concat(t)}),""),"."));var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;switch(Ji.recordMessage(i),i.t){case Rn.ROOM_PROP:this.onRoomProp.apply(this,Object(p.a)(JSON.parse(i.v)));break;case Rn.REQUEST_TO:this.sendAllAboutMe(!1);break;case Rn.PARTICIPANT_AFK:this.onAfkChanged(i.p,JSON.parse(i.v));break;case Rn.PARTICIPANT_LEFT:this.onParticipantLeft(JSON.parse(i.v));break;case Rn.CALL_REMOTE:this.onCallRemote(i.p);break;case Rn.CHAT_MESSAGE:this.onChatMessage(i.p,JSON.parse(i.v));break;case Rn.CONTENT_REMOVE_REQUEST:this.onContentRemoveRequest(JSON.parse(i.v));break;case Rn.CONTENT_UPDATE_REQUEST:this.onContentUpdateRequest(JSON.parse(i.v));break;case Rn.CONTENT_INFO_UPDATE:this.onContentInfoUpdate(JSON.parse(i.v));break;case Rn.PARTICIPANT_INFO:this.onParticipantInfo(i.p,JSON.parse(i.v));break;case Rn.PARTICIPANT_MOUSE:this.onParticipantMouse(i.p,JSON.parse(i.v));break;case Rn.PARTICIPANT_POSE:this.onParticipantPose(i.p,JSON.parse(i.v));break;case Rn.PARTICIPANT_ON_STAGE:this.onParticipantOnStage(i.p,JSON.parse(i.v));break;case Rn.PARTICIPANT_TRACKSTATES:this.onParticipantTrackState(i.p,JSON.parse(i.v));break;case Rn.PARTICIPANT_VIEWPOINT:this.onParticipantViewpoint(i.p,JSON.parse(i.v));break;case Rn.AUDIO_LEVEL:this.onParticipantAudioLevel(i.p,JSON.parse(i.v));break;case Rn.PARTICIPANT_TRACKLIMITS:this.onParticipantTrackLimits(JSON.parse(i.v));break;case Rn.PARTICIPANT_VRMRIG:this.onParticipantVrmRig(i.p,JSON.parse(i.v));break;case Rn.YARN_PHONE:this.onYarnPhone(i.p,JSON.parse(i.v));break;case Rn.RELOAD_BROWSER:this.onReloadBrower();break;case Rn.MUTE_VIDEO:this.onMuteVideo(JSON.parse(i.v));break;case Rn.MUTE_AUDIO:this.onMuteAudio(JSON.parse(i.v));break;case Rn.KICK:this.onKicked(i.p,JSON.parse(i.v));break;case Rn.PARTICIPANT_OUT:this.onParticipantOut(JSON.parse(i.v));break;case Rn.MOUSE_OUT:this.onMouseOut(JSON.parse(i.v));break;case Rn.CONTENT_OUT:this.onContentOut(JSON.parse(i.v));break;default:console.log("Unhandled message type ".concat(i.t," from ").concat(i.p))}}}catch(o){n.e(o)}finally{n.f()}this.checkInfo()}},{key:"checkInfo",value:function(){var e=Array.from(On.remote.values()).filter((function(e){return!e.informationReceived})).map((function(e){return e.id}));e.length&&(qi("checkInfo sent ".concat(e)),this.connection.pushOrUpdateMessageViaRelay(Rn.REQUEST_TO,e))}}]),e}(),$i=function(){function e(){Object(X.a)(this,e),this.context=void 0,this.analyser=void 0,this.source=void 0,this.BUFFERLEN=32}return Object(K.a)(e,[{key:"setSource",value:function(e){var t,n,i;null===(t=this.source)||void 0===t||t.disconnect(),null===(n=this.analyser)||void 0===n||n.disconnect(),null===(i=this.context)||void 0===i||i.close(),this.source=void 0,this.analyser=void 0,this.context=void 0,e&&(this.context=new AudioContext,this.analyser=this.context.createAnalyser(),this.source=this.context.createMediaStreamSource(new MediaStream([e.track])),this.analyser&&this.source&&(this.source.connect(this.analyser),this.analyser.fftSize=this.BUFFERLEN))}},{key:"getAudioLevel",value:function(){var e;if(!this.context)return 0;"suspended"===this.context.state&&this.context.resume();var t=new Float32Array(this.BUFFERLEN);return null===(e=this.analyser)||void 0===e||e.getFloatTimeDomainData(t),t.reduce((function(e,t){return e+Math.abs(t)}),0)/this.BUFFERLEN}}]),e}(),eo=function(e){},to=100,no=new Set(Pn);no.add(Mn.CONTENT_UPDATE_REQUEST_BY_ID),no.add(Mn.REQUEST_PARTICIPANT_STATES);var io,oo,ao,ro=function(){function e(){Object(X.a)(this,e),this.relaySocket=void 0,this.peer_="",this.room_="",this.lastRequestTime=Date.now(),this.lastReceivedTime=Date.now(),this.messagesToSendToRelay=[],this.relayRttLast=50,this.relayRttAverage=50,this.sync_=new _i(this),this.audioMeter_=new $i,this.stopStep=!1,this.receivedMessages=[]}return Object(K.a)(e,[{key:"peer",get:function(){return this.peer_}},{key:"room",get:function(){return this.room_}},{key:"sync",get:function(){return this.sync_}},{key:"audioMeter",get:function(){return this.audioMeter_}},{key:"isConnected",value:function(){var e;return(null===(e=this.relaySocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}},{key:"setRoomProp",value:function(e,t){this.pushOrUpdateMessageViaRelay(Rn.ROOM_PROP,[e,t]),Ki.onUpdateProp(e,t)}},{key:"connect",value:function(e,t){var n=this;return this.room_=e,this.peer_=t,eo("connect(".concat(e,", ").concat(t,")")),new Promise((function(e,t){if(config.bmRelayServer)if(n.relaySocket)e();else{var i=function(){eo("dataConn socket onOpen"),n.messagesToSendToRelay=[],n.sync.sendAllAboutMe(!0),n.pushOrUpdateMessageViaRelay(Rn.REQUEST_ALL,{}),n.flushSendMessages()},o=function(e){if("string"===typeof e.data){n.lastReceivedTime=Date.now(),n.relayRttLast=n.lastReceivedTime-n.lastRequestTime;var t,i=JSON.parse(e.data);if(i.length)(t=n.receivedMessages).push.apply(t,Object(p.a)(i));i.length&&(n.relayRttAverage=.3*n.relayRttLast+.7*n.relayRttAverage)}},a=function(){setTimeout((function(){n.relaySocket=new WebSocket(config.bmRelayServer),s()}),5e3)},r=function(){var e;console.error("Error in WebSocket for ".concat(config.bmRelayServer)),null===(e=n.relaySocket)||void 0===e||e.close(3e3,"onError"),a()},s=function(){var e,t,s,c;null===(e=n.relaySocket)||void 0===e||e.addEventListener("error",r),null===(t=n.relaySocket)||void 0===t||t.addEventListener("message",o),null===(s=n.relaySocket)||void 0===s||s.addEventListener("open",i),null===(c=n.relaySocket)||void 0===c||c.addEventListener("close",a)};n.relaySocket=new WebSocket(config.bmRelayServer),s(),n.step(),n.sync.observeStart(),n.sync.sendAllAboutMe(!0)}else t()}))}},{key:"disconnect",value:function(){var e;config.bmRelayServer&&this.peer&&(this.sync.observeEnd(),this.pushOrUpdateMessageViaRelay(Rn.PARTICIPANT_LEFT,[this.peer]),this.flushSendMessages()),this.stopStep=!0,this.room_="",this.peer_="",null===(e=this.relaySocket)||void 0===e||e.close(),this.relaySocket=void 0}},{key:"updateAudioLevel",value:function(){On.local.trackStates.micMuted?On.local.setAudioLevel(0):On.local.setAudioLevel(this.audioMeter.getAudioLevel())}},{key:"step",value:function(){var e,t=this;if((null===(e=this.relaySocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN){for(var n=Date.now()+40;Date.now()<n&&this.receivedMessages.length;){var i=this.receivedMessages.shift();i&&this.sync.onBmMessage([i])}var o=(to=Math.min(Math.max(this.relayRttAverage-20,0)+20,3e3))+2e4,a=Date.now();if(a<n&&this.relaySocket&&!this.receivedMessages.length&&a-this.lastRequestTime>to&&(this.lastReceivedTime>=this.lastRequestTime||a-this.lastRequestTime>o)){this.lastRequestTime=a;var r=Ji.recording?[-1e4,1e4,1e4,-1e4]:la.visibleArea();this.pushOrUpdateMessageViaRelay(Rn.REQUEST_RANGE,[r,On.audibleArea()]),this.updateAudioLevel(),this.flushSendMessages()}}this.stopStep?this.stopStep=!1:setTimeout((function(){t.step()}),50)}},{key:"sendMessage",value:function(e,t,n,i){this.pushOrUpdateMessageViaRelay(e,t,n,i)}},{key:"pushOrUpdateMessageViaRelay",value:function(e,t,n,i){if(r(config.bmRelayServer),this.relaySocket&&this.relaySocket.readyState===WebSocket.OPEN)if(this.room&&this.peer){var o={t:e,v:""};i&&(o.r=this.room,o.p=this.peer),n&&(o.d=n);var s=this.messagesToSendToRelay.findIndex((function(e){return e.t===o.t&&e.r===o.r&&e.p===o.p&&e.d===o.d}));if(s>=0)if(no.has(o.t)){var c,l=JSON.parse(this.messagesToSendToRelay[s].v),u=Object(a.a)(t);try{var d=function(){var e=c.value;l.findIndex((function(t){return t===e}))<0&&l.push(e)};for(u.s();!(c=u.n()).done;)d()}catch(f){u.e(f)}finally{u.f()}this.messagesToSendToRelay[s].v=JSON.stringify(l)}else if(In.has(o.t)){var p,h=JSON.parse(this.messagesToSendToRelay[s].v),v=Object(a.a)(t);try{var m=function(){var e=p.value,t=h.findIndex((function(t){return t.id===e.id}));t>=0?h[t]=e:h.push(e)};for(v.s();!(p=v.n()).done;)m()}catch(f){v.e(f)}finally{v.f()}this.messagesToSendToRelay[s].v=JSON.stringify(h)}else o.v=JSON.stringify(t),this.messagesToSendToRelay[s]=o;else o.v=JSON.stringify(t),this.messagesToSendToRelay.push(o);Ji.recording&&(o.p=this.peer,Ji.recordMessage(o))}else console.warn("Relay Socket: Not connected. room:".concat(this.room," id:").concat(this.peer,"."))}},{key:"flushSendMessages",value:function(){var e,t,n=this;0!==this.messagesToSendToRelay.length&&((null===(e=this.relaySocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?(this.relaySocket.send(JSON.stringify(this.messagesToSendToRelay)),this.messagesToSendToRelay=[]):null===(t=this.relaySocket)||void 0===t||t.addEventListener("open",(function(){!function e(){var t,i;(null===(t=n.relaySocket)||void 0===t?void 0:t.readyState)!==WebSocket.OPEN?setTimeout(e,100):(null===(i=n.relaySocket)||void 0===i||i.send(JSON.stringify(n.messagesToSendToRelay)),n.messagesToSendToRelay=[])}()})))}}]),e}(),so=console.log;console.debug;function co(e){return"avatar"===e.role?e.peer.peer:e.role}function lo(e){if("avatar"===e.role){var t=On.getRemote(e.peer.peer);return t?{id:e.peer.peer,producer:e,onStage:"audio"===e.kind&&(t.physics.onStage||On.yarnPhones.has(t.id)||t.inLocalsZone),pose:Object(wn.a)({},t.pose),size:[0,0],offset:0,priority:0,muted:"audio"===e.kind?t.muteAudio:t.muteVideo}:void 0}if("mainScreen"===e.role)return{id:e.role,producer:e,onStage:!0,pose:{position:[0,0],orientation:0},size:[0,0],offset:-6e3,priority:0,muted:!1};var n=ea.find(e.role);return n?{id:e.role,producer:e,onStage:!1,pose:Object(wn.a)({},n.pose),size:n.size,offset:"video"===e.kind?-600:0,priority:0,muted:!1}:void 0}function uo(e){return{id:e.id,pose:Object(wn.a)({},e.pose),onStage:!1}}function po(e,t){return{videos:e.videos.filter((function(e){return!t.videos.find((function(t){return e.id===t.id}))})),audios:e.audios.filter((function(e){return!t.audios.find((function(t){return e.id===t.id}))}))}}function ho(e){return[].concat(Object(p.a)(e.audios),Object(p.a)(e.videos))}var vo=(io=fe.h.ref,oo=function(){function e(t){var n=this;Object(X.a)(this,e),this.local=void 0,this.updateAll=!0,this.updateSet=new Set,this.limits=[-1,-1],this.limitUpdated=!1,this.priorityMaps=[new Map,new Map],this.lastContentVideos=[],this.lastParticipantVideos=[],this.lastAudios=[],Object(J.a)(this,"tracksToConsume",ao,this),this.disposers=[],this._enabled=!1,this.conference=void 0,this.UPDATE_INTERVAL=500,this.intervalId=0,this.remoteDisposers=new Map;this.conference=t;var i=void 0;this.conference.rtcConnection.addListener("connect",(function(){n.enable(),i=window.setInterval((function(){n.update()}),500)})),this.conference.rtcConnection.addListener("disconnect",(function(){n.disable(),void 0!==i&&clearInterval(i)})),Object(fe.c)((function(){var e=On.local;n.setLimits([e.remoteVideoLimit,e.remoteAudioLimit])})),this.local=uo(On.local),Object(fe.g)(this)}return Object(K.a)(e,[{key:"clear",value:function(){this.disable(),this.updateAll=!0,this.updateSet.clear(),this.priorityMaps.forEach((function(e){return e.clear()})),this.tracksToConsume={videos:[],audios:[]},this.lastContentVideos=[],this.lastParticipantVideos=[],this.lastAudios=[]}},{key:"setLimits",value:function(e){this.limits[0]=e[0],this.limits[1]=e[1],this.limitUpdated=!0}},{key:"enable",value:function(){var e=this,t=Object(fe.c)((function(){var t=On.local;e.local=uo(t),e.updateAll=!0}));this.disposers=[t],this.intervalId=window.setInterval((function(){e.update()}),this.UPDATE_INTERVAL),this.updateAll=!0,this._enabled=!0}},{key:"disable",value:function(){window.clearInterval(this.intervalId),this.intervalId=0,this.disposers.forEach((function(e){return e()})),this._enabled=!1}},{key:"update",value:function(){this.haveUpdates&&(this.calcPriority(),this.updateAll=!1,this.updateSet.clear(),this.limitUpdated=!1)}},{key:"calcPriority",value:function(){var e=this,t=[];this.conference.remotePeers.forEach((function(n){var i,o=Object(a.a)(n.producers);try{for(o.s();!(i=o.n()).done;){var r=i.value,s=co(r);if(e.updateAll||e.updateSet.has(s))if("mainScreen"===r.role)t.push(r);else{var c=lo(r);c&&(c.priority=e.calcPriorityValue(e.local,c),e.priorityMaps["video"===r.kind?0:1].set(s,c))}}}catch(l){o.e(l)}finally{o.f()}}));for(var n=this.priorityMaps.map((function(e){return Array.from(e.values()).sort((function(e,t){return e.priority-t.priority}))})),i=0,o=t;i<o.length;i++){var r=o[i],s=lo(r);s&&(n["video"===r.kind?0:1].unshift(s),this.conference.removeLocalTrackByRole("mainScreen"))}var c=n[0].filter((function(e){return!e.muted}));c.length>this.limits[0]&&(c.length=this.limits[0]);var l=n[1].filter((function(e){return!e.muted}));c.length>this.limits[1]&&(c.length=this.limits[1]),this.tracksToConsume={videos:c,audios:l}}},{key:"calcPriorityValue",value:function(e,t){if(t.onStage)return 0;var n=t.size.map((function(n,i){var o=t.pose.position[i]-e.pose.position[i];return o<0&&(o+=n)>0&&(o=0),o}));return Math.sqrt(n[0]*n[0]+n[1]*n[1])+t.offset}},{key:"haveUpdates",get:function(){return this.updateAll||0!==this.updateSet.size||this.limitUpdated}},{key:"onRemoveProducer",value:function(e){var t=e.peer.producers.filter((function(t){return t.role===e.role})),n=co(e),i="audio"===e.kind?1:0;this.priorityMaps[i].delete(n),0===t.length?"mainScreen"!==n&&this.onRemoveObject(n):this.updateSet.add(n)}},{key:"onRemoveObject",value:function(e){var t=this.remoteDisposers.get(e);if(void 0===t)throw new Error("Cannot find disposer for remote object with id: ".concat(e));t(),this.remoteDisposers.delete(e),this.updateSet.add(e),so("onRemoveObject:",e,this.priorityMaps[0])}},{key:"onAddProducer",value:function(e){var t=this,n=co(e);this.remoteDisposers.has(n)?this.updateSet.add(n):"avatar"===e.role?this.remoteDisposers.set(n,Object(fe.c)((function(){var e=On.remote.get(n);if(e){e.physics.onStage||On.yarnPhones.has(e.id),e.pose.position;t.updateSet.add(n)}}))):"mainScreen"===e.role?this.updateSet.add(n):this.remoteDisposers.set(n,Object(fe.c)((function(){var e=ea.roomContents.get(n);if(function(e){return e&&("camera"===e.type||"screen"===e.type)}(e))e.pose.position;t.updateSet.add(n)})))}}]),e}(),ao=Object(V.a)(oo.prototype,"tracksToConsume",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{videos:[],audios:[]}}}),oo);function mo(e,t){return e.kind===t.kind&&e.role===t.role}var fo=new Set(Pn);function bo(e){var t;return null===e||void 0===e||null===(t=e.transport)||void 0===t?void 0:t.appData.stat}fo.add(Mn.CONTENT_UPDATE_REQUEST_BY_ID),fo.add(Mn.REQUEST_PARTICIPANT_STATES);var go,jo,Ao,Oo,yo,xo,Co,wo,So,ko,To,Io,Eo,Po,Mo,Ro,Do,Bo,No,zo,Fo,Lo,Uo,Qo=new(function(){function e(){var t=this;Object(X.a)(this,e),this.room_="",this.rtcConnection_=new xi,this.remotePeers_=new Map,this.localProducers=[],this.sendTransport_=void 0,this.priorityCalculator=void 0,this.dataConnection_=new ro,this.localMicTrack=void 0,this.localCameraTrack=void 0,this.rtcConnection.addListener("remoteUpdate",this.onRemoteUpdate.bind(this)),this.rtcConnection.addListener("remoteLeft",this.onRemoteLeft.bind(this)),this.priorityCalculator=new vo(this);var n={videos:[],audios:[]};Object(fe.c)((function(){var e,i=ho(po(t.priorityCalculator.tracksToConsume,n)),o=ho(po(n,t.priorityCalculator.tracksToConsume)),r=Object(a.a)(i);try{for(r.s();!(e=r.n()).done;){var s=e.value;s.producer.consumer||t.addConsumer(s.producer)}}catch(d){r.e(d)}finally{r.f()}var c,l=Object(a.a)(o);try{for(l.s();!(c=l.n()).done;){var u=c.value;t.removeConsumer(u.producer)}}catch(d){l.e(d)}finally{l.f()}n=t.priorityCalculator.tracksToConsume}))}return Object(K.a)(e,[{key:"room",get:function(){return this.room_}},{key:"rtcConnection",get:function(){return this.rtcConnection_}},{key:"remotePeers",get:function(){return this.remotePeers_}},{key:"dataConnection",get:function(){return this.dataConnection_}},{key:"isDataConnected",value:function(){return this.dataConnection.isConnected()}},{key:"isRtcConnected",value:function(){return this.rtcConnection.isConnected()}},{key:"enter",value:function(e){var t=this,n=new Promise((function(n,i){var o=window.localStorage.getItem("kickTimes");if(o){var a=JSON.parse(o).find((function(e){return e.room===t.room}));if(a){if(Date.now()-a.time<9e5)return window.location.reload(),void i("kicked")}}var r=On.local.information.name.substring(0,4);t.rtcConnection.connect(e,r).then((function(o){for(var a in On.setLocalId(o),On.local.devicePreference)void 0===On.local.devicePreference[a]&&(On.local.devicePreference[a]="");t.dataConnection.connect(e,o).then((function(){t.dataConnection.sync.sendAllAboutMe(!0),n()})).catch(i)})).catch(i)}));return d.conference=this,n}},{key:"leave",value:function(){this.dataConnection.disconnect(),this.rtcConnection.disconnect(),this.room_=""}},{key:"createTransport",value:function(e,t){var n=this;return"receive"!==e||t||console.error("createTransport(); remote must be specified for receive transport."),new Promise((function(i,o){n.rtcConnection.createTransport(e,null===t||void 0===t?void 0:t.peer).then((function(s){s.on("connect",(function(e,i,a){var r=e.dtlsParameters;n.rtcConnection.connectTransport(s,r,null===t||void 0===t?void 0:t.peer).then((function(){i()})).catch((function(e){console.error("error in connecting transport:".concat(e)),o()}))})),"send"===e&&s.on("produce",(function(e,t,i){var a=e.kind,r=e.rtpParameters,c=e.appData,l=c.track;n.rtcConnection.produceTransport({transport:s.id,kind:a,role:l.role,rtpParameters:r,paused:!1,appData:c}).then((function(e){t({id:e})})).catch((function(e){console.error("error setting up server-side producer",e),i(e),o()}))})),s.on("connectionstatechange",(function(i){if("receive"===e&&"connected"===i){r(t);var o,s=Array.from(t.producers.values()).map((function(e){return e.consumer})).filter((function(e){return e})),c=Object(a.a)(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;n.rtcConnection.resumeConsumer(l.id,t.peer),l.resume()}}catch(u){c.e(u)}finally{c.f()}}})),i(s)})).catch(o)}))}},{key:"getSendTransport",value:function(){var e=this;return new Promise((function(t,n){e.sendTransport?t(e.sendTransport):e.createTransport("send").then((function(n){e.sendTransport_=n,t(n)})).catch(n)}))}},{key:"getReceiveTransport",value:function(e){var t=this;return new Promise((function(n,i){e.transport?n(e.transport):t.createTransport("receive",e).then((function(t){e.transport=t,n(t)})).catch(i)}))}},{key:"sendTransport",get:function(){return this.sendTransport_}},{key:"sendTransportStat",get:function(){var e;return null===(e=this.sendTransport_)||void 0===e?void 0:e.appData.stat}},{key:"addOrReplaceLocalTrack",value:function(e,t){var n=this;return new Promise((function(i,o){"avatar"===e.role?"audio"===e.track.kind?On.local.tracks.audio=e.track:On.local.tracks.avatar=e.track:(ea.addTrack(e.peer,e.role,e.track),"video"===e.track.kind&&e.track.addEventListener("ended",(function(){ea.removeByLocal(e.role)})));var a=n.localProducers.find((function(t){var n=t.appData.track;return n.role===e.role&&n.track.kind===e.track.kind}));a?a.replaceTrack(e).then((function(){a.appData.track=e,i(a)})).catch(o):n.getSendTransport().then((function(o){o.produce({track:e.track,encodings:t?[{maxBitrate:t}]:void 0,appData:{track:e}}).then((function(e){n.localProducers.push(e),i(e)}))}))}))}},{key:"removeLocalTrack",value:function(e){r(e.peer===this.rtcConnection.peer),this.removeLocalTrackByRole(e.role,e.track.kind)}},{key:"removeLocalTrackByRole",value:function(e,t){var n=this;"avatar"===e?("audio"!==t&&t||(On.local.tracks.audio=void 0),"video"!==t&&t||(On.local.tracks.avatar=void 0)):ea.removeTrack(this.rtcConnection.peer,e,t),this.localProducers.forEach((function(i){var o=i.appData.track;o.role!==e||t&&t!==o.track.kind||(i.close(),n.rtcConnection.closeProducer(i.id),n.localProducers=n.localProducers.filter((function(e){return e!==i})))}))}},{key:"closeTrack",value:function(e,t,n){var i=this;return new Promise((function(o,a){var r=i.remotePeers.get(e);if(r){var s=0;r.producers.forEach((function(e){e.role!==t||n&&e.kind!==n||(s++,i.getConsumer(e).then((function(e){e.close(),0===--s&&o()})))}))}else a()}))}},{key:"getConsumer",value:function(e){var t=this;return new Promise((function(n,i){e.consumer?n(e.consumer):t.getReceiveTransport(e.peer).then((function(o){t.rtcConnection.consumeTransport(o.id,e).then((function(a){o.consume(a).then((function(i){e.consumer=i,"connected"===o.connectionState&&t.rtcConnection.resumeConsumer(i.id,e.peer.peer).then((function(){})),n(i)})).catch(i)})).catch(i)})).catch(i)}))}},{key:"setLocalMicTrack",value:function(e){var t=this;return new Promise((function(n,i){e!==t.localMicTrack?(t.localMicTrack&&t.removeLocalTrack(t.localMicTrack),t.localMicTrack=e,t.dataConnection.audioMeter.setSource(t.localMicTrack),e?t.addOrReplaceLocalTrack(e,98304).then((function(){n()})).catch(i):n()):n()}))}},{key:"doSetLocalCameraTrack",value:function(e){var t=this;return new Promise((function(n,i){t.localCameraTrack=e,t.localCameraTrack?t.addOrReplaceLocalTrack(t.localCameraTrack,131072).then(n).catch(i):n()}))}},{key:"setLocalCameraTrack",value:function(e){var t=this;return new Promise((function(n,i){e?e===t.localCameraTrack?n():(t.localCameraTrack&&t.removeLocalTrack(t.localCameraTrack),t.doSetLocalCameraTrack(e).then((function(){n()}))):t.localCameraTrack?(t.removeLocalTrack(t.localCameraTrack),t.doSetLocalCameraTrack(e).then((function(){n()}))):n()}))}},{key:"getLocalMicTrack",value:function(){return this.localMicTrack}},{key:"getLocalCameraTrack",value:function(){return this.localCameraTrack}},{key:"onRemoteUpdate",value:function(e){var t,n=this,i=e[0],o=Object(a.a)(i);try{var r=function(){var e=t.value;if(e.peer===n.rtcConnection.peer)return"continue";var i=n.remotePeers.get(e.peer);if(i){var o,r=[],s=i.producers.filter((function(t){return!e.producers.find((function(e){return mo(t,e)}))})),c=Object(a.a)(e.producers);try{var l=function(){var e=o.value,t=i.producers.find((function(t){return mo(t,e)}));t?t.id!==e.id&&(r.push(e),s.push(t)):r.push(e)};for(c.s();!(o=c.n()).done;)l()}catch(h){c.e(h)}finally{c.f()}var u=r.map((function(e){return Object(wn.a)(Object(wn.a)({},e),{},{peer:i})}));s.length&&n.onProducerRemoved(s,i),u.length&&n.onProducerAdded(u,i)}else{var d={peer:e.peer,producers:[]},p=e.producers.map((function(e){return Object(wn.a)(Object(wn.a)({},e),{},{peer:d})}));n.remotePeers.set(e.peer,d),n.onProducerAdded(p,d)}};for(o.s();!(t=o.n()).done;)r()}catch(s){o.e(s)}finally{o.f()}}},{key:"onRemoteLeft",value:function(e){var t,n=e[0],i=Object(a.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o!==this.rtcConnection.peer){var r=this.remotePeers.get(o);r&&this.onProducerRemoved(r.producers,r),this.remotePeers.delete(o),On.leave(o)}}}catch(s){i.e(s)}finally{i.f()}}},{key:"onProducerAdded",value:function(e,t){var n,i=Object(p.a)(e);(n=t.producers).push.apply(n,Object(p.a)(i));var o,r=Object(a.a)(i);try{for(r.s();!(o=r.n()).done;){var s=o.value;this.priorityCalculator.onAddProducer(s)}}catch(c){r.e(c)}finally{r.f()}}},{key:"onProducerRemoved",value:function(e,t){var n=Object(p.a)(e);t.producers=t.producers.filter((function(e){return n.find((function(t){return!mo(e,t)}))}));var i,o=Object(a.a)(e);try{for(o.s();!(i=o.n()).done;){var r=i.value;this.removeConsumer(r),this.priorityCalculator.onRemoveProducer(r)}}catch(s){o.e(s)}finally{o.f()}}},{key:"addConsumer",value:function(e){this.getConsumer(e).then((function(t){"avatar"===e.role?On.addRemoteTrack(e.peer.peer,t.track):ea.addTrack(e.peer.peer,e.role,t.track)})).catch((function(e){console.error("conference.onProducerAdded(): ".concat(e))}))}},{key:"removeConsumer",value:function(e){e.consumer&&(e.consumer.close(),e.consumer=void 0,"avatar"===e.role?On.removeRemoteTrack(e.peer.peer,e.kind):ea.removeTrack(e.peer.peer,e.role,e.kind))}}]),e}()),Go=function(e){},Yo=35;function Ho(e,t){return e.zorder-t.zorder}var Wo=new(go=fe.h.shallow,jo=fe.h.shallow,Ao=fe.h.shallow,Oo=fe.h.shallow,yo=fe.h.shallow,xo=fe.h.shallow,Co=fe.h.ref,wo=fe.h.deep,So=fe.h.ref,ko=function(e){Object(je.a)(n,e);var t=Object(Ae.a)(n);function n(){var e;Object(X.a)(this,n),(e=t.call(this)).contentIdCounter=0,e.beforeChangeEditing=void 0,Object(J.a)(e,"pasteEnabled",To,Object(ge.a)(e)),Object(J.a)(e,"editing",Io,Object(ge.a)(e)),Object(J.a)(e,"all",Eo,Object(ge.a)(e)),e.sorted=[],Object(J.a)(e,"zones",Po,Object(ge.a)(e)),Object(J.a)(e,"closedZones",Mo,Object(ge.a)(e)),Object(J.a)(e,"roomContents",Ro,Object(ge.a)(e)),Object(J.a)(e,"roomContentsInfo",Do,Object(ge.a)(e)),Object(J.a)(e,"playbackContents",Bo,Object(ge.a)(e)),Object(J.a)(e,"mainScreenStream",No,Object(ge.a)(e)),Object(J.a)(e,"mainScreenOwner",zo,Object(ge.a)(e)),Object(J.a)(e,"contentTracks",Fo,Object(ge.a)(e)),Object(J.a)(e,"pasted",Lo,Object(ge.a)(e)),e.wallpapers="",Object(J.a)(e,"screenFps",Uo,Object(ge.a)(e)),Object(fe.g)(Object(ge.a)(e));var i=localStorage.getItem("screenFps");return i&&(e.screenFps=JSON.parse(i)),Object(fe.c)((function(){localStorage.setItem("screenFps",JSON.stringify(e.screenFps))})),Object(fe.c)((function(){var t=On.local.pose.position;On.local.zone=e.zones.find((function(e){return M(t,30,P(e.pose,e.size))}))})),Object(fe.c)((function(){var t=e.closedZones.map((function(e){return{content:e,rect:P(e.pose,e.size)}}));On.remote.forEach((function(e){if(!e.muteAudio&&e.physics.located){var n=t.find((function(t){return M(e.pose.position,30,t.rect)}));e.closedZone=null===n||void 0===n?void 0:n.content}else e.closedZone=void 0}))})),e}return Object(K.a)(n,[{key:"setEditing",value:function(e){e!==this.editing&&this.beforeChangeEditing&&this.beforeChangeEditing(this.editing,e),this.editing=e}},{key:"setBeforeChangeEditing",value:function(e,t){t&&t!==this.editing||(this.beforeChangeEditing=e)}},{key:"getContentTracks",value:function(e){return this.contentTracks.get(e)}},{key:"getContentTrack",value:function(e,t){var n,i=null===(n=this.contentTracks.get(e))||void 0===n?void 0:n.tracks;return null===i||void 0===i?void 0:i.find((function(e){return e.kind===t}))}},{key:"getOrCreateContentTracks",value:function(e,t){this.contentTracks.has(t)||this.contentTracks.set(t,{peer:e,tracks:[]});var n=this.contentTracks.get(t);return e&&(r(!n.peer||n.peer===e),n.peer=e),n}},{key:"addTrack",value:function(e,t,n){if("mainScreen"===t){var i,o=new MediaStream;if(o.addTrack(n),this.mainScreenOwner!==e)this.mainScreenOwner=e,this.mainScreenStream=o;else null===(i=this.mainScreenStream)||void 0===i||i.getTracks().forEach((function(e){o.addTrack(e)})),this.mainScreenStream=o}else{this.getOrCreateContentTracks(e,t).tracks.push(n)}}},{key:"removeTrack",value:function(e,t,n){if("mainScreen"===t){if(this.mainScreenOwner===e){var i,o,a=new MediaStream;if(n)if("audio"===n)null===(i=this.mainScreenStream)||void 0===i||i.getVideoTracks().forEach(a.addTrack);else null===(o=this.mainScreenStream)||void 0===o||o.getAudioTracks().forEach(a.addTrack);a.getTracks().length?this.mainScreenStream=a:this.mainScreenStream=void 0,this.mainScreenOwner=void 0}}else{var r,s=null===(r=this.contentTracks.get(t))||void 0===r?void 0:r.tracks;if(s)if(n){var c=s.findIndex((function(e){return e.kind===n}));c>=0&&(s[c].stop(),s.splice(c,1))}else s.forEach((function(e){e.stop()})),s.length=0;else console.error("removeRemoteTrack(): tracks for content ".concat(t," not found."))}}},{key:"getAllRtcContentIds",value:function(){return Array.from(this.contentTracks.keys())}},{key:"getLocalRtcContentIds",value:function(){var e=this;return Array.from(this.contentTracks.keys()).filter((function(t){return e.contentTracks.get(t).peer===Qo.rtcConnection.peer}))}},{key:"getRemoteRtcContentIds",value:function(){var e=this;return Array.from(this.contentTracks.keys()).filter((function(t){return e.contentTracks.get(t).peer!==Qo.rtcConnection.peer}))}},{key:"setPasted",value:function(e){console.log("setPasted:",e),this.pasted=e}},{key:"sharePasted",value:function(){this.shareContent(this.pasted),this.pasted=ti()}},{key:"shareContent",value:function(e){vi(e),this.addLocalContent(e)}},{key:"assignId",value:function(e){e.id||(e.id=this.getUniqueId())}},{key:"updatePlayback",value:function(e){e.playback=!0,this.playbackContents.set(e.id,e),this.updateAll()}},{key:"removePlayback",value:function(e){this.playbackContents.delete(e),this.updateAll()}},{key:"findPlayback",value:function(e){return this.playbackContents.get(e)}},{key:"getOrCreatePlayback",value:function(e){var t=this.findPlayback(e);return t||((t=ke.a.cloneDeep($n)).id=e,this.playbackContents.set(e,t)),t}},{key:"find",value:function(e){return this.roomContents.get(e)}},{key:"updateAll",value:function(){var e=[];Object.assign(e,Array.from(this.roomContents.values())),e.push.apply(e,Object(p.a)(Array.from(this.playbackContents.values())));var t=Array.from(e).sort(Ho);t.forEach((function(e,t){e.zIndex=t+1})),this.all=e,this.sorted=t,this.zones=this.sorted.filter((function(e){return void 0!==e.zone})).reverse(),this.closedZones=this.zones.filter((function(e){return"close"===e.zone}))}},{key:"getWallpaper",value:function(){var e=this.sorted.findIndex((function(e){return!Un(e)}));return e<0&&(e=this.sorted.length),this.sorted.slice(0,e)}},{key:"addLocalContent",value:function(e){this.assignId(e),this.updateByLocal(e)}},{key:"updateLocalOnly",value:function(e){this.roomContents.set(e.id,e),this.updateAll()}},{key:"updateByLocal",value:function(e){this.roomContents.set(e.id,e),Qo.dataConnection.sync.sendContentUpdateRequest("",[e]),this.updateAll(),this.roomContentsInfo.set(e.id,e)}},{key:"removeByLocal",value:function(e){if("mainScreen"===e)this.mainScreenOwner===Qo.rtcConnection.peer&&Qo.removeLocalTrackByRole("mainScreen");else{var t=this.roomContents.get(e);t&&(this.disposeContent(t),this.roomContents.delete(e)),Qo.dataConnection.sync.sendContentRemoveRequest("",[e]),this.roomContentsInfo.delete(e)}this.updateAll()}},{key:"requestContent",value:function(e){Qo.dataConnection.pushOrUpdateMessageViaRelay(Rn.CONTENT_UPDATE_REQUEST_BY_ID,e)}},{key:"updateByRemoteRequest",value:function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.roomContents.set(i.id,i),"screen"!==i.type&&"camera"!==i.type||this.onUpdateScreenContent(i)}}catch(o){n.e(o)}finally{n.f()}this.updateAll()}},{key:"removeByRemoteRequest",value:function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=this.roomContents.get(i);o?(this.disposeContent(o),this.roomContents.delete(i)):Wo.editing===i&&(Wo.editing=""),Wo.roomContentsInfo.delete(i)}}catch(r){n.e(r)}finally{n.f()}this.updateAll()}},{key:"clearAllRemotes",value:function(){this.roomContents.clear(),this.roomContentsInfo.clear()}},{key:"removeAllContents",value:function(){var e=Array.from(this.roomContentsInfo.keys());Qo.dataConnection.sync.sendContentRemoveRequest("",e),this.roomContents.clear(),this.roomContentsInfo.clear(),this.updateAll()}},{key:"getUniqueId",value:function(){for(var e=On.localId;;){this.contentIdCounter+=1;var t="".concat(e,"_").concat(this.contentIdCounter);if(!this.roomContents.has(t)&&!On.remote.has(t))return t}return""}},{key:"disposeContent",value:function(e){if(e.id===this.editing&&this.setEditing(""),"screen"===e.type||"camera"===e.type){var t=this.contentTracks.get(e.id);null!==t&&void 0!==t&&t.peer&&(t.peer===On.localId?Qo.removeLocalTrackByRole(e.id):Qo.closeTrack(t.peer,e.id),this.contentTracks.delete(e.id))}}},{key:"onUpdateScreenContent",value:function(e){}},{key:"setScreenFps",value:function(e){this.screenFps=e}}]),n}(Yn.EventEmitter),Object(V.a)(ko.prototype,"setEditing",[fe.b],Object.getOwnPropertyDescriptor(ko.prototype,"setEditing"),ko.prototype),To=Object(V.a)(ko.prototype,"pasteEnabled",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Io=Object(V.a)(ko.prototype,"editing",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Eo=Object(V.a)(ko.prototype,"all",[go],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Po=Object(V.a)(ko.prototype,"zones",[jo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mo=Object(V.a)(ko.prototype,"closedZones",[Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ro=Object(V.a)(ko.prototype,"roomContents",[Oo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Do=Object(V.a)(ko.prototype,"roomContentsInfo",[yo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Bo=Object(V.a)(ko.prototype,"playbackContents",[xo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),No=Object(V.a)(ko.prototype,"mainScreenStream",[Co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zo=Object(V.a)(ko.prototype,"mainScreenOwner",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fo=Object(V.a)(ko.prototype,"contentTracks",[wo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Lo=Object(V.a)(ko.prototype,"pasted",[So],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ti()}}),Object(V.a)(ko.prototype,"setPasted",[fe.b],Object.getOwnPropertyDescriptor(ko.prototype,"setPasted"),ko.prototype),Object(V.a)(ko.prototype,"sharePasted",[fe.b],Object.getOwnPropertyDescriptor(ko.prototype,"sharePasted"),ko.prototype),Object(V.a)(ko.prototype,"shareContent",[fe.b],Object.getOwnPropertyDescriptor(ko.prototype,"shareContent"),ko.prototype),Object(V.a)(ko.prototype,"updatePlayback",[fe.b],Object.getOwnPropertyDescriptor(ko.prototype,"updatePlayback"),ko.prototype),Object(V.a)(ko.prototype,"removePlayback",[fe.b],Object.getOwnPropertyDescriptor(ko.prototype,"removePlayback"),ko.prototype),Uo=Object(V.a)(ko.prototype,"screenFps",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Object(V.a)(ko.prototype,"setScreenFps",[fe.b],Object.getOwnPropertyDescriptor(ko.prototype,"setScreenFps"),ko.prototype),ko);d.contents=Wo;var Jo,Vo,Ko,Xo,Zo,qo,_o,$o,ea=Wo,ta=.2,na=5,ia=.5,oa=new(Jo=function(){function e(){Object(X.a)(this,e),Object(J.a)(this,"matrix",Vo,this),Object(J.a)(this,"committedMatrix",Ko,this),Object(J.a)(this,"matrixBeforeZoom",Xo,this),Object(J.a)(this,"screenSize",Zo,this),Object(J.a)(this,"left",qo,this),Object(J.a)(this,"mouse",_o,this),Object(J.a)(this,"mouseOnMap",$o,this),this.keyInputUsers=new Set,Object(fe.g)(this),this.loadMatrixFromStorage()}return Object(K.a)(e,[{key:"offset",get:function(){return[-(this.left+this.screenSize[0]*ia),-this.screenSize[1]*ia]}},{key:"offsetFromElement",get:function(){return[-this.screenSize[0]*ia,-this.screenSize[1]*ia]}},{key:"rotation",get:function(){return w(m(this.committedMatrix))}},{key:"setMatrix",value:function(e){this.matrix=e,this.updateViewpoint(e)}},{key:"updateViewpoint",value:function(e){var t=h(e),n=this.screenSize[0]/t;On.local.viewpoint.height=n,On.local.updateViewpointCenter(this)}},{key:"setCommittedMatrix",value:function(e){var t=this.toWindow(this.mouseOnMap);this.committedMatrix=e,this.mouseOnMap=this.fromWindow(t),this.saveMatrixToStorage(!1),this.matrixBeforeZoom=void 0,this.updateViewpoint(e)}},{key:"setScreenSize",value:function(e){this.screenSize[0]=e[0],this.screenSize[1]=e[1],this.updateViewpoint(this.committedMatrix)}},{key:"setLeft",value:function(e){this.left=e}},{key:"setMouse",value:function(e){this.mouse=j(e,this.offset),this.mouseOnMap=b(this.matrix.inverse(),this.mouse)}},{key:"focusOn",value:function(e){var t=this.matrix.inverse(),n=A(e.pose.position,[t.e,t.f]),i=(new DOMMatrix).translate(-n[0],-n[1]).preMultiplySelf(this.matrix);this.setMatrix(i),this.setCommittedMatrix(i)}},{key:"zoomTo",value:function(e){var t=this.matrix,n=Array.from(e.size);n[1]+=Yo;var i=[oa.screenSize[0]/n[0],oa.screenSize[1]/n[1]],o=Math.max(Math.min(i[0],i[1],na),ta),a=h(t),r=t.inverse(),s=A(e.pose.position,[r.e,r.f]),c=n[0]/2,l=this.screenSize[1]/o/2-Yo,u=(new DOMMatrix).translate(-s[0]-c,-s[1]-l).preMultiplySelf(t).preMultiplySelf((new DOMMatrix).scale(o/a));console.log("newScale:".concat(o," old").concat(a,"  newMat scaleX=").concat(h(u))),this.setMatrix(u),this.setCommittedMatrix(u),this.matrixBeforeZoom=t,console.log("zoomTo: before: ".concat(this.matrixBeforeZoom))}},{key:"restoreZoom",value:function(){this.matrixBeforeZoom&&(this.setMatrix(this.matrixBeforeZoom),this.setCommittedMatrix(this.matrixBeforeZoom))}},{key:"zoomed",get:function(){return void 0!==this.matrixBeforeZoom}},{key:"centerOnMap",get:function(){return b(this.matrix.inverse(),[0,0])}},{key:"toWindow",value:function(e){return A(b(this.matrix,e),this.offset)}},{key:"fromWindow",value:function(e){return b(this.matrix.inverse(),j(e,this.offset))}},{key:"toElement",value:function(e){return A(b(this.matrix,e),this.offsetFromElement)}},{key:"rotateFromWindow",value:function(e){return g(this.matrix.inverse(),e)}},{key:"rotateToWindow",value:function(e){return g(this.matrix,e)}},{key:"visibleArea",value:function(){var e=this.fromWindow([0,0]),t=this.fromWindow(this.screenSize);return[e[1]-60,t[0]+60,t[1]+60,e[0]-60]}},{key:"saveMatrixToStorage",value:function(e){var t=sessionStorage;e&&(t=localStorage);var n=[this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f];t.setItem("mapMatrix",JSON.stringify(n))}},{key:"loadMatrixFromStorage",value:function(){var e=localStorage;sessionStorage.getItem("mapMatrix")&&(e=sessionStorage);var t=e.getItem("mapMatrix");if(t){var n=JSON.parse(t),i=new DOMMatrix;i.a=n[0],i.b=n[1],i.c=n[2],i.d=n[3],i.e=n[4],i.f=n[5],this.setMatrix(i),this.setCommittedMatrix(i)}}}]),e}(),Vo=Object(V.a)(Jo.prototype,"matrix",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new DOMMatrixReadOnly}}),Ko=Object(V.a)(Jo.prototype,"committedMatrix",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new DOMMatrixReadOnly}}),Xo=Object(V.a)(Jo.prototype,"matrixBeforeZoom",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zo=Object(V.a)(Jo.prototype,"screenSize",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[0,0]}}),Object(V.a)(Jo.prototype,"offset",[fe.d],Object.getOwnPropertyDescriptor(Jo.prototype,"offset"),Jo.prototype),Object(V.a)(Jo.prototype,"offsetFromElement",[fe.d],Object.getOwnPropertyDescriptor(Jo.prototype,"offsetFromElement"),Jo.prototype),Object(V.a)(Jo.prototype,"rotation",[fe.d],Object.getOwnPropertyDescriptor(Jo.prototype,"rotation"),Jo.prototype),qo=Object(V.a)(Jo.prototype,"left",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_o=Object(V.a)(Jo.prototype,"mouse",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[0,0]}}),$o=Object(V.a)(Jo.prototype,"mouseOnMap",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[0,0]}}),Object(V.a)(Jo.prototype,"setMatrix",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"setMatrix"),Jo.prototype),Object(V.a)(Jo.prototype,"setCommittedMatrix",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"setCommittedMatrix"),Jo.prototype),Object(V.a)(Jo.prototype,"setScreenSize",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"setScreenSize"),Jo.prototype),Object(V.a)(Jo.prototype,"setLeft",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"setLeft"),Jo.prototype),Object(V.a)(Jo.prototype,"setMouse",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"setMouse"),Jo.prototype),Object(V.a)(Jo.prototype,"focusOn",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"focusOn"),Jo.prototype),Object(V.a)(Jo.prototype,"zoomTo",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"zoomTo"),Jo.prototype),Object(V.a)(Jo.prototype,"restoreZoom",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"restoreZoom"),Jo.prototype),Object(V.a)(Jo.prototype,"zoomed",[fe.d],Object.getOwnPropertyDescriptor(Jo.prototype,"zoomed"),Jo.prototype),Object(V.a)(Jo.prototype,"centerOnMap",[fe.d],Object.getOwnPropertyDescriptor(Jo.prototype,"centerOnMap"),Jo.prototype),Object(V.a)(Jo.prototype,"loadMatrixFromStorage",[fe.b],Object.getOwnPropertyDescriptor(Jo.prototype,"loadMatrixFromStorage"),Jo.prototype),Jo);d.map=oa;var aa,ra,sa,ca,la=oa,ua=new(aa=function(){function e(){var t=this;Object(X.a)(this,e),Object(J.a)(this,"type",ra,this),Object(J.a)(this,"types",sa,this),Object(J.a)(this,"supressedTypes",ca,this),this.reason="",this.name="",this.videoInputs=[],this.audioInputs=[],this.audioOutputs=[],this.canvas=void 0,this.oscillator=void 0,Object(fe.g)(this),null!==o.testBot&&this.clear(),Object(fe.c)((function(){t.show()?la.keyInputUsers.add("errorDialog"):la.keyInputUsers.delete("errorDialog")})),Object(fe.c)((function(){On.local.physics.awayFromKeyboard&&t.setType("afk")}))}return Object(K.a)(e,[{key:"fatal",get:function(){return!this.type}},{key:"setType",value:function(e,t,n){this.type=e,this.types.add(e),this.reason=n,this.name=t}},{key:"title",get:function(){switch(this.type){case"connection":return ee("etConnection");case"retry":return ee("etRetry");case"noMic":return ee("etNoMic");case"micPermission":return ee("etMicPermission");case"rtcConnection":return ee("etRtcConnection");case"dataConnection":return ee("etDataConnection");case"entrance":return"";case"afk":return ee("afkTitle");case"kicked":return"Kicked by ".concat(this.name,". ").concat(this.reason)}return this.type}},{key:"message",get:function(){switch(this.type){case"connection":return ee("emConnection");case"retry":return ee("emRetry");case"noMic":return ee("emNoMic");case"micPermission":return ee("emMicPermission");case"rtcConnection":return ee("emRtcConnection");case"dataConnection":return ee("emDataConnection");case"entrance":case"kicked":return"";case"afk":return ee("afkMessage")}return"no message defined for ".concat(this.type)}},{key:"show",value:function(){if(""===this.type){var e=function(e,t){var n,i=new Set(e),o=Object(a.a)(t);try{for(o.s();!(n=o.n()).done;){var r=n.value;i.delete(r)}}catch(s){o.e(s)}finally{o.f()}return i}(this.types,this.supressedTypes);e.size&&(this.type=e.values().next().value)}return""!==this.type&&!this.supressedTypes.has(this.type)}},{key:"enumerateDevices",value:function(){var e=this;navigator.mediaDevices.enumerateDevices().then((function(t){e.videoInputs=[],e.audioInputs=[],e.audioOutputs=[],t.forEach((function(t){"videoinput"===t.kind&&e.videoInputs.push(t),"audioinput"===t.kind&&e.audioInputs.push(t),"audiooutput"===t.kind&&e.audioOutputs.push(t)}))})).catch((function(){console.error("Device enumeration error")}))}},{key:"connectionStart",value:function(){var e=this;null!==o.skipEntrance&&(this.clear(),On.local.sendInformation()),this.enumerateDevices(),null===o.testBot?Object(fe.j)((function(){return""===e.type}),(function(){setTimeout(e.checkConnection.bind(e),4e3)})):setTimeout(this.startTestBot.bind(this),3e3)}},{key:"clear",value:function(e){"afk"===this.type&&(On.local.physics.awayFromKeyboard=!1),e?(this.types.delete(e),this.type===e&&(this.type="")):(this.types.clear(),this.type="")}},{key:"checkConnection",value:function(){Qo.isRtcConnected()?Qo.isDataConnected()?(this.clear("rtcConnection"),this.clear("dataConnection"),this.checkMic()):(this.setType("dataConnection"),setTimeout(this.checkConnection.bind(this),5e3)):(this.setType("rtcConnection"),setTimeout(this.checkConnection.bind(this),5e3))}},{key:"checkMic",value:function(){!On.localId||On.local.muteAudio||Qo.getLocalMicTrack()?(On.local.muteAudio&&setTimeout(this.checkMic.bind(this),5e3),this.clear("noMic"),this.clear("micPermission")):(this.audioInputs.length?this.setType("micPermission"):(this.clear("micPermission"),this.setType("noMic")),setTimeout(this.checkMic.bind(this),5e3))}},{key:"startTestBot",value:function(){var e=this;On.local.muteAudio=!1,On.local.muteVideo=!1;var t=0,n=new AudioContext;this.oscillator=n.createOscillator(),this.oscillator.type="triangle";var i=n.createMediaStreamDestination();this.oscillator.connect(i),this.oscillator.start(),this.canvas=document.createElement("canvas");var o=240,a=240;this.canvas.style.width="".concat(o,"px"),this.canvas.style.height="".concat(a,"px");var r=this.canvas.getContext("2d"),s=[Math.random()*Ce/2,(Math.random()-.5)*Ce];setInterval((function(){var i,o,a,s,c;if(r&&n){null===(i=e.oscillator)||void 0===i||i.frequency.setValueAtTime(440+t%440,n.currentTime);var l=["green","blue"],u=null===(o=Qo.priorityCalculator.tracksToConsume.videos[0])||void 0===o?void 0:o.producer,d=null===(a=Qo.priorityCalculator.tracksToConsume.audios[0])||void 0===a?void 0:a.producer;u&&null!==(s=u.consumer)&&void 0!==s&&s.track.muted&&(l[0]="yellow"),d&&null!==(c=d.consumer)&&void 0!==c&&c.track.muted&&(l[1]="red"),r.fillStyle=l[0],r.beginPath(),r.ellipse(151.2,79.2,24,96,t/20,0,2*Math.PI),r.fill(),r.fillStyle=l[1],r.beginPath(),r.ellipse(151.2,79.2,24,96,-t/20,0,2*Math.PI),r.fill(),t+=1}}),50);var c="01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijlkmnopqrstuvwxyz",l=function(){return c.substr(Math.floor(Math.random()*c.length),1)};On.local.information=re,On.local.information.name="testBot ".concat(l()).concat(l()).concat(l()),On.local.sendInformation(),On.local.pose.position=s;var u=function(){On.local.pose.position=j(s,y(100,[Math.cos(t/60),Math.sin(t/60)]))},d=window;if(d.requestIdleCallback){!function e(){setTimeout((function(){u(),d.requestIdleCallback(e)}),50)}()}else setInterval(u,1e3);var p=this.canvas.captureStream(20).getVideoTracks()[0],h=i.stream.getAudioTracks()[0];Qo.setLocalCameraTrack({track:p,peer:On.local.id,role:"avatar"}),Qo.setLocalMicTrack({track:h,peer:On.local.id,role:"avatar"})}}]),e}(),Object(V.a)(aa.prototype,"fatal",[fe.d],Object.getOwnPropertyDescriptor(aa.prototype,"fatal"),aa.prototype),ra=Object(V.a)(aa.prototype,"type",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"entrance"}}),sa=Object(V.a)(aa.prototype,"types",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),ca=Object(V.a)(aa.prototype,"supressedTypes",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),Object(V.a)(aa.prototype,"setType",[fe.b],Object.getOwnPropertyDescriptor(aa.prototype,"setType"),aa.prototype),Object(V.a)(aa.prototype,"title",[fe.d],Object.getOwnPropertyDescriptor(aa.prototype,"title"),aa.prototype),Object(V.a)(aa.prototype,"message",[fe.d],Object.getOwnPropertyDescriptor(aa.prototype,"message"),aa.prototype),Object(V.a)(aa.prototype,"connectionStart",[fe.b],Object.getOwnPropertyDescriptor(aa.prototype,"connectionStart"),aa.prototype),Object(V.a)(aa.prototype,"clear",[fe.b],Object.getOwnPropertyDescriptor(aa.prototype,"clear"),aa.prototype),Object(V.a)(aa.prototype,"checkConnection",[fe.b],Object.getOwnPropertyDescriptor(aa.prototype,"checkConnection"),aa.prototype),Object(V.a)(aa.prototype,"checkMic",[fe.b],Object.getOwnPropertyDescriptor(aa.prototype,"checkMic"),aa.prototype),aa);d.error=ua;var da=ua,pa=n(17),ha=n(0),va=n.n(ha),ma=n(125),fa=n.p+"static/media/whoo-screen_chat.52e62a85.png",ba=n.p+"static/media/people_login.db1eab64.png",ga="data:image/png;base64,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",ja="data:image/png;base64,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",Aa=n(622),Oa=n(597),ya=n(594),xa=n(600),Ca=n(599),wa=n(288),Sa=n.n(wa),ka=n(626),Ta=n(598),Ia=n(1),Ea=function(){Object(ha.useEffect)((function(){la.keyInputUsers.add("AfkDialog")}));var e=function(e){la.keyInputUsers.delete("AfkDialog");var t=e;t.code&&(t.preventDefault(),t.stopPropagation()),da.clear()};return Object(Ia.jsx)(Ba,{onClose:e,children:Object(Ia.jsx)(ya.a,{style:{fontSize:c()?"2em":"1em"},children:Object(Ia.jsx)(Oa.a,{color:"primary",variant:"contained",style:{textTransform:"none"},autoFocus:!0,onKeyDown:e,onClick:e,children:ee("afkMessage")})})})};Ea.displayName="AfkDialog";var Pa=[["Able","Absent","Absolute","Abstract","Absurd","Academic","Acceptable","Accessible","Accountable","Accurate","Acid","Active","Actual","Acute","Additional","Adequate","Adjacent","Administrative","Adult","Advance","Advanced","Adverse","Aesthetic","Affordable","Afraid","Aged","Agricultural","Alert","Alien","Alike","Alive","Alone","Alternative","Amateur","Amazed","Amazing","Ambitious","Amusing","Ancient","Angry","Annoyed","Annoying","Annual","Anonymous","Anxious","Apparent","Appealing","Applicable","Appropriate","Arbitrary","Architectural","Artificial","Artistic","Ashamed","Asleep","Assistant","Associated","Astonishing","Attractive","Audio","Authentic","Automatic","Available","Average","Aware","Awful","Awkward","Back","Bad","Balanced","Bare","Based","Basic","Beautiful","Beloved","Beneficial","Bent","Best","Better","Big","Biological","Bitter","Bizarre","Blank","Blind","Blonde","Blue","Bold","Bored","Boring","Bottom","Bound","Brave","Brief","Bright","Brilliant","Broad","Broken","Brown","Busy","Calm","Capable","Capital","Capitalist","Careful","Careless","Casual","Cautious","Central","Certain","Challenging","Characteristic","Charming","Cheap","Cheerful","Chemical","Chief","Chronic","Civic","Civil","Civilian","Classic","Classical","Clean","Clear","Clever","Clinical","Close","Closed","Coastal","Cognitive","Cold","Collective","Colonial","Coloured","Colourful","Comfortable","Comic","Commercial","Common","Communist","Comparable","Comparative","Compelling","Competent","Competitive","Complete","Complex","Complicated","Comprehensive","Compulsory","Concerned","Concrete","Confident","Confused","Confusing","Congressional","Connected","Conscious","Consecutive","Conservative","Considerable","Consistent","Constant","Constitutional","Contemporary","Content","Continuous","Contrary","Controversial","Convenient","Conventional","Convinced","Convincing","Cool","Cooperative","Core","Corporate","Correct","Corresponding","Costly","Countless","Covered","Cream","Creative","Credible","Critical","Crowded","Crucial","Crude","Cruel","Cult","Cultural","Curious","Curly","Current","Curved","Cute","Cynical","Daily","Dairy","Damaging","Dangerous","Dark","Dead","Dear","Decent","Decisive","Dedicated","Deep","Defensive","Definite","Deliberate","Delicate","Delicious","Delighted","Democratic","Dense","Dependent","Depressed","Depressing","Desirable","Desperate","Destructive","Detailed","Determined","Different","Difficult","Digital","Diplomatic","Direct","Dirty","Disabled","Disappointed","Disappointing","Disastrous","Dishonest","Distant","Distinct","Distinctive","Disturbing","Diverse","Divine","Divorced","Domestic","Dominant","Double","Downstairs","Downtown","Dramatic","Dressed","Driving","Dry","Dual","Due","Dull","Dumb","Dynamic","Eager","Early","East","Eastern","Easy","Ecological","Economic","Editorial","Educated","Educational","Effective","Efficient","Elaborate","Elderly","Electoral","Electric","Electrical","Electronic","Elegant","Elementary","Eligible","Embarrassed","Embarrassing","Emotional","Empirical","Empty","Encouraging","Endless","Engaged","Engaging","Enjoyable","Enormous","Entertaining","Enthusiastic","Entire","Environmental","Equal","Equivalent","Essential","Eternal","Ethical","Ethnic","Even","Everyday","Evident","Evil","Evolutionary","Exact","Excellent","Exceptional","Excess","Excessive","Excited","Exciting","Exclusive","Executive","Exotic","Expected","Expensive","Experienced","Experimental","Expert","Explicit","Explosive","Extensive","External","Extra","Extraordinary","Extreme","Fabulous","Failed","Fair","Fake","False","Familiar","Family","Famous","Fancy","Fantastic","Far","Fascinating","Fashionable","Fast","Fat","Fatal","Favourable","Favourite","Federal","Fellow","Feminist","Few","Fierce","Final","Financial","Fine","Firm","Fit","Fixed","Flat","Flawed","Flexible","Flying","Folding","Folk","Following","Fond","Foreign","Formal","Former","Forthcoming","Fortunate","Forward","Fragile","Free","Frequent","Fresh","Friendly","Frightened","Frightening","Front","Frozen","Frustrated","Frustrating","Full","FullTime","Fun","Functional","Fundamental","Funny","Furious","Further","Future","General","Generic","Generous","Genetic","Gentle","Genuine","Giant","Glad","Global","Glorious","Gold","Golden","Good","Gorgeous","Grand","Graphic","Grateful","Grave","Great","Green","Grey","Gross","Guilty","Handy","Happy","Hard","Harmful","Harsh","Healthy","Heavy","Helpful","Hidden","High","HighProfile","Hilarious","Historic","Historical","Hollow","Holy","Home","Homeless","Honest","Hopeful","Horrible","Hot","Huge","Human","Humanitarian","Humble","Humorous","Hungry","Hurt","Ideal","Identical","Ideological","Ill","Illegal","Imaginary","Immediate","Immense","Imminent","Immune","Impatient","Important","Impossible","Impressed","Impressive","Inadequate","Inappropriate","Inclined","Included","Incorrect","Incredible","Independent","Indigenous","Indirect","Individual","Indoor","Industrial","Inevitable","Infamous","Influential","Informal","Inherent","Initial","Injured","Inner","Innocent","Innovative","Inside","Instant","Institutional","Instrumental","Insufficient","Intact","Integral","Integrated","Intellectual","Intelligent","Intended","Intense","Intensive","Interactive","Interested","Interesting","Interim","Interior","Intermediate","Internal","International","Intimate","Intriguing","Invisible","Involved","Ironic","Irrelevant","Isolated","Joint","Judicial","Junior","Just","Keen","Key","Kind","Large","LargeScale","Late","Later","Latest","Latter","Lazy","Leading","Left","Legal","Legendary","Legislative","Legitimate","Lengthy","Lesser","Level","Liable","Liberal","Lifelong","Light","Likely","Limited","Linear","Liquid","Literary","Little","Live","Lively","Living","Local","Located","Logical","Lonely","Long","LongStanding","LongTerm","LongTime","Loose","Lost","Loud","Lovely","Low","Loyal","Lucky","Luxury","Mad","Magic","Magical","Magnetic","Magnificent","Main","Mainstream","Major","Mandatory","Marginal","Marine","Married","Martial","Mass","Massive","Matching","Material","Mathematical","Mature","Maximum","Meaningful","Mechanical","Medical","Medieval","Medium","Memorable","Mental","Mere","Middle","Mild","Minimal","Minimum","Minute","Miserable","Misleading","Missing","Mixed","Mobile","Moderate","Modern","Modest","Monthly","Moral","Motor","Moving","Multiple","Municipal","Musical","Mutual","Mysterious","Narrative","Narrow","National","Nationwide","Native","Natural","Naval","Near","Nearby","Neat","Necessary","Negative","Neighbouring","Nervous","Net","Neutral","New","Next","Nice","Noble","Noisy","NonProfit","Normal","North","Northern","Notable","Notorious","Novel","Nuclear","Numerous","Objective","Obvious","Occasional","Odd","Offensive","Official","Ok","Old","OldFashioned","Ongoing","Online","Only","Open","Operational","Opposed","Opposite","Optical","Optimistic","Orange","Ordinary","Organic","Organizational","Organized","Original","Other","Outdoor","Outer","Outside","Outstanding","Overall","Overseas","Overwhelming","Own","Painful","Pale","Parallel","Parental","Parliamentary","PartTime","Partial","Particular","Passionate","Passive","Past","Patient","Peaceful","Peculiar","Perfect","Permanent","Persistent","Personal","Philosophical","Physical","Pink","Plain","Plastic","Pleasant","Pleased","Plus","Pointed","Poisonous","Polite","Political","Poor","Pop","Popular","Positive","Possible","PostWar","Potential","Powerful","Practical","Precious","Precise","Predictable","Preliminary","Premier","Prepared","Present","Presidential","Prestigious","Pretty","Previous","Primary","Prime","Principal","Prior","Private","Probable","Problematic","Productive","Professional","Profitable","Profound","Progressive","Prominent","Promising","Pronounced","Proper","Prospective","Protective","Proud","Provincial","Psychiatric","Psychological","Public","Pure","Purple","Qualified","Quick","Quiet","Radical","Random","Rapid","Rare","Rational","Raw","Ready","Real","Realistic","Rear","Reasonable","Recent","Red","Regional","Regular","Regulatory","Related","Relative","Relaxed","Relaxing","Relevant","Reliable","Relieved","Religious","Reluctant","Remarkable","Remote","Renowned","Repeated","Representative","Resident","Residential","Respective","Responsible","Retired","Reverse","Revolutionary","Rich","Ridiculous","Right","Risky","Rival","Robust","Romantic","Rough","Round","Routine","Royal","Rubber","Rude","Rural","Sacred","Sad","Safe","Same","Satisfied","Scary","Scattered","Sceptical","Scientific","Secondary","Secret","Secular","Secure","Selective","Senior","Sensible","Sensitive","Separate","Serial","Serious","Severe","Shallow","Shaped","Sharp","Sheer","Shiny","Shocked","Shocking","Short","ShortTerm","Shut","Shy","Significant","Silent","Silly","Silver","Similar","Simple","Sincere","Single","Situated","Ski","Skilled","Slight","Slow","Small","Smart","Smooth","SoCalled","Social","Socialist","Soft","Solar","Sole","Solid","Solo","Sophisticated","Sound","South","Spare","Special","Specialist","Specialized","Specific","Spectacular","Spicy","Spiritual","Spoken","Sporting","Square","Stable","Standard","Standing","Stark","State","Statistical","Steady","Steep","Sticky","Stiff","Still","Straight","Straightforward","Strange","Strategic","Strict","Striking","Strong","Structural","Stunning","Subject","Subsequent","Substantial","Subtle","Suburban","Successful","Successive","Sudden","Sufficient","Suitable","Super","Superb","Superior","Supportive","Supreme","Sure","Surgical","Surprised","Surprising","Surrounding","Suspicious","Sustainable","Sweet","Symbolic","Sympathetic","Systematic","Tactical","Talented","Tall","Technical","Technological","Temporary","Tender","Terminal","Terrible","Terrific","Theatrical","Theoretical","Thick","Thin","Thirsty","Thorough","ThoughtProvoking","Thoughtful","Thrilled","Tidy","Tight","Timely","Tiny","Tired","Top","Total","Tough","Toxic","Toy","Traditional","Transparent","Tremendous","Tribal","Tropical","True","Twin","Typical","Ultimate","Unable","Unacceptable","Uncomfortable","Underground","Underlying","Unemployed","Unexpected","Unfair","Unfortunate","Unique","United","Universal","Unknown","Unlikely","Unnecessary","Unpleasant","Unprecedented","Unusual","Upcoming","Upper","Upset","Upstairs","Urban","Urgent","Used","Useful","Useless","Usual","Vague","Valid","Valuable","Variable","Varied","Various","Vast","Verbal","Vertical","Very","Viable","Vibrant","Virtual","Visible","Visual","Vital","Vocal","Voluntary","Vulnerable","Warm","Waste","Weak","Wealthy","Weekly","Weird","Welcome","Well","West","Western","Wet","White","Whole","Wide","Widespread","Wild","Willing","Wise","Wonderful","Wooden","Working","Worldwide","Worried","Worse","Worst","Worth","Worthwhile","Worthy","Written","Wrong","Yellow"],["About","Above","Abroad","Absently","Absolutely","Accidentally","Accordingly","Accurately","Accusingly","Across","Actually","Additionally","Adequately","Adorably","After","Afterwards","Again","Ago","Ahead","Alike","All","Allegedly","AllTheTime","Almost","Alone","Along","Already","Also","Altogether","Always","Amazingly","Angrily","Annually","Anxiously","Any","Anyway","Anywhere","Apart","Appallingly","Apparently","Appropriately","Approximately","Arguably","Around","Articulately","As","Aside","Astonishingly","Automatically","Away","Back","Backwards","Badly","Barely","Basically","Beautifully","Before","Behind","Below","Besides","Best","Better","Between","Beyond","Blindly","Bravely","Briefly","Brightly","Briskly","Broadly","By","Calmly","Carefully","Casually","Cautiously","Certainly","Cheaply","Clearly","Cleverly","Close","Closely","Commonly","Completely","Consequently","Considerably","Consistently","Constantly","Continually","Correctly","Crazily","Critically","Curiously","Currently","Cynically","Daily","Dangerously","Deeply","Definitely","Deliberately","Delicately","Desperately","Differently","Directly","Discreetly","Double","Down","Downstairs","Downtown","Downwards","Dramatically","Each","Eagerly","Early","Easily","East","Effectively","Efficiently","Either","Else","Elsewhere","Emotionally","Enough","Entirely","Equally","Especially","Essentially","Euphoricly","Even","Evenly","Eventually","Ever","Everywhere","Exactly","Exclusively","Expectantly","Explicitly","Extensively","Extra","Extremely","Fairly","Far","Fast","Ferociously","Fiercely","Finally","Finely","Firmly","First","Firstly","Flatly","Forever","Formerly","Forth","Fortunately","Forward","Frankly","Free","Freely","Frequently","Frighteningly","FullTime","Fully","Fundamentally","Further","Furthermore","Generally","Gently","Genuinely","Gloriously","Gradually","Greatly","Grimly","Guiltily","Half","Halfway","Happily","Hard","Hardly","Hastily","Heavily","Hence","Here","Heroically","High","Highly","Home","Hopefully","Hourly","How","However","Humbly","Hysterically","Immediately","Immensely","Impartially","Impolitely","In","Increasingly","Incredibly","Indeed","Indifferently","Indoors","Inevitably","Initially","Inside","Instantly","Instead","Intensely","Ironically","Jealously","Jovially","Just","Kindly","Largely","Last","Late","Lately","Later","Lazily","Least","Left","Less","Lightly","Likewise","Literally","Little","Live","Long","LongTerm","Lot","Loud","Loudly","Lovingly","Low","Loyally","Magnificently","Mainly","Maybe","Meanwhile","Merely","Merrily","Mightily","Miserably","More","Moreover","Most","Mostly","Much","Mysteriously","Namely","Naturally","Near","Nearby","Nearly","Necessarily","Neither","Nervously","Never","Nevertheless","Newly","Next","Nicely","Nonetheless","Nor","Normally","North","Not","NOT","Notably","Now","Nowadays","Nowhere","Objectively","Obnoxiously","Obsessively","Obviously","Occasionally","Off","Often","Ok","On","Once","Online","Only","Openly","Opposite","Originally","Otherwise","Out","Outdoors","Outside","Over","Overall","Overly","Overnight","Overseas","Painfully","Partially","Particularly","Partly","Past","Patiently","Perfectly","Perhaps","Permanently","Personally","Playfully","Politely","Poorly","Possibly","Potentially","Precisely","Predominantly","Presently","Presumably","Pretty","Previously","Primarily","Probably","Promptly","Properly","Purely","Quickly","Quietly","Quite","Randomly","Rapidly","Rarely","Rather","Readily","Really","Reasonably","Recently","Recklessly","Regardless","Regularly","Relatively","Remarkably","Remorsefully","Reportedly","Respectively","Responsibly","Right","Roughly","Round","Rudely","Ruthlessly","Sadly","Same","Scornfully","Seamlessly","Second","Secondly","Seemingly","Seldom","Selfishly","Seriously","Severely","Shakily","Sharply","Shortly","Sideways","Significantly","Silently","Similarly","Simply","Simultaneously","Since","Sleepily","Slightly","Slowly","Slyly","Smoothly","So","Softly","Solely","Solemnly","Somehow","Sometime","Sometimes","Somewhat","Somewhere","Soon","South","Specifically","Steadily","Sternly","Still","Straight","Strangely","Strictly","Strongly","Stunningly","Subsequently","Substantially","Successfully","Suddenly","Sufficiently","Supposedly","Sure","Surely","Temporarily","Tenderly","Terribly","Thankfully","That","Then","There","Thereafter","Thereby","Therefore","This","Thoroughly","Though","Thoughtfully","Through","Throughout","Thus","Tightly","Today","Together","Tomorrow","Tonight","Too","Totally","Truly","Twice","Typically","Ultimately","Under","Underground","Undoubtedly","Uneasily","Unfortunately","Up","Upstairs","Upwards","Usually","Utterly","Vanishingly","Very","Warmly","Way","Weakly","Wearily","Weekly","Weirdly","Well","West","Whatever","Whatsoever","When","Where","Whereby","Wholly","Why","Wickedly","Widely","Wildly","Wisely","Wonderfully","Worldwide","Worse","Worst","Wrong","Yearly","Yesterday","Yet"],["Abilities","Absences","Abundances","Academics","Academies","Accents","Acceptances","Accesses","Accidents","Accommodations","Accomplishments","Accordances","Accountabilities","Accountants","Accounts","Accumulations","Accuracies","Accusations","Accused","Achievements","Acids","Acquisitions","Acres","Actions","Activations","Activists","Activities","Actors","Actresses","Acts","Adaptations","Addictions","Additions","Addresses","Adjustments","Administrations","Administrators","Admissions","Adolescents","Adoptions","Ads","Adults","Advances","Advantages","Adventures","Advertisements","Advertisings","Advice","Advocates","Affairs","Affections","Aftermaths","Afternoons","Agencies","Agendas","Agents","Ages","Aggressions","Agreements","Agricultures","Aides","Alarms","Albums","Alerts","Aliens","Alignments","Allegations","Alliances","Allies","Allocations","Allowances","Alternatives","Aluminium","Amateurs","Ambassadors","Ambitions","Ambulances","Amendments","Amounts","Analogies","Analyses","Analysts","Ancestors","Anchors","Angels","Angers","Angles","Animals","Animations","Ankles","Anniversaries","Announcements","Answers","Anxieties","Apartments","Apologies","Apparatus","Appeals","Appearances","Appetites","Apples","Applicants","Applications","Appointments","Appreciations","Approaches","Approvals","Apps","Aprils","Architects","Architectures","Archives","Areas","Arenas","Arguments","Armies","Arrangements","Arrays","Arrests","Arrivals","Arrows","Articles","Artists","Arts","Artworks","Ashes","Aspects","Aspirations","Assaults","Assemblies","Assertions","Assessments","Assets","Assignments","Assistances","Assistants","Associations","Assumptions","Assurances","Asylums","Athletes","Atmospheres","Attachments","Attacks","Attempts","Attendances","Attentions","Attitudes","Attorneys","Attractions","Attributes","Auctions","Audiences","Audits","Augusts","Aunts","Authorities","Authors","Autonomies","Autos","Autumns","Availabilities","Averages","Awards","Awarenesses","Babies","Backdrops","Backgrounds","Backings","Backs","Backups","Bacterias","Badges","Bags","Bails","Balances","Ballets","Balloons","Ballots","Balls","Bananas","Bands","Banks","Banners","Bans","Bargains","Barrels","Barriers","Bars","Baseballs","Basements","Bases","Basketballs","Baskets","Basses","Bathrooms","Baths","Bats","Batteries","Battlefields","Battles","Bays","Beaches","Beams","Beans","Bears","Beasts","Beats","Beauties","Bedrooms","Beds","Beefs","Beers","Bees","Beginnings","Behalves","Behaviours","Beings","Beliefs","Bells","Belts","Benches","Benchmarks","Bends","Beneficiaries","Benefits","Bests","Bets","Betters","Biases","Bicycles","Bids","Bikes","Bills","Bins","Biographies","Biologies","Birds","Birthdays","Births","Biscuits","Bishops","Bites","Bits","Blades","Blames","Blankets","Blanks","Blasts","Blends","Blessings","Blocks","Blogs","Bloods","Blows","Blues","Boards","Boats","Bonds","Bones","Bonus","Bookings","Books","Booms","Boosts","Boots","Borders","Bosses","Bottles","Boundaries","Bowls","Bows","Boxes","Brains","Branches","Brands","Breaches","Breads","Breakdowns","Breakfasts","Breaks","Breakthroughs","Breathings","Breaths","Breeds","Brethren","Bricks","Brides","Bridges","Broadbands","Broadcasters","Broadcasts","Browsers","Brushes","Bubbles","Bucks","Buddies","Budgets","Buffers","Bugs","Buildings","Bulks","Bullets","Bunches","Burdens","Bureaucracies","Burials","Burns","Buses","Bushes","Businesses","Businessmen","Butters","Buttons","Cabinets","Cabins","Cables","Cafes","Cakes","Calculations","Calls","Calms","Cameras","Campaigns","Campings","Camps","Campus","Canals","Candidates","Candles","Cans","Canvas","Capabilities","Capacities","Capitalisms","Capitals","Caps","Captains","Captures","Carbons","Cards","Careers","Cares","Cargoes","Carpets","Carriages","Carrots","Cars","Cartoons","Cases","Cashes","Casinos","Castles","Casts","Catalogues","Catches","Categories","Cats","Cattle","Causes","Cautions","Caves","Cds","Ceilings","Celebrations","Celebrities","Cells","Cemeteries","Centres","Cents","Centuries","Ceremonies","Certainties","Certificates","Chains","Chairmen","Chairs","Challenges","Chambers","Champions","Championships","Chances","Changes","Channels","Chaos","Chapters","Characteristics","Characters","Charges","Charities","Charms","Charters","Charts","Chases","Chats","Cheats","Checks","Cheeks","Cheers","Cheeses","Chefs","Chemicals","Chemistries","Chests","Chickens","Chiefs","Childhoods","Chips","Chocolates","Choices","Choirs","Chunks","Churches","Cigarettes","Cinemas","Circles","Circuits","Circulations","Circumstances","Cities","Citizens","Citizenships","Civilians","Civilizations","Claims","Clarities","Clashes","Classes","Classics","Classifications","Classrooms","Clauses","Clerks","Clicks","Clients","Cliffs","Climates","Climbs","Clinics","Clips","Clocks","Closes","Closures","Clothes","Clothings","Cloths","Clouds","Clubs","Clues","Clusters","Coaches","Coalitions","Coals","Coasts","Coats","Cocktails","Codes","Coffees","Coincidences","Coins","Colds","Collaborations","Collapses","Colleagues","Collections","Collectors","Colleges","Collisions","Colonies","Colours","Columnists","Columns","Combats","Combinations","Comedies","Comforts","Comics","Commanders","Commands","Commentaries","Commentators","Comments","Commerces","Commercials","Commissioners","Commissions","Commitments","Committees","Commodities","Communications","Communities","Companies","Companions","Comparisons","Compassions","Compensations","Competences","Competitions","Competitors","Complaints","Completions","Complexes","Complexities","Compliances","Complications","Components","Composers","Compositions","Compounds","Compromises","Computers","Concentrations","Conceptions","Concepts","Concerns","Concerts","Concessions","Conclusions","Concretes","Conditions","Conducts","Conferences","Confessions","Confidences","Configurations","Confirmations","Conflicts","Confrontations","Confusions","Congregations","Connections","Consciences","Consciousnesses","Consensus","Consents","Consequences","Conservations","Conservatives","Considerations","Consistencies","Conspiracies","Constituencies","Constitutions","Constraints","Constructions","Consultants","Consultations","Consumers","Consumptions","Contacts","Containers","Contempts","Contenders","Contentions","Contents","Contests","Contexts","Continents","Contractors","Contracts","Contradictions","Contraries","Contrasts","Contributions","Contributors","Controls","Controversies","Conveniences","Conventions","Conversations","Conversions","Convictions","Cookers","Cookings","Cooks","Coordinations","Coordinators","Copies","Coppers","Cops","Copyrights","Cores","Corners","Corporations","Corrections","Correlations","Correspondences","Correspondents","Corridors","Corruptions","Costs","Costumes","Cottages","Cottons","Councillors","Councils","Counsellings","Counsellors","Counterparts","Counters","Counties","Countries","Countrysides","Counts","Couples","Coups","Courages","Courses","Courtesies","Courts","Cousins","Coverages","Covers","Cows","Cracks","Crafts","Crashes","Creams","Creations","Creativities","Creators","Creatures","Credibilities","Credits","Crews","Cries","Crises","Criteria","Criticisms","Critics","Critiques","Crops","Crosses","Crowds","Crowns","Cruises","Crystals","Cues","Cults","Cultures","Cupboards","Cups","Cures","Curiosities","Currencies","Currents","Curricula","Curtains","Custodies","Customers","Customs","Cuts","Cuttings","Cycles","Dads","Dairies","Damages","Dams","Dancers","Dances","Dancings","Dangers","Darknesses","Darks","Databases","Dates","Daughters","Dawns","Days","Deadlines","Dealers","Deals","Debates","Debris","Debts","Debuts","Decades","Decembers","DecisionMakings","Decisions","Decks","Declarations","Declines","Decorations","Decreases","Dedications","Deeds","Defaults","Defeats","Defects","Defences","Defenders","Deficiencies","Deficits","Definitions","Degrees","Delays","Delegates","Delegations","Delights","Deliveries","Demands","Democracies","Demons","Demonstrations","Denials","Densities","Dentists","Departments","Departures","Dependences","Deployments","Deposits","Depressions","Depths","Deputies","Descents","Descriptions","Deserts","Designers","Designs","Desires","Desks","Desktops","Destinations","Destructions","Details","Detections","Detectives","Detentions","Determinations","Developments","Devices","Devils","Diagnoses","Diagrams","Dialogues","Diamonds","Diaries","Dictators","Dictionaries","Diets","Differences","Difficulties","Dignities","Dilemmas","Dimensions","Dinners","Diplomats","Directions","Directories","Directors","Dirts","Disabilities","Disadvantages","Disagreements","Disappointments","Disciplines","Disclosures","Discounts","Discourses","Discoveries","Discretions","Discs","Discussions","Dishes","Disks","Dislikes","Dismissals","Disorders","Displays","Disposals","Disputes","Disruptions","Distances","Distinctions","Distresses","Distributions","Districts","Diversities","Dives","Divides","Divisions","Divorces","Doctors","Doctrines","Documentaries","Documentations","Documents","Dogs","Dollars","Domains","Dominances","Donations","Donors","Doors","Doses","Dots","Doubts","Downloads","Downtowns","Dozens","Drafts","Dramas","Drawings","Dreams","Dresses","Drinks","Drivers","Drives","Drivings","Drops","Droughts","Drums","Duos","Durations","Dusts","Duties","Dvds","Dynamics","Earnings","Ears","Earthquakes","Earths","Eases","Easts","Echoes","Economics","Economies","Economists","Edges","Editions","Editors","Educations","Educators","Effectivenesses","Effects","Efficiencies","Efforts","Eggs","Egos","Elbows","Elections","Electricities","Electronics","Elements","Elephants","Elites","Emails","Embarrassments","Embassies","Emergences","Emergencies","Emissions","Emotions","Emphases","Empires","Employees","Employers","Employments","Encounters","Encouragements","Endeavours","Endings","Endorsements","Ends","Enemies","Energies","Enforcements","Engagements","Engineerings","Engineers","Engines","Enquiries","Enterprises","Entertainments","Enthusiasms","Enthusiasts","Entities","Entrances","Entrepreneurs","Entries","Envelopes","Environments","Epidemics","Episodes","Equalities","Equals","Equations","Equipment","Equivalents","Eras","Errors","Escapes","Essays","Essences","Establishments","Estates","Estimates","Ethics","Euros","Evaluations","Evenings","Events","Evidence","Evils","Evolutions","Examinations","Examples","Exams","Excellences","Exceptions","Excesses","Exchanges","Excitements","Exclusions","Excuses","Executives","Exercises","Exhibitions","Exhibits","Exiles","Existences","Exits","Expansions","Expectations","Expeditions","Expenditures","Expenses","Experiences","Experiments","Expertises","Experts","Explanations","Exploitations","Explorations","Explosions","Explosives","Exports","Exposures","Expressions","Extensions","Extents","Extracts","Extras","Extremes","Eyes","Fabrics","Faces","Facilities","Factions","Factories","Factors","Facts","Faculties","Failures","Fairnesses","Faiths","Falls","Fames","Families","Fans","Fantasies","Fares","Farmers","Farmings","Farms","Fashions","Fates","Fats","Faults","Favourites","Favours","Fears","Feathers","Feats","Features","Februaries","Feedbacks","Feeds","Feelings","Feels","Fees","Feet","Feminists","Fences","Festivals","Fevers","Fibres","Fictions","Fields","Fightings","Fights","Figures","Files","FilmMakers","Films","Filters","Finals","Finances","Findings","Fines","Fingers","Finishes","Firefighters","Fires","Fireworks","Firms","Firsts","Fish","Fishings","Fitnesses","Fits","Fixes","Fixtures","Flags","Flames","Flashes","Flats","Flavours","Flaws","Fleets","Fleshes","Flexibilities","Flies","Flights","Floods","Floors","Flours","Flowers","Flows","Fluids","Flus","Flyings","Foci","Folds","Folks","Followings","Foods","Fools","Footages","Footballs","Forces","Forecasts","Foreigners","Forests","Forks","Formations","Formats","Forms","Formulae","Fortunes","Forums","Fossils","Foundations","Founders","Fractions","Fragments","Frames","Frameworks","Franchises","Frauds","Freedoms","Frequencies","Fridays","Fridges","Friends","Friendships","Frogs","Fronts","Fruits","Frustrations","Fuels","Functions","Fundings","Fundraisings","Funds","Funerals","Funs","Furnitures","Furs","Futures","Gains","Galleries","Gallons","Gamblings","Games","Gamings","Gaps","Garages","Gardens","Gases","Gates","Gatherings","Gazes","Gears","Genders","Generations","Genes","Genius","Genres","Gentlemen","Geographies","Gestures","Ghosts","Giants","Gifts","Gigs","Glances","Glasses","Glimpses","Globalizations","Globes","Glories","Gloves","Goals","Gods","Goes","Gold","Golfs","Goodbyes","Goodnesses","Goods","Governances","Governments","Governors","Graces","Grades","Graduates","Grains","Grandfathers","Grandmothers","Grandparents","Grants","Graphics","Grasps","Grasses","Graves","Gravities","Greenhouses","Greens","Greys","Grids","Griefs","Grins","Grips","Groceries","Grounds","Groups","Growths","Guarantees","Guards","Guerrillas","Guesses","Guests","Guidances","Guidelines","Guides","Guilts","Guitars","Guts","Guys","Gyms","Habitats","Habits","Hairs","Halls","Halts","Halves","Handfuls","Handles","Handlings","Hands","Happinesses","Harassments","Harbours","Hardwares","Harmonies","Harms","Harvests","Hats","Hazards","Headaches","Headlines","Headquarters","Heads","Healthcares","Healths","Hearings","Hearts","Heatings","Heats","Heavens","Heels","Heights","Helicopters","Hellos","Hells","Helmets","Helps","Herbs","Heritages","Heroes","Hierarchies","Highlights","Highs","Highways","Hills","Hints","Hips","Hires","Historians","Histories","Hits","Hobbies","Hockeys","Holds","Holes","Holidays","Homelands","Homes","Homework","Honesties","Honours","Hooks","Hopes","Horizons","Horns","Horrors","Horses","Hospitals","Hosts","Hotels","Hours","Households","Houses","Housings","Humanities","Humans","Humours","Hungers","Huntings","Hunts","Hurricanes","Hurries","Hurts","Hydrogens","Hypotheses","Ices","Icons","Ideals","Ideas","Identifications","Identities","Ideologies","Ids","Ignorances","Illusions","Illustrations","Imageries","Images","Imaginations","Immigrations","Impacts","Implementations","Implications","Importances","Imports","Impressions","Imprisonments","Improvements","Inabilities","Incentives","Inches","Incidences","Incidents","Inclusions","Incomes","Increases","Independences","Indications","Indicators","Indices","Indictments","Individuals","Industries","Inequalities","Infections","Inflations","Influences","Information","Infos","Infrastructures","Ingredients","Inhabitants","Initiatives","Injections","Injuries","Injustices","Inks","Innovations","Inputs","Inquiries","Insects","Insertions","Insiders","Insides","Insights","Inspections","Inspectors","Inspirations","Installations","Instances","Instincts","Institutes","Institutions","Instructions","Instructors","Instruments","Insults","Insurances","Intakes","Integrations","Integrities","Intellectuals","Intelligences","Intensities","Intentions","Intents","Interactions","Interests","Interfaces","Interferences","Interiors","Interpretations","Intervals","Interventions","Interviews","Introductions","Invasions","Inventions","Investigations","Investigators","Investments","Investors","Invitations","Involvements","Ironies","Irons","Islands","Isolations","Issues","Items","Its","Jackets","Jails","Jams","Januaries","Jazzes","Jeans","Jets","Jewelleries","Jobs","Joints","Jokes","Journalisms","Journalists","Journals","Journeys","Joys","Judgements","Judges","Juices","Julies","Jumps","Junctions","Junes","Juries","Jurisdictions","Justices","Justifications","Keyboards","Keys","Kicks","Kidneys","Kilometres","Kinds","Kingdoms","Kings","Kisses","Kitchens","Kits","Knees","Knives","Knocks","Knowledges","Labels","Laboratories","Labours","Labs","Lacks","Ladders","Lakes","Lamps","Landings","Landlords","Landmarks","Lands","Landscapes","Lanes","Languages","Laps","Laptops","Lasers","Lasts","Latests","Laughs","Laughters","Launches","Lawns","Laws","Lawsuits","Lawyers","Layers","Layouts","Leaders","Leaderships","Leads","Leaflets","Leagues","Leaks","Leaps","Learnings","Leathers","Leaves","Lectures","Lefts","Legacies","Legends","Legislations","Legislatures","Legs","Leisures","Lemons","Lengths","Lens","Lessons","Letters","Levels","Liberals","Liberations","Liberties","Libraries","Licences","Lies","Lifestyles","Lifetimes","Lifts","Lightings","Lights","Likelihoods","Likes","Limbs","Limitations","Limits","LineUps","Lines","Links","Lions","Lips","Liquids","Listeners","Listings","Lists","Literacies","Literatures","Litres","Litters","Livers","Lives","Livings","Loads","Loans","Lobbies","Locals","Locations","Locks","Logics","Logos","Logs","Looks","Loops","Lords","Lorries","Losses","Lotteries","Loves","Lows","Loyalties","Luck","Lunches","Lungs","Luxuries","Lyrics","Machineries","Machines","Magazines","Magics","Magistrates","Magnitudes","Mails","Mainlands","Mainstreams","Maintenances","Majorities","MakeUps","Makes","Makings","Malls","Managements","Managers","Mandates","Manipulations","Manners","Manufacturings","Manuscripts","Maps","Marathons","Marches","Margins","Markers","Marketings","Marketplaces","Markets","Marks","Marriages","Masks","Masses","Masters","Matches","Materials","Mates","Mathematics","Maths","Matters","Maximums","Mayors","Mays","Meals","Meanings","Means","Meantimes","Measurements","Measures","Meats","Mechanics","Mechanisms","Medals","Media","Medications","Medicines","Meditations","Meetings","Melodies","Members","Memberships","Memoirs","Memorials","Memories","Memos","Mentions","Mentors","Menus","Merchants","Mercies","Mergers","Merits","Messages","Messes","Metals","Metaphors","Methodologies","Methods","Metres","Mice","Middles","Midnights","Midsts","Migrations","Miles","Milks","Mills","Minds","Minerals","Miners","Mines","Minimums","Minings","Ministers","Ministries","Minutes","Miracles","Mirrors","Miseries","Missiles","Missions","Mistakes","Mixes","Mixtures","Mobiles","Mobilities","Mobs","Modes","Modifications","Momenta","Moments","Mondays","Moneys","Monitors","Monkeys","Monks","Monopolies","Monsters","Months","Monuments","Moods","Moons","Moralities","Morals","Mornings","Mortgages","Mothers","Motions","Motivations","Motives","Motorcycles","Motorists","Motors","Mountains","Mouths","Movements","Moves","Movies","Muds","Mums","Muscles","Museums","Music","Musicals","Musicians","Mysteries","Myths","Nails","Names","Narratives","Nationals","Nations","Natures","Navigations","Necessities","Necks","Needles","Needs","Negatives","Neglects","Negotiations","Neighbourhoods","Neighbours","Nerves","Nests","Nets","Networks","News","Newsletters","Newspapers","Niches","Nightmares","Nights","Noises","Nominations","Nominees","Nonsenses","Noons","Normals","Norms","Norths","Noses","Notebooks","Notes","Notices","Notions","Novelists","Novels","Novembers","Numbers","Nurseries","Nurses","Nursings","Nutritions","Nuts","Obesities","Objections","Objectives","Objects","Obligations","Observations","Observers","Obsessions","Obstacles","Occasions","Occupations","Occurrences","Oceans","Octobers","Odds","Offences","Offerings","Offers","Officers","Offices","Officials","Offspring","Oils","Onions","Openings","Operas","Operations","Operators","Opinions","Opponents","Opportunities","Opposites","Oppositions","Optimisms","Options","Oranges","Orchestras","Orders","Organizations","Organizers","Organs","Orientations","Originals","Origins","Outbreaks","Outcomes","Outfits","Outings","Outlets","Outlines","Outlooks","Outputs","Outrages","Outsiders","Outsides","Ovens","Owners","Ownerships","Oxygens","Paces","Packages","Packets","Packs","Pads","Pages","Pains","Painters","Paintings","Paints","Pairs","Palaces","Palms","Panels","Panics","Pans","Pants","Papers","Parades","Paragraphs","Parallels","Parameters","Parents","Parishes","Parkings","Parks","Parliaments","Participants","Participations","Parties","Partners","Partnerships","Parts","Passages","Passengers","Passes","Passings","Passions","Passports","Passwords","Pastors","Pasts","Patches","Patents","Paths","Pathways","Patiences","Patients","Patrols","Patrons","Patterns","Pauses","Payments","Pays","Peaces","Peaks","Peasants","Peers","Penalties","Pencils","Pennies","Pens","Pensions","People","Peoples","Peppers","Percentages","Perceptions","Performances","Periods","Permissions","Permits","Personalities","Personnels","Perspectives","Petitions","Petrols","Pets","Phases","Phenomena","Philosophers","Philosophies","Phones","Photographers","Photographies","Photographs","Photos","Phrases","Physicians","Physics","Pianos","Picks","Pictures","Pieces","Pigs","Piles","Pills","Pilots","Pinks","Pins","Pioneers","Pipelines","Pipes","Pirates","Pitches","Pities","Pits","Placements","Places","Planes","Planets","Plannings","Plans","Plants","Plastics","Plates","Platforms","Players","Plays","Pleas","Pleasures","Pledges","Plots","Plugs","Plus","Pockets","Poems","Poetries","Poets","Points","Poisons","Poles","Police","Policemen","Policies","Politicians","Politics","Polls","Pollutions","Ponds","Pools","Pops","Popularities","Populations","Portfolios","Portions","Portraits","Ports","Positions","Positives","Possessions","Possibilities","Posters","Posts","Potatoes","Potentials","Pots","Pounds","Poverties","Powders","Powers","Practices","Practitioners","Praises","Prayers","Precedents","Precisions","Predators","Predecessors","Predictions","Preferences","Pregnancies","Prejudices","Premises","Premiums","Preparations","Prescriptions","Presences","Presentations","Presents","Preservations","Presidencies","Presidents","Presses","Pressures","Prevalences","Preventions","Preys","Prices","Prides","Priests","Princes","Princesses","Principals","Principles","Printers","Printings","Prints","Priorities","Prisons","Privacies","Privatizations","Privileges","Prizes","Probabilities","Probes","Problems","Procedures","Proceedings","Proceeds","Processes","Processings","Processors","Producers","Produces","Productions","Productivities","Products","Professionals","Professions","Professors","Profiles","Profits","Programmes","Programmings","Programs","Progresses","Projections","Projects","Promises","Promotions","Proofs","Propagandas","Properties","Proportions","Proposals","Propositions","Prosecutions","Prosecutors","Prospects","Prosperities","Protections","Proteins","Protesters","Protests","Protocols","Provinces","Provisions","Psychologies","Psychologists","Publications","Publicities","Publics","Publishings","Pubs","Pulls","Pulses","Pumps","Punches","Punishments","Punks","Pupils","Purchases","Purples","Purposes","Pursuits","Pushes","Puzzles","Qualifications","Qualities","Quantities","Quarters","Queens","Queries","Questionnaires","Questions","Quests","Queues","Quotas","Quotations","Quotes","Races","Racings","Radars","Radiations","Radios","Rages","Raids","Rails","Railways","Rains","Rallies","Ranges","Rankings","Ranks","Rates","Ratings","Ratios","Rats","Rays","Reaches","Reactions","Readers","Readings","Realities","Realizations","Realms","Rears","Reasonings","Reasons","Rebellions","Rebels","Receipts","Receivers","Receptions","Recessions","Recipes","Recipients","Recognitions","Recommendations","Reconstructions","Recordings","Records","Recoveries","Recruitments","Recruits","Reductions","Referees","References","Referendums","Reflections","Reforms","Refusals","Regards","Regimes","Regions","Registers","Registrations","Regrets","Regulations","Regulators","Rehabilitations","Reigns","Rejections","Relations","Relationships","Relatives","Releases","Relevances","Reliabilities","Reliefs","Religions","Remainders","Remains","Remarks","Remedies","Reminders","Removals","Rentals","Rents","Repairs","Repeats","Replacements","Replies","Reporters","Reportings","Reports","Representations","Representatives","Reproductions","Republics","Reputations","Requests","Requirements","Rescues","Researchers","Researches","Reservations","Reserves","Residences","Residents","Residues","Resignations","Resistances","Resolutions","Resorts","Resources","Respects","Responses","Responsibilities","Restaurants","Restorations","Restraints","Restrictions","Rests","Results","Retails","Retirements","Retreats","Returns","Revelations","Revenges","Revenues","Reverses","Reviews","Revisions","Revivals","Revolutions","Rewards","Rhetorics","Rhythms","Rices","Rides","Rifles","Rights","Rings","Riots","Rises","Risks","Rituals","Rivals","Rivers","Roads","Robberies","Robots","Rockets","Rocks","Rods","Roles","Rolls","Romances","Roofs","Rooms","Roots","Ropes","Roses","Rotations","Rounds","Routes","Routines","Rows","Rubbers","Rubbishes","Rugbies","Ruins","Rules","Rulings","Rumours","Runners","Runnings","Runs","Rushes","Sacrifices","Safeties","Sailings","Sailors","Sails","Saints","Sakes","Salads","Salaries","Sales","Salts","Samples","Sanctions","Sands","Sandwiches","Satellites","Satisfactions","Saturdays","Sauces","Savings","Says","Scales","Scandals","Scares","Scenarios","Scenes","Schedules","Schemes","Scholars","Scholarships","Schools","Sciences","Scientists","Scopes","Scores","Scratches","Screams","Screenings","Screens","Screws","Scripts","Scrutinies","Sculptures","Seals","Searches","Seas","Seasons","Seats","Seconds","Secretaries","Secrets","Sections","Sectors","Securities","Seeds","Seekers","Segments","Selections","Selves","Seminars","Senators","Sensations","Senses","Sensitivities","Sentences","Sentiments","Separations","Septembers","Sequences","Series","Servants","Services","Sessions","SetUps","Sets","Settings","Settlements","Settlers","Shades","Shadows","Shakes","Shames","Shapes","Shareholders","Shares","Sheep","Sheets","Shells","Shelters","Shelves","Shifts","Shippings","Ships","Shirts","Shocks","Shoes","Shootings","Shoots","Shoppings","Shops","Shores","Shortages","Shots","Shoulders","Shouts","Showers","Shows","Siblings","Sides","Sighs","Sights","Signals","Signatures","Significances","Signs","Silences","Silks","Silver","Similarities","Simulations","Singers","Singings","Singles","Sins","Sirs","Sites","Situations","Sizes","Sketches","Skies","Skiings","Skills","Skins","Skirts","Skis","Skulls","Sleeps","Slices","Slides","Slogans","Slopes","Slots","Smartphones","Smells","Smiles","Smokes","Smokings","Snakes","Snows","Soaps","Soccers","Societies","Socks","Softwares","Soils","Soldiers","Solicitors","Solidarities","Solids","Solos","Solutions","Songs","Sons","Sorts","Souls","Sounds","Soups","Sources","Sovereignties","Spaces","Spams","Spans","Speakers","Specialists","Species","Specifications","Specimens","Spectacles","Spectators","Spectra","Speculations","Speeches","Speeds","Spellings","Spells","Spendings","Spheres","Spices","Spiders","Spies","Spines","Spins","Spirits","Spites","Splits","Spokesmen","Spokespeople","Sponsors","Sponsorships","Spoons","Sports","Spotlights","Spots","Spouses","Spreads","Springs","Squads","Squares","Stabilities","Stadiums","Staffs","Stages","Stairs","Stakes","Stalls","Stamps","Stances","Standards","Stands","Stars","Starts","Statements","States","Stations","Statistics","Statues","Status","Stays","Steams","Steels","Stems","Steps","Stereotypes","Sticks","Stimuli","Stocks","Stomachs","Stones","Stops","Storages","Stores","Stories","Storms","Strains","Strands","Strangers","Strategies","Streams","Streets","Strengths","Stresses","Stretches","Strikes","Strings","Strips","Strokes","Structures","Struggles","Students","Studies","Studios","Stuffs","Styles","Subjects","Submissions","Subscribers","Subscriptions","Subsidies","Substances","Substitutes","Substitutions","Suburbs","Successes","Successions","Successors","Sufferings","Sugars","Suggestions","Suites","Suits","Summaries","Summers","Summits","Sums","Sundays","Suns","Supermarkets","Supervisions","Supervisors","Supplements","Supplies","Supporters","Supports","Surfaces","Surgeons","Surgeries","Surges","Surplus","Surprises","Surveillances","Surveys","Survivals","Survivors","Suspects","Suspensions","Suspicions","Sweaters","Sweets","Swimmings","Swims","Swings","Switches","Swords","Symbols","Sympathies","Symptoms","Syndromes","Syntheses","Systems","TShirts","Tables","Tablets","Tackles","Tactics","Tags","Tails","Talents","Tales","Talks","Tanks","Tapes","Taps","Targets","Tasks","Tastes","Taxes","Taxis","Taxpayers","Teachers","Teachings","Teams","Tears","Teas","Techniques","Technologies","Teenagers","Teens","Teeth","Telephones","Televisions","Temperatures","Temples","Tenants","Tendencies","Tennis","Tensions","Tents","Tenures","Terminals","Terms","Terrains","Territories","Testimonies","Testings","Tests","Textbooks","Texts","Textures","Thanks","Theatres","Thefts","Themes","Theologies","Theories","Therapies","Therapists","Theses","Thieves","Things","Thinkings","Thirds","Thoughts","Threads","Threats","Thresholds","Throats","Thumbs","Thursdays","Tickets","Tides","Ties","Timbers","Times","Timings","Tins","Tips","Tissues","Titles","Tobaccos","Todays","Toes","Toilets","Tolerances","Tolls","Tomatoes","Tomorrows","Tones","Tongues","Tonights","Tonnes","Tons","Tools","Topics","Tops","Tortoises","Totals","Touches","Tourisms","Tourists","Tournaments","Tours","Towels","Towers","Towns","Toys","Traces","Tracks","Trademarks","Trades","Tradings","Traditions","Traffics","Tragedies","Trailers","Trails","Trainers","Trainings","Trains","Traits","Transactions","Transcripts","Transfers","Transformations","Transitions","Transits","Translations","Transmissions","Transparencies","Transportations","Transports","Traps","Traumas","Travellers","Travels","Treasures","Treaties","Treatments","Trees","Trends","Trials","Tribes","Tribunals","Tributes","Tricks","Tries","Triggers","Trios","Trips","Triumphs","Troops","Trophies","Troubles","Trousers","Trucks","Trustees","Trusts","Truths","Tsunamis","Tubes","Tuesdays","Tuitions","Tunes","Tunnels","Turnouts","Turnovers","Turns","Tvs","Twists","Types","Tyres","Umbrellas","Uncertainties","Uncles","Undergraduates","Understandings","Underwears","Unemployments","Uniforms","Unions","Unities","Units","Universes","Universities","Updates","Upgrades","Usages","Users","Uses","Utilities","Vacations","Vacuums","Validities","Valleys","Values","Vans","Variables","Variations","Varieties","Vegetables","Vehicles","Veins","Ventures","Venues","Verdicts","Verses","Versions","Vessels","Veterans","Vices","Victories","Videos","Viewers","Viewpoints","Views","Villagers","Villages","Violations","Violences","Virtues","Viruses","Visas","Visions","Visitors","Visits","Vitamins","Voices","Volumes","Volunteers","Votes","Votings","Vulnerabilities","Wages","Waiters","Waits","Walks","Walls","Wards","Warehouses","Warfares","Warmings","Warnings","Warrants","Warriors","Washes","Washings","Wastes","Watches","Waters","Waves","Ways","Weaknesses","Wealths","Weathers","Webs","Websites","Weddings","Wednesdays","Weeds","Weekends","Weeks","Weights","Welcomes","Welfares","WellBeings","Wells","Wests","Wheat","Wheels","Whispers","Wholes","Widows","Widths","Wildlives","Willingnesses","Wills","Windows","Winds","Wines","Wings","Winners","Wins","Winters","Wires","Wisdoms","Wishes","Withdrawals","Witnesses","Wits","Wonders","Woods","Wools","Words","Workers","Workforces","Workouts","Workplaces","Works","Workshops","Worlds","Worms","Worries","Worses","Worships","Worsts","Worths","Wounds","Wrists","Writers","Writings","Wrongs","Yards","Years","Yellows","Yesterdays","Yields","Zones"]];function Ma(){var e,t,n,i="";for(var o in Pa){i+=(n=Pa[o])[(e=0,t=n.length-1,Math.floor(Math.random()*(t-e+1))+e)]}return i}var Ra={room:Ma()},Da=new Map;Da.set("entrance",(function(e){return Object(Ia.jsx)(Ua,Object(wn.a)(Object(wn.a)({},e),Ra))})),Da.set("afk",(function(e){return Object(Ia.jsx)(Ea,{})}));var Ba=function(e){return Object(Ia.jsxs)(ka.a,Object(wn.a)(Object(wn.a)({},e),{},{open:da.show(),onClose:e.onClose,maxWidth:"xl",fullWidth:!1,fullScreen:!0,children:[da.title?Object(Ia.jsx)(Ta.a,{id:"simple-dialog-title",disableTypography:!0,style:{fontSize:c()?"3em":"1em"},children:da.title}):void 0,e.children]}))},Na=function(e){function t(){"retry"!==da.type&&da.clear()}return Object(Ia.jsx)(pa.a,{children:function(){return da.type?Da.has(da.type)?Da.get(da.type)(e):Object(Ia.jsxs)(Ba,{onClose:function(){t()},children:[Object(Ia.jsx)(ya.a,{style:{fontSize:c()?"2.5em":"1em"},children:da.message}),"retry"!==da.type?Object(Ia.jsxs)(Aa.a,{mt:2,mb:2,ml:4,children:[Object(Ia.jsx)(Oa.a,{variant:"contained",color:"primary",style:{textTransform:"none",fontSize:c()?"2.5em":"1em"},onClick:function(){t()},children:ee("emClose")}),"\xa0",Object(Ia.jsx)(Oa.a,{variant:"contained",color:"secondary",style:{textTransform:"none",fontSize:c()?"2.5em":"1em"},onClick:function(){da.supressedTypes.add(da.type),t()},children:ee("emNeverShow")})]}):void 0]}):Object(Ia.jsx)(Ia.Fragment,{})}})};Na.displayName="ErrorDialog";var za=!1,Fa="";function La(){return Fa}var Ua=function(e){var t=e.stores.participants,n=Object(ha.useState)(t.local.information.name),r=Object(i.a)(n,2),s=r[0],l=r[1],u=sessionStorage.getItem("room"),d=Object(ha.useState)(!1),p=Object(i.a)(d,2),h=p[0],v=p[1],m=e.stores.map,f=String(o.room).split("_"),b=Number(null===f||void 0===f?void 0:f.length)-1,g="";Number(null===f||void 0===f?void 0:f.length)>1&&(g=String(o.room).split("_")[0]);var j=Object(ha.useState)(o.room?f[b]:""),A=Object(i.a)(j,2),O=A[0],y=A[1],x=Object(ha.useState)([String(Object(e).room)]),C=Object(i.a)(x,2),w=C[0],S=C[1],k=w[0],T=Object(ha.useState)(k.slice(0,0)),I=Object(i.a)(T,2),E=I[0],P=I[1],M=Object(ha.useState)(0),R=Object(i.a)(M,2),D=R[0],B=R[1];Object(ha.useEffect)((function(){if(-1!==window.location.href.indexOf("?u=")){var e=window.location.href.split("?")[1].split("&")[0].split("=")[1];l(e),-1!==window.location.href.indexOf("&room=")&&N()}var t=function e(t){t.ctrlKey||"Enter"===t.key&&(window.removeEventListener("keydown",e),N())};if(window.addEventListener("keydown",t),""===O){var n=setTimeout((function(){if(clearTimeout(n),P(k.slice(0,D)),D+1>k.length){clearTimeout(n);var e=setTimeout((function(){clearTimeout(e),B(0),S([Ma()])}),4e3)}else B(D+1)}),30);return function(){window.removeEventListener("keydown",t),clearTimeout(n)}}}));var N=function(){v(!0);var e=setTimeout((function(){clearTimeout(e);var n=c()?[2,2,2]:[1,1,1],i=(new DOMMatrix).scaleSelf(n[0],n[1],n[2]);m.setMatrix(i),m.setCommittedMatrix(i);var a=setTimeout((function(){clearTimeout(a),z()}),3e3);!function(e){e&&(t.local.information.name!==s||"Anonymous"===t.local.information.name?(Fa="N",s,t.local.information.name=s,t.local.information.randomAvatar=[],t.local.sendInformation(),t.local.saveInformationToStorage(!0)):Fa="O",""===O?(o.room=w[0],u!==O&&sessionStorage.setItem("room",w[0]),y(w[0])):(o.room=O,u!==O&&sessionStorage.setItem("room",O),y(O))),""!==O?""===g?window.history.replaceState({},"null","/?room="+O):window.history.replaceState({},"null","/"+g+"/?room="+O):""===g?window.history.replaceState({},"null","/?room="+w[0]):window.history.replaceState({},"null","/"+g+"/?room="+w[0]);var n=setTimeout((function(){clearTimeout(n),O,za=!0,da.clear()}),10)}(!0)}),100)};function z(){var e=!1,n=0,o=0,r=Array.from(t.remote.keys()).filter((function(e){return e!==t.localId}));if(r.length>0){var s,c=Object(a.a)(r.entries());try{for(c.s();!(s=c.n()).done;){var l,u,d=Object(i.a)(s.value,1)[0],p=Number(null===(l=t.remote.get(r[d]))||void 0===l?void 0:l.pose.position[0]),h=Number(null===(u=t.remote.get(r[d]))||void 0===u?void 0:u.pose.position[1]);if(n=Number(Math.random()*m.screenSize[0])+60,o=Number(Math.random()*m.screenSize[1])+60,n>=p-60&&n<=p+60&&o>=h-60&&o<=h+60)return void z();p>=-60&&p<=60&&h>=-60&&h<=60&&(e=!0)}}catch(v){c.e(v)}finally{c.f()}}else m.setMouse([m.screenSize[0]/2,m.screenSize[1]/2]),t.local.pose.position=Object.assign({},m.mouseOnMap);e?(m.setMouse([n,o]),t.local.pose.position=Object.assign({},m.mouseOnMap),m.focusOn(t.local)):(m.setMouse([m.screenSize[0]/2,m.screenSize[1]/2]),t.local.pose.position=Object.assign({},m.mouseOnMap))}var F=te(),L=F.t,U=F.i18n,Q={fontSize:c()?"2.5em":"1em",height:c()?"2em":"1.5em",color:"black",backgroundColor:"white",padding:"3px",width:c()?"14.5em":"15em"},G={fontSize:c()?"1.2em":"1em",color:"white",padding:"0.5em 0 0.2em 0",marginLeft:"-7em"},Y={fontSize:c()?"1.2em":"1em",color:"white",padding:"0.2em 0 0.2em 0",marginLeft:"-10.5em"};return Object(Ia.jsx)(Ba,{onClose:function(){da.clear()},children:Object(Ia.jsxs)(ya.a,{onClick:function(){return h?da.clear():""},style:h?{overflowY:"hidden",overflowX:"hidden",backgroundColor:"#5f7ca0",fontSize:c()?"2em":"1em",transition:"0.3s ease-out"}:{overflowY:"hidden",overflowX:"hidden",backgroundColor:"#5f7ca0",fontSize:c()?"2em":"1em",transition:"0s ease-out"},children:[Object(Ia.jsx)("p",{style:{textAlign:"right",color:"white",fontSize:c()?"1.2em":"1em"},children:"Version 2.0.5"}),Object(Ia.jsx)(Oa.a,{style:{position:"absolute",top:30,right:20,display:"none"},onClick:function(){var e=(ie.findIndex((function(e){return e===U.language}))+1)%ie.length;U.changeLanguage(ie[e])},children:Object(Ia.jsx)(Sa.a,{})}),Object(Ia.jsx)("p",{}),Object(Ia.jsx)("div",{style:h?{position:"relative",width:"100em",display:"none"}:{position:"relative",width:"100em",display:"block"}}),Object(Ia.jsx)("div",{style:h?{position:"relative",top:"3em",width:"100%",textAlign:"center",opacity:"0",transform:"scale(0.10)",transition:"0.3s ease-out",left:c()?"-0.5em":"0em"}:{position:"relative",top:"4em",width:"100%",textAlign:"center",left:c()?"-0.5em":"0em"},children:Object(Ia.jsx)("img",{style:{width:"30em",userSelect:"none"},draggable:!1,src:fa,alt:""})}),Object(Ia.jsx)("div",{style:h?{position:"relative",top:"-25em",width:"100%",textAlign:"center",display:"none"}:{position:"relative",top:"-25em",width:"100%",textAlign:"center"},children:Object(Ia.jsx)("img",{style:{width:"10em",userSelect:"none"},src:ba,draggable:!1,alt:""})}),Object(Ia.jsx)("br",{}),Object(Ia.jsx)(Aa.a,{mt:1,children:Object(Ia.jsxs)("div",{style:h?{position:"relative",top:"-26em",width:"100%",textAlign:"center",display:"none"}:{position:"relative",top:"-26em",width:"100%",textAlign:"center"},children:[Object(Ia.jsxs)(Ca.a,{style:Y,children:[" ",L("YourName")," "]}),Object(Ia.jsx)(xa.a,{value:s,autoFocus:!0,disableUnderline:!0,inputProps:{style:Q},onChange:function(e){return l(e.target.value)}})]})}),Object(Ia.jsx)(Aa.a,{mt:2,children:Object(Ia.jsxs)("div",{style:h?{position:"relative",top:"-26em",width:"100%",textAlign:"center",display:"none"}:{position:"relative",top:"-26em",width:"100%",textAlign:"center"},children:[Object(Ia.jsxs)(Ca.a,{style:G,children:[" ",L("Venue")," "]}),Object(Ia.jsx)(xa.a,{value:O,autoFocus:!1,disableUnderline:!0,placeholder:E,inputProps:{style:Q},onChange:function(e){return y(e.target.value)}})]})}),Object(Ia.jsx)(Aa.a,{mt:2,children:Object(Ia.jsx)("div",{style:h?{position:"relative",top:c()?"-25.5em":"-25em",width:"100%",textAlign:"center",display:"none"}:{position:"relative",top:c()?"-25.5em":"-25em",width:"100%",textAlign:"center"},children:Object(Ia.jsx)("img",{style:{width:"4em",userSelect:"none"},src:ga,draggable:!1,onClick:function(){return N()},alt:""})})}),Object(Ia.jsx)(Aa.a,{mt:7,children:Object(Ia.jsx)("div",{style:h?{position:"relative",top:c()?"8.6em":"8.5em",width:"100%",height:"100%",textAlign:"center",display:"block"}:{position:"relative",top:c()?"-23em":"-24em",width:"100%",textAlign:"center"},children:Object(Ia.jsx)("img",{style:{width:c()?"9.5em":"8em",userSelect:"none"},src:ja,draggable:!1,alt:""})})})]})})};Ua.displayName="TheEntrance";var Qa=n(172),Ga=n.n(Qa),Ya=n(41),Ha=n(616),Wa=n(348),Ja=n(612),Va=n(604),Ka=n(606),Xa=n(302),Za=n.n(Xa),qa=n(180),_a=n.n(qa),$a=n(304),er=n.n($a),tr=n(303),nr=n.n(tr),ir=n(179),or=n.n(ir),ar=n(301),rr=n.n(ar),sr=n(623),cr=n(124),lr=n(602),ur=n(601),dr=n(628),pr=30,hr=function(e){return Object(Ia.jsx)(ur.a,{container:!0,spacing:2,children:Object(Ia.jsx)(dr.a,{value:e.value,min:0,max:pr,track:!1,valueLabelDisplay:"auto","aria-labelledby":"continuous-slider",style:{width:200},onChange:function(t,n){return e.setValue(n)},valueLabelFormat:function(e){return e===pr?"\u221e":e.toString()}})})},vr=function(e){var t=e.roomInfo,n=e.participants.local,i=Object(pa.b)((function(){return n.remoteVideoLimit})),o=Object(pa.b)((function(){return n.remoteAudioLimit})),a=Object(Ia.jsx)(hr,{value:i>=0?i:pr,setValue:function(e){n.remoteVideoLimit=e===pr?-1:e}}),r=Object(Ia.jsx)(hr,{value:o>=0?o:pr,setValue:function(e){n.remoteAudioLimit=e===pr?-1:e}});return Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)(lr.a,{control:a,label:ee("videoLimit")}),Object(Ia.jsx)(lr.a,{control:r,label:ee("audioLimit")}),Object(Ia.jsx)("br",{}),Object(Ia.jsx)(Oa.a,{variant:"contained",color:t.passMatched?"primary":"default",style:{textTransform:"none"},disabled:!t.passMatched,onClick:function(){t.passMatched&&Qo.dataConnection.sync.sendTrackLimits("",[n.remoteVideoLimit,n.remoteAudioLimit])},children:"Sync limits"})]})};vr.displayName="RemoteTrackLimitControl";var mr=function(e){var t=va.a.useState(""),n=Object(i.a)(t,2),o=n[0],a=n[1],r=va.a.useState(!1),s=Object(i.a)(r,2),c=s[0],l=s[1],u=va.a.useState(!1),d=Object(i.a)(u,2),p=d[0],h=d[1],v=va.a.useRef(null),m=va.a.useRef(null),f=e.stores.roomInfo;return Object(Ia.jsx)(pa.a,{children:function(){var t=Q(f.backgroundFill)?"white":"black",n=Q(f.backgroundColor)?"white":"black",i=f.passMatched?"primary":"default";return Object(Ia.jsxs)(Aa.a,{m:2,children:[Object(Ia.jsx)(Aa.a,{m:2,children:Object(Ia.jsx)(vr,Object(wn.a)({},e.stores),"remotelimitcontrol")}),Object(Ia.jsxs)(Aa.a,{mt:2,mb:2,children:[Object(Ia.jsx)(sr.a,{autoFocus:!0,label:"Admin password",type:"password",style:{marginTop:-12},value:null===f||void 0===f?void 0:f.password,onChange:function(e){f.password=e.currentTarget.value},onKeyPress:function(e){return function(e,t){if("Enter"===e.key){var n=t.roomProps.get("password");t.passMatched=t.password===(n||"")}}(e,f)}}),"\u2003",Object(Ia.jsx)(Oa.a,{variant:"contained",color:"primary",style:{textTransform:"none"},onClick:function(){var e=f.roomProps.get("password");e||(e=""),f.passMatched=(null===f||void 0===f?void 0:f.password)===e},children:" Check "}),"\u2003",f.passMatched?"OK":"Not matched"]}),Object(Ia.jsxs)(Aa.a,{mt:2,mb:2,children:[Object(Ia.jsx)(sr.a,{label:"New password to update",type:"text",style:{marginTop:-12},value:null===f||void 0===f?void 0:f.newPassword,onChange:function(e){f.newPassword=e.currentTarget.value}}),"\u2003",Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,disabled:!f.passMatched,style:{textTransform:"none"},onClick:function(){f.passMatched&&Qo.dataConnection.setRoomProp("password",f.newPassword)},children:" Update password "}),"\u2003"]}),Object(Ia.jsxs)(Aa.a,{mt:2,children:[Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,style:{textTransform:"none"},disabled:!f.passMatched,onClick:function(){f.passMatched&&Qo.dataConnection.sendMessage(Rn.MUTE_VIDEO,!0)},children:" Mute all videos "})," \xa0",Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,style:{textTransform:"none"},disabled:!f.passMatched,onClick:function(){f.passMatched&&Qo.dataConnection.sendMessage(Rn.MUTE_VIDEO,!1)},children:" Show all videos "}),"\u2003",Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,style:{textTransform:"none"},disabled:!f.passMatched,onClick:function(){f.passMatched&&Qo.dataConnection.sendMessage(Rn.MUTE_AUDIO,!0)},children:" Mute all mics "}),"\xa0",Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,style:{textTransform:"none"},disabled:!f.passMatched,onClick:function(){f.passMatched&&Qo.dataConnection.sendMessage(Rn.MUTE_AUDIO,!1)},children:" Switch on all mics "})]}),Object(Ia.jsxs)(Aa.a,{mt:2,children:[Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,style:{textTransform:"none"},disabled:!f.passMatched,onClick:function(){f.passMatched&&ea.removeAllContents()},children:" Remove all Contents "}),"\u2003",Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,style:{textTransform:"none"},disabled:!f.passMatched,onClick:function(){if(f.passMatched){var e=new Set(ea.roomContentsInfo.keys());ea.all.forEach((function(t){return e.add(t.id)})),ea.all.filter((function(e){return e.ownerName===o})).forEach((function(e){return ea.removeByLocal(e.id)}))}},children:" Clear contents by user name "})," \u2009",Object(Ia.jsx)(sr.a,{label:"name",type:"text",style:{marginTop:-12},value:o,onChange:function(e){a(e.currentTarget.value)}})]}),Object(Ia.jsxs)(Aa.a,{mt:2,children:[Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,style:{textTransform:"none"},disabled:!f.passMatched,onClick:function(){f.passMatched&&Qo.isDataConnected()&&Qo.dataConnection.pushOrUpdateMessageViaRelay(Rn.RELOAD_BROWSER,{})},children:" Reload "}),"\u2003",Object(Ia.jsx)(Oa.a,{variant:"contained",disabled:!f.passMatched,style:f.passMatched?{backgroundColor:Y(f.backgroundFill),color:t,textTransform:"none"}:{textTransform:"none"},onClick:function(){f.passMatched&&l(!0)},ref:v,children:"Back color"}),Object(Ia.jsx)(Va.a,{open:c,onClose:function(){l(!1),Qo.dataConnection.setRoomProp("backgroundFill",JSON.stringify(f.backgroundFill))},anchorEl:v.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(Ia.jsx)(cr.a,{color:{r:f.backgroundFill[0],g:f.backgroundFill[1],b:f.backgroundFill[2]},disableAlpha:!0,onChange:function(e,t){t.preventDefault(),f.backgroundFill=[e.rgb.r,e.rgb.g,e.rgb.b]}})}),"\xa0",Object(Ia.jsx)(Oa.a,{variant:"contained",disabled:!f.passMatched,style:f.passMatched?{backgroundColor:Y(f.backgroundColor),color:n,textTransform:"none"}:{textTransform:"none"},onClick:function(){f.passMatched&&h(!0)},ref:m,children:"Pattern color"}),Object(Ia.jsx)(Va.a,{open:p,onClose:function(){h(!1),Qo.dataConnection.setRoomProp("backgroundColor",JSON.stringify(f.backgroundColor))},anchorEl:m.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(Ia.jsx)(cr.a,{color:{r:f.backgroundColor[0],g:f.backgroundColor[1],b:f.backgroundColor[2]},disableAlpha:!0,onChange:function(e,t){t.preventDefault(),f.backgroundColor=[e.rgb.r,e.rgb.g,e.rgb.b]}})}),"\xa0",Object(Ia.jsx)(Oa.a,{variant:"contained",color:i,style:{textTransform:"none"},disabled:!f.passMatched,onClick:function(){f.passMatched&&(f.backgroundFill=f.defaultBackgroundFill,f.backgroundColor=f.defaultBackgroundColor,Qo.dataConnection.setRoomProp("backgroundFill",JSON.stringify(f.backgroundFill)),Qo.dataConnection.setRoomProp("backgroundColor",JSON.stringify(f.backgroundColor)))},children:" Default "}),"\u2003"]})]})}})},fr=n(607),br=n(625),gr=n(74),jr=n.n(gr),Ar=n(107),Or=n.n(Ar),yr=n(351),xr=Object(Ka.a)({root:{padding:2},formControlLabel:{fontSize:c()?"2.5em":"1em"}}),Cr=function(e){var t=e.stores.participants.local,n=xr(),i=Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsx)(br.a,{icon:Object(Ia.jsx)(Or.a,{htmlColor:"transparent"}),checkedIcon:Object(Ia.jsx)(jr.a,{style:{fontSize:c()?"2em":"1em"},htmlColor:"black"}),className:n.root,checked:t.physics.onStage,name:"broadcast",onChange:function(e){return t.setPhysics({onStage:e.target.checked})}})}}),o=te().t;return Object(Ia.jsxs)(fr.a,{children:[Object(Ia.jsx)("div",{style:{width:"130%",height:"1.5px",backgroundColor:"#bcbec0",marginLeft:"-40px"}}),Object(Ia.jsx)(lr.a,{style:{position:"relative",top:"5px",left:"-25px",fontSize:c()?"2em":"1em"},control:i,label:Object(Ia.jsx)(yr.a,{className:n.formControlLabel,children:o("broadcastMyVoice")})})]})};Cr.displayName="BroadcastControl";var wr=n(557),Sr=n(608);function kr(e,t){return{onMouseOver:function(n){var i;null!==(i=n.nativeEvent.sourceCapabilities)&&void 0!==i&&i.firesTouchEvents||(t.timeout&&(clearTimeout(t.timeout),t.timeout=void 0),e(!0))},onMouseOut:function(n){t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout((function(){e(!1),t.timeout=void 0}),500)}}}var Tr=function(e){return Object(Ia.jsx)(Sr.a,{in:e.show,style:e.style,children:Object(Ia.jsx)(wr.a,{className:e.className,color:e.color,onClick:function(t){e.onClickMore&&e.onClickMore(t)},size:"small",ref:e.buttonRef,children:Object(Ia.jsx)("img",{src:"data:image/png;base64,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",width:c()?90:45,height:c()?60:30,draggable:!1,alt:""})})})},Ir=n(610),Er=n(609),Pr=Object(Ka.a)((function(e){return{container:{display:"inline-block",marginLeft:e.spacing(2),marginRight:e.spacing(2),marginTop:e.spacing(1),marginBottom:e.spacing(1),pointerEvents:"auto"}}})),Mr=function(e){var t=Pr(),n=Object(ha.useState)(!1),o=Object(i.a)(n,2),a=(o[0],o[1]),r=Object(ha.useRef)({timeout:void 0}).current,s="";return void 0!==e.index&&!0===e.isOpen&&(s=e.index/2*.3+.5+"s"),Object(Ia.jsxs)("div",Object(wn.a)(Object(wn.a)({className:t.container+(e.className?" ".concat(e.className):""),style:e.style,ref:e.divRef},kr(a,r)),{},{children:[Object(Ia.jsx)(Er.a,{style:{height:e.size,width:e.size},onClick:function(t){e.onClick&&e.onClick(t)},onMouseDown:function(t){e.onDown&&e.onDown(t)},onTouchStart:function(t){e.onDown&&e.onDown(t)},onContextMenu:function(t){t.preventDefault(),e.onClickMore&&e.onClickMore(t)},color:e.color,onFocus:function(e){var t;null===(t=e.target)||void 0===t||t.blur()},children:e.children}),e.onClickMore?Object(Ia.jsx)(Tr,{style:c()?e.isOpen?{position:"relative",top:-103,left:-95,marginRight:-81,opacity:.8,transition:"0.3s ease-out",transitionDelay:s}:{position:"relative",top:-10,left:-95,marginRight:-81,opacity:0,transition:"0.1s ease-out",transitionDelay:"0s"}:e.isOpen?{position:"relative",top:-53,left:-52,marginRight:-41,opacity:.8,transition:"0.3s ease-out",transitionDelay:s}:{position:"relative",top:-10,left:-52,marginRight:-41,opacity:0,transition:"0.1s ease-out",transitionDelay:"0s"},show:!0,color:e.color,htmlColor:e.htmlColor,iconColor:e.iconColor,onClickMore:e.onClickMore}):void 0]}))},Rr=function(e){return e.title?Object(Ia.jsx)(Ir.a,{placement:"top-start",arrow:!0,title:e.title,children:Object(Ia.jsx)("span",{style:{paddingTop:20},children:Object(Ia.jsx)(Mr,Object(wn.a)({},e))})}):Object(Ia.jsx)(Mr,Object(wn.a)({},e))},Dr=n(347),Br=n(614),Nr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAACtElEQVR4nO3d8U3bQBhA8a9V/ycblE7QdANGyAhhg4zACN2g6QTNBoUJSjeADZIJrrJ0kVDpGftsH7zq/aSoFeCPqx+uExvBu5RSiOm93biMB2Y8MOOBGQ/MeGDGAzMemPHAjAdmPDDjgRkPzHhgxgMzHpjxwIwHZjww44EZD8x4YMYDMx6Y8cCMB2Y8MOOBGQ/MeGDGAzMemPHAjAdmPDDjgRkPzHhgxgMzHpjxwIwHZjww44EZD+zDG1j6Vf7zPiKOM85dRcQ6//12xrlLzx6u+5GNjR+rlNJNSukhPfeQ37eqXFPf7PuU0m7C7MuU0r5n9rb1vmwdbpNSOv7jH/+3Y/7YMbO3A2d3O389cvZuwNxzxLGzEfG2A3fAU0O/msfOPo7YyfsFZ096tPpJt9354Vfltl/y+bCkO2f+rJh7yut66PmYTUT8qJj9mGfPeQ5/ptWzza8LbruvHH0RETc9719NmP0xInaV2w7W4sibctSdlY6+2iPjqU+Fo28bEd8mzD3lL4DFtDjyNgvOuCq8fYzSjKnrvphpfUUt4l3OMGM98u1jlNY3x7qNt/R/PwWfX+FzjtIiXt+zuaEWfdZW8PsVPucolHillwp9LyGGKq1vjnUveumsRbzDgjPm2DmlGVPXffof4nVHx92E7e96jrBDfkFc63vPEXbIAWpNeW07iFdYvMLyom7nX1dsdz3gvHZbMfuUo790Xjvko3Ps7E2TJ1kNL0yHdxXmfbSOF97P491V6HO+CkG62/0m7qT7yw/B/AYkMOOBGQ/MeGDGAzMemPHAjAdmPDDjgRkPzHhgxgMzHpjxwIwHZjww44EZD8x4YMYDMx6Y8cCMB2Y8MOOBGQ/MeGDGAzMemPHAjAdmPDDjgRkPzHhgxgMzHpjxwIwHZjww44EZD8x4YMajiog/21dcxOr72+UAAAAASUVORK5CYII=",zr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAADU0lEQVR4nO3cMWsTYRzH8W9FrIKDCCKClU4OIjSb4tSX0JdQxaEqODgKooivQBCdtIObS9+BcRGdjOLkVHARF7u1dYnDpSaRJJecvfs/vye/LwR6pMnzlA93l1zvbqHb7eI0OxI9AVc94wlnPOGMJ5zxhDOecMYTznjCGU844wlnPOGMJ5zxhDOecMYTznjCGU844wlnPOGMJ5zxhDOecMYTznjCGU844wlnPOGMJ5zxhDsaPYFDahV4ApxvcMw94D1wD9hpcNy/LWRwidcq8DZw/O/AhYiBc9hsPgwefwlYixg4B7yl6AkArYhBc8DLZb89c7n+4e+Adk3vvQGcrem9ZypXvDbwqKb3XiMRvBw2m3Ob8YQznnDGE854wql82jwF3Or9/JygY4mppYDXAj4Ai73lB8AlYLu3vDfiNXOBm/pmswV8pA8HcAJYH1j+OuJ17fqmlE4p4x3AHSv5vZvA597P+8B9oFPjvJIp1c3mJLh9YHNgeYegA8PRpbjmla1xG/T3d3NdanhlcNcZXuvmupTwDDdjqeAZrkIp4BmuYtF4hvuPIvGWKY6cTPoe9wroBjw6FIfkki4S7zXDR05SaoX+sdRki8Rr8gTZKl2OnkBZkXhfAseepjfREygrEu8usBs4/rh+Uexrt6InUlYk3jZwjcmAd4CFhh+ngRuH9UfWWfRXhQ6TAZ8Bt5ubjlbReNAH3B/zvAHHlAIeFIBXgd9jnjfgiFLBgwLwCgacupTwYDrA9cZmk3ip4UE54AuKQ2v/1kLgkNZhliIeTAZcZHjtWwZ+Ap8ovqO9rHluyZQqHpSvgQc9Bc4MLF9nTs5pSRkP+oCD52buMvxvoosjXhdymXHTpXr22GAd4Bx9kC2GT6o93viMEkkBDwqszehJpFbqm003IeMJZzzhjCec8YRT+bQ5a2sUR172gB8zvrZd8vzJCvOppVzxVnqPKkXfy2zqcthsjroydi7KAe9b9AQIupgzh/ttTnsFbV2F3W8zBzwoAB9T3Gigqf2473TrqpfDPm9uM55wxhPOeMIZTzjjCWc84YwnnPGEM55wxhPOeMIZTzjjCWc84YwnnPGEM55wxhPOeMIZTzjjCWc84YwnnPGEM55wxhPOeMIZT7g/q2qRvKQQJk8AAAAASUVORK5CYII=",Fr=n(305),Lr=n.n(Fr);function Ur(e){var t=e.split("_");return r(t.length<=2),Object(Ia.jsxs)(Ia.Fragment,{children:[t[0],t[1]?Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)("strong",{children:t[1].substr(0,1)}),t[1].substr(1)]}):void 0]})}var Qr,Gr,Yr,Hr,Wr=n(559),Jr=n(611),Vr=function(e){var t=e.icon,n=e.text,i=e.plain,o=e.secondEl,a=e.tip,r=e.dense,s=e.onClick,l=n?Ur(n):void 0,u=c()?"2.5em":"1em",d=Object(Ia.jsxs)(Wr.a,{button:!0,dense:r,onClick:s,style:{alignItems:"start"},children:[t?Object(Ia.jsx)(Jr.a,{style:{fontSize:u,height:u},children:t}):void 0,Object(Ia.jsxs)("div",{style:{fontSize:c()?"2.5em":"1.2em",verticalAlign:"middle"},children:[l||i,o?Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)("br",{}),o]}):void 0]})]});return a?Object(Ia.jsx)(Ir.a,{title:a,placement:"top-end",enterDelay:1e3,children:d}):d},Kr=n(142),Xr=[],Zr=!1;function qr(e,t,n,i){e||(e=100),t||(t=100),n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px"),n.width=e,n.height=t,Hr||(Hr=window.document.createElement("canvas")),Hr.width=e,Hr.height=t;var o=Hr.getContext("2d");if(o){if(o.strokeStyle=On.local.getColor()[2],o.lineWidth=6,o.lineCap="round",o.fillRect(0,0,e,t),On.local.information.avatarSrc&&!Yr&&((Yr=new Image).onload=function(){Zr=!0},Yr.crossOrigin="anonymous",Yr.src=On.local.information.avatarSrc),!On.local.information.avatarSrc&&Yr&&(Yr.remove(),Zr=!1,Yr=void 0),Zr&&Yr)o.drawImage(Yr,0,0,Yr.width,Yr.height,0,0,e,t);else{var r=On.local.information.name.split(" "),s="";r.forEach((function(e){return s+=e?e.substring(0,1):""})),s=s.substring(0,2),o.fillStyle=W(On.local.getTextColorRGB(),.5),o.font="".concat(.3*t,"px Sans"),o.textAlign="center",o.textBaseline="middle",o.fillText(s,.5*e,.5*t,.8*e),o.fillStyle=On.local.getColor()[0]}i&&(Xr=i.landmarks.positions);var c=[Xr.slice(0,17),Xr.slice(17,22),Xr.slice(22,27),Xr.slice(27,31),Xr.slice(31,36)],l=[Xr.slice(36,42),Xr.slice(42,48)],u=[Xr.slice(60,68)];p(o,c,!1),p(o,l,!0),p(o,u,!0);var d=n.getContext("2d");null===d||void 0===d||d.drawImage(Hr,0,0)}function p(e,t,n){var i,o=Object(a.a)(t);try{for(o.s();!(i=o.n()).done;){var r=i.value;e.beginPath();var s,c=Object(a.a)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;l===r[0]?e.moveTo(l.x,l.y):e.lineTo(l.x,l.y)}}catch(u){c.e(u)}finally{c.f()}n&&e.closePath(),e.stroke()}}catch(u){o.e(u)}finally{o.f()}}}var _r,$r=[],es=-1,ts=[],ns=[],is=-1,os=[];var as,rs,ss,cs=!1;function ls(){Qr&&(clearInterval(Qr),Qr=void 0),Gr&&(Gr.srcObject=null),On.local.viewpoint.nodding=void 0}function us(e,t){return new Promise((function(n,i){t||(t=On.local.devicePreference.videoInputDevice),navigator.mediaDevices.getUserMedia({video:Object(wn.a)({deviceId:t},config.rtc.video)}).then((function(t){if(e){Gr||(Object(Kr.d)("/faceApiModels").then((function(){Object(Kr.c)("/faceApiModels").then((function(){cs=!0}))})),(Gr=window.document.createElement("video")).autoplay=!0),_r||(_r=window.document.createElement("canvas")),Gr.srcObject=t,Qr&&clearInterval(Qr);var i=new Kr.a({inputSize:160,scoreThreshold:.5});Qr=setInterval((function(){null!==Qr&&(cs?Object(Kr.b)(Gr,i).withFaceLandmarks(!0).then((function(e){return qr(Gr.videoWidth,Gr.videoHeight,_r,e),function(e){if(e){var t=[e.detection.relativeBox.x,e.detection.relativeBox.y],n=e.detection.relativeBox.width,i=A([e.landmarks.positions[30].x,e.landmarks.positions[30].y],[e.detection.box.left,e.detection.box.top]);if(i[0]=i[0]/e.detection.box.width,i[1]=i[1]/e.detection.box.height,ns.length){var o=.2;ns=j(y(o,t),y(.8,$r)),is=o*n+.8*es,os=j(y(.4,i),y(.6,ts))}else ns=t,is=n,os=i;if($r.length){var a=A(ns,$r),r=is-es,s=T(On.local.pose.orientation,[a[0],r]);On.local.pose.position=j(On.local.pose.position,y(-100,s))}if(ts.length){var c=A(os,ts);On.local.pose.orientation+=-100*c[0];var l=On.local.viewpoint.nodding?On.local.viewpoint.nodding+c[1]:c[1];On.local.viewpoint.nodding=.99*l}$r=ns,es=is,ts=os}}(e),e})).catch((function(){qr(Gr.videoWidth,Gr.videoHeight,_r)})):qr(Gr.videoWidth,Gr.videoHeight,_r))}),1e3/15);var o={track:_r.captureStream(15).getVideoTracks()[0],peer:On.local.id,role:"avatar"};n(o)}else{ls();var a={track:t.getVideoTracks()[0],peer:On.local.id,role:"avatar"};n(a)}})).catch(i)}))}var ds=(as=fe.h.shallow,rs=Object(K.a)((function e(){Object(X.a)(this,e),Object(J.a)(this,"videos",ss,this),Object(fe.g)(this)})),ss=Object(V.a)(rs.prototype,"videos",[as],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rs),ps=function(e){var t=e.setStep,n=e.stores,i=n.contents,o=n.map,a=n.participants,r=Object(pa.b)((function(){return e.cameras.videos.map((function(e,t){return function(e,t,n){var i=!1;i=e.deviceId===a.local.devicePreference.videoInputDevice;var o=String.fromCharCode(65+n);return Object(Ia.jsx)(Ja.a,{onClick:function(){t(e.deviceId)},children:"".concat(o,"\xa0").concat(i?"\ud83d\ude42\xa0":"\xa0\xa0\u2003").concat(e.label)},e.deviceId)}(e,s,t)}))}));function s(n){t("none"),n&&us(!1,n).then((function(t){var n=li([t.track],o,"screen",Object(e).xCord,Object(e).yCord,Object(e).from);i.assignId(n),t.role=n.id,i.getOrCreateContentTracks(Qo.rtcConnection.peer,n.id),i.shareContent(n),Qo.addOrReplaceLocalTrack(t)}))}return Object(ha.useEffect)((function(){var t=function(t){if("Key"===t.code.substring(0,3)){var n,i=t.code.charCodeAt(3)-65;s(null===(n=e.cameras.videos[i])||void 0===n?void 0:n.deviceId)}};return window.addEventListener("keypress",t),function(){window.removeEventListener("keypress",t)}}),[]),Object(Ia.jsx)(Ia.Fragment,{children:r})};ps.displayName="CameraSelector";var hs=function(e){e.onSelectedFile;return Object(ha.useEffect)((function(){if(gapi&&window.gapiPickerReady)sessionStorage.getItem("gdriveToken")})),Object(Ia.jsx)(Ia.Fragment,{children:"loading..."})};hs.displayName="GoogleDriveImport";var vs=n(184),ms=n(605),fs=n(560),bs=Object(Dr.a)({palette:{primary:{main:"#7ececc"},secondary:{main:"#ef4623"}}}),gs=Object(fs.a)({mainContainer:{display:"flex",height:"100%",width:"100%"},menuContainer:{position:"relative",top:"12px",width:"100px",height:"100px"},galleryMain:{width:"100%",height:"100%",minWidth:"440px",minHeight:"245px",border:"2px dashed #00000030",left:"5px"},gallery:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10,overflowY:"scroll",overflowX:"hidden",height:"300px",alignContent:"flex-start"},deavticeButtons:{position:"relative",padding:"10px",fontSize:c()?"1.5em":"1em",fontWeight:"bold",borderBottom:"2px solid #7ececc",color:"#000000",cursor:"pointer"},avticeButtons:{position:"relative",padding:"10px",fontSize:c()?"1.5em":"1em",fontWeight:"bold",borderBottom:"2px solid #7ececc",color:"#ef4623",cursor:"default"}}),js="";function As(){return js}function Os(e){var t=e.setStep,n=e.value,o=e.onFinishInput,a=e.inputField,r=gs(),s=Object(ha.useState)(0),l=Object(i.a)(s,2),u=l[0],d=l[1],p=Object(ha.useState)(-1),h=Object(i.a)(p,2),v=h[0],m=h[1],f=Object(ha.useState)(""),b=Object(i.a)(f,2),g=b[0],j=b[1];Object(ha.useEffect)((function(){fetch("folderlist.php?folder=zones/*/*.png").then((function(e){return e.text()})).then((function(e){return j(e)}))}),[]);for(var A=[],O=[],y="",x=g.split(","),C=0;C<x.length-1;C++)-1===A.indexOf(x[C].split("/")[1])&&A.push(x[C].split("/")[1]);for(var w=0;w<A.length;w++){for(var S=0;S<x.length-1;S++)A[w]===x[S].split("/")[1]&&(y+=x[S]+",");O.push(y),y=""}var k=[];if(O.length>0&&u>0)for(var T=O[u-1].split(","),I=function(e){k.push(Object(Ia.jsxs)("div",{onClick:function(){!function(e){var t=O[u-1].split(",");js=t[e],m(e)}(e)},children:[Object(Ia.jsx)("img",{src:encodeURIComponent(T[e]),style:{width:"130px",minHeight:"130px",height:"130px",objectFit:"contain",padding:"2px",border:v===e?"3px solid #ef4623":"3px dotted #00000020"},alt:""}),Object(Ia.jsx)("div",{style:{textAlign:"center",position:"relative",fontWeight:"bold",marginTop:"-5px"},children:T[e].split("/")[2].split(".")[0]})]}))},E=0;E<T.length-1;E++)I(E);function P(e){js="",m(-1),d(e)}return Object(Ia.jsxs)("div",{className:r.mainContainer,children:["zoneimage"===e.type?Object(Ia.jsxs)("div",{className:r.menuContainer,children:[Object(Ia.jsx)("div",{className:0===u?r.avticeButtons:r.deavticeButtons,onClick:function(){P(0)},children:"Upoad"}),A.map((function(e,t){return Object(Ia.jsx)("div",{className:u===t+1?r.avticeButtons:r.deavticeButtons,onClick:function(){P(t+1)},children:e})}))]}):"",Object(Ia.jsxs)(ms.a,{children:[0===u?Object(Ia.jsx)(Wr.a,{style:"zoneimage"===e.type?{minWidth:"470px",height:"320px"}:{minWidth:"540px",height:"320px"},children:a}):u>=1&&"zoneimage"===e.type?Object(Ia.jsx)(Wr.a,{style:{minWidth:"470px"},children:Object(Ia.jsx)("div",{className:r.galleryMain,children:Object(Ia.jsx)("div",{className:r.gallery,children:k})})}):"",Object(Ia.jsx)(Wr.a,{children:Object(Ia.jsx)(Br.a,{theme:bs,children:Object(Ia.jsx)(Oa.a,{variant:"contained",color:"primary",style:{fontSize:c()?"1.5em":"1em"},onClick:function(){o(n),t("none")},children:"Done"})})})]})]})}Os.displayName="Input";var ys=n(624),xs=n(629),Cs=n(603),ws=n(556),Ss=Object(fs.a)({preview:{width:"100%",height:"100%"},dZoneStyle:{minHeight:"300px"},dZoneTextStyle:{minHeight:"90px"}}),ks=function(e){var t=e.setStep,n=Ss(),o=Object(ha.useState)([]),a=Object(i.a)(o,2),r=a[0],s=a[1],c=Object(ha.useState)(sessionStorage.getItem("uploadTypePreferences")||"gyazo"),l=Object(i.a)(c,2),u=l[0],d=l[1],p=te().t,h=Object(Ia.jsx)(vs.a,{acceptedFiles:["image/*"],dropzoneText:p("imageDropzoneText"),dropzoneClass:n.dZoneStyle,dropzoneParagraphClass:n.dZoneTextStyle,onChange:s,previewGridProps:{container:{spacing:1,direction:"row"}},previewChipProps:{classes:{root:n.preview}}});Object(ha.useEffect)((function(){sessionStorage.setItem("uploadTypePreferences",u)}),[u]);var v=e.stores.map;return Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)(Aa.a,{mt:0,children:Object(Ia.jsxs)(Cs.a,{component:"fieldset",children:[Object(Ia.jsx)(ws.a,{component:"legend",children:"File storage type:"}),Object(Ia.jsxs)(xs.a,{style:{display:"flex",flexDirection:"row"},"aria-label":"upload-files-to",defaultValue:"gyazo",value:u,name:"upload-files-to",onChange:function(e){d(e.target.value)},children:[Object(Ia.jsx)(lr.a,{value:"gyazo",control:Object(Ia.jsx)(ys.a,{}),label:"Gyazo"}),Object(Ia.jsx)(lr.a,{value:"gdrve",control:Object(Ia.jsx)(ys.a,{}),label:"Google Drive"})]})]})}),Object(Ia.jsx)(Os,{stores:e.stores,setStep:t,onFinishInput:function(t){""===As()?t.forEach(function(){var t=Object(Jn.a)(Kn.a.mark((function t(n,i){return Kn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:30,-20,ai(n,v,[30*i,-20*i],u,e.type,e.xCord,e.yCord,e.from,"").then((function(e){return ea.shareContent(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()):(ri(As(),v,[0,0],e.type,e.xCord,e.yCord,e.from,"").then((function(e){return ea.shareContent(e)})),js="")},value:r,inputField:h,type:e.type})]})},Ts=Object(Dr.a)({palette:{primary:{main:"#7ececc"},secondary:{main:"#ef4623"}}});function Is(e){var t=e.setStep,n=e.value,i=e.onFinishInput,o=e.inputField;return Object(Ia.jsxs)(ms.a,{children:[Object(Ia.jsx)(Wr.a,{children:o}),Object(Ia.jsx)(Wr.a,{children:Object(Ia.jsx)(Br.a,{theme:Ts,children:Object(Ia.jsx)(Oa.a,{style:{fontSize:c()?"2em":"1em"},variant:"contained",color:"primary",onClick:function(){i(n),t("none")},children:"Done"})})})]})}Is.displayName="SettingInput";var Es=n(175),Ps=n.n(Es),Ms=Object(fs.a)({preview:{width:"100%",height:"100%",top:"-20em"},dropZoneTitle:{fontSize:c()?"2em":"1em"}}),Rs=function(e){var t=e.setStep,n=Ms(),o=Object(ha.useState)([]),a=Object(i.a)(o,2),r=a[0],s=a[1],l=Object(ha.useState)(""),u=Object(i.a)(l,2),d=u[0],p=u[1],h=Object(ha.useState)(!1),v=Object(i.a)(h,2),m=(v[0],v[1]),f=Object(ha.useState)(sessionStorage.getItem("uploadTypePreferences")||"gyazo"),b=Object(i.a)(f,1)[0],g="",j="";ea.all.filter((function(e){return"roomimg"===e.shareType})).map((function(e){return g=e.url})),ea.all.filter((function(e){return"roomimg"===e.shareType})).map((function(e){return j=e.contentDesc}));var A=te().t,O=Object(Ia.jsx)(vs.a,{acceptedFiles:["image/*"],initialFiles:[],clearOnUnmount:!1,dropzoneText:A("imageDropzoneText"),dropzoneParagraphClass:n.dropZoneTitle,onChange:s,filesLimit:1,previewGridProps:{container:{spacing:1,direction:"row"}},previewChipProps:{classes:{root:n.preview}}});Object(ha.useEffect)((function(){sessionStorage.setItem("uploadTypePreferences",b)}),[b]);var y=e.stores.map;return Object(Ia.jsxs)("div",{children:[Object(Ia.jsx)(sr.a,{label:A("meetingDesc"),multiline:!0,rowsMax:4,defaultValue:j,InputProps:{style:{fontSize:c()?"2.2em":"1em"}},InputLabelProps:{style:{fontSize:c()?"2.2em":"1em"}},style:{position:"relative",marginLeft:15,width:"94%",marginTop:"-10px",fontWeight:"bold"},onChange:function(e){p(e.target.value),e.preventDefault()}}),Object(Ia.jsxs)("div",{style:""!==g?{position:"absolute",height:"90px",top:"20px",right:"20px",overflow:"hidden",display:"block"}:{display:"none"},children:[Object(Ia.jsx)("img",{style:{height:"60px",position:"relative"},src:g,alt:""}),Object(Ia.jsx)(Ps.a,{style:{position:"relative",left:c()?"10px":"0px",width:c()?"60":"35",height:c()?"60":"35"},color:"secondary",onClick:function(){ea.all.filter((function(e){return"roomimg"===e.shareType})).map((function(e){return ea.removeByLocal(e.id)})),p(""),m(!0)}})]}),Object(Ia.jsx)("div",{}),Object(Ia.jsx)(Is,{stores:e.stores,setStep:t,onFinishInput:function(t){t.forEach(function(){var t=Object(Jn.a)(Kn.a.mark((function t(n,i){return Kn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:30,-20,ai(n,y,[30*i,-20*i],b,e.type,e.xCord,e.yCord,e.from,d).then((function(e){return ea.shareContent(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},value:r,inputField:O})]})},Ds=n(615),Bs=n(224),Ns=n.n(Bs),zs=n(134),Fs=n.n(zs),Ls=n(178),Us=n.n(Ls);var Qs=function(e){var t=te().t,n=e.stores,i=n.contents,o=n.participants,a=n.map,r=Object(pa.b)((function(){return o.local.mouse.show}));function s(t){"camera"===t&&navigator.mediaDevices.enumerateDevices().then((function(t){e.cameras.videos=t.filter((function(e){return"videoinput"===e.kind}))})).catch((function(){console.warn("Device enumeration error")})),e.setStep(t)}var l=function(){s("none");var t=oi("",a,Object(e).cordX,Object(e).cordY,Object(e).origin);i.shareContent(t),i.setEditing(t.id)},u=function(){(function(e){var t=e.stores.contents.screenFps;return new Promise((function(e,n){navigator.mediaDevices.getDisplayMedia({audio:!0,video:{frameRate:{ideal:t}}}).then(e).catch(n)}))})(e).then((function(t){if(t.getTracks().length){var n=li(t.getTracks(),a,"screen",Object(e).cordX,Object(e).cordY,Object(e).origin);i.assignId(n),i.getOrCreateContentTracks(Qo.rtcConnection.peer,n.id),i.shareContent(n),t.getTracks().forEach((function(e){var t={track:e,peer:Qo.rtcConnection.peer,role:n.id};Qo.addOrReplaceLocalTrack(t)}))}})),s("none")};return Object(ha.useEffect)((function(){var t=function(t){a.keyInputUsers.has("shareDialog")&&("KeyI"===t.code||"KeyD"===t.code||("KeyV"===t.code?(s("none"),navigator.clipboard.readText().then((function(t){ui(t,a,Object(e).cordX,Object(e).cordY,Object(e).origin).then((function(e){i.shareContent(e)}))}))):"KeyF"===t.code?(t.preventDefault(),s("iframe")):"KeyT"===t.code?(t.preventDefault(),l()):"KeyG"===t.code?(t.preventDefault(),s("image")):"KeyW"===t.code?(t.preventDefault(),function(){s("none");var t=new Uint32Array(4);t=window.crypto.getRandomValues(t);var n="";t.forEach((function(e){return n+=e.toString(16)})),ii("https://wbo.ophir.dev/boards/BinauralMeet_".concat(Qo.room,"_").concat(n),a,Object(e).cordX,Object(e).cordY,Object(e).origin).then((function(e){i.shareContent(e),i.setEditing(e.id)}))}()):"KeyB"===t.code||("KeyS"===t.code?u():"KeyM"===t.code?(o.local.mouse.show=!r,s("none")):"KeyC"===t.code?s("camera"):"KeyL"===t.code&&(i.getLocalRtcContentIds().forEach((function(e){return i.removeByLocal(e)})),s("none")))))};return window.addEventListener("keypress",t),function(){window.removeEventListener("keypress",t)}}),[]),Object(Ia.jsxs)(ms.a,{children:[Object(Ia.jsx)(Vr,{tip:t("shareImageTip"),text:t("shareImage"),icon:Object(Ia.jsx)(Ns.a,{style:c()?{width:"2em",height:"2em"}:{width:"1em",height:"1em"}}),onClick:function(){return s("image")}},"shareImage"),Object(Ia.jsx)(Vr,{text:t("shareText"),icon:Object(Ia.jsx)(Us.a,{style:c()?{width:"2em",height:"2em"}:{width:"1em",height:"1em"}}),onClick:l},"shareText"),Object(Ia.jsx)(Vr,{tip:t("shareScreenContentTip"),icon:Object(Ia.jsx)(Fs.a,{style:c()?{width:"2em",height:"2em"}:{width:"1em",height:"1em"}}),text:t("shareScreenContent"),onClick:u,secondEl:Object(Ia.jsx)(Cs.a,{style:c()?{transform:"scale(1.5)",marginLeft:"2em"}:{transform:"scale(1)",marginLeft:"0em"},component:"fieldset",children:Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsxs)(xs.a,{row:!0,"aria-label":"screen-fps",name:"FPS",value:e.stores.contents.screenFps,onChange:function(t){e.stores.contents.setScreenFps(Number(t.target.value))},onClick:function(e){e.stopPropagation(),setTimeout(u,100)},children:[Object(Ia.jsx)(lr.a,{value:1,control:Object(Ia.jsx)(ys.a,{}),label:"1"}),Object(Ia.jsx)(lr.a,{value:5,control:Object(Ia.jsx)(ys.a,{}),label:"5"}),Object(Ia.jsx)(lr.a,{value:15,control:Object(Ia.jsx)(ys.a,{}),label:"15"}),Object(Ia.jsx)(lr.a,{value:30,control:Object(Ia.jsx)(ys.a,{}),label:"30"}),Object(Ia.jsx)(lr.a,{value:60,control:Object(Ia.jsx)(ys.a,{}),label:Object(Ia.jsxs)("span",{children:["60\xa0\xa0\xa0\xa0",t("fps")]})})]})}})})},"shareScreenContent"),Object(Ia.jsx)(Ds.a,{}),Object(Ia.jsx)(Vr,{tip:t("shareImageTip"),text:t("shareZoneImage"),icon:Object(Ia.jsx)(Ns.a,{style:c()?{width:"2em",height:"2em"}:{width:"1em",height:"1em"}}),onClick:function(){return s("zoneimage")}},"shareZoneImage"),Object(Ia.jsx)(Ds.a,{})]})};Qs.displayName="ShareMenu";var Gs=["textLabel","defaultValue","type"],Ys=function(e){var t=e.textLabel,n=e.defaultValue,o=e.type,a=Object(be.a)(e,Gs),r=e.setStep,s=e.onFinishInput,c=Object(ha.useState)(void 0===n?"":n),l=Object(i.a)(c,2),u=l[0],d=l[1],p=Object(Ia.jsx)(sr.a,{label:t,multiline:e.multiline,value:u,onChange:function(e){return d(e.target.value)},fullWidth:!0,inputProps:{autoFocus:!0},onKeyPress:function(t){e.multiline||"Enter"!==t.key||(s(u),r("none"))}});return Object(Ia.jsx)(Os,Object(wn.a)(Object(wn.a)({value:u,inputField:p},a),{},{type:o}))};Ys.displayName="TextInput";var Hs=!1;function Ws(){return Hs}var Js=function(e){var t,n=e.open,o=e.onClose,a=e.cordX,r=e.cordY,s=e.origin,l=e._type,u=e.stores.map,d=Object(ha.useRef)(new ds);t="roomImage"===l?"roomImage":"menu";var p=Object(ha.useState)(t),h=Object(i.a)(p,2),v=h[0],m=h[1];ea.pasteEnabled="none"===v||"menu"===v,Hs=n;var f=te().t,b={menu:f("Create and Share"),text:f("Share Text"),iframe:f("Share iframe"),image:f("Share image"),zoneimage:f("Share zone image"),roomImage:f("Meeting Space"),none:"None",camera:f("Select video camera to share")}[v],g=function(t,n){switch(t){case"menu":return Object(Ia.jsx)(Qs,Object(wn.a)(Object(wn.a)({},e),{},{setStep:n,cameras:d.current}));case"text":return Object(Ia.jsx)(Ys,{stores:e.stores,setStep:n,onFinishInput:function(e){ea.shareContent(oi(e,u,a,r,s))},textLabel:"Text",multiline:!0,type:t});case"iframe":return Object(Ia.jsx)(Ys,{stores:e.stores,setStep:n,onFinishInput:function(e){ii(e,u,a,r,s).then((function(e){ea.shareContent(e)}))},textLabel:"URL",multiline:!1,type:t});case"image":case"zoneimage":return Object(Ia.jsx)(ks,{setStep:n,stores:e.stores,type:t,xCord:a,yCord:r,from:s});case"roomImage":return Object(Ia.jsx)(Rs,{setStep:n,stores:e.stores,type:t,xCord:a,yCord:r,from:s});case"camera":return Object(Ia.jsx)(ps,{setStep:n,stores:e.stores,cameras:d.current,xCord:a,yCord:r,from:s});case"Gdrive":return Object(Ia.jsx)(hs,{stores:e.stores,setStep:n,onSelectedFile:function(e){ii(e,u,a,r,s).then((function(e){ea.shareContent(e)}))}});default:throw new Error("Unknown step: ".concat(t))}}(v,(function(e){"none"===e?o():m(e)}));return Object(Ia.jsxs)(ka.a,{open:n,onClose:o,onExited:function(){return m(t)},maxWidth:"sm",fullWidth:!0,onPointerMove:function(e){u.setMouse([e.clientX,e.clientY])},PaperProps:{style:{transform:c()?"scale(1.5)":"scale(1)"}},children:[Object(Ia.jsx)(Ta.a,{id:"simple-dialog-title",disableTypography:!0,style:{fontSize:c()?"2.5em":"1.2em"},children:b}),Object(Ia.jsx)(ya.a,{children:g})]})};Js.displayName="ShareDialog";var Vs=function(e){var t=e.stores,n=t.contents,o=t.participants,r=Object(ha.useRef)(null),s=Object(ha.useState)(!1),c=Object(i.a)(s,2),l=c[0],u=c[1];function d(){console.log("open download"),function(e){for(var t=function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;delete i.playback,delete i.zIndex,delete i.zones,delete i.id}}catch(o){n.e(o)}finally{n.f()}return e}(e.all),n=0;n<t.length;n++)t[n].ownerName="",t[n].ownerURL="";var i=JSON.stringify(t),o={status:"true"},r=JSON.stringify(o),s=new Blob(['[{"ResetRoomElements" : ['+r+'],"RoomElements" : '+i+"}]"],{type:"text/plain"}),c=document.createElement("a"),l=URL.createObjectURL(s);c.href=l;var u=sessionStorage.getItem("room");c.download=String(u)+".json",document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(l)}),0)}(n)}function p(e,t,n,i){var o,a=null===(o=e.currentTarget)||void 0===o?void 0:o.files;a&&a.length&&a[0].text().then((function(e){var o=JSON.parse(e);void 0!==o[0].ResetRoomElements&&"true"===o[0].ResetRoomElements[0].status&&t.removeAllContents(),Object(Se.isArray)(o)&&o[0].RoomElements.forEach((function(e){e.ownerName=n,e.ownerURL=i,Bn(o[0].RoomElements).forEach((function(e){if("screen"!==e.type&&"camera"!==e.type){var n=ti();Object.assign(n,e),t.addLocalContent(n)}}))}))}))}var h=te().t;return Object(Ia.jsxs)(fr.a,{children:[Object(Ia.jsx)(Vr,{onClick:function(){u(!0)},text:h("meetingSpace")},"meetingSpace"),Object(Ia.jsx)("div",{style:{width:"140%",height:"1.5px",backgroundColor:"#bcbec0",marginLeft:"-40px"}}),Object(Ia.jsx)(Vr,{onClick:function(){return d()},text:h("shareDownload")},"shareDownload"),Object(Ia.jsx)(Vr,{onClick:function(){return function(){var e,t;console.log("open Import ",null===(e=r.current)||void 0===e?void 0:e.clientHeight),null===(t=r.current)||void 0===t||t.click()}()},text:h("shareImport")},"shareImport"),Object(Ia.jsx)("input",{type:"file",accept:"application/json",ref:r,style:{display:"none"},onChange:function(e){p(e,n,o.local.information.name,o.local.information.avatarSrc)}}),Object(Ia.jsx)("div",{style:{width:"140%",height:"1.5px",backgroundColor:"#bcbec0",marginLeft:"-40px"}}),Object(Ia.jsx)(Js,Object(wn.a)(Object(wn.a)({},e),{},{open:l,onClose:function(){return u(!1)},cordX:0,cordY:0,origin:"",_type:"roomImage"}))]})};Vs.displayName="SettingsControl";var Ks=Object(Ka.a)({root:{padding:2},formControlLabel:{fontSize:c()?"2.5em":"1em"}}),Xs=function(e){var t=e.stores.participants.local,n=Object(pa.b)((function(){return t.muteVideo})),i=Ks(),o=Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsx)(br.a,{icon:Object(Ia.jsx)(Or.a,{htmlColor:"transparent"}),checkedIcon:Object(Ia.jsx)(jr.a,{style:{fontSize:c()?"2em":"1em"},htmlColor:"black"}),className:i.root,checked:!t.muteVideo,name:"broadcastVideo",onChange:function(){t.muteVideo=!0!==n,t.saveMediaSettingsToStorage()}})}}),a=Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsx)(br.a,{icon:Object(Ia.jsx)(Or.a,{htmlColor:"transparent"}),checkedIcon:Object(Ia.jsx)(jr.a,{style:{fontSize:c()?"2em":"1em"},htmlColor:"black"}),className:i.root,checked:!1,name:"broadcastSpeakVideo",onChange:function(){}})}}),r=te().t;return Object(Ia.jsxs)(fr.a,{children:[Object(Ia.jsx)("div",{style:{width:"150%",height:"1.5px",backgroundColor:"#bcbec0",marginLeft:"-40px"}}),Object(Ia.jsx)(lr.a,{style:{position:"relative",top:"5px",left:"-25px"},control:o,label:Object(Ia.jsx)(yr.a,{className:i.formControlLabel,children:r("broadcastMyVideo")})}),Object(Ia.jsx)("div",{style:{width:"130%",height:"1.5px",backgroundColor:"#ffffff",marginLeft:"-40px"}}),Object(Ia.jsx)(lr.a,{style:{position:"relative",top:"5px",left:"-25px"},control:a,label:Object(Ia.jsx)(yr.a,{className:i.formControlLabel,children:r("broadcastMySpeakVideo")})})]})};Xs.displayName="BroadcastVideoControl";var Zs=Object(Ka.a)({root:{padding:2},formControlLabel:{fontSize:c()?"2.5em":"1em"}}),qs=function(e){var t=e.stores.participants.local,n=Object(pa.b)((function(){return t.soundLocalizationBase})),i=Object(pa.b)((function(){return t.useStereoAudio})),o=Zs(),a=Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsx)(br.a,{icon:Object(Ia.jsx)(Or.a,{htmlColor:"transparent"}),checkedIcon:Object(Ia.jsx)(jr.a,{style:{fontSize:c()?"2em":"1em"},htmlColor:"black"}),className:o.root,checked:t.useStereoAudio,onChange:function(){t.soundLocalizationBase="avatar"===n?"user":"avatar",t.useStereoAudio=!i,t.saveMediaSettingsToStorage()},name:"settingLoc"})}}),r=te().t;return Object(Ia.jsxs)(fr.a,{children:[Object(Ia.jsx)("div",{style:{width:"130%",height:"1.5px",backgroundColor:"#bcbec0",marginLeft:"-40px"}}),Object(Ia.jsx)(lr.a,{style:{position:"relative",top:"5px",left:"-25px",fontSize:"3em"},control:a,label:Object(Ia.jsx)(yr.a,{className:o.formControlLabel,children:r("stereoswitch")})})]})};qs.displayName="StereoSwitchControl";var _s=Object(Dr.a)({palette:{primary:{main:"#7ececc"},secondary:{main:"#ef4623"}}}),$s={"&":{margin:"5px",borderRadius:"50%",width:c()?"90px":"57px",height:c()?"90px":"57px",textAlign:"center"}},ec=Object(Ka.a)({menu:{position:"absolute",width:"100%",left:"-100%",opacity:0,transition:"0.5s ease-out"},menuActive:{position:"absolute",width:"100%",opacity:1,left:0,transition:"0.5s ease-out"},menuTop:{position:"absolute",width:"100%",left:-200,opacity:0,top:0,transition:"0.5s ease-out"},menuActiveTop:{position:"absolute",width:"100%",opacity:1,left:0,top:0,transition:"0.5s ease-out"},topMenu:{position:"absolute",width:"100%",top:-200,opacity:0,transition:"0.5s ease-out"},topMenuActive:{position:"absolute",width:"100%",opacity:1,top:0,transition:"0.5s ease-out"},more:Object(wn.a)({display:"inline-block",height:50,width:50,position:"relative",cursor:"pointer",backgroundColor:"#bcbec0",right:0,left:0,bottom:0},$s),moreActive:Object(wn.a)({display:"inline-block",height:50,position:"relative",cursor:"pointer",backgroundColor:"#ef4623",right:0,left:0,bottom:0},$s),container:{position:"absolute",width:"100%",bottom:5,padding:0,left:60,outline:"none",minWidth:530,pointerEvents:"none"},topContainer:{position:"absolute",width:"100%",top:10,padding:0,left:-50,outline:"none",minWidth:530,pointerEvents:"none"},wrapper:{width:"100%"},wrapperInner:{width:"100%",display:"flex",alignItems:"flex-end"}}),tc=Object(K.a)((function e(){Object(X.a)(this,e),this.timeoutOut=void 0,this.touched=!1,this.downTime=0,this.upTime=0})),nc=!1;var ic=function(e){var t=e.stores,n=t.map,o=t.participants,r=va.a.useState(!1),s=Object(i.a)(r,2),l=s[0],u=s[1],d=va.a.useState(!1),p=Object(i.a)(d,2),h=p[0],v=p[1],m=va.a.useState(!1),f=Object(i.a)(m,2),b=f[0],g=f[1],j=va.a.useState(!1),A=Object(i.a)(j,2),O=A[0],y=A[1];function x(){n.keyInputUsers.add("adminForm"),g(!0)}function C(){n.keyInputUsers.delete("adminForm"),g(!1)}var w=Object(ha.useRef)(new tc).current,S=Object(ha.useRef)(null),k=Object(ha.useRef)(null),T=va.a.useState([]),I=Object(i.a)(T,2),E=I[0],P=I[1],M=va.a.useState(null),R=Object(i.a)(M,2),D=R[0],B=R[1],N=va.a.useState(null),z=Object(i.a)(N,2),F=z[0],L=z[1],U=va.a.useState(null),Q=Object(i.a)(U,2),G=Q[0],Y=Q[1],H=va.a.useState(null),W=Object(i.a)(H,2),J=W[0],V=W[1],K=te().t,X=ec();var Z=Object(pa.b)((function(){return n.screenSize[1]-(n.mouse[1]-n.offset[1])<90}));function q(e,t){var n=!1;return"audioinput"===e.kind?n=e.deviceId===o.local.devicePreference.audioInputDevice:"audiooutput"===e.kind?n=e.deviceId===o.local.devicePreference.audioOutputDevice:"videoinput"===e.kind&&(n=e.deviceId===o.local.devicePreference.videoInputDevice),Object(Ia.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center",marginLeft:"15px"},children:[" ",n?Object(Ia.jsx)(jr.a,{style:{opacity:"1",position:"absolute",marginLeft:"-10px",fontSize:c()?"3em":"1.5em"}}):Object(Ia.jsx)(jr.a,{style:{opacity:"0",position:"absolute",marginLeft:"-10px",fontSize:c()?"3em":"1.5em"}}),Object(Ia.jsxs)(Ja.a,{style:{fontSize:c()?"2.5em":"1em",marginLeft:c()?"0.5em":"0em"},onClick:function(){t(e.deviceId)},children:[" ",e.label]},e.deviceId)]})}Object(ha.useEffect)((function(){}),[Z,w.touched]),Object(ha.useEffect)((function(){var e=function(e){0===n.keyInputUsers.size&&!e.ctrlKey&&!e.metaKey&&e.altKey};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]);var _=[Object(Ia.jsxs)(Ja.a,{style:{display:"flex",flexDirection:"column",textAlign:"center",marginLeft:"-35px"},children:[Object(Ia.jsx)(Vs,Object(wn.a)({},e)),Object(Ia.jsx)(fr.a,{children:Object(Ia.jsx)(Vr,{text:K("settingPreference"),onClick:x},"settingPreference")})]},"settingLoc")];function $(t){var n,i,o=[];"audioinput"===t?(n=ee,i=Object(Ia.jsx)(Ja.a,{style:{fontSize:c()?"2.5em":"1em"},children:Object(Ia.jsx)(Cr,Object(wn.a)({},e))},"broadcast")):"audiooutput"===t?(n=ne,i=Object(Ia.jsx)(Ja.a,{style:{fontSize:c()?"2.5em":"1em"},children:Object(Ia.jsx)(qs,Object(wn.a)({},e))},"soundLoc")):(n=ie,i=Object(Ia.jsx)(Ja.a,{style:{fontSize:c()?"2.5em":"1em"},children:Object(Ia.jsx)(Xs,Object(wn.a)({},e))},"broadcastVideo"));var r,s=Object(a.a)(E);try{for(s.s();!(r=s.n()).done;){var l=r.value;l.kind===t&&o.push(q(l,n))}}catch(u){s.e(u)}finally{s.f()}return i&&o.push(i),o}function ee(e){e&&(o.local.devicePreference.audioInputDevice=e,o.local.saveMediaSettingsToStorage()),B(null)}function ne(e){e&&(o.local.devicePreference.audioOutputDevice=e,o.local.saveMediaSettingsToStorage()),L(null)}function ie(e){e&&(o.local.devicePreference.videoInputDevice=e,o.local.saveMediaSettingsToStorage()),Y(null)}function oe(e){navigator.mediaDevices.enumerateDevices().then(P).catch((function(){console.log("Device enumeration error")}))}var ae=Object(pa.b)((function(){return{muteA:o.local.muteAudio,muteS:o.local.muteSpeaker,muteV:o.local.muteVideo,onStage:o.local.physics.onStage}})),re=e.height,se=e.height?.7*e.height:36;return Object(Ia.jsxs)("div",{children:[Object(Ia.jsx)("div",{className:X.topContainer,children:Object(Ia.jsxs)(Ha.a,{in:!0,classes:X,children:[Object(Ia.jsx)("div",{className:l?X.menuActiveTop:X.menuTop,children:Object(Ia.jsx)(Mr,{size:re,style:{width:"43%",float:"left"},onClick:function(){window.open("/","_self")},children:Object(Ia.jsx)("div",{className:X.more,children:Object(Ia.jsx)("img",{src:zr,style:{width:60,height:60,position:"relative",top:c()?"17px":"0px",left:"-5px",transform:c()?"scale(2)":"scale(1)"},alt:""})})})}),Object(Ia.jsx)("div",{className:l?X.topMenuActive:X.topMenu,children:Object(Ia.jsx)(Mr,{size:re,style:{width:"52%",float:"right"},onClick:function(){navigator.clipboard.writeText(window.location.href),v(!h)},children:Object(Ia.jsx)("div",{className:X.more,children:Object(Ia.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAADAUlEQVR4nO3c4XESQRyG8RfH72IHsQOsQKxAO8imA0vQDuwgpAM6EDuIFYgdQAX44e4GsgPIcsD/nvX9zdyYy2TYxSd3c4FjR5vNRsb0KnoCdj7HA3M8MMcDczwwxwNzPDDHA3M8MMcDczwwxwNzPDDHA3M8MMcDczwwxwNzPDDHA3M8sJrjJUnfoydxTa+jJ3AlSdJj+/W43a9OjUde0jacJN1LmoXM5Mpqi5f0MlynyoA1xUvaH65TXcBa4iUdD9epKmAN8ZJOC9epJiA9XtJp4dbZfhUByfGS9od7OPCzv7Lv4QNS4yUdDjfb8/2VpKkqC0iMl1QWrlNdQFq8pPPCdaoKSIqX1C9c51hA1GuhpHj7lIbr7Au4lrToPaMbIsWb6eWV5LnhOrsB1+3X8x6Pd3Mj4IICk3abHfmZ/El91OGjatz+u+o1qwDEt4Se2+1ScNE6pNOmZRwPbGinzbt2k2BXfhGGcOSN1Vx8rCT9lvSj3TYF27RgvGnhY+fbvHC8q4mON5G0VPMH8pvYqZzsk5pfrhQ8j9B4YzWnRkq03KOCj8DIeEnccJ0UOXhkvM/Z/pOkt5JGZ2yLgnEXZ44xkvTtH8/hpiJfYckHfq/L/fFd8gpL38ceXehxi0VfsOy65Ksm/4UhxbNCjgfmeGCOB+Z4YI4H5nhgjgcWGe9P4NhViIy3DBy7Cj5tgjkemOOBOR6Y44E5HtjQ7tu8lLB3t2/JRx6Y44E5HpjjgTke2JDu26RcIQ5m3j7ywBwPzPHAHA/M8cAcD8zxwBwPzPHAHK+/SdTAkfHyRbvD/hN6CvtEb2S8/El/0XYFvqH6mu3nv4A3FXkbxFzSh539+3YjCV2fM/JdhbGaW97Ja7G8U+Bt+5GnzW6l2dBTTw8PCv68RfTV5rOaC5Wn4HmU+KlmzZhZ8DwGtUzxnbbLNQ7VUgP6dNOQ4lmh6NOm9eB4YI4H5nhgjgfmeGCOB+Z4YI4H5nhgjgfmeGCOB+Z4YI4H5nhgjgfmeGCOB+Z4YI4H9hdGXJJYtFSqXQAAAABJRU5ErkJggg==",style:{width:60,height:60,position:"relative",top:c()?"10px":"-3px",left:c()?"1px":"-1px",transform:c()?"scale(2)":"scale(1)"},alt:""})})})})]})}),Object(Ia.jsxs)("div",{ref:S,className:X.container,children:[Object(Ia.jsx)("div",{style:{position:"relative",left:"-50px",top:"0px"},children:Object(Ia.jsx)(Mr,{size:re,onClick:function(){u(!l)},children:Object(Ia.jsx)("div",{className:l?X.moreActive:X.more,children:Object(Ia.jsx)("img",{src:Nr,style:{width:55,height:55,position:"relative",top:c()?"17px":"2px",left:"-0.5px",transform:c()?"scale(2)":"scale(1)"},alt:""})})})}),Object(Ia.jsx)(Ha.a,{in:!0,classes:X,children:Object(Ia.jsxs)("div",{className:l?X.menuActive:X.menu,children:[Object(Ia.jsxs)(Br.a,{theme:_s,children:[Object(Ia.jsx)(Rr,{isOpen:l,index:0,size:re,color:ae.muteS?"primary":"secondary","aria-label":"speaker",onClick:function(){o.local.muteSpeaker=!ae.muteS,o.local.muteSpeaker&&(o.local.muteAudio=!0),o.local.saveMediaSettingsToStorage()},onClickMore:function(e){oe(),L(e.currentTarget)},children:ae.muteS?Object(Ia.jsx)(or.a,{style:{width:se,height:se,color:"white"}}):Object(Ia.jsx)(rr.a,{style:{width:se,height:se,color:"white"}})}),F?Object(Ia.jsx)(Wa.a,{anchorEl:F,keepMounted:!0,style:{marginTop:-70},open:Boolean(F),onClose:function(){ne("")},children:$("audiooutput")}):void 0,Object(Ia.jsx)(Rr,{isOpen:l,index:1,size:re,color:ae.muteA?"primary":"secondary","aria-label":"mic",onClick:function(){o.local.muteAudio=!ae.muteA,o.local.muteAudio||(o.local.muteSpeaker=!1),o.local.saveMediaSettingsToStorage()},onClickMore:function(e){oe(),B(e.currentTarget)},children:ae.muteA?Object(Ia.jsx)(_a.a,{style:{width:se,height:se,color:"white"}}):ae.onStage?Object(Ia.jsx)(Ya.Icon,{icon:Ga.a,style:{width:se,height:se,color:"white"},color:"white"}):Object(Ia.jsx)(Za.a,{style:{width:se,height:se,color:"white"}})}),D?Object(Ia.jsx)(Wa.a,{anchorEl:D,keepMounted:!0,style:{marginTop:-70},open:Boolean(D),onClose:function(){ee("")},children:$("audioinput")}):void 0,Object(Ia.jsx)(Rr,{isOpen:l,index:2,size:re,color:ae.muteV?"primary":"secondary","aria-label":"camera",onClick:function(){Qo.dataConnection.sendMessage(Rn.MUTE_VIDEO,!0),o.local.muteVideo=!ae.muteV,o.local.saveMediaSettingsToStorage(),nc=!0},onClickMore:function(e){oe(),Y(e.currentTarget)},children:ae.muteV?Object(Ia.jsx)(nr.a,{style:{width:se,height:se,color:"white"}}):Object(Ia.jsx)(er.a,{style:{width:se,height:se,color:"white"}})}),G?Object(Ia.jsx)(Wa.a,{anchorEl:G,keepMounted:!0,style:{marginTop:-35},open:Boolean(G),onClose:function(){ie("")},children:$("videoinput")}):void 0,Object(Ia.jsx)(Na,Object(wn.a)({},e)),Object(Ia.jsx)(Rr,{isOpen:l,index:3,size:re,color:"primary","aria-label":"settings",onClick:function(e){w.upTime=(new Date).getSeconds(),x()},onClickMore:function(e){V(e.currentTarget),y(!0)},children:Object(Ia.jsx)(Lr.a,{style:{width:se,height:se,color:"white"}})}),Object(Ia.jsx)(Wa.a,{anchorEl:J,keepMounted:!1,style:O?{marginTop:-70,display:"block"}:{marginTop:-70,display:"none"},open:Boolean(J),onClick:function(){setTimeout((function(){y(!1)}),100)},onClose:function(){V(null)},children:_})]}),b?Object(Ia.jsx)(Va.a,{open:b,onClose:C,anchorEl:k.current,anchorOrigin:{vertical:"top",horizontal:"left"},anchorReference:"anchorEl",children:Object(Ia.jsx)(mr,{close:C,stores:e.stores})}):void 0]})})]})]})};ic.displayName="Footer";var oc=n(78),ac={"&":{color:"lightgrey"},"&:hover":{color:"lightgreen"},"&:active":{color:"lightgreen"}},rc=Object(Ka.a)({back:{position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"#DFDBE5"},fill:{position:"absolute",width:"100%",height:"100%",top:0,left:0},previous:Object(wn.a)({width:"50px",height:"50px",position:"absolute",left:"0px",color:"lightgrey",cursor:"default"},ac),next:Object(wn.a)({width:"50px",height:"50px",position:"absolute",right:"-12px",color:"lightgrey"},ac),activeSlide:{opacity:1,transition:"opacity 1000ms"},slide:{opacity:0,transition:"opacity1000ms"}}),sc=Object(Ka.a)({resizerVertical:{background:"#0f5c81",zIndex:1,boxSizing:"border-box",backgroundClip:"padding-box",width:11,margin:"0 -10px 0 0",borderLeft:"0px solid white",borderRight:"transparent 10px solid",cursor:"col-resize"},resizerHorizontal:{background:"#85AEE060",zIndex:1,boxSizing:"border-box",backgroundClip:"padding-box",height:10.5,width:"80%",marginLeft:"10%",margin:"-5px 0 -5px 0",borderTop:"5px transparent solid",borderBottom:"5px transparent solid",cursor:"row-resize",textAlign:"center"}}),cc=Object(Ka.a)({container:{width:"100%"},title:function(e){return{justifyContent:"start",justifyItems:"start",alignItems:"center",userSelect:"none",userDrag:"none",whiteSpace:"nowrap",width:"100%"}},outer:{display:"flex",whiteSpace:"nowrap",padding:0,margin:0,width:"100%"},line:function(e){return{display:"flex",justifyContent:"start",justifyItems:"start",alignItems:"center",userSelect:"none",userDrag:"none",whiteSpace:"nowrap",fontSize:e.fontSize,height:e.height,width:"100%",padding:0}}}),lc=n(630);function uc(e){return{width:e.size,height:e.size,color:"",backgroundColor:"",pointerEvents:"none",userDrag:"none",fontSize:.3*e.size,display:"inline-block"}}function dc(e,t){var n={width:t.size,height:t.size,borderStyle:"solid",borderWidth:0,borderColor:""};return Object.assign(e,n)}var pc=Object(Ka.a)({imageAvatar:function(e){var t=uc(e);return Object.assign(t,{textAlign:"right",verticalAlign:"top"}),e.border&&dc(t,e),t},textAvatar:function(e){var t=uc(e);return e.border&&dc(t,e),t}}),hc=function(e){var t=pc(e);return Object(Ia.jsx)(pa.a,{children:function(){var n="",i=e.avatarSrc&&".vrm"!==e.avatarSrc.slice(-4);i||(e.name.split(" ").forEach((function(e){return n+=e?e.substring(0,1):""})),n=n.substring(0,2));var o=e.border?1*e.size:e.size;return i?Object(Ia.jsx)(lc.a,{src:e.avatarSrc,className:t.imageAvatar}):Object(Ia.jsx)(lc.a,{className:t.textAvatar,children:Object(Ia.jsx)("div",{style:{height:o,width:o,textAlign:"center",verticalAlign:"middle",display:"table-cell",whiteSpace:"nowrap"},children:n})})}})};hc.displayName="RawImageAvatar";var vc=function(e){return va.a.useMemo((function(){return Object(Ia.jsx)(hc,Object(wn.a)({},e))}),[e.avatarSrc,e.border,e.colors,e.name,e.size,e.style])};function mc(e){var t=new Date(e),n=new Date,i=n.getFullYear()!==t.getFullYear()?t.getFullYear():void 0,o=i||n.getMonth()!==t.getMonth()?t.getMonth()+1:void 0,a=i||o||n.getDate()!==t.getDate()?t.getDate():void 0,r="".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds());return"".concat(i?"".concat(i,"."):"").concat(o?"".concat(o,"."):"").concat(a?"".concat(a," "):"").concat(r)}function fc(e,t){var n="",i="",o="";return t[1]?(o=n=t[1],i="_blank"):t[2]?(n=t[2],o=t[6]?t[6]:t[2],i=t[3]?"_self":"_blank"):(o=t[7],n=t[11],i=t[9]||t[10]?"_self":"_blank"),u(new URL(n))&&(i="_self"),Object(Ia.jsx)("a",{href:n,target:i,rel:"noreferrer",children:o},e)}function bc(e){for(var t,n=[],i="https?:\\/\\/[-_.!~*'()a-zA-Z0-9;/?:@&=+$,%#]+",o=new RegExp("(".concat(i,")|")+"\\[(".concat(i,")(( *>)|( +move))?\\s*(\\S+)\\]")+"|\\[(\\S+)((\\s*>)|(\\s+move)|\\s)\\s*(".concat(i,")\\]")),a=0;null!==(t=o.exec(e.slice(a)));){var r=e.slice(a,a+t.index);r&&n.push(Object(Ia.jsx)("span",{children:r},a)),n.push(fc(a+r.length,t)),a+=r.length+t[0].length}return n.push(Object(Ia.jsx)("span",{children:e.slice(a)},a)),n}vc.displayName="ImageAvatar";var gc={text:"black",called:"red",callTo:"black",log:"black",private:"purple"},jc={text:"white",called:"red",callTo:"white",log:"white",private:"purple"},Ac=function(e){var t=("log"===e.message.type||e.message.type,1),n=e.lineHeight*t,i=e.fontSize*t,o=e.stores,a=o.roomInfo,r=o.participants,s=o.map,l="joined."===e.message.text.split(" ")[1]?"green":"Left."===e.message.text.split(" ")[1]?"red":"black";return Object(Ia.jsx)(pa.a,{children:function(){var t=mc(e.message.timestamp),o=Q(a.backgroundFill)?jc:gc,u=Q(a.backgroundFill)?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)",d=e.message.pid===r.localId;return Object(Ia.jsx)(Ir.a,{title:"private"===e.message.type?Object(Ia.jsxs)(Ia.Fragment,{children:[ee(e.message.pid===r.localId?"cmPrivateTo":"cmPrivateFrom",{name:e.message.name}),Object(Ia.jsx)("br",{}),t]}):Object(Ia.jsxs)(Ia.Fragment,{children:[e.message.name,Object(Ia.jsx)("br",{}),t]}),placement:"right",children:d?Object(Ia.jsxs)("div",{style:{display:"flex",overflowY:"auto",overflowX:"hidden",wordWrap:"break-word",marginTop:2,marginLeft:10,fontSize:i,padding:"5px",alignItems:"flex-end",justifyContent:"flex-start"},children:[Object(Ia.jsx)("span",{style:{marginRight:"0.3rem"},onClick:function(){var t=r.find(e.message.pid);t&&s.focusOn(t)},children:Object(Ia.jsx)(vc,{name:e.message.name,colors:e.message.colors,avatarSrc:e.message.avatarUrl,size:c()?3.5*n:1.7*n,border:!0})}),Object(Ia.jsxs)("span",{style:{color:l,backgroundColor:u,border:"1px solid #ffffff",padding:"10px",marginTop:"-5px",marginLeft:"15px",borderRadius:"15px",minWidth:"10%",maxWidth:c()?"60%":"62%",userSelect:"none",fontSize:c()?"2.5rem":"1rem",fontWeight:"normal"},children:[bc(e.message.text),Object(Ia.jsx)("div",{style:{color:o[e.message.type],backgroundColor:u,border:"1px solid #ffff00",padding:"5px",marginTop:"-17px",marginLeft:"-17px",borderRadius:"1px",borderTop:"0px solid #ffffff",borderRight:"0px solid #ffffff",borderBottom:"1px solid #ffffff",borderLeft:"1px solid #ffffff",width:"5px",height:"5px",content:"",transform:"rotate(45deg)"}})]})]}):Object(Ia.jsxs)("div",{style:{display:"flex",overflowY:"auto",overflowX:"hidden",wordWrap:"break-word",marginTop:2,marginLeft:10,marginRight:0,fontSize:i,padding:"5px",alignItems:"flex-end",justifyContent:"flex-end"},children:[Object(Ia.jsxs)("span",{style:{color:l,backgroundColor:"#B3E1EA",border:"1px solid #B3E1EA",padding:"10px",marginTop:"-5px",marginLeft:"15px",marginRight:"15px",borderRadius:"12px",minWidth:"10%",maxWidth:c()?"60%":"62%",userSelect:"none",fontSize:c()?"2.5em":"1em",fontWeight:"normal"},children:[bc(e.message.text),Object(Ia.jsx)("div",{style:{color:o[e.message.type],backgroundColor:"#B3E1EA",border:"1px solid #B3E1EA",padding:"5px",marginTop:"-17px",marginLeft:"101%",borderRadius:"1px",borderTop:"0px solid #B3E1EA",borderRight:"0px solid #B3E1EA",borderBottom:"1px solid #B3E1EA",borderLeft:"1px solid #B3E1EA",width:"5px",height:"5px",content:"",transform:"rotate(45deg)"}})]}),Object(Ia.jsx)("span",{style:{marginRight:"0.3rem"},onClick:function(){var t=r.find(e.message.pid);t&&s.focusOn(t)},children:Object(Ia.jsx)(vc,{name:e.message.name,colors:e.message.colors,avatarSrc:e.message.avatarUrl,size:c()?3.5*n:1.7*n,border:!0})})]})})}})};function Oc(e,t,n){var i={msg:e,ts:Date.now(),to:t};Qo.dataConnection.sendMessage(Rn.CHAT_MESSAGE,i,t);var o=n.stores.participants.local;if(t){var a=n.stores.participants.remote.get(t);a&&Cn.addMessage(new yn(e,o.id,a.information.name,o.information.avatarSrc,o.getColor(),Date.now(),"private"))}else Cn.addMessage(new yn(e,o.id,o.information.name,o.information.avatarSrc,o.getColor(),Date.now(),"text"))}var yc=function(e){var t=e.stores,n=t.chat,o=t.roomInfo,a=t.participants,r=t.map,s=cc({height:e.lineHeight,fontSize:e.fontSize}),l=va.a.useState(""),u=Object(i.a)(l,2),d=u[0],p=u[1];return Object(Ia.jsxs)("div",{className:s.container,style:{height:"100%",display:"flex",flexDirection:"column-reverse",overflowY:"auto",overflowX:"hidden",whiteSpace:"pre-line",resize:"horizontal",minWidth:"290px"},children:[Object(Ia.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(Ia.jsx)(Ir.a,{title:ee("cmSend"),placement:"right",children:Object(Ia.jsx)("div",{style:{position:"relative",top:15,textAlign:"right",zIndex:1e3},children:Object(Ia.jsx)(wr.a,{size:"small",onClick:function(){var t,i,o=n.sendTo?null===a||void 0===a||null===(t=a.find(n.sendTo))||void 0===t||null===(i=t.information)||void 0===i?void 0:i.name:void 0;Oc(d,o?n.sendTo:"",e),p("")},children:Object(Ia.jsx)("img",{style:{width:c()?"4.2rem":"2.9rem",bottom:"1px",position:"relative",left:"1px"},src:ga,draggable:!1,alt:""})})})}),Object(Ia.jsx)(pa.a,{children:function(){var t,i,s=n.sendTo?null===a||void 0===a||null===(t=a.find(n.sendTo))||void 0===t||null===(i=t.information)||void 0===i?void 0:i.name:void 0,l=Q(o.backgroundFill)?"white":"black";return Object(Ia.jsx)(sr.a,{variant:"outlined",label:"",multiline:!0,value:d,rowsMax:2,style:{width:"77%",minWidth:"30%",userSelect:"none",marginTop:c()?"-55px":"-38px",marginLeft:"15px",right:"3px",resize:"horizontal"},InputProps:{style:{color:l,backgroundColor:"white",borderRadius:"8px",height:c()?"70px":"50px",fontSize:c()?"2.5rem":"1rem",zIndex:9999}},InputLabelProps:{style:{color:"black"}},onFocus:function(){r.keyInputUsers.add("chat")},onBlur:function(){r.keyInputUsers.delete("chat")},onKeyDown:function(e){"Escape"!==e.key&&"Esc"!==e.key||(n.sendTo="")},onKeyPress:function(t){!t.ctrlKey||0!==t.keyCode&&76!==t.keyCode||(Oc(d,s?n.sendTo:"",e),p(""))},onChange:function(e){p(e.target.value)}})}})]}),Object(Ia.jsx)("div",{children:Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsx)(Ia.Fragment,{children:n.messages.map((function(t,n){return Object(Ia.jsx)(Ac,Object(wn.a)({message:t},e),n)}))})}})})]})};yc.displayName="Chat";var xc=n(613),Cc=new(Object(K.a)((function e(){Object(X.a)(this,e),this.useTransparent=!0}))),wc=n(306),Sc=n(309),kc=n.n(Sc),Tc=n(310),Ic=n.n(Tc),Ec=n(311),Pc=n.n(Ec),Mc=n(225),Rc=n.n(Mc),Dc=n(316),Bc=n.n(Dc),Nc=n(315),zc=n.n(Nc),Fc=n(317),Lc=n.n(Fc),Uc=Object(Ka.a)({iframe:{width:"100%",height:"100%",pointerEvents:"none"},iframeEdit:{width:"100%",height:"100%"},iframeVScrool:function(e){return{width:e.content.size[0]+13+10,height:100*e.content.size[0],pointerEvents:"none"}},divScroll:function(e){return{width:e.content.size[0]+100,height:"100%",position:"relative",left:-15,overflow:"scroll"}},divClip:{width:"100%",height:"100%",overflow:"hidden"},divError:{width:"100%",height:"100%",overflow:"hidden",backgroundColor:"white"}});function Qc(e){var t=function(e){var t="";return e.forEach((function(e,n){t="".concat(t).concat(t?"&":"").concat(n,"=").concat(e)})),t}(e.params);t!==e.props.content.url&&e.props.updateAndSend&&(e.props.content.url=t,e.props.updateAndSend(e.props.content))}var Gc,Yc,Hc,Wc,Jc=function(e){r("gdrive"===e.content.type);var t=Object(ha.useRef)(null),n=e.stores.contents,i=hi(e.content.url),o=i.get("id"),a=i.get("mimeType"),s=Object(ha.useRef)({props:e,params:i,scrolling:!1,onscroll:function(){}}).current;s.props=e,s.params=i,!a&&o&&function(e){return new Promise((function(t,n){gapi?(gapi.client.setApiKey("AIzaSyCE4B2cKycH0fVmBznwfr1ynnNf2qNEU9M"),gapi.client.load("drive","v3",(function(){gapi.client.drive.files.get({fileId:e,fields:"mimeType,name"}).then((function(e){var n=JSON.parse(e.body);t({mimeType:n.mimeType,name:n.name})})).catch((function(e){console.debug("GAPI error",e),n(e)}))}))):n("gapi is not loaded")}))}(o).then((function(t){(t.name&&e.content.name!==t.name||t.mimeType)&&(s.params.set("mimeType",t.mimeType),console.log("mime: ".concat(t.mimeType),t),t.name&&(e.content.name=t.name),Qc(s))})).catch((function(e){console.log("GDrive failed ".concat(e.body)),404===e.status&&(console.log("404 may be video"),s.params.set("mimeType","video"),Qc(s))}));var c=Uc(e),l=Object(pa.b)((function(){return e.stores.contents.editing===e.content.id})),u=pi(l,s.params);Object(ha.useEffect)((function(){var e=Number(s.params.get("top"));l||s.scrolling||!t.current||isNaN(e)||e===t.current.scrollTop||(t.current.onscroll=function(){},t.current.scrollTop=e,setTimeout((function(){t.current&&(t.current.onscroll=s.onscroll)}),100))})),Object(ha.useEffect)((function(){function e(){var e=Number(s.params.get("top"));t.current&&t.current.scrollTop!==e&&(s.params.set("top",t.current.scrollTop.toString()),Qc(s))}if(t.current){var n=ke.a.throttle((function(){return setTimeout(e,100)}),100),i=ke.a.debounce((function(){s.scrolling=!1}),100);s.onscroll=function(){s.scrolling=!0,n(),i()},t.current.onscroll=s.onscroll}}),[n.roomContents]);var d=function(e){return!e||!("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e||"application/vnd.google-apps.presentation"===e||"application/vnd.google-apps.spreadsheet"===e||"image"===e.slice(0,5)||"video"===e.slice(0,5)||"audio"===e.slice(0,5))}(a);return Object(Ia.jsx)("div",{className:a?c.divClip:c.divError,children:a?Object(Ia.jsx)("div",{className:l||!d?c.divClip:c.divScroll,ref:t,onWheel:function(e){return e.ctrlKey||e.stopPropagation()},children:Object(Ia.jsx)("iframe",{src:u,title:e.content.url,className:l?c.iframeEdit:d?c.iframeVScrool:c.iframe})}):l?Object(Ia.jsx)("div",{className:c.divClip,onWheel:function(e){return e.ctrlKey||e.stopPropagation()},children:Object(Ia.jsx)("iframe",{src:u,title:e.content.url,className:c.iframeEdit})}):Object(Ia.jsx)("div",{style:{margin:"1em",whiteSpace:"pre-wrap"},children:ee("gdFailed")})})},Vc=n(312),Kc=n.n(Vc),Xc=n(313),Zc=n.n(Xc),qc=n(140);qc.GlobalWorkerOptions.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.7.570/build/pdf.worker.js";var _c=(Gc=function(){function e(){Object(X.a)(this,e),this.newProps=void 0,this.props=void 0,this.mainUrl=void 0,this.document=void 0,this.pages=[],this.renderTask=void 0,this.canvas=null,this.textDiv=null,this.annotationDiv=null,this.prevSize=[0,0],this.pageNum=0,Object(J.a)(this,"numPages",Yc,this),Object(J.a)(this,"showTop",Hc,this),Object(J.a)(this,"pageText",Wc,this),Object(fe.g)(this)}return Object(K.a)(e,[{key:"render",value:function(){var e=this,t=this.pages[this.pageNum];if(this.canvas&&t){var n=t.getViewport({scale:1}),i=this.props.content;if(i.originalSize[0]!==n.width||i.originalSize[1]!==n.height)return i.originalSize=[n.width,n.height],i.size=[i.size[0],i.size[0]*i.originalSize[1]/i.originalSize[0]],this.props.updateOnly(this.props.content),!1;var o=3*this.props.content.size[0]/n.width,a=t.getViewport({scale:o});this.canvas.width=a.width,this.canvas.height=a.height;var r=this.canvas.getContext("2d");return r&&(this.renderTask&&this.renderTask.cancel(),this.renderTask=t.render({canvasContext:r,viewport:a}),this.renderTask.promise.then((function(){t.getTextContent().then((function(t){if(e.textDiv){var n=e.textDiv.childNodes;Array.from(n.values()).forEach((function(e){return e.remove()}));var i=[];Object(qc.renderTextLayer)({textContent:t,container:e.textDiv,viewport:a,textDivs:i}),i.forEach((function(e){e.style.position="absolute",e.style.color="transparent",e.style.whiteSpace="pre",e.style.transformOrigin="0% 0%",e.style.whiteSpace="nowrap",e.style.verticalAlign="top"}))}})),e.renderTask=void 0})).catch((function(e){}))),!0}return!1}},{key:"updateProps",value:function(){var e=this;if(this.newProps!==this.props){this.props=this.newProps;var t=new URL(this.props.content.url);this.mainUrl=t.hash?t.href.substring(0,t.href.length-t.hash.length):t.href;var n,i=this.pageNum;if("#page="===t.hash.substr(0,6))(i=null!==(n=Number(t.hash.substr(6))-1)&&void 0!==n?n:0)<0&&(i=0),this.numPages&&i>=this.numPages&&(i=this.numPages-1);this.document&&i===this.pageNum?this.prevSize[0]===this.props.content.size[0]&&this.prevSize[1]===this.props.content.size[1]||this.render()&&(this.prevSize=Array.from(this.props.content.size)):(this.getPage(i).then((function(){e.render()})),this.pageNum=i,this.pageText=String(i+1))}}},{key:"getDocument",value:function(){var e=this;return new Promise((function(t,n){e.document?t(e.document):Object(qc.getDocument)({url:Wn(e.mainUrl),cMapUrl:"https://cdn.jsdelivr.net/npm/pdfjs-dist@2.7.570/cmaps/",cMapPacked:!0}).promise.then((function(n){e.document=n,e.numPages=n.numPages,t(e.document)})).catch((function(i){Object(qc.getDocument)({url:e.mainUrl,cMapUrl:"https://cdn.jsdelivr.net/npm/pdfjs-dist@2.7.570/cmaps/",cMapPacked:!0}).promise.then((function(n){e.document=n,e.numPages=n.numPages,t(e.document)})).catch((function(t){console.error("PDF: failed to load ".concat(e.mainUrl)),n(t)}))}))}))}},{key:"getPage",value:function(e){var t=this;return new Promise((function(n,i){t.pages[e]?n(t.pages[e]):t.getDocument().then((function(o){o.getPage(e+1).then((function(i){t.pages[e]=i,n(t.pages[e])})).catch((function(e){i(e)}))})).catch((function(e){i(e)}))}))}},{key:"updateUrl",value:function(e){void 0!==e&&Number.isFinite(e)||(e=this.pageNum),e<0&&(e=0),e>=this.numPages&&(e=this.numPages-1);var t="".concat(this.mainUrl,"#page=").concat(e+1);if(t!==this.props.content.url){var n=Object.assign({},this.props.content);n.url=t,this.props.updateAndSend(n)}}}]),e}(),Yc=Object(V.a)(Gc.prototype,"numPages",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hc=Object(V.a)(Gc.prototype,"showTop",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wc=Object(V.a)(Gc.prototype,"pageText",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Gc),$c={onMouseDown:function(e){e.stopPropagation()},onMouseUp:function(e){e.stopPropagation()},onPointerDown:function(e){e.stopPropagation()},onPointerUp:function(e){e.stopPropagation()}},el=function(e){r("pdf"===e.content.type);var t=Object(ha.useRef)(new _c).current;t.newProps=e;var n=Object(ha.useRef)(null),i=Object(ha.useRef)(null),o=Object(ha.useRef)(null),a=Object(pa.b)((function(){return e.stores.contents.editing===e.content.id}));return Object(ha.useEffect)((function(){t.canvas=n.current,t.textDiv=i.current,t.annotationDiv=o.current}),[n.current]),Object(ha.useEffect)((function(){t.updateProps()})),Object(Ia.jsxs)("div",{style:{overflow:"hidden",pointerEvents:"auto",userSelect:a?"text":"none"},onDoubleClick:function(t){a||(t.stopPropagation(),t.preventDefault(),e.stores.contents.setEditing(e.content.id))},children:[Object(Ia.jsx)("canvas",{style:{width:"".concat(300,"%"),height:"".concat(300,"%"),transformOrigin:"top left",transform:"scale(".concat(1/3,")")},ref:n}),Object(Ia.jsx)("div",{ref:i,style:{position:"absolute",left:0,top:0,width:"".concat(300,"%"),height:"".concat(300,"%"),transformOrigin:"top left",transform:"scale(".concat(1/3,")"),lineHeight:1,overflow:"hidden"}}),Object(Ia.jsx)("div",{ref:o}),Object(Ia.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:40},onPointerEnter:function(){t.showTop=!0},onPointerLeave:function(){t.showTop=!1},children:Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsx)(Ha.a,{in:t.showTop,style:{position:"absolute",top:0,left:0,width:"100%"},children:Object(Ia.jsxs)(ur.a,{container:!0,alignItems:"center",children:[Object(Ia.jsx)(ur.a,{item:!0,children:Object(Ia.jsx)(wr.a,Object(wn.a)(Object(wn.a)({size:"small",color:t.pageNum>0?"primary":"default"},$c),{},{onClick:function(e){e.stopPropagation(),t.updateUrl(t.pageNum-1)},onDoubleClick:function(e){e.stopPropagation()},children:Object(Ia.jsx)(Kc.a,{})}))}),Object(Ia.jsx)(ur.a,{item:!0,xs:1,children:Object(Ia.jsx)(sr.a,Object(wn.a)(Object(wn.a)({value:t.pageText},$c),{},{inputProps:{min:0,style:{textAlign:"center"}},onChange:function(e){t.pageText=e.target.value},onBlur:function(e){var n=Number(t.pageText);n>0&&t.updateUrl(n-1)},onKeyPress:function(e){if("Enter"===e.key){var n=Number(t.pageText);n>0&&t.updateUrl(n-1)}}}))}),Object(Ia.jsxs)(ur.a,{item:!0,style:{fontSize:15},children:["/ ",t.numPages]}),Object(Ia.jsx)(ur.a,{item:!0,children:Object(Ia.jsx)(wr.a,Object(wn.a)(Object(wn.a)({size:"small",color:t.pageNum<t.numPages-1?"primary":"default"},$c),{},{onClick:function(e){e.stopPropagation(),t.updateUrl(t.pageNum+1)},onDoubleClick:function(e){e.stopPropagation()},children:Object(Ia.jsx)(Zc.a,{})}))})]})})}})})]})},tl=Object(Ka.a)({video:{width:"100%",height:"100%"}}),nl=function(e){r("playbackScreen"===e.content.type||"playbackCamera"===e.content.type);var t=tl(),n=Object(ha.useRef)(null);return Object(ha.useEffect)((function(){n.current&&(n.current.src=e.content.url,n.current.autoplay=!0)}),[n.current]),Object(Ia.jsx)("video",{className:t.video,ref:n})},il=Object(Ka.a)({video:{width:"100%",height:"100%"}}),ol=function(e){r("screen"===e.content.type||"camera"===e.content.type);var t=il(),n=Object(ha.useRef)(null),o=va.a.useState(!1),a=Object(i.a)(o,2),s=a[0],c=a[1],l=Object(ha.useRef)({}),u=[.25,.5,.75,4/3,2,4];return Object(ha.useEffect)((function(){var t;null!==(t=l.current)&&void 0!==t&&t.tracks||(l.current={tracks:ea.getOrCreateContentTracks("",e.content.id).tracks,content:e.content},l.current.tracks.length>2&&console.error("content ".concat(e.content.id," has ").concat(l.current.tracks.length," tracks"),l.current.tracks));var i=Object(fe.c)((function(){if(n.current){var e=l.current.tracks.find((function(e){return"video"===e.kind}));if(e)if((n.current.srcObject instanceof MediaStream?n.current.srcObject.getVideoTracks()[0]:void 0)!==e){var t=new MediaStream;t.addTrack(e);var i=0;e.onmute=function(){i=window.setTimeout((function(){c(!0)}),5e3)},e.onunmute=function(){i&&(window.clearTimeout(i),i=0),c(!1)},n.current.srcObject=t,n.current.autoplay=!0}}}));return function(){i()}}),[]),Object(ha.useEffect)((function(){var t=setInterval((function(){if(l.current.tracks.length&&n.current){var t=n.current.srcObject instanceof MediaStream&&n.current.srcObject.getTracks();if(t&&t.length){var i=t.find((function(e){return"video"===e.kind})),o=null===i||void 0===i?void 0:i.getSettings(),a=[(null===o||void 0===o?void 0:o.width)||0,(null===o||void 0===o?void 0:o.height)||0];if(a[0]&&l.current.content.originalSize.toString()!==a.toString()){if(l.current.content.originalSize[0]){var r=l.current.content.originalSize[0]/a[0],s=l.current.content.originalSize[1]/a[1];if(r===s&&u.find((function(e){return e===r})))return}var c=l.current.content.size[0]/(l.current.content.originalSize[0]?l.current.content.originalSize[0]:a[0]);l.current.content.originalSize=a,l.current.content.size=y(c,a),e.updateAndSend(l.current.content)}}}}),333);return function(){return clearInterval(t)}}),[]),Object(Ia.jsx)("video",{className:t.video,style:s?{filter:"brightness(80%) sepia(25%)"}:{},ref:n})},al=["backgroundColor"],rl=Object(K.a)((function e(){Object(X.a)(this,e),this.messages=[],this.isStatic=!1,this.abortScroll=!1,this.editing=!1}));function sl(e,t,n){var i={messages:e,scroll:[t.scrollLeft,t.scrollTop]},o=JSON.stringify(i);n.content.url!==o&&n.updateAndSend&&(n.content.url=o,n.updateAndSend(n.content))}function cl(e,t){t.text.message=e;var n=t.member.messages.filter((function(e){return e.message.length}));t.div&&sl(n,t.div,t)}var ll=function(e){var t=va.a.useState(e.text.message),n=Object(i.a)(t,2),o=n[0],a=n[1],r=Object(ha.useRef)(void 0);Object(ha.useEffect)((function(){r.current=ke.a.throttle(cl,1e3,{leading:!1})}),[]);var s=r.current;return Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsxs)("div",{style:Object(wn.a)(Object(wn.a)({},e.css),{},{position:"relative",margin:0,border:0,padding:0,backgroundColor:"none"}),children:[Object(Ia.jsx)("div",{style:Object(wn.a)(Object(wn.a)({},e.css),{},{color:"red",position:"relative",width:"100%",overflow:"hidden",visibility:"hidden"}),children:o+"\u200b"}),Object(Ia.jsx)("textarea",{value:o,autoFocus:e.autoFocus,style:Object(wn.a)(Object(wn.a)({},e.css),{},{font:"inherit",verticalAlign:"baseline",resize:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none",letterSpacing:"inherit",overflow:"hidden"}),onChange:function(t){a(t.currentTarget.value),s&&s(t.currentTarget.value,e)},onBlur:function(){s&&s.cancel(),cl(o,e)},onFocus:function(){},onKeyDown:function(t){"Escape"!==t.key&&"Esc"!==t.key||(t.stopPropagation(),t.preventDefault(),s&&s.cancel(),cl(o,e),e.stores.contents.setEditing(""))}})]})}})},ul=function(e){var t,n,i=mc(e.text.time),o=null!==(t=e.text.color)&&void 0!==t&&t.length?e.text.color:L(e.text.name),a={color:W(null!==(n=e.text.textColor)&&void 0!==n&&n.length?e.text.textColor:U(o),1),backgroundColor:Cc.useTransparent?W(o,.5):W(o,1),padding:"0.1em",fontSize:16,lineHeight:1.2,width:"100%",overflow:"clip",boxSizing:"border-box",whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word"},r=Object(be.a)(a,al);return r.backgroundColor=W(o,1),Object(Ia.jsx)(Ir.a,{title:Object(Ia.jsxs)(va.a.Fragment,{children:[e.text.name," ",Object(Ia.jsx)("br",{})," ",i]}),placement:"left",arrow:!0,suppressContentEditableWarning:!0,children:Object(Ia.jsx)("div",{children:e.textEditing?Object(Ia.jsx)(ll,Object(wn.a)(Object(wn.a)({},e),{},{css:r})):Object(Ia.jsx)("div",{style:a,onPointerDown:function(){e.member.isStatic=!0},onPointerMove:function(){e.member.isStatic=!1},onPointerUp:function(t){if(e.member.isStatic){var n=t.target;if(n instanceof Node){t.preventDefault();var i=window.getSelection();if(i)if(i.rangeCount&&i.getRangeAt(0).toString())i.removeAllRanges();else{var o=document.createRange();o.selectNode(n),i.removeAllRanges(),i.addRange(o)}}}},children:e.textToShow})})})},dl={height:"100%",width:"100%",whiteSpace:"pre-line",pointerEvents:"auto",overflowY:"auto",overflowX:"visible",wordWrap:"break-word"},pl=Object(Ka.a)({text:dl,textEdit:Object(wn.a)(Object(wn.a)({},dl),{},{cursor:"default",userSelect:"text"})}),hl=function(e){r("text"===e.content.type);var t=e.stores,n=t.contents,i=t.participants,o=va.a.useRef(new rl).current,a=pl(),s=Object(ha.useRef)(null),c=e.content.url,l=JSON.parse(c),u=Object(pa.b)((function(){return n.editing===e.content.id}));u&&n.setBeforeChangeEditing((function(t,i){t===e.content.id&&""===i&&(s.current&&(o.messages=o.messages.filter((function(e){return e.message.length})),sl(o.messages,s.current,e)),n.setBeforeChangeEditing())})),Object(ha.useEffect)((function(){var e;!u&&s.current&&(s.current.scrollLeft===l.scroll[0]&&s.current.scrollTop===l.scroll[1]||(o.abortScroll=!0,null===(e=s.current)||void 0===e||e.scroll(l.scroll[0],l.scroll[1])))}),[l.scroll[0],l.scroll[1],u]);var d=new Set;l.messages.forEach((function(e){var t=o.messages.findIndex((function(t){return t.pid===e.pid&&t.time===e.time}));-1===t?(d.add(o.messages.length),o.messages.push(e)):e.pid!==i.localId&&(d.add(t),o.messages[t]=e)})),o.messages=o.messages.filter((function(e,t){return e.pid===i.localId||d.has(t)})),o.messages.sort(Gn);var p=void 0;if(u){var h=o.messages.pop();h&&o.messages.push(h),(null===h||void 0===h?void 0:h.pid)!==i.localId&&o.messages.push({message:"",pid:i.localId,name:i.local.information.name,color:i.local.information.color,textColor:i.local.information.textColor,time:Date.now()}),o.editing||(o.messages.reverse(),p=o.messages.find((function(e){return e.pid===i.localId})),o.messages.reverse())}var v=o.messages.map((function(t,n){var a=u&&(t.pid===i.localId||!i.remote.has(t.pid)),r=[];return a||(r=bc(t.message)),Object(ha.createElement)(ul,Object(wn.a)(Object(wn.a)({},e),{},{key:n,text:t,div:s.current,textToShow:r,member:o,textEditing:a,autoFocus:t===p}))})),m=ke.a.debounce((function(t){s.current&&(o.abortScroll?o.abortScroll=!1:sl(o.messages,s.current,e))}),200);return o.editing=u,Object(Ia.jsx)("div",{ref:s,className:u?a.textEdit:a.text,onWheel:function(e){return e.ctrlKey||e.stopPropagation()},onScroll:function(e){u||m(e)},children:v})};function vl(e,t){var n=e;n.setSinkId&&n.setSinkId(t).then((function(){})).catch((function(){console.warn("audio.setSinkId:",t," failed")}))}var ml,fl,bl,gl,jl,Al,Ol,yl,xl,Cl=1e5,wl=function(){function e(t,n,i,o){Object(X.a)(this,e),this.sourceNode=void 0,this.audioElement=void 0,this.gainNode=void 0,this.pannerNode=void 0,this.destination=void 0,this.context=void 0,this.playMode=void 0,this.audibility=!1,this.audioDeviceId="",this.distance=1,this.interval=void 0,this._defaultPannerRefDistance=ae,this.context=t,this.destination=n,this.gainNode=this.createGainNode(t),this.pannerNode=this.createPannerNode(t),this.gainNode.connect(this.pannerNode),this.pannerNode.connect(this.destination),this.playMode=i,this.updateAudibility(o)}return Object(K.a)(e,[{key:"setPlayMode",value:function(e){var t=this;switch(this.playMode=e,e){case"Pause":var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(),this.interval&&(clearInterval(this.interval),this.interval=void 0),this.audioElement&&this.audioElement.pause();break;case"Context":var i;null===(i=this.sourceNode)||void 0===i||i.connect(this.gainNode),this.interval&&(clearInterval(this.interval),this.interval=void 0),this.audioElement&&this.audioElement.pause();break;case"Element":var o;null===(o=this.sourceNode)||void 0===o||o.disconnect(),this.audioElement||(this.audioElement=this.createAudioElement()),this.audioElement.muted=!1,this.interval||(this.interval=setInterval((function(){var e;da.type||(null===t||void 0===t||null===(e=t.audioElement)||void 0===e||e.play().then((function(){t.interval&&(clearInterval(t.interval),t.interval=void 0)})).catch((function(e){})))}),500));break;default:console.error("Unknown output: ".concat(e))}this.updateAudibility(this.audibility),this.updateVolume()}},{key:"setAudioOutput",value:function(e){this.audioDeviceId!==e&&(this.audioDeviceId=e,this.audioElement&&vl(this.audioElement,this.audioDeviceId))}},{key:"updateStream",value:function(e){this.updateSourceStream(e),this.setPlayMode(this.playMode)}},{key:"updatePose",value:function(e){var t,n,i,o,a=x(e.position),r=(a*a/(this.pannerNode.refDistance*this.pannerNode.refDistance)+this.pannerNode.refDistance-1)/(a||1);(this.distance=r*a,this.pannerNode.positionX&&this.pannerNode.orientationX)?(this.pannerNode.positionX.setValueAtTime(r*e.position[0],this.context.currentTime),this.pannerNode.positionY.setValueAtTime(r*e.position[1],this.context.currentTime),this.pannerNode.positionZ.setValueAtTime(r*e.position[2],this.context.currentTime),this.pannerNode.orientationX.setValueAtTime(e.orientation[0],this.context.currentTime),this.pannerNode.orientationY.setValueAtTime(e.orientation[1],this.context.currentTime),this.pannerNode.orientationZ.setValueAtTime(e.orientation[2],this.context.currentTime)):((t=this.pannerNode).setPosition.apply(t,Object(p.a)((i=r,o=e.position,[i*o[0],i*o[1],i*o[2]]))),(n=this.pannerNode).setOrientation.apply(n,Object(p.a)(e.orientation)));this.updateVolume()}},{key:"updateVolume",value:function(){var e=0;"Element"===this.playMode&&(e=Math.pow(Math.max(this.distance,this.pannerNode.refDistance)/this.pannerNode.refDistance,-this.pannerNode.rolloffFactor)),this.audioElement&&(this.audioElement.volume=e)}},{key:"defaultPannerRefDistance",get:function(){return this._defaultPannerRefDistance},set:function(e){this._defaultPannerRefDistance=e,this.pannerNode.refDistance!==Cl&&(this.pannerNode.refDistance=this._defaultPannerRefDistance)}},{key:"updateBroadcast",value:function(e){this.pannerNode.refDistance=e?Cl:this.defaultPannerRefDistance}},{key:"updatePannerConfig",value:function(e){var t=this;["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","distanceModel","panningModel","refDistance","rolloffFactor"].forEach((function(n){"refDistance"===n?t.defaultPannerRefDistance=e.refDistance:t.pannerNode[n]=e[n]}))}},{key:"updateAudibility",value:function(e){e?this.gainNode.connect(this.pannerNode):this.gainNode.disconnect(),this.audioElement&&(this.audioElement.muted=!e),this.audibility=e}},{key:"disconnect",value:function(){this.sourceNode&&this.sourceNode.disconnect(),this.gainNode.disconnect(),this.pannerNode.disconnect(),this.audioElement&&(this.audioElement.volume=0,this.audioElement.pause(),this.audioElement.remove())}},{key:"isBroadcast",get:function(){return this.pannerNode.refDistance===Cl}},{key:"createGainNode",value:function(e){var t=e.createGain();return t.gain.value=1,t}},{key:"createPannerNode",value:function(e){return e.createPanner()}},{key:"updateSourceStream",value:function(e){this.sourceNode&&this.sourceNode.disconnect(),void 0!==e?(this.sourceNode=this.context.createMediaStreamSource(e),void 0===this.audioElement&&(this.audioElement=this.createAudioElement()),this.audioElement.srcObject=e):this.sourceNode=void 0}},{key:"createAudioElement",value:function(){var e=new Audio;return vl(e,this.audioDeviceId),e}}]),e}(),Sl=function(e){Object(je.a)(n,e);var t=Object(Ae.a)(n);function n(){var e;Object(X.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).audioElementForBlob=void 0,e}return Object(K.a)(n,[{key:"playBlob",value:function(e){this.playSourceBlob(e),this.setPlayMode(this.playMode)}},{key:"playSourceBlob",value:function(e){if(this.sourceNode&&this.sourceNode.disconnect(),void 0!==e){var t=URL.createObjectURL(e);this.audioElementForBlob&&this.audioElementForBlob.remove(),this.audioElementForBlob=this.createAudioElement(),this.audioElementForBlob.src=t,this.sourceNode=this.context.createMediaElementSource(this.audioElementForBlob),this.sourceNode.connect(this.gainNode),this.audioElementForBlob.muted=!1,function e(t){var n;null===(n=t.audioElementForBlob)||void 0===n||n.play().catch((function(){setTimeout((function(){return e(t)}),500)}))}(this),void 0===this.audioElement&&(this.audioElement=this.createAudioElement(),this.audioElement.muted=!1),this.audioElement.src=URL.createObjectURL(e),function e(t){var n;null===(n=t.audioElement)||void 0===n||n.play().catch((function(){setTimeout((function(){return e(t)}),500)}))}(this)}else this.sourceNode=void 0}},{key:"setPlayMode",value:function(e){this.playMode=e,this.updateVolume()}}]),n}(wl),kl=new(ml=function(){function e(){Object(X.a)(this,e),Object(J.a)(this,"coneInnerAngle",fl,this),Object(J.a)(this,"coneOuterAngle",bl,this),Object(J.a)(this,"coneOuterGain",gl,this),Object(J.a)(this,"maxDistance",jl,this),Object(J.a)(this,"panningModel",Al,this),Object(J.a)(this,"distanceModel",Ol,this),Object(J.a)(this,"refDistance",yl,this),Object(J.a)(this,"rolloffFactor",xl,this),this.refDistanceNormal=this.refDistance,Object(fe.g)(this)}return Object(K.a)(e,[{key:"hearableRange",get:function(){return 100*this.refDistance/720}},{key:"setHearableRange",value:function(e){this.refDistanceNormal=e/100*720;var t=On.local.physics.onStage;this.setBroadcast(t)}},{key:"setBroadcast",value:function(e){this.refDistance=this.refDistanceNormal}},{key:"updateParameters",value:function(e){Object.assign(this,e)}}]),e}(),fl=Object(V.a)(ml.prototype,"coneInnerAngle",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bl=Object(V.a)(ml.prototype,"coneOuterAngle",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 180}}),gl=Object(V.a)(ml.prototype,"coneOuterGain",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),jl=Object(V.a)(ml.prototype,"maxDistance",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),Al=Object(V.a)(ml.prototype,"panningModel",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"HRTF"}}),Ol=Object(V.a)(ml.prototype,"distanceModel",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"exponential"}}),yl=Object(V.a)(ml.prototype,"refDistance",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),xl=Object(V.a)(ml.prototype,"rolloffFactor",[fe.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 38}}),Object(V.a)(ml.prototype,"hearableRange",[fe.d],Object.getOwnPropertyDescriptor(ml.prototype,"hearableRange"),ml.prototype),Object(V.a)(ml.prototype,"setHearableRange",[fe.b],Object.getOwnPropertyDescriptor(ml.prototype,"setHearableRange"),ml.prototype),Object(V.a)(ml.prototype,"setBroadcast",[fe.b],Object.getOwnPropertyDescriptor(ml.prototype,"setBroadcast"),ml.prototype),Object(V.a)(ml.prototype,"updateParameters",[fe.b],Object.getOwnPropertyDescriptor(ml.prototype,"updateParameters"),ml.prototype),ml),Tl=kl;Object(fe.c)((function(){var e=On.local.physics.onStage;kl.setBroadcast(e)}));var Il=n(314),El=n.n(Il),Pl=.1;function Ml(){return.001*Date.now()}var Rl=Object(Ka.a)({iframe:{width:"100%",height:"100%"}}),Dl=Object(K.a)((function e(){Object(X.a)(this,e),this.player=void 0,this.goal="",this.skipOnPlaying=0,this.pauseIntervalTimer=0,this.lastCurrentTimePaused=0,this.playTimeout=0,this.pauseTimeout=0,this.params=new Map,this.editing=!1,this.prevRelPos=[0,0],this.volumeUI=.5,this.volumeDist=0,this.prevVolumeDist=0,this.volumeIntervalTimer=0,this.props=void 0}));function Bl(e){return function(e){return new Map(e.map((function(e){return e.split("=")})))}(e.split("&"))}function Nl(e){e.playTimeout&&(clearTimeout(e.playTimeout),e.playTimeout=0),e.pauseTimeout&&(clearTimeout(e.pauseTimeout),e.pauseTimeout=0)}function zl(e,t,n){r(n.player),n.goal="playing",Nl(n);var i=(Ml()-e)*n.player.getPlaybackRate();if("playing"!==n.player.getState()||0!==n.player.getPlaylist().length&&n.player.getPlaylistIndex()!==t||!(Math.abs(n.player.getCurrentTime()-i)<Pl)){var o=-1e3;!function a(){if(n.player){var r=n.player.getCurrentTime();if("paused"===n.player.getState()&&Math.abs(o-r)<Pl)return n.player.play(),void Go("ytSeekAndPlay: ".concat(n.player.getState(),"  ")+"cur:".concat(n.player.getCurrentTime(),"  toSeek:").concat(i),n.params);var s=Ml();i=(s-e)*n.player.getPlaybackRate();o=i+1*n.player.getPlaybackRate();var c=n.player.getDuration();"unstarted"!==n.player.getState()&&c||(n.skipOnPlaying=1,n.player.play(),c=n.player.getDuration()),t>=0&&t!==n.player.getPlaylistIndex()&&(n.skipOnPlaying=1,n.player.playVideoAt(t),c=n.player.getDuration()),c&&(n.player.pause(),o>c&&(e=s+1-(o%=c)/n.player.getPlaybackRate()),n.player.seek(o)),n.playTimeout=setTimeout(a,1e3)}}()}}function Fl(e,t){r(t.player),t.goal="paused",Nl(t);!function n(){if(t.player){var i=t.params.get("index"),o=Number(i||-1);if("paused"!==t.player.getState()||o>=0&&o!==t.player.getPlaylistIndex())return"unstarted"===t.player.getState()&&t.player.play(),o>=0&&o!==t.player.getPlaylistIndex()&&t.player.playVideoAt(o),t.player.pause(),void(t.pauseTimeout=setTimeout(n,333));t.player.getCurrentTime()!==e&&(t.player.seek(e),Go("ytSeekAndPause seek to ".concat(e),t.params)),t.lastCurrentTimePaused=t.player.getCurrentTime()}}()}function Ll(e,t,n){var i,o,r;(r=n.params).delete("playing"),r.delete("paused"),r.delete("ended"),n.params.set(e,String(t)),n.params.set("rate",String(null===(i=n.player)||void 0===i?void 0:i.getPlaybackRate()));var s=null===(o=n.player)||void 0===o?void 0:o.getPlaylistIndex();n.params.set("index",String(s||-1)),n.props.content.url=function(e){var t,n="",i="",o=Object(a.a)(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;n+="".concat(i).concat(r[0],"=").concat(r[1]),i="&"}}catch(s){o.e(s)}finally{o.f()}return n}(n.params),n.props.updateAndSend(n.props.content),Go("YT SEND state ".concat(e," t=").concat(t),n.params)}function Ul(e){if(e.player){var t=e.player.getState();if(e.editing||""!==e.goal||"paused"!==t)e.pauseIntervalTimer&&(clearInterval(e.pauseIntervalTimer),e.pauseIntervalTimer=0);else{var n=e.player.getCurrentTime();if(Go("YT ytPauseInterval cur:".concat(n,", last:").concat(e.lastCurrentTimePaused," param").concat(e.params.get("paused"))),Math.abs(n-e.lastCurrentTimePaused)>Pl)e.lastCurrentTimePaused=n,n!==Number(e.params.get("paused"))&&Ll("paused",n,e)}}}function Ql(e,t){t.player&&(t.volumeDist=function(e){var t=(e*e/(kl.refDistance*kl.refDistance)+kl.refDistance-1)/(e||1)*e;return Math.pow(Math.max(t,kl.refDistance)/kl.refDistance,-kl.rolloffFactor)}(e),t.player.setVolume(t.volumeUI*t.volumeDist*100))}function Gl(e){if(e.props.stores.participants){!function(e){if(e.player){if(1===e.volumeDist&&1===e.prevVolumeDist){var t=e.player.getVolume()/100;t!==e.volumeUI&&(e.volumeUI=t)}else e.player.setVolume(e.volumeUI*e.volumeDist*100);e.prevVolumeDist=e.volumeDist}}(e);var t=A(e.props.content.pose.position,e.props.stores.participants.local.pose.position);if(x(A(t,e.prevRelPos))>6){e.prevRelPos=[t[0],t[1]];for(var n=0;n<2;n++)t[n]<0&&(t[n]+=e.props.content.size[n],t[n]>0&&(t[n]=0));Ql(x(t),e)}}}var Yl=function(e){r("youtube"===e.content.type);var t=Rl(),n=Object(ha.useRef)(new Dl).current;n.props=e;var o=Object(pa.b)((function(){return e.stores.contents.editing===e.content.id})),s=n.params;if(n.params=Bl(e.content.url),!o&&(n.editing||!function(e,t){var n;if(e.size!==t.size)return!1;var o,r=Object(a.a)(e);try{for(r.s();!(o=r.n()).done;){var s=Object(i.a)(o.value,2),c=s[0],l=s[1];if((n=t.get(c))!==l||void 0===n&&!t.has(c))return!1}}catch(u){r.e(u)}finally{r.f()}return!0}(n.params,s))&&n.player){n.params.get("rate")!==s.get("rate")&&n.player.setPlaybackRate(Number(n.params.get("rate")));var c=n.params.get("playing"),l=void 0!==c&&c!==s.get("playing"),u=n.params.get("paused"),d=void 0!==u&&u!==s.get("paused");l?(Go("YT render move to play=".concat(c," state")),zl(Number(n.params.get("playing")),Number(n.params.get("index")),n)):d&&(Go("YT render move to pause=".concat(u," state")),Fl(Number(n.params.get("paused")),n))}return n.editing=o,Object(ha.useEffect)((function(){r(e.content.id);var t=!1;if(!n.player){var i="#YT".concat(e.content.id),o=new El.a(i);n.params.has("playing")||n.params.has("paused")||n.params.has("ended")||(t=!0,n.params.set("playing",String(-1)),o.play()),n.player=o,Go("YTPlayer for ".concat(i," created")),n.params.has("rate")&&o.setPlaybackRate(Number(n.params.get("rate"))),n.editing||(n.params.has("paused")?Fl(Number(n.params.get("paused")),n):!t&&n.params.has("playing")&&zl(Number(n.params.get("playing")),Number(n.params.get("index")),n)),o.on("error",(function(e){return Go("YT on error ",e)})),o.on("buffering",(function(){return Go("YT on buffering")})),o.on("cued",(function(){return Go("YT on cued")})),o.on("unstarted",(function(){Go("YT on unstarted"),o.unMute()})),o.on("ended",(function(){(Go("YT on ended"),n.player)&&zl(Ml(),0,n)})),o.on("paused",(function(){Go("YT on paused at ".concat(o.getCurrentTime()," goal:").concat(n.goal),n.params),"paused"===n.goal?n.goal="":""===n.goal?n.params.has("paused")||setTimeout((function(){n.params.has("paused")||n.params.has("playing")||"paused"!==o.getState()||Ll("paused",o.getCurrentTime(),n)}),1e3):Go("paused for goal ".concat(n.goal)),""!==n.goal||n.pauseIntervalTimer||(n.pauseIntervalTimer=setInterval(Ul,333,n))})),o.on("playing",(function(){Go("YT on playing goal=".concat(n.goal," skip=").concat(n.skipOnPlaying),n.params);var e=!1;if(o.getPlaylist().length>0&&o.getPlaylistIndex()!==Number(n.params.get("index"))&&(n.params.set("index",String(o.getPlaylistIndex())),e=!0),"playing"===n.goal)n.skipOnPlaying?n.skipOnPlaying=0:n.goal="";else if(""===n.goal){var t=Ml()-o.getCurrentTime()/o.getPlaybackRate(),i=Number(n.params.get("playing"));-1===i&&(i=t);var a=t-i;(!n.params.has("playing")||e||Math.abs(a)>Pl)&&Ll("playing",t,n)}})),o.on("playbackRateChange",(function(){Go("YT on playbackRateChange");var e=Ml()-o.getCurrentTime()/o.getPlaybackRate(),t=o.getState();Ll("paused"===t?"paused":"playing"===t?"playing":"ended",e,n)}))}var a=n.player;return a&&(n.params.has("list")?(a.loadList({listType:"playlist",list:n.params.get("list")}),Go("YT loadList: ".concat(n.params.get("list")))):n.params.has("v")&&(a.load(n.params.get("v")),Go("YT load: ".concat(n.params.get("v"))))),n.volumeIntervalTimer||(n.volumeIntervalTimer=setInterval(Gl,200,n)),function(){n.player&&n.player.destroy(),n.player=void 0,n.volumeIntervalTimer&&clearInterval(n.volumeIntervalTimer)}}),[]),Object(Ia.jsx)("div",{id:"YT".concat(e.content.id),className:t.iframe})};function Hl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n<0&&(n=t);var i={img:Object(Ia.jsx)(zc.a,{style:c()?{fontSize:t,width:"70px",height:"70px"}:{fontSize:t,width:"40px",height:"40px"}}),text:Object(Ia.jsx)(Us.a,{style:c()?{fontSize:t,width:"70px",height:"70px"}:{fontSize:t,width:"40px",height:"40px"}}),iframe:Object(Ia.jsx)(Bc.a,{style:{fontSize:t,width:n}}),youtube:Object(Ia.jsx)(Lc.a,{style:{fontSize:t,width:n}}),screen:Object(Ia.jsx)(Fs.a,{style:c()?{fontSize:t,width:"70px",height:"70px"}:{fontSize:t,width:"40px",height:"40px"}}),gdrive:Object(Ia.jsx)("span",{style:{width:n,height:t},children:Object(Ia.jsx)(Ya.Icon,{icon:Pc.a,height:t})}),whiteboard:Object(Ia.jsx)("span",{style:{width:n,height:t},children:Object(Ia.jsx)(Ya.Icon,{icon:kc.a,height:t})}),camera:Object(Ia.jsx)(Rc.a,{style:{fontSize:t,width:n}}),pdf:Object(Ia.jsx)("span",{style:{width:n,height:t},children:Object(Ia.jsx)(Ya.Icon,{icon:Ic.a,height:t})}),playbackScreen:Object(Ia.jsx)(Fs.a,{style:{fontSize:t,width:n}}),playbackCamera:Object(Ia.jsx)(Rc.a,{style:{fontSize:t,width:n}}),chat:Object(Ia.jsx)(Ia.Fragment,{}),content:Object(Ia.jsx)(Ia.Fragment,{}),"":void 0};return i[e]}function Wl(e,t){var n=t?t.type:"";return"whiteboard"===n?ee(e?"ctEndEditWhiteboard":"ctEditWhiteboard"):"gdrive"===n?ee(e?"ctEndEditGDrive":"ctEditGDrive"):"youtube"===n?ee(e?"ctEndEditYoutube":"ctEditYoutube"):"iframe"===n?ee(e?"ctEndEditIframe":"ctEditIframe"):"text"===n?ee(e?"ctEndEditText":"ctEditText"):""}var Jl=Object(Ka.a)({img:{width:"100%",height:"100%",verticalAlign:"bottom",userDrag:"none",pointerEvents:"none"},iframe:{width:"100%",height:"100%",pointerEvents:"none",border:"none"},iframeEdit:{width:"100%",height:"100%",border:"none"},div:{width:"100%",height:"100%"}}),Vl=function(e){var t=Jl(),n=Object(pa.b)((function(){return e.stores.contents.editing===e.content.id}));return"img"===e.content.type?Object(Ia.jsx)("img",{className:t.img,src:e.content.url,alt:e.content.name}):"iframe"===e.content.type||"whiteboard"===e.content.type?Object(Ia.jsx)("div",{className:t.div,children:Object(Ia.jsx)("iframe",{className:n?t.iframeEdit:t.iframe,style:"whiteboard"===e.content.type?{backgroundColor:e.content.noFrame?"rgba(0,0,0,0)":"white"}:{},src:e.content.url,title:e.content.name},e.content.name)}):"youtube"===e.content.type?Object(Ia.jsx)(Yl,Object(wn.a)({},e)):"gdrive"===e.content.type?Object(Ia.jsx)(Jc,Object(wn.a)({},e)):"pdf"===e.content.type?Object(Ia.jsx)(el,Object(wn.a)({},e)):"text"===e.content.type?Object(Ia.jsx)(hl,Object(wn.a)({},e)):"screen"===e.content.type||"camera"===e.content.type?Object(Ia.jsx)(ol,Object(wn.a)({},e)):"playbackScreen"===e.content.type||"playbackCamera"===e.content.type?Object(Ia.jsx)(nl,Object(wn.a)({},e)):Object(Ia.jsxs)("div",{children:["Unknown type:",e.content.type," for ",e.content.url]})},Kl=function(e){return va.a.useMemo((function(){return Object(Ia.jsx)(Vl,Object(wn.a)({},e))}),[e.content.url,e.content.id,e.content.type,e.stores.contents.editing===e.content.id,e.content.pose,e.content.size,e.content.originalSize])};Kl.displayName="Content";var Xl=n(226),Zl=n(318),ql=n(319),_l=n(320),$l=n(321),eu=n(322),tu=n.n(eu),nu=n(323),iu=n.n(nu),ou=n(324),au=n.n(ou),ru=n(325),su=n.n(ru),cu=n(326),lu=n.n(cu),uu=n(327),du=n.n(uu),pu=n(328),hu=n.n(pu),vu=n(621),mu=n(619),fu=n(620),bu=n(618),gu=n(617),ju=n(332),Au=n.n(ju),Ou=n(331),yu=n.n(Ou),xu=n(330),Cu=n.n(xu),wu=n(329),Su=n.n(wu),ku=["onClose","autoHideTitle","updateAndSend","updateOnly","close"];function Tu(e,t,n,i,o,a){var r={margin:0,padding:2,border:"none"};return Object(Ia.jsxs)(gu.a,{children:[Object(Ia.jsx)(bu.a,{align:"right",style:r,children:e}),Object(Ia.jsx)(bu.a,{align:"right",style:r,children:t}),Object(Ia.jsx)(bu.a,{align:"center",style:r,children:n}),Object(Ia.jsx)(bu.a,{style:r,children:i}),Object(Ia.jsx)(bu.a,{style:r,children:o})]},a)}var Iu=function(){function e(t){Object(X.a)(this,e),this.zorder=void 0,this.pinned=void 0,this.editing=void 0,this.name=void 0,this.pose=void 0,this.save(t)}return Object(K.a)(e,[{key:"save",value:function(e){e.content&&(this.zorder=e.content.zorder,this.pinned=e.content.pinned,this.name=e.content.name,this.pose=e.content.pose,this.editing=e.stores.contents.editing)}},{key:"restore",value:function(e){e.content&&(e.content.zorder=this.zorder,e.content.pinned=this.pinned,e.content.name=this.name,e.content.pose=this.pose,e.stores.contents.setEditing(this.editing))}}]),e}(),Eu=function(e){var t=va.a.useRef(new Iu(e)).current;function n(n,i){"enter"!==i&&"backdropClick"!==i||(t.save(e),e.content&&e.updateAndSend(e.content)),e.close()}var i=function(e){"Enter"===e.key&&n(0,"enter")},o=e.stores,a=o.contents,r=o.map,s=function(e){e.onClose,e.autoHideTitle,e.updateAndSend,e.updateOnly,e.close;return Object(be.a)(e,ku)}(e);return Object(Ia.jsx)(Va.a,Object(wn.a)(Object(wn.a)({onClose:n},s),{},{onMouseDown:function(e){e.stopPropagation()},children:Object(Ia.jsx)(pa.a,{children:function(){var o,s,c,l,u,d,p,h;return Object(Ia.jsxs)(ya.a,{children:[Object(Ia.jsx)("table",{children:Object(Ia.jsx)("tbody",{children:Object(Ia.jsxs)("tr",{children:[Object(Ia.jsx)("td",{children:Hl(e.content?e.content.type:"",Yo)}),Object(Ia.jsx)("td",{children:Object(Ia.jsx)(sr.a,{label:ee("ctName"),multiline:!1,value:e.content?e.content.name:"",inputProps:{autoFocus:!0},style:{marginLeft:20,width:"100%"},onChange:function(t){e.content&&(e.content.name=t.target.value,e.updateOnly(e.content))},onKeyPress:i,fullWidth:!0})})]})})}),Object(Ia.jsxs)(Aa.a,{mt:2,mb:2,children:[Object(Ia.jsxs)(Oa.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){e.content&&(vi(e.content),e.updateOnly(e.content))},children:[Object(Ia.jsx)(Su.a,{}),"\xa0 ",ee("ctMoveTop")]})," \xa0",Object(Ia.jsxs)(Oa.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){e.content&&(mi(e.content),e.updateOnly(e.content))},children:[Object(Ia.jsx)(Cu.a,{}),"\xa0 ",ee("ctMoveBottom")]})," \xa0"]}),Object(Ia.jsxs)(Aa.a,{mt:2,mb:2,children:[Object(Ia.jsxs)(Oa.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){e.content&&function(e){if("text"===e.type){var t=JSON.parse(e.url);di(t.messages.length?t.messages.map((function(e){return e.message})).reduce((function(e,t){return e?e+"\n":""+t})):"")}else if("youtube"===e.type){var n=e.url.split("&").filter((function(e){var t=e.split("=")[0];return"v"===t||"list"===t})),i=n.length?n.reduce((function(e,t){return(e?e+"&":"")+t})):"";di("https://www.youtube.com/watch?".concat(i))}else"gdrive"===e.type?di(pi(!0,hi(e.url))):di(e.url)}(e.content)},children:[Object(Ia.jsx)(Ya.Icon,{icon:$l.a,height:Yo}),"\xa0 ",ee("ctCopyToClipboard")]})," \xa0",Object(Ia.jsx)(Oa.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){e.content&&r.focusOn(e.content)},children:ee("ctFocus")})]}),Object(Ia.jsx)(mu.a,{size:"small",children:Object(Ia.jsx)(fu.a,{children:[Tu(ee("ctUnpin"),Object(Ia.jsx)(Ya.Icon,{icon:hu.a,height:Yo}),Object(Ia.jsx)(vu.a,{color:"primary",checked:null===(o=e.content)||void 0===o?void 0:o.pinned,onChange:function(t,n){e.content&&(e.content.pinned=n,e.updateOnly(e.content))}}),Object(Ia.jsx)(Ya.Icon,{icon:du.a,height:Yo}),ee("ctPin"),"pin"),Object(Ia.jsx)(ha.Fragment,{children:Ln(e.content)?Tu(Wl(!0,e.content),Object(Ia.jsx)(jr.a,{}),Object(Ia.jsx)(vu.a,{color:"primary",checked:(null===(s=e.content)||void 0===s?void 0:s.id)===a.editing,onChange:function(t,n){e.content&&a.setEditing(n?e.content.id:"")}}),Object(Ia.jsx)(yu.a,{}),Wl(!1,e.content)):void 0},"edit"),Object(Ia.jsx)(ha.Fragment,{children:(h=e.content,h&&"camera"!==h.type&&"screen"!==h.type?Tu(ee("ctUnWallpaper"),Object(Ia.jsx)(Ya.Icon,{icon:Xl.a,height:Yo}),Object(Ia.jsx)(vu.a,{color:"primary",checked:Un(e.content),onChange:function(t,n){e.content&&(!function(e,t){if(t){var n=zn-(Math.floor(Date.now()/Nn)-e.zorder);n<0&&(n=e.zorder%zn),e.zorder=n}else e.zorder=e.zorder+zn}(e.content,n),e.updateOnly(e.content))}}),Object(Ia.jsx)(Ya.Icon,{icon:Zl.a,height:Yo}),ee("ctWallpaper")):void 0)},"wall"),Object(Ia.jsx)(ha.Fragment,{children:Tu(ee("ctFrameVisible"),Object(Ia.jsx)(Ya.Icon,{icon:iu.a,height:Yo}),Object(Ia.jsx)(vu.a,{color:"primary",checked:!(null===(c=e.content)||void 0===c||!c.noFrame),onChange:function(t,n){e.content&&(e.content.noFrame=!!n||void 0,e.updateOnly(e.content))}}),Object(Ia.jsx)(Ya.Icon,{icon:au.a,height:Yo}),ee("ctFrameInvisible"))},"noFrame"),Object(Ia.jsx)(ha.Fragment,{children:"img"===(null===(l=e.content)||void 0===l?void 0:l.type)?Tu(ee("ctNotAudioZone"),Object(Ia.jsx)(Ya.Icon,{icon:Xl.a,height:Yo}),Object(Ia.jsx)(vu.a,{color:"primary",checked:void 0!==(null===(u=e.content)||void 0===u?void 0:u.zone),onChange:function(t,n){e.content&&(e.content.zone=n?e.content.zone?e.content.zone:"open":void 0,e.updateOnly(e.content))}}),Object(Ia.jsx)(Ya.Icon,{icon:ql.a,height:Yo}),Object(Ia.jsxs)(Ia.Fragment,{children:[e.content.zone?Object(Ia.jsx)(wr.a,{size:"small",onClick:function(){e.content&&(e.content.zone="close"===e.content.zone?"open":"close",e.updateOnly(e.content))},children:Object(Ia.jsx)(Ya.Icon,{icon:"close"===e.content.zone?_l.a:su.a,height:Yo})}):void 0,"close"===e.content.zone?ee("ctClosedAudioZone"):ee("ctOpenAudioZone")]})):void 0},"zone"),Object(Ia.jsx)(ha.Fragment,{children:Tu(ee("ctTransparent"),Object(Ia.jsx)(Ya.Icon,{icon:tu.a,height:Yo}),Object(Ia.jsx)(dr.a,{color:"primary",value:void 0===(null===(d=e.content)||void 0===d?void 0:d.opacity)?1e3:1e3*e.content.opacity,min:0,max:1e3,style:{width:"6em",marginLeft:"0.4em",marginRight:"0.4em"},onChange:function(t,n){e.content&&(e.content.opacity=1e3===n?void 0:n/1e3,e.updateOnly(e.content))}}),Object(Ia.jsx)(Ya.Icon,{icon:lu.a,height:Yo}),ee("ctOpaque"))},"opacity")]})}),Object(Ia.jsxs)(Aa.a,{mt:2,mb:2,children:[Object(Ia.jsx)(Oa.a,{variant:"contained",color:"primary",style:{textTransform:"none"},onClick:function(){n(0,"enter")},children:ee("btSave")}),Object(Ia.jsx)(Oa.a,{variant:"contained",color:"secondary",style:{textTransform:"none",marginLeft:15},onClick:function(){e.content&&(t.restore(e),e.updateOnly(e.content))},children:ee("btCancel")}),Object(Ia.jsxs)(Oa.a,{variant:"contained",color:"secondary",style:{textTransform:"none",marginLeft:60},disabled:(null===(p=e.content)||void 0===p?void 0:p.pinned)||Un(e.content),onClick:function(t){e.onClose(t)},children:[Object(Ia.jsx)(Au.a,{})," \xa0 ",ee("ctDelete")]})," \xa0\xa0"]})]})}})}))},Pu=n(141),Mu=n(333),Ru=n.n(Mu),Du="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAABkUlEQVR4nO3cwU3DMBiAURcxWJmErsAGHYVRYIOOwAhsEA5cOZBgyfrKe1Jv7u9In+RD0+S0bdug6WH1BXCceGHihYkXJl6YeGHihYkXJl6YeGHihYkXJl6YeGHihYkXJl6YeGHihYkXJl6YeGHihYkXJl6YeGHihYkXJl6YeGH3Eu86xth2fM4rLnK2e4n3L4kXJl6YeGHihYkXJl6YeGHihYkXJl6YeGHihYkXJl6YeGHihT0u3v86ac555/rLge/85GOM8TphziGnxW+6rb9m930s/EuFYzNMvDDxwsQLEy9MvDDxwsQLEy9MvLDVv20+TZpzGWM871j/Msa4Tdj3c8KMw1bHe5s057xz/W3i3ss4NsPECxMvTLww8cLECxMvTLww8cLECxMvTLww8cLECxMvTLyw1TdjZ/kY3w99/NbSO+CzrH5KiD9wbIaJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJF/YFuDIiwrkDZeQAAAAASUVORK5CYII=";var Bu=n(334),Nu=n.n(Bu),zu=n(335),Fu=n.n(zu),Lu=n(336),Uu=n.n(Lu),Qu=n(337),Gu=n.n(Qu),Yu=n(338),Hu=n.n(Yu),Wu=function(e){var t=e.stat,n=e.streams;return Object(Ia.jsxs)(Ia.Fragment,{children:[null!==t&&void 0!==t&&t.turn?Object(Ia.jsxs)("div",{children:["RTC via ",t.turn]}):void 0,null!==t&&void 0!==t&&t.remoteServer?Object(Ia.jsxs)("div",{children:["RTC\u21d3:",t.remoteServer]}):void 0,Object(Ia.jsxs)("div",{children:["\u21d1",(((null===t||void 0===t?void 0:t.sentBytePerSec)||0)/1e3).toFixed(1),"k\xa0 \u21d3",(((null===t||void 0===t?void 0:t.receivedBytePerSec)||0)/1e3).toFixed(1),"k\xa0",void 0!==(null===t||void 0===t?void 0:t.quality)?Object(Ia.jsxs)(Ia.Fragment,{children:["Quality:",t.quality.toFixed(0),"%\xa0"]}):void 0,null!==t&&void 0!==t&&t.roundTripTime?Object(Ia.jsxs)(Ia.Fragment,{children:["RTT:",(1e3*t.roundTripTime).toFixed(0),"ms\xa0"]}):void 0,void 0!==(null===t||void 0===t?void 0:t.fractionLost)?Object(Ia.jsxs)(Ia.Fragment,{children:["Lost:",(100*(null===t||void 0===t?void 0:t.fractionLost)).toFixed(2),"%"]}):void 0]}),Object(Ia.jsx)("div",{children:"Streams:"}),null===n||void 0===n?void 0:n.map((function(e){return Object(Ia.jsxs)("div",{children:["\xa0","send"===e.dir?"\u21d1":"\u21d3",e.codec&&Object(Ia.jsxs)(Ia.Fragment,{children:[e.codec,"\xa0"]}),((e.bytesPerSec?e.bytesPerSec:0)/1e3).toFixed(1),"k",e.roundTripTime?Object(Ia.jsxs)(Ia.Fragment,{children:["\xa0 RTT:",(1e3*e.roundTripTime).toFixed(0),"ms"]}):void 0,void 0!==e.fractionLost?Object(Ia.jsxs)(Ia.Fragment,{children:["\xa0 Lost:",(100*e.fractionLost).toFixed(2),"%"]}):void 0,void 0!==e.jitter?Object(Ia.jsxs)(Ia.Fragment,{children:["\xa0 Jitter:",(1e3*e.jitter).toFixed(0),"ms"]}):void 0]},e.id)}))]})},Ju=function(e){var t=te().t,n=Object(pa.b)((function(){return e.stat?Object(wn.a)({},e.stat):void 0}));return Object(Ia.jsxs)(Va.a,{open:e.open,anchorEl:e.anchorEl,children:[Object(Ia.jsx)(Ta.a,{children:t("connectionStatus")}),Object(Ia.jsxs)(ya.a,{children:[Object(Ia.jsx)(Wu,{stat:n,streams:null===n||void 0===n?void 0:n.streams}),Object(Ia.jsx)(Oa.a,{variant:"contained",color:"primary",style:{textTransform:"none",marginTop:"0.4em"},onClick:function(t){t.stopPropagation(),e.onClose&&e.onClose()},children:t("emClose")})]}),Object(Ia.jsx)("br",{})]})},Vu=function(e){var t=void 0,n=e.quality;return void 0!==n&&(t=Object(Ia.jsx)(Nu.a,{className:e.className,style:{color:"red"}}),n>30&&(t=Object(Ia.jsx)(Fu.a,{className:e.className,style:{color:"orange"}})),n>50&&(t=Object(Ia.jsx)(Uu.a,{className:e.className,style:{color:"gold"}})),n>70&&(t=Object(Ia.jsx)(Gu.a,{className:e.className,style:{color:"yellow"}})),n>90&&(t=Object(Ia.jsx)(Hu.a,{className:e.className,style:{color:"green"}}))),Object(Ia.jsx)(Ia.Fragment,{children:t})},Ku=function(e){var t,n=va.a.useState(!1),o=Object(i.a)(n,2),a=o[0],r=o[1],s=va.a.useRef(null);return Object(Ia.jsxs)(wr.a,{ref:s,onClick:function(){r(!0)},children:[Object(Ia.jsx)(Vu,{quality:null===(t=e.stat)||void 0===t?void 0:t.quality}),Object(Ia.jsx)(Ju,{stat:e.stat,open:a,anchorEl:s.current,onClose:function(){r(!1)}})]})},Xu=["close"],Zu=Object(Dr.a)({palette:{primary:{main:"#7ececc"},secondary:{main:"#ef4623"}}}),qu={fontSize:c()?"2em":"1em",height:c()?"2em":"1.5em"},_u={height:c()?"4em":"3em"},$u={fontSize:(c(),"1em")},ed={fontSize:c()?"2.5rem":"1rem"},td=function(e){var t=e.stores,n=t.participants,o=t.map,a=n.local,r=Object(ha.useState)(),s=Object(i.a)(r,2),l=s[0],u=s[1],d=Object(ha.useState)(!1),p=Object(i.a)(d,2),h=p[0],v=p[1],m=Object(ha.useState)(!1),f=Object(i.a)(m,2),b=f[0],g=f[1],j=te().t;function A(t,n){"enter"!==n&&"backdropClick"!==n||(a.sendInformation(),a.saveInformationToStorage(!0)),e.close()}var O=function(e){"Enter"===e.key?A(0,"enter"):"Esc"!==e.key&&"Escape"!==e.key||a.loadInformationFromStorage()};function y(e){e.preventDefault(),u(null),a.information.avatarSrc=""}function x(e){e.preventDefault(),l&&qn(l).then((function(e){a.information.avatarSrc=e}))}var C=va.a.useRef(null),w=va.a.useRef(null),S=(e.close,Object(be.a)(e,Xu));return Object(Ia.jsxs)(Va.a,Object(wn.a)(Object(wn.a)({},S),{},{onClose:A,children:[Object(Ia.jsxs)(Ta.a,{children:[Object(Ia.jsx)("span",{style:{fontSize:c()?"2.5em":"1em"},children:j("lsTitle")}),Object(Ia.jsx)("span",{style:{float:"right"},children:Object(Ia.jsx)(Ku,{open:e.open,stat:Qo.sendTransportStat})})]}),Object(Ia.jsxs)(ya.a,{children:[Object(Ia.jsx)(pa.a,{children:function(){var e=a.getColorRGB(),t=a.getTextColorRGB(),n=Q(e)?"white":"black",i=Q(t)?"lightgray":"gray";return Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)(sr.a,{label:j("YourName"),multiline:!1,value:a.information.name,style:_u,inputProps:{style:qu,autoFocus:!0},InputLabelProps:{style:$u},onChange:function(e){a.information.name=e.target.value},onKeyPress:O,fullWidth:!0}),Object(Ia.jsxs)(Aa.a,{mt:3,children:[Object(Ia.jsx)("div",{style:{fontSize:c()?"2em":12},children:j("lsColor")}),Object(Ia.jsxs)(Aa.a,{ml:2,children:[Object(Ia.jsx)(Oa.a,{variant:"contained",style:{backgroundColor:Y(e),color:n,textTransform:"none",fontSize:c()?"2em":"1em"},onClick:function(){v(!0)},ref:C,children:j("lsColorAvatar")}),Object(Ia.jsx)(Va.a,{open:h,onClose:function(){v(!1)},anchorEl:C.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(Ia.jsx)(cr.a,{color:{r:e[0],g:e[1],b:e[2]},disableAlpha:!0,onChange:function(e,t){t.preventDefault(),a.information.color=[e.rgb.r,e.rgb.g,e.rgb.b]}})}),Object(Ia.jsx)(Oa.a,{variant:"contained",style:{color:Y(t),backgroundColor:i,marginLeft:15,textTransform:"none",fontSize:c()?"2em":"1em"},onClick:function(){g(!0)},ref:w,children:j("lsColorText")}),Object(Ia.jsx)(Va.a,{open:b,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:function(){g(!1)},anchorEl:w.current,children:Object(Ia.jsx)(cr.a,{color:{r:t[0],g:t[1],b:t[2]},onChange:function(e,t){t.preventDefault(),a.information.textColor=[e.rgb.r,e.rgb.g,e.rgb.b]}})}),Object(Ia.jsx)(Oa.a,{variant:"contained",style:{marginLeft:15,textTransform:"none",fontSize:c()?"2em":"1em"},onClick:function(){a.information.color=[],a.information.textColor=[]},children:j("lsAutoColor")})]})]}),Object(Ia.jsxs)(Aa.a,{mt:3,children:[Object(Ia.jsx)("div",{style:{fontSize:c()?"2em":"1em"},children:j("lsImage")}),Object(Ia.jsxs)(Aa.a,{mt:-1,ml:2,children:[Object(Ia.jsxs)("form",{onSubmit:x,style:{lineHeight:"2em",fontSize:c()?"2.5em":"1em"},children:[Object(Ia.jsx)("div",{style:{fontSize:c()?"1em":12,marginTop:8},children:j("lsImageFile")}),a.information.avatarSrc?Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)("img",{src:a.information.avatarSrc,style:{height:"1.5em",verticalAlign:"middle"},alt:"avatar"}),Object(Ia.jsx)("input",{style:ed,type:"submit",onClick:y,value:"\u2715"})," \xa0"]}):void 0,Object(Ia.jsx)("input",{style:ed,type:"file",onChange:function(e){var t;u(null===(t=e.target.files)||void 0===t?void 0:t.item(0))}}),Object(Ia.jsx)("input",{style:ed,type:"submit",value:"Upload"})]},"information"),Object(Ia.jsx)(sr.a,{label:j("lsEmail"),multiline:!1,value:a.information.email,style:Object(wn.a)(Object(wn.a)({},_u),{},{marginTop:8}),inputProps:{style:qu,autoFocus:!0},InputLabelProps:{style:$u},onChange:function(e){return a.information.email=e.target.value},onKeyPress:O,fullWidth:!0})]})]}),Object(Ia.jsxs)(Aa.a,{mt:3,children:[Object(Ia.jsx)("div",{style:{fontSize:c()?"2em":12},children:j("lsNotification")}),Object(Ia.jsxs)(Aa.a,{mt:c()?1:-1,ml:c()?37:2,style:{transform:c()?"scale(2)":"scale(1)"},children:[Object(Ia.jsx)(lr.a,{control:Object(Ia.jsx)(br.a,{color:"secondary",style:{fontSize:c()?"2em":"1em"},checked:a.information.notifyCall,onChange:function(e){a.information.notifyCall=e.target.checked}}),label:j("lsNotifyCall")}),Object(Ia.jsx)(lr.a,{control:Object(Ia.jsx)(br.a,{color:"secondary",checked:a.information.notifyTouch,onChange:function(e){a.information.notifyTouch=e.target.checked}}),label:j("lsNotifyTouch")}),Object(Ia.jsx)(lr.a,{control:Object(Ia.jsx)(br.a,{color:"secondary",checked:a.information.notifyNear,onChange:function(e){a.information.notifyNear=e.target.checked}}),label:j("lsNotifyNear")}),Object(Ia.jsx)(lr.a,{control:Object(Ia.jsx)(br.a,{color:"secondary",checked:a.information.notifyYarn,onChange:function(e){a.information.notifyYarn=e.target.checked}}),label:j("lsNotifyYarn")})]})]})]})}}),Object(Ia.jsx)(Br.a,{theme:Zu,children:Object(Ia.jsxs)(Aa.a,{mt:4,mb:3,children:[Object(Ia.jsx)(Oa.a,{variant:"contained",color:"primary",style:{textTransform:"none",fontSize:c()?"2em":"1em"},onClick:function(){A(0,"enter")},children:j("btSave")}),Object(Ia.jsx)(Oa.a,{variant:"contained",color:"secondary",style:{marginLeft:15,textTransform:"none",fontSize:c()?"2em":"1em"},onClick:function(){a.loadInformationFromStorage()},children:j("btCancel")}),Object(Ia.jsx)(Oa.a,{variant:"contained",style:{marginLeft:15,textTransform:"none",fontSize:c()?"2em":"1em"},onClick:function(){o.focusOn(a)},children:j("ctFocus")})]})})]})]}))},nd=Object(Ka.a)({root:function(e){return{display:"flex",justifyContent:"center",alignItems:"center",width:e.size,height:e.size,clipPath:"circle(".concat(.5*(e.size||0),"px  at center)"),overflow:"hidden"}},videoLargerWidth:function(e){return{height:"100%",transform:"scale(".concat(e.mirror?-1:1,", 1)")}},videoLargerHeight:function(e){return{width:"100%",transform:"scale(".concat(e.mirror?-1:1,", 1)")}}});var id=function(e){var t=nd(e),n=Object(ha.useRef)(null);return Object(ha.useEffect)((function(){null!==(null===n||void 0===n?void 0:n.current)&&function(e,t,n,i,o){if(t)e.srcObject=t;else if(n&&n.size){var a=URL.createObjectURL(n);e.src=a}e.autoplay=!0,e.onloadedmetadata=function(){var t=e.width,n=e.height;void 0!==t&&void 0!==n?e.className=t>=n?i:o:(console.error("video stream width || height is undefined"),e.className=i)}}(n.current,e.stream,e.blob,t.videoLargerWidth,t.videoLargerHeight)}),[n,t.videoLargerWidth,t.videoLargerHeight,e.stream,e.blob]),Object(Ia.jsx)("div",{className:t.root,style:e.style,children:Object(Ia.jsx)("video",{ref:n,style:e.style})})};id.defaultProps={size:100},id.displayName="StreamAvatar";var od=["name","avatarSrc","colors","stream","blob"],ad=function(e){var t=e.name,n=e.avatarSrc,i=e.colors,o=(e.stream,e.blob,Object(be.a)(e,od));return Object(Ia.jsx)(vc,Object(wn.a)({name:t,colors:i,avatarSrc:n},o))};ad.displayName="ComposedAvatar";var rd=function(e){var t=e.participant;return Object(Ia.jsx)(pa.a,{children:function(){var n=t.getColor(),i=t.information,o={colors:n,avatarSrc:i.avatarSrc,name:i.name};return Object(Ia.jsx)(ad,Object(wn.a)(Object(wn.a)({},o),{},{stream:!t.showVideo||t instanceof mn?void 0:t.tracks.avatarStream,blob:t.showVideo&&t instanceof mn?t.videoBlob:void 0,colors:n,size:e.size,style:{pointerEvents:"none"},mirror:e.isLocal}))}})},sd=function(e){var t;return va.a.useMemo((function(){return Object(Ia.jsx)(rd,Object(wn.a)({},e))}),[e.size,e.participant.information.avatarSrc,e.participant.information.color,e.participant.information.name,e.participant.information.textColor,null===(t=e.participant.tracks)||void 0===t?void 0:t.avatar])};sd.displayName="MemorizedAvatar";var cd=n(340),ld=n.n(cd),ud=n(341),dd=n.n(ud),pd=n(20),hd=n(19),vd=n(7),md=n(339),fd=n(143),bd=n(89),gd=n(83),jd=function(e){Object(je.a)(n,e);var t=Object(Ae.a)(n);function n(){return Object(X.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"promiseLoad",value:function(e,t){var i=this;return new Promise((function(o,a){Object(pd.a)(Object(hd.a)(n.prototype),"load",i).call(i,e,o,t,a)}))}}]),n}(md.a),Ad=[150,300],Od=function(e){var t=va.a.useRef(null),n=va.a.useRef(null);return va.a.useEffect((function(){if(t.current){n.current={clock:new vd.j,renderer:new vd.yb({antialias:!0,alpha:!0,canvas:t.current}),camera:new vd.V(35,Ad[0]/Ad[1],.1,1e3),scene:new vd.fb};var i=n.current;i.renderer.setSize(Ad[0],Ad[1]),i.renderer.setPixelRatio(4*window.devicePixelRatio);var o=new vd.l(16777215);o.position.set(1,1,1).normalize(),i.scene.add(o);var r=new jd,s=[];s.push(Object(fe.c)((function(){var t=n.current;r.promiseLoad(e.participant.information.avatarSrc).then((function(n){var i;t.vrm&&(null===(i=t.scene)||void 0===i||i.remove(t.vrm.scene));fd.c.removeUnnecessaryJoints(n.scene),fd.a.from(n).then((function(n){var i;null===(i=t.scene)||void 0===i||i.add(n.scene),n.scene.rotation.y=Math.PI,t&&(t.vrm=n,c(e.participant.pose.orientation,e.participant.vrmRigs))}))})).catch((function(e){console.log("Failed to load VRM",e)}))})));var c=Object(Se.throttle)((function(e,t){if(null!==i&&void 0!==i&&i.vrm){var n,o,a;!function(e,t){var n;if(!e)return;if(!t)return Cd(e,"RightUpperArm",new gd.a(0,0,-Math.PI/2*.8),1,1),void Cd(e,"LeftUpperArm",new gd.a(0,0,Math.PI/2*.8),1,1);t.face&&function(e,t){var n,i;if(!e)return;var o={x:t.head.x-.1,y:t.head.y,z:t.head.z};Cd(e,"Neck",o,.7);var a=e.blendShapeProxy,r=fd.b.BlendShapePresetName,s=yd(1-t.eye.l,0,1),c=yd(1-t.eye.r,0,1);a.setValue(r.BlinkL,s),a.setValue(r.BlinkR,c),a.setValue(r.I,xd(t.mouth.shape.I,a.getValue(r.I),.5)),a.setValue(r.A,xd(t.mouth.shape.A,a.getValue(r.A),.5)),a.setValue(r.E,xd(t.mouth.shape.E,a.getValue(r.E),.5)),a.setValue(r.O,xd(t.mouth.shape.O,a.getValue(r.O),.5)),a.setValue(r.U,xd(t.mouth.shape.U,a.getValue(r.U),.5));var l=new vd.n(xd(wd.x,t.pupil.y,.4),xd(wd.y,t.pupil.x,.4),0,"XYZ");wd.copy(l),null===(n=e.lookAt)||void 0===n||null===(i=n.applyer)||void 0===i||i.lookAt(l)}(e,t.face);if(t.pose)Cd(e,"Hips",t.pose.Hips.rotation,.7),Cd(e,"Chest",t.pose.Spine,.25,.3),Cd(e,"Spine",t.pose.Spine,.45,.3),Cd(e,"RightUpperArm",t.pose.RightUpperArm,1,.3),Cd(e,"RightLowerArm",t.pose.RightLowerArm,1,.3),Cd(e,"LeftUpperArm",t.pose.LeftUpperArm,1,.3),Cd(e,"LeftLowerArm",t.pose.LeftLowerArm,1,.3),Cd(e,"LeftUpperLeg",t.pose.LeftUpperLeg,1,.3),Cd(e,"LeftLowerLeg",t.pose.LeftLowerLeg,1,.3),Cd(e,"RightUpperLeg",t.pose.RightUpperLeg,1,.3),Cd(e,"RightLowerLeg",t.pose.RightLowerLeg,1,.3);else if(t.face){var i={x:t.face.head.x/3-.3,y:t.face.head.y/2,z:t.face.head.z/2};Cd(e,"Chest",i,.25,.3),Cd(e,"Spine",i,.45,.3),Cd(e,"RightUpperArm",{x:-i.x/4-.2,y:-i.y/4,z:-i.z/4-Math.PI/2*.8},1,1),Cd(e,"LeftUpperArm",{x:-i.x/4-.2,y:-i.y/4,z:-i.z/4+Math.PI/2*.8},1,1),Cd(e,"RightLowerArm",new gd.a(0,1.8,-.3),1,1),Cd(e,"LeftLowerArm",new gd.a(0,-1.8,.3),1,1),Cd(e,"RightHand",new gd.a(-.4,.3,-.3),1,1),Cd(e,"LeftHand",new gd.a(-.4,-.3,.3),1,1)}t.pose&&t.leftHand&&Cd(e,"LeftHand",{z:t.pose.LeftHand.z,y:t.leftHand.LeftWrist.y,x:t.leftHand.LeftWrist.x});null!==t&&void 0!==t&&t.leftHand&&(Cd(e,"LeftRingProximal",t.leftHand.LeftRingProximal),Cd(e,"LeftRingIntermediate",t.leftHand.LeftRingIntermediate),Cd(e,"LeftRingDistal",t.leftHand.LeftRingDistal),Cd(e,"LeftIndexProximal",t.leftHand.LeftIndexProximal),Cd(e,"LeftIndexIntermediate",t.leftHand.LeftIndexIntermediate),Cd(e,"LeftIndexDistal",t.leftHand.LeftIndexDistal),Cd(e,"LeftMiddleProximal",t.leftHand.LeftMiddleProximal),Cd(e,"LeftMiddleIntermediate",t.leftHand.LeftMiddleIntermediate),Cd(e,"LeftMiddleDistal",t.leftHand.LeftMiddleDistal),Cd(e,"LeftThumbProximal",t.leftHand.LeftThumbProximal),Cd(e,"LeftThumbIntermediate",t.leftHand.LeftThumbIntermediate),Cd(e,"LeftThumbDistal",t.leftHand.LeftThumbDistal),Cd(e,"LeftLittleProximal",t.leftHand.LeftLittleProximal),Cd(e,"LeftLittleIntermediate",t.leftHand.LeftLittleIntermediate),Cd(e,"LeftLittleDistal",t.leftHand.LeftLittleDistal));t.pose&&t.rightHand&&Cd(e,"RightHand",{z:t.pose.RightHand.z,y:t.rightHand.RightWrist.y,x:t.rightHand.RightWrist.x});t.rightHand&&(Cd(e,"RightRingProximal",t.rightHand.RightRingProximal),Cd(e,"RightRingIntermediate",t.rightHand.RightRingIntermediate),Cd(e,"RightRingDistal",t.rightHand.RightRingDistal),Cd(e,"RightIndexProximal",t.rightHand.RightIndexProximal),Cd(e,"RightIndexIntermediate",t.rightHand.RightIndexIntermediate),Cd(e,"RightIndexDistal",t.rightHand.RightIndexDistal),Cd(e,"RightMiddleProximal",t.rightHand.RightMiddleProximal),Cd(e,"RightMiddleIntermediate",t.rightHand.RightMiddleIntermediate),Cd(e,"RightMiddleDistal",t.rightHand.RightMiddleDistal),Cd(e,"RightThumbProximal",t.rightHand.RightThumbProximal),Cd(e,"RightThumbIntermediate",t.rightHand.RightThumbIntermediate),Cd(e,"RightThumbDistal",t.rightHand.RightThumbDistal),Cd(e,"RightLittleProximal",t.rightHand.RightLittleProximal),Cd(e,"RightLittleIntermediate",t.rightHand.RightLittleIntermediate),Cd(e,"RightLittleDistal",t.rightHand.RightLittleDistal));null===(n=e.blendShapeProxy)||void 0===n||n.update()}(i.vrm,t),i.vrm.update(i.clock.getDelta());var r=e/180*Math.PI;null===(n=i.camera)||void 0===n||n.position.set(3*-Math.sin(r),2,3*-Math.cos(r)),null===(o=i.camera)||void 0===o||o.lookAt(0,.93,0),null===(a=i.renderer)||void 0===a||a.render(i.scene,i.camera)}}),50);return s.push(Object(fe.c)((function(){c(e.participant.pose.orientation,e.participant.vrmRigs)}))),function(){var e,t=Object(a.a)(s);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}}})),Object(Ia.jsx)(Ia.Fragment,{children:Object(Ia.jsx)("canvas",{style:{pointerEvents:"none",position:"relative",width:Ad[0],height:Ad[1],left:-Ad[0]/2,top:-(Ad[1]-15)},ref:t})})},yd=bd.d.clamp,xd=bd.e.lerp,Cd=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,z:0},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.3;if(e){var r=null===(n=e.humanoid)||void 0===n?void 0:n.getBoneNode(fd.b.HumanoidBoneName[t]);if(r){var s=new vd.n(i.x*o,i.y*o,i.z*o),c=(new vd.bb).setFromEuler(s);r.quaternion.slerp(c,a)}}},wd=new vd.n;var Sd="data:image/png;base64,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",kd="data:image/png;base64,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",Td="data:image/png;base64,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",Id=n.p+"static/media/earshot_icon_avatar_glow.1b7acac1.png",Ed=12,Pd=.5,Md=0,Rd=Object(Ka.a)({root:function(e){return{position:"absolute",left:e.position[0],top:e.position[1],width:0,height:0}},pointerRotate:function(e){return{transformOrigin:"top left",transform:"rotate(".concat(e.orientation,"deg)")}},pointer:function(e){return{position:"absolute",width:"".concat(Ed*e.size),left:"-".concat(Ed*e.size*Pd,"px"),top:"-".concat(Ed*e.size*Pd,"px"),pointerEvents:"none"}},avatar:function(e){return{position:"absolute",left:"-".concat(e.size*Pd,"px"),top:"-".concat(e.size*Pd,"px"),transformOrigin:"top left",transform:"translate(".concat(e.size*Pd,"px, ").concat(e.size*Pd,"px) ")+"rotate(".concat(-e.orientation,"deg) translate(").concat(-e.size*Pd,"px, ").concat(-e.size*Pd,"px)")}},avatarGlow:function(e){return{position:"absolute",width:3*e.size,height:3*e.size,left:-1*e.size,top:-1*e.size,opacity:0,pointerEvents:"none",transform:"scale(0.5)",transition:"0.5s ease-out"}},avatarGlowEffect:function(e){return{position:"absolute",width:3*e.size,height:3*e.size,left:-1*e.size,top:-1*e.size,opacity:1,pointerEvents:"none",transform:"scale(0.9)",transition:"0.5s ease-out"}},icon:function(e){return{position:"absolute",width:.4*e.size,height:.4*e.size,left:.6*e.size,top:.6*e.size,pointerEvents:"none"}},signalIcon:function(e){return{position:"absolute",width:.25*e.size,height:.25*e.size,left:.8*e.size,top:.8*e.size,display:"none",pointerEvents:"none"}},iconProximity:function(e){return{position:"absolute",width:.6*e.size,height:.6*e.size,left:.7*e.size,top:.4*e.size,pointerEvents:"none"}},iconEmoticon:function(e){return{position:"absolute",width:.6*e.size,height:.6*e.size,left:-.2*e.size,top:-.2*e.size,pointerEvents:"none",transform:"scale(1)",transition:"0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)"}},iconEmoticonNone:function(e){return{position:"absolute",width:.6*e.size,height:.6*e.size,left:.1*e.size,top:0*e.size,pointerEvents:"none",transform:"scale(0)",transition:"0s ease-out"}},conIcon:function(e){return{position:"absolute",width:.85*e.size,height:.85*e.size,left:.5*e.size,top:-.3*e.size,pointerEvents:"none"}},more:function(e){return{position:"absolute",width:.4*e.size,height:.4*e.size,left:.9*e.size,top:.3*-e.size}},pingLocIcon:function(e){return{position:"absolute",transform:"rotate(".concat(e.orientation,"deg)"),width:"200px",height:"200px"}}}),Dd=function(e,t){var n=e.participant,o=n.getColorRGB(),r=Object(pa.b)((function(){return{position:n.pose.position,orientation:n.pose.orientation,mousePosition:n.mouse.position,awayFromKeyboard:n.physics.awayFromKeyboard}})),s=Object(pa.b)((function(){return n.information.name})),c=Object(pa.b)((function(){return n.trackStates.micMuted?0:Math.pow(n.audioLevel,.5)})),l=Object(pa.b)((function(){return n.trackStates.micMuted})),u=Object(pa.b)((function(){return n.trackStates.speakerMuted})),d=Object(pa.b)((function(){return n.trackStates.headphone})),p=Object(pa.b)((function(){return n.physics.onStage})),h=Object(pa.b)((function(){var t;return null===(t=e.stores.participants.local.zone)||void 0===t?void 0:t.zone})),v=Object(pa.b)((function(){return n.trackStates.emoticon})),m=Object(pa.b)((function(){return n.quality})),f=Object(pa.b)((function(){var t,o=Array.from(e.stores.participants.remote.keys()).filter((function(t){return t!==e.stores.participants.localId})),r=Object(a.a)(o.entries());try{for(r.s();!(t=r.n()).done;){var s,c,l,u,d,p,h=Object(i.a)(t.value,1)[0];if(void 0===(null===(s=e.stores.participants.remote.get(o[h]))||void 0===s?void 0:s.closedZone))return;if((null===(c=e.stores.participants.remote.get(o[h]))||void 0===c?void 0:c.id)===n.id&&""!==(null===(l=e.stores.participants.remote.get(o[h]))||void 0===l||null===(u=l.closedZone)||void 0===u?void 0:u.id))return null===(d=e.stores.participants.remote.get(o[h]))||void 0===d||null===(p=d.closedZone)||void 0===p?void 0:p.id}}catch(v){r.e(v)}finally{r.f()}})),b=Object(pa.b)((function(){var t,n,i;return void 0!==(null===(t=e.stores.participants.local.zone)||void 0===t?void 0:t.id)&&""!==(null===(n=e.stores.participants.local.zone)||void 0===n?void 0:n.id)?null===(i=e.stores.participants.local.zone)||void 0===i?void 0:i.id:void 0})),g=Object(pa.b)((function(){var t,o=Array.from(e.stores.participants.remote.keys()).filter((function(t){return t!==e.stores.participants.localId})),r=0,s=e.stores.participants.local.pose,c=Object(a.a)(o.entries());try{for(c.s();!(t=c.n()).done;){var l,u,d,p=Object(i.a)(t.value,1)[0];if((null===(l=e.stores.participants.remote.get(o[p]))||void 0===l?void 0:l.id)===n.id&&void 0===(null===(u=e.stores.participants.remote.get(o[p]))||void 0===u||null===(d=u.closedZone)||void 0===d?void 0:d.id)){if(void 0!==Object(e.stores.participants.remote.get(o[p])).pose.position)r=x(S(s,Object(e.stores.participants.remote.get(o[p])).pose).position);return r}}}catch(h){c.e(h)}finally{c.f()}})),j=Object(pa.b)((function(){return n.trackStates.pingIcon})),A=Object(pa.b)((function(){return n.trackStates.pingX})),O=Object(pa.b)((function(){return n.trackStates.pingY})),y=Object(ha.useState)(!1),C=Object(i.a)(y,2),w=C[0],k=C[1],T=Object(ha.useState)([0,0]),I=Object(i.a)(T,2),E=I[0],P=I[1],M=Object(ha.useState)(!1),R=Object(i.a)(M,2),D=R[0],B=R[1];!j||E[0]===A&&E[1]===O||k(!1);var N=A+14,z=O-55;if(j&&!1===w?(!function(){var t=r.mousePosition[0],n=e.stores.participants.local.pose.position[0],i="sound/beep.mp3",o=new AudioContext;window.fetch(i).then((function(e){return e.arrayBuffer()})).then((function(e){return o.decodeAudioData(e)})).then((function(e){var i=o.createBufferSource();i.buffer=e;var a=o.createStereoPanner();a.pan.value=t>n+10?1:t<n-10?-1:0,i.connect(a),a.connect(o.destination),i.start()}))}(),P([A,O]),k(!0)):!1===j&&w&&k(!1),void 0===b)Md=0;else if(f===b)var F=setTimeout((function(){Md>=2||(clearTimeout(F),!1===D?(B(!0),Md++):B(!1))}),500);var L=Rd(Object(wn.a)(Object(wn.a)({},r),{},{size:e.size})),U=n?n.getColor():["white","black"],Q=Object(i.a)(U,2),G=Q[0],H=Q[1],W=e.size/2+2,J=e.isLocal,V=e.size*Ed*Pd,K=Ed*e.size*Pd,X=Object(Ia.jsx)("svg",{className:L.pointer,width:e.size*Ed,height:e.size*Ed,xmlns:"http://www.w3.org/2000/svg"}),Z=[.1,.2,.3,.4,.5,.6],q=Z.map((function(t){return c>t&&"close"!==h?Object(Ia.jsxs)(va.a.Fragment,{children:[Object(Ia.jsx)("circle",{r:e.size*Pd+t*V,cy:K,cx:K,stroke:G,fill:"none",opacity:.4*(1-t),strokeDasharray:"4 4 4 24"}),Object(Ia.jsx)("circle",{r:e.size*Pd+t*V,cy:K,cx:K,stroke:"black",fill:"none",opacity:.4*(1-t),strokeDasharray:"4 32",strokeDashoffset:"-4"})]},t):void 0})),_=Z.map((function(e){return c>e?Object(Ia.jsx)(va.a.Fragment,{children:Object(Ia.jsx)("img",{src:"data:image/png;base64,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",className:L.iconProximity,alt:""})},e):void 0})),$=Object(Ia.jsxs)("svg",{className:L.pointer,width:e.size*Ed,height:e.size*Ed,xmlns:"http://www.w3.org/2000/svg",children:["close"===h&&n.id!==e.stores.participants.localId&&f===b||void 0!==g&&g<360&&n.id!==e.stores.participants.localId&&void 0===b?Object(Ia.jsx)("circle",{r:W,cy:K,cx:K,stroke:"#ff4500","stroke-width":"4",fill:"#00000020"}):Object(Ia.jsx)("circle",{r:W,cy:K,cx:K,stroke:"none",fill:"#00000020"}),q,"arrow"===config.avatar?Object(Ia.jsxs)("g",{transform:"translate(".concat(K," ").concat(K,") rotate(-135) "),children:[Object(Ia.jsx)("rect",{style:{pointerEvents:"fill"},height:W,width:W,fill:G}),J?Object(Ia.jsx)("path",{d:"M 0 ".concat(W," h ").concat(W," v ").concat(-W)+"a ".concat(W," ").concat(W," 0 1 0 ").concat(-W," ").concat(W),fill:"none",stroke:H}):void 0]}):Object(Ia.jsx)("g",{style:{pointerEvents:"fill"}})]}),ee=n.information.avatarSrc&&".vrm"===n.information.avatarSrc.slice(-4);return Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsxs)("div",{className:L.root,style:{zIndex:J?5e3:n.zIndex},children:[X,Object(Ia.jsxs)("div",{className:L.pointerRotate,children:[$,Object(Ia.jsxs)("div",{className:L.avatar+" dragHandle",onContextMenu:e.onContextMenu,children:[Object(Ia.jsx)(Ir.a,{title:s,children:Object(Ia.jsxs)("div",{children:["close"===h&&n.id!==e.stores.participants.localId&&f===b?Object(Ia.jsx)("img",{src:Id,className:D?L.avatarGlow:L.avatarGlowEffect,draggable:!1,alt:""}):(void 0!==g&&g<360&&(n.id,e.stores.participants.localId),""),Object(Ia.jsx)(sd,Object(wn.a)({},e)),_,Object(Ia.jsx)("img",{src:"smile"===v?Sd:"hand"===v?Td:"clap"===v?kd:void 0,className:""===v?L.iconEmoticonNone:L.iconEmoticon,alt:""}),Object(Ia.jsx)(Vu,{className:L.signalIcon,quality:e.participant.quality}),void 0!==m&&m<70?Object(Ia.jsx)("img",{src:"data:image/png;base64,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",className:L.conIcon,alt:""}):void 0,d?Object(Ia.jsx)(ld.a,{className:L.icon,htmlColor:"rgba(0, 0, 0, 0.3)"}):void 0,u?Object(Ia.jsx)(or.a,{className:L.icon,color:"secondary"}):l?Object(Ia.jsx)(_a.a,{className:L.icon,color:"secondary"}):void 0,!l&&p?Object(Ia.jsx)(Ya.Icon,{className:L.icon,icon:Ga.a,color:"gold"}):void 0,e.isPlayback?Object(Ia.jsx)(dd.a,{className:L.icon,htmlColor:"#0C0"}):void 0]})}),Object(Ia.jsxs)("div",{children:[Object(Ia.jsx)("img",{src:!1!==j?"data:image/png;base64,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":void 0,style:!1!==j?{display:"block",width:Yo,position:"relative",textAlign:"center",top:z,left:N,whiteSpace:"pre"}:{display:"none"},alt:""}),Object(Ia.jsx)("img",{style:!1!==j?{backgroundColor:Y(o),borderRadius:"50%",position:"relative",display:"block",width:31,textAlign:"center",top:z-48,left:N+1.5,whiteSpace:"pre"}:{display:"none"},src:!1!==j?n.information.avatarSrc:void 0,alt:""})]})]})]})]}),ee?Object(Ia.jsx)("div",{className:L.root,style:{zIndex:n.zIndex+5e3},children:Object(Ia.jsx)(Od,{participant:n})}):void 0]})};Dd.displayName="RawParticipant";var Bd=function(e){return va.a.useMemo((function(){return Object(Ia.jsx)(Dd,Object(wn.a)({},e))}),[e.size,e.participant.id,e.participant.information.avatarSrc,e.participant.information.color,e.participant.information.name,e.participant.information.textColor])};Bd.displayName="MemorizedParticipant";var Nd=n(182),zd=n.n(Nd),Fd=Object(Dr.a)({palette:{primary:{main:"#7ececc"},secondary:{main:"#ef4623"}}}),Ld=Object(Ka.a)({more:function(e){return{position:"absolute",width:.5*e.size,height:.5*e.size,left:e.position[0]+.4*e.size,top:e.position[1]-.8*e.size}},hideMenuContainer:function(e){return{display:"flex",position:"absolute",width:350,height:250,overflow:"hidden",userSelect:"none",userDrag:"none",bottom:"auto",backgroundColor:"transparent",transition:"0s ease-out",cursor:"default"}},showMenuContainer:function(e){return{display:"flex",position:"absolute",width:350,height:250,overflow:"hidden",userSelect:"none",userDrag:"none",top:0,left:0,bottom:"auto",backgroundColor:"transparent",transition:"0.3s ease-out",transitionDelay:"0.1s",cursor:"default"}},dashedCircle:function(e){return{position:"relative",width:200,height:200,borderWidth:2,borderStyle:"solid",borderColor:"#9e886c",borderRadius:"50%",opacity:.4,top:25,left:65,background:"radial-gradient(#ffffff, #ffffff, #ffffff, #9e886c, #9e886c)",zIndex:-9999}},moreIcon:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:180,left:145,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Ud)},avatarTool:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:25,left:140,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Ud)},moreInfo:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:180,left:145,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Ud)},mainContainer:{display:"flex",height:"100%",width:"100%"},menuContainer:{position:"relative",top:"12px",left:"15px",width:"100px",height:"100px"},galleryMain:{width:"91%",height:"100%",minWidth:"440px",minHeight:"400px",border:"2px dashed #00000030",left:"45px",position:"relative"},gallery:{display:"grid",position:"relative",marginLeft:"10px",gridTemplateColumns:"repeat(7, 0.1fr)",gap:-10,overflowY:"auto",overflowX:"hidden",height:"334px",alignContent:"flex-start"},galleryList:{display:"grid",position:"relative",marginLeft:"10px",gridTemplateColumns:"repeat(7, 0.1fr)",gap:-10,overflowY:"hidden",overflowX:"hidden",height:c()?"110px":"90px",alignContent:"flex-start"},deavticeButtons:{position:"relative",padding:"10px",fontSize:c()?"1.5em":"1em",fontWeight:"bold",borderBottom:"2px solid #7ececc",color:"#000000",cursor:"pointer"},avticeButtons:{position:"relative",padding:"10px",fontSize:c()?"1.5em":"1em",fontWeight:"bold",borderBottom:"2px solid #7ececc",color:"#ef4623",cursor:"default"}}),Ud={"&":{margin:"5px",borderRadius:"50%",width:"35px",height:"35px",padding:"3px"},"&:hover":{backgroundColor:"black",margin:"5px",padding:"3px",borderRadius:"50%"},"&:active":{margin:"5px",padding:"3px",borderRadius:"50%"}},Qd=Object(K.a)((function e(){Object(X.a)(this,e),this.prebThirdPersonView=!1,this.mouseDown=!1,this.dragging=!1,this.upTime=0,this.downTime=0,this.downXpos=0,this.downYpos=0,this.upXpos=0,this.upYpos=0,this.contentX=0,this.contentY=0,this.zoomX=0,this.zoomY=0,this.moveX=0,this.moveY=0,this.clickStatus="",this.userAngle=0,this.clickEnter=!1,this.pingX=0,this.pingY=0,this.hidePinIcon=0,this.cursorX=0,this.cursorY=0})),Gd=!1;function Yd(){return Gd}var Hd=!1;var Wd="",Jd="",Vd="",Kd="",Xd="",Zd="",qd="";var _d=!1;function $d(){return _d}var ep=function(e){var t=e.stores.map,n=e.stores.participants,o=n.local,s=Object(ha.useRef)(new Qd).current;o.information.avatarSrc,r(e.participant.id===o.id);var l=Object(ha.useRef)({}).current,u=function(e){!function(e){var i=A(e.xy,t.toWindow(o.pose.position)),a=Math.sqrt(i[0]*i[0]+i[1]*i[1]);if(a>50&&(i=y(50/a,i)),n.local.thirdPersonView){var r=t.rotateFromWindow(i);o.pose.position=j(o.pose.position,r),l.smoothedDelta||(l.smoothedDelta=[i[0],i[1]]),l.smoothedDelta=j(y(1-.8,r),y(.8,l.smoothedDelta));var s=180*Math.atan2(l.smoothedDelta[0],-l.smoothedDelta[1])/Math.PI-o.pose.orientation;s<-180&&(s+=360),s>180&&(s-=360),o.pose.orientation+=.2*s}else o.pose.position=j(t.rotateFromWindow(i),o.pose.position);o.savePhysicsToStorage(!1)}(e)},d=function(e,t,n,i,o){var a=Object(ha.useRef)(null),r=Object(ha.useRef)({state:{}}).current,s=function(){r.state.dragging||r.timerAgain?n&&(r.timerAgain=n(r.state)):(clearInterval(r.timerId),r.timerId=0)};function c(e){e.preventDefault(),e.stopPropagation()}Object(ha.useEffect)((function(){var e=a.current;return null===e||void 0===e||e.addEventListener("touchmove",c,{passive:!1}),function(){null===e||void 0===e||e.removeEventListener("touchmove",c)}}),[a.current]);var l={target:a,memo:r,onMouseDown:function(e){e.stopPropagation()},onTouchStart:function(e){e.stopPropagation()},onPointerDown:function(e){e.stopPropagation(),r.state={dragging:!1,buttons:e.buttons,xy:[e.clientX,e.clientY],start:[e.clientX,e.clientY],startTime:Date.now(),event:e},1&e.buttons&&a.current&&(!t||function(e,t,n){for(var i=e;i&&i!==t;){if(i.attributes){var o=i.attributes.getNamedItem("class");if(o&&o.value.includes(n))return i}i=i.parentNode}return null}(e.target,a.current,t))&&(e.target.setPointerCapture(e.pointerId),r.timerId||(r.timerId=setInterval(s,i)),r.state.dragging=!0)},onPointerOut:function(e){e.stopPropagation(),Object.assign(r.state,{dragging:!1,buttons:e.buttons,xy:[e.clientX,e.clientY],event:e})},onPointerUp:function(e){e.target.releasePointerCapture(e.pointerId),l.onPointerOut(e)},onTouchEnd:function(e){e.stopPropagation();var t=x(A(r.state.xy,r.state.start)),n=Date.now()-r.state.startTime;t<5&&n>.5&&o&&o(e)},onPointerMove:function(t){var n;t.stopPropagation(),Object.assign(r.state,{dragging:!(null===(n=r.state)||void 0===n||!n.dragging),buttons:t.buttons,xy:[t.clientX,t.clientY],event:t}),r.state.dragging&&(1&t.buttons?e(r.state):r.state.dragging=!1)}};return l}(u,"dragHandle",(function(e){return e.dragging&&u(e),function(e){var a=t.toWindow(o.pose.position),r=[a[0],a[1]],s=t.left+t.screenSize[0]*e,c=t.left+t.screenSize[0]*(1-e),u=t.screenSize[1]*(1-e),d=n.local.thirdPersonView?t.screenSize[1]*e:u;r[0]<s&&(r[0]=s),r[0]>c&&(r[0]=c),r[1]<d&&(r[1]=d),r[1]>u&&(r[1]=u);var p=A(a,r),h=Math.sqrt(p[0]*p[0]+p[1]*p[1]);h>600?p=y(600/h,p):h<100&&(p=y(100/h,p));var v=y(.1,t.rotateFromWindow(p));if(Math.abs(v[0])+Math.abs(v[1])>.2){var m=t.matrix.translate(-v[0],-v[1]),f=t.rotateFromWindow([m.e,m.f]),b=!1;f[0]<-2500&&(f[0]=-2500,b=!0),f[0]>2500&&(f[0]=2500,b=!0),f[1]<-2500&&(f[1]=-2500,b=!0),f[1]>2500&&(f[1]=2500,b=!0);var g=t.rotateToWindow(f),j=Object(i.a)(g,2);return m.e=j[0],m.f=j[1],t.setMatrix(m),t.setCommittedMatrix(m),l.scrollAgain=!b,!b}return l.scrollAgain=!1,!1}(.2)}),33,(function(){S(!0)}));Object(ha.useEffect)((function(){var e;null===(e=d.target.current)||void 0===e||e.focus({preventScroll:!0})}));var p=Object(pa.b)((function(){return{position:o.pose.position,size:e.size,mem:s}})),h=o?o.getColor():["white","black"],v=Object(i.a)(h,1)[0],m=Ld(p),f=te().t,b=va.a.useState(!1),g=Object(i.a)(b,2)[1],O=va.a.useState(!1),C=Object(i.a)(O,2),w=C[0],S=C[1],k=kr(g,l),T=va.a.useState(!1),I=Object(i.a)(T,2),E=I[0],P=I[1],M=va.a.useState(!1),R=Object(i.a)(M,2),D=R[0],B=R[1],N=e.participant.getColorRGB();_d=D;var z=Object(ha.useState)(0),F=Object(i.a)(z,2),L=F[0],U=F[1],Q=Object(ha.useState)(-1),G=Object(i.a)(Q,2),H=G[0],W=G[1],J=Object(ha.useState)(-1),V=Object(i.a)(J,2),K=V[0],X=V[1],Z=Object(ha.useState)(-1),q=Object(i.a)(Z,2),_=q[0],$=q[1],ee=Object(ha.useState)(-1),ne=Object(i.a)(ee,2),ie=ne[0],oe=ne[1],ae=Object(ha.useState)(-1),re=Object(i.a)(ae,2),se=re[0],ce=re[1],le=Object(ha.useState)(-1),ue=Object(i.a)(le,2),de=ue[0],pe=ue[1],he=Object(ha.useState)(-1),ve=Object(i.a)(he,2),me=ve[0],fe=ve[1],be=Object(ha.useRef)(null);function ge(){S(!0),t.keyInputUsers.add("LocalParticipantConfig")}function je(e){xe.length>0&&o.information.randomAvatar.length>0&&function(){var e=Se[0].split(","),t=e.indexOf(Me[0]),n=e.indexOf("avatar_tool/Colors/es_co_"+Me[1]+".png"),i=e.indexOf(Me[2]),o=Se[1].split(","),a=Se[2].split(","),r=a.indexOf(Me[4]),s=Se[3].split(","),c=s.indexOf(Me[5]);Jd=e[t],_!==t&&$(t);Vd=e[n].split("/")[2].split(".")[0].split("co_")[1],ie!==n&&oe(n);Wd=e[i],se!==i&&ce(i);var l=[],u=[],d=[],p=[];l.splice(0),u.splice(0),d.splice(0),p.splice(0);for(var h=0;h<o.length-1;h++)if(-1===o.indexOf(Vd.split("_")[1]+"_"+o[h].split("_")[4])&&(Vd.split("_")[1]===o[h].split("_")[4]||"x"===o[h].split("_")[4])){var v=o[h].split("/")[2].split(".")[0].split("_")[4];"f"===v?(l.push(o[h]),u.push(h)):"b"===v&&(d.push(o[h]),p.push(h))}if(l.length>0){var m=l.indexOf(Me[3]);Kd=l[m],pe(u[m]);var f=o.indexOf(String(l[m].split("_f.png")[0]+"_b.png"));-1!==f?(Xd=o[f],me!==f?fe(f):(Xd="",fe(-1))):(Xd="",fe(-1))}else Kd="",pe(-1),Xd="",fe(-1);Zd=a[r],H!==r&&W(r);qd=s[c],K!==c&&X(c)}(),B(!0)}function Ae(e){var t=Se[L].split(",");if(t[e],0===L){if(e<7&&(Wd=t[e],se!==e&&ce(e)),e>=7&&e<15){if(Vd=t[e].split("/")[2].split(".")[0].split("co_")[1],""!==Kd||""!==Xd)for(var n=Kd.split("/")[2].split("_")[2]+"_"+Vd.split("_")[1],i=Se[1].split(","),o=0;o<i.length;o++)if(-1!==i[o].indexOf(n)){var a=i[o].split("/")[2].split(".")[0].split("_")[4];"f"===a?(Kd=i[o],de!==o&&pe(o)):"b"===a&&(Xd=i[o],me!==o&&fe(o))}ie!==e&&oe(e)}e>=15&&e<22&&(Jd=t[e],_!==e&&$(e))}else if(1===L){var r=t[e].split("/")[2].split(".")[0].split("_")[4];if("f"===r){var s=t.indexOf(String(t[e].split("_f.png")[0]+"_b.png"));Kd=t[e],de!==e&&pe(e),-1!==s?(Xd=t[s],me!==s&&fe(s)):(Xd="",fe(-1))}else if("b"===r){var c=t.indexOf(String(t[e].split("_b.png")[0]+"_f.png"));Xd=t[e],me!==e&&fe(e),-1!==c?(Kd=t[c],de!==c&&pe(c)):(Kd="",pe(-1))}}else 2===L?(Zd=t[e],H!==e&&W(e)):3===L&&(qd=t[e],K!==e&&X(e))}Hd=w;var Oe=Object(ha.useState)(""),ye=Object(i.a)(Oe,2),xe=ye[0],Ce=ye[1];Object(ha.useEffect)((function(){fetch("folderlist.php?folder=avatar_tool/*/*.png").then((function(e){return e.text()})).then((function(e){return Ce(e)}))}),[]);for(var we=[],Se=[],ke="",Te=xe.split(","),Ie=0;Ie<Te.length-1;Ie++)-1===we.indexOf(Te[Ie].split("/")[1])&&void 0!==Te[Ie].split("/")[1]&&we.push(Te[Ie].split("/")[1]);for(var Ee=0;Ee<we.length;Ee++){for(var Pe=0;Pe<Te.length-1;Pe++)we[Ee]===Te[Pe].split("/")[1]&&(ke+=Te[Pe]+",");Se.push(ke),ke=""}var Me=Object(pa.b)((function(){return e.participant.information.randomAvatar}));var Re=[];if(Se.length>0&&L>=0)for(var De=Se[L].split(","),Be=function(e){if(1===L){if(Vd.split("_")[1]===De[e].split("_")[4]||"x"===De[e].split("_")[4]){if("f"===De[e].split("/")[2].split(".")[0].split("_")[4]){var t=De.indexOf(String(De[e].split("_f.png")[0]+"_b.png"));Re.push(Object(Ia.jsxs)("div",{onClick:function(){Ae(e)},children:[Object(Ia.jsx)("img",{src:encodeURIComponent(De[e]),style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",borderRadius:"50%",padding:"0px",border:de===e?"5px solid #ef4623":"5px dotted #00000000",position:"relative",top:"3px"},draggable:!1,alt:""}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-1,display:-1!==t?"block":"none"},children:Object(Ia.jsx)("img",{src:-1!==t?String(De[e].split("_f.png")[0]+"_b.png"):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-1,display:""!==Jd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Jd?String(Jd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:0,display:""!==Zd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Zd?String(Zd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px",position:"relative",top:"-2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:1,display:""!==qd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==qd?String(qd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-4,display:""!==Wd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Wd?String(Wd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})})]}))}!function(e,t,n){if(n>=e.length)for(var i=n-e.length+1;i--;)e.push(void 0);e.splice(n,0,e.splice(0,1)[0])}(Re,0,Re.length)}}else 2===L?Re.push(Object(Ia.jsxs)("div",{onClick:function(){Ae(e)},children:[Object(Ia.jsx)("img",{src:encodeURIComponent(De[e]),style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"0px",border:H===e?"5px solid #ef462300":"5px dotted #00000000",borderRadius:"50%",position:"relative",top:"1px"},draggable:!1,alt:""}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:1,display:""!==Kd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Kd?String(Kd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-1,display:""!==Xd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Xd?String(Xd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-1,display:""!==Jd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Jd?String(Jd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"0px",border:H===e?"5px solid #ef4623":"5px dotted #00000000",borderRadius:"50%",position:"relative",top:"-3px",left:"-3px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:1,display:""!==qd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==qd?String(qd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-2,display:""!==Wd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Wd?String(Wd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})})]})):3===L&&Re.push(Object(Ia.jsxs)("div",{onClick:function(){Ae(e)},children:[Object(Ia.jsx)("img",{src:encodeURIComponent(De[e]),style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"0px",border:K===e?"5px solid #ef4623":"5px dotted #00000000",borderRadius:"50%",position:"relative",top:"3px"},draggable:!1,alt:""}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:1,display:""!==Kd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Kd?String(Kd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-1,display:""!==Xd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Xd?String(Xd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-1,display:""!==Jd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Jd?String(Jd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:1,display:""!==Zd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Zd?String(Zd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px",position:"relative",top:"-2px"},alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"6px",marginLeft:"3px",zIndex:-2,display:""!==Wd?"block":"none"},children:Object(Ia.jsx)("img",{src:""!==Wd?String(Wd):"",style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"2px"},alt:""})})]}))},Ne=0;Ne<De.length-1;Ne++)Be(Ne);var ze=[],Fe=[],Le=[];if(Se.length>0&&L>=0)for(var Ue=Se[L].split(","),Qe=function(e){-1!==Ue[e].indexOf("skin")&&ze.push(Object(Ia.jsx)("div",{onClick:function(){Ae(e)},children:Object(Ia.jsx)("img",{src:encodeURIComponent(Ue[e]),style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"0px",border:_===e?"5px solid #ef4623":"5px dotted #00000000",borderRadius:"50%"},draggable:!1,alt:""})})),-1!==Ue[e].indexOf("group")&&-1===Ue[e].indexOf("_x")&&Fe.push(Object(Ia.jsx)("div",{onClick:function(){Ae(e)},children:Object(Ia.jsx)("img",{src:encodeURIComponent(Ue[e]),style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"0px",border:se===e?"5px solid #ef4623":"5px dotted #00000000",borderRadius:"50%"},draggable:!1,alt:""})})),-1!==Ue[e].indexOf("hair")&&Le.push(Object(Ia.jsx)("div",{onClick:function(){Ae(e)},children:Object(Ia.jsx)("img",{src:encodeURIComponent(Ue[e]),style:{width:"60px",minHeight:"60px",height:"60px",objectFit:"contain",padding:"0px",border:ie===e?"5px solid #ef4623":"5px dotted #00000000",borderRadius:"50%"},draggable:!1,alt:""})}))},Ge=0;Ge<Ue.length-1;Ge++)Qe(Ge);var Ye=Object(ha.useRef)(null);function He(e){e.stopPropagation(),e.preventDefault()}function We(){Wd="",Jd="",Vd="",Kd="",Xd="",Zd="",qd="",B(!1),ce(-1),oe(-1),$(-1),U(0),fe(-1),pe(-1),W(-1),X(-1)}function Je(){null!==be.current&&zd()(be.current,{allowTaint:!0}).then((function(e){var t=new FormData;t.append("imgData",e.toDataURL()),fetch("saveAvatarImage.php",{method:"POST",body:t}).then((function(e){return e.text()})).then((function(e){return t=e,void(o.information.avatarSrc!==t&&-1!==_&&(o.information.avatarSrc=t,o.information.randomAvatar=[Jd,Vd,Wd,Kd,Zd,qd],o.sendInformation(),o.saveInformationToStorage(!0),We()));var t}))})).catch((function(e){console.log(e)}))}function Ve(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var Ke=Object(oc.a)({onDragStart:function(e){var o=e.buttons,r=e.xy;if(document.body.focus(),s.dragging=!0,s.mouseDown=!0,Gd=!0,s.downTime=(new Date).getSeconds(),s.moveX=t.mouseOnMap[0],s.moveY=t.mouseOnMap[1],1===o||0===o){s.downTime=(new Date).getSeconds(),s.downXpos=r[0],s.downYpos=r[1];var c,l=Array.from(n.remote.keys()).filter((function(e){return e!==n.localId})),u=Object(a.a)(l.entries());try{for(u.s();!(c=u.n()).done;){var d,p,h=Object(i.a)(c.value,1)[0],v=Number(null===(d=n.remote.get(l[h]))||void 0===d?void 0:d.pose.position[0]),m=Number(null===(p=n.remote.get(l[h]))||void 0===p?void 0:p.pose.position[1]),f=Number(t.mouseOnMap[0]),b=Number(t.mouseOnMap[1]);if(f>=v-30&&f<=v+30&&b>=m-30&&b<=m+30)return}}catch(j){u.e(j)}finally{u.f()}var g=setTimeout((function(){clearTimeout(g);var e=s.downXpos-s.cursorX,n=s.downYpos-s.cursorY;s.mouseDown&&0===e&&0===n&&(s.zoomX=r[0],s.zoomY=r[1],s.contentX=t.mouseOnMap[0],s.contentY=t.mouseOnMap[1],P(!0))}),500)}},onDrag:function(e){e.down,e.delta;var t=e.xy;e.buttons;s.cursorX=t[0],s.cursorY=t[1]},onDragEnd:function(e){var o=e.event,r=e.xy;s.upXpos=r[0],s.upYpos=r[1],s.upTime=(new Date).getSeconds();var c=s.upTime-s.downTime;if(s.upXpos>=s.downXpos-20&&s.upXpos<=s.downXpos+20&&s.upYpos>=s.downYpos-20&&s.upYpos<=s.downYpos+20&&"DIV"===String(Object(null===o||void 0===o?void 0:o.target).tagName)&&c<1){var l,u=Array.from(n.remote.keys()).filter((function(e){return e!==n.localId})),d=Object(a.a)(u.entries());try{for(d.s();!(l=d.n()).done;){var p,h,v=Object(i.a)(l.value,1)[0],m=Number(null===(p=n.remote.get(u[v]))||void 0===p?void 0:p.pose.position[0]),f=Number(null===(h=n.remote.get(u[v]))||void 0===h?void 0:h.pose.position[1]),b=Number(t.mouseOnMap[0]),g=Number(t.mouseOnMap[1]);if(b>=m-30&&b<=m+30&&g>=f-30&&g<=f+30)return}}catch(j){d.e(j)}finally{d.f()}}s.dragging=!1,s.mouseDown=!1,Gd=!1,P(!1)},onMove:function(e){var i=e.xy;s.zoomX=i[0],s.zoomY=i[1],t.setMouse(i),E||(n.local.mouse.position=Object.assign({},t.mouseOnMap))},onTouchStart:function(e){s.zoomX=e.touches[0].clientX,s.zoomY=e.touches[0].clientY,Gd=!0,t.setMouse([e.touches[0].clientX,e.touches[0].clientY]),n.local.mouse.position=Object.assign({},t.mouseOnMap)},onTouchEnd:function(e){var t=e.changedTouches[0],n=document.elementFromPoint(t.clientX,t.clientY);console.log(null===n||void 0===n?void 0:n.nodeName," ----- ",null===n||void 0===n?void 0:n.id),"IMG"===(null===n||void 0===n?void 0:n.nodeName)&&"contextMore"===(null===n||void 0===n?void 0:n.id)?ge():"IMG"===(null===n||void 0===n?void 0:n.nodeName)&&"avatarGen"===(null===n||void 0===n?void 0:n.id)&&je(),Gd=!1}},{eventOptions:{passive:!1}});return Object(Ia.jsxs)("div",Object(wn.a)(Object(wn.a)(Object(wn.a)({ref:d.target},k),Ke()),{},{children:[Object(Ia.jsx)(Bd,Object(wn.a)(Object(wn.a)({},e),{},{isLocal:!0,onContextMenu:function(e){e.preventDefault(),ge()}})),Object(Ia.jsx)(Tr,Object(wn.a)(Object(wn.a)({show:!1,className:m.more,htmlColor:v},k),{},{buttonRef:Ye,onClickMore:ge})),Object(Ia.jsx)(td,{stores:e.stores,open:w,close:function(){S(!1),t.keyInputUsers.delete("LocalParticipantConfig")},anchorEl:Ye.current,anchorOrigin:{vertical:"top",horizontal:"left"},anchorReference:"anchorEl"}),Object(Ia.jsx)(ka.a,{open:E,onClose:function(){return P(!1)},onExited:function(){return P(!1)},keepMounted:!0,PaperProps:{style:{backgroundColor:"transparent",position:"absolute",boxShadow:"none",overflow:"hidden",width:350,height:250,left:Number(s.downXpos)-200,top:Number(s.downYpos)-160,zIndex:E?999:-999,transform:c()?"scale(2.5)":"scale(1)"}},BackdropProps:{invisible:!0},children:Object(Ia.jsx)(ya.a,{style:E?{transform:"scale(1.1)",transition:"0s ease-out"}:{transform:"scale(0)",transition:"0s ease-out"},children:Object(Ia.jsx)(Sr.a,{in:E,style:{transition:E?"500ms":"0ms"},children:Object(Ia.jsxs)("div",{className:E?m.showMenuContainer:m.hideMenuContainer,children:[Object(Ia.jsx)("div",{className:m.moreIcon,onMouseUp:ge,onTouchStart:He,children:Object(Ia.jsx)("img",{id:"contextMore",src:Nr,height:Yo,width:Yo,style:{transform:"scale(1.2)"},alt:""})}),Object(Ia.jsx)(Ir.a,{placement:"top",title:E?f("ctGenerateAvatar"):"",children:Object(Ia.jsx)("div",{className:m.avatarTool,onMouseUp:je,onTouchStart:He,children:Object(Ia.jsx)("img",{id:"avatarGen",src:"data:image/png;base64,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",height:Yo,width:Yo,style:{transform:"scale(1)"},alt:""})})}),Object(Ia.jsx)("div",{className:m.dashedCircle})]})})})}),Object(Ia.jsxs)(ka.a,{open:D,onClose:function(){return We()},onExited:function(){return We()},maxWidth:"sm",fullWidth:!0,fullScreen:!1,keepMounted:!0,PaperProps:{style:{minWidth:760,transform:c()?"scale(1.2)":"scale(1)"}},children:[Object(Ia.jsx)(Ta.a,{id:"simple-dialog-title",disableTypography:!0,style:{fontSize:c()?"2.5em":"1.2em",fontWeight:"bold"},children:"Customize My Avatar"}),Object(Ia.jsx)(ya.a,{children:Object(Ia.jsxs)("div",{className:m.mainContainer,children:[Object(Ia.jsxs)("div",{className:m.menuContainer,children:[we.map((function(e,t){return Object(Ia.jsx)("div",{className:L===t?m.avticeButtons:m.deavticeButtons,onClick:function(){"",U(t)},children:e})})),Object(Ia.jsxs)("div",{style:{position:"relative",width:"130px",height:"130px",maxWidth:"130px",marginLeft:"-10px",marginTop:"50px"},children:[""!==Wd||""!==Jd?Object(Ia.jsxs)("div",{ref:be,style:{position:"relative",width:"130px",height:"130px",maxWidth:"130px"},children:[Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==Wd?"block":"none"},src:Wd,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==Xd?"block":"none"},src:Xd,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==Jd?"block":"none"},src:Jd,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==Kd?"block":"none"},src:Kd,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"-3px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==Zd?"block":"none"},src:Zd,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==qd?"block":"none"},src:qd,width:"130px",height:"130px",draggable:!1,alt:""})})]}):Object(Ia.jsx)("div",{children:Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{backgroundColor:Y(N),borderRadius:"50%"},src:e.participant.information.avatarSrc,width:"130px",height:"130px",draggable:!1,alt:""})})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"145px",left:"0px",fontSize:c()?"2em":"1em",fontWeight:"bold",color:"#2279BD",width:"100%",textAlign:"center"},children:e.participant.information.name})]})]}),Object(Ia.jsxs)(ms.a,{children:[0===L?Object(Ia.jsx)(Wr.a,{style:{minWidth:"470px",minHeight:"250px"},children:Object(Ia.jsxs)("div",{className:m.galleryMain,children:[Object(Ia.jsx)("div",{style:{position:"relative",marginTop:"5px",marginLeft:"5px",fontSize:c()?"1.5em":"0.9em",fontWeight:"bold",color:"#2279BD"},children:"SKIN"}),Object(Ia.jsx)("div",{className:m.galleryList,children:ze}),Object(Ia.jsx)("div",{style:{position:"relative",marginTop:"5px",marginLeft:"5px",fontSize:c()?"1.5em":"0.9em",fontWeight:"bold",color:"#2279BD"},children:"HAIR"}),Object(Ia.jsx)("div",{className:m.galleryList,children:Le}),Object(Ia.jsx)("div",{style:{position:"relative",marginTop:"5px",marginLeft:"5px",fontSize:c()?"1.5em":"0.9em",fontWeight:"bold",color:"#2279BD"},children:"GROUP"}),Object(Ia.jsx)("div",{className:m.galleryList,children:Fe})]})}):Object(Ia.jsx)(Wr.a,{style:{minWidth:"470px",minHeight:"250px"},children:Object(Ia.jsx)("div",{className:m.galleryMain,children:Object(Ia.jsx)("div",{className:m.gallery,children:Re})})}),Object(Ia.jsx)(Wr.a,{style:{width:"100%"},children:Object(Ia.jsxs)(Br.a,{theme:Fd,children:[Object(Ia.jsx)(Oa.a,{variant:"contained",style:{fontSize:c()?"1.5em":"1em",backgroundColor:"orange",position:"relative",marginLeft:c()?"-130px":"75px"},onClick:function(){We()},children:"Revert"}),Object(Ia.jsx)(Oa.a,{variant:"contained",color:"primary",style:{fontSize:c()?"1.5em":"1em",position:"relative",marginLeft:"13px"},onClick:function(){!function(){var e=Ve(15,20),t=Ve(8,14),n=Se[0].split(",");t>=7&&t<15&&(Vd=n[t].split("/")[2].split(".")[0].split("co_")[1],ie!==t&&oe(t)),e>=15&&e<20&&(Jd=n[e],_!==e&&$(e));var i=Se[1].split(","),o=[],a=[],r=[],s=[];o.splice(0),a.splice(0),r.splice(0),s.splice(0);for(var c=0;c<i.length-1;c++)if(-1===i.indexOf(Vd.split("_")[1]+"_"+i[c].split("_")[4])&&Vd.split("_")[1]===i[c].split("_")[4]){var l=i[c].split("/")[2].split(".")[0].split("_")[4];"f"===l?(o.push(i[c]),a.push(c)):"b"===l&&(r.push(i[c]),s.push(c))}if(o.length>0){var u=Ve(0,o.length-1);Kd=o[u],pe(a[u]);var d=i.indexOf(String(o[u].split("_f.png")[0]+"_b.png"));-1!==d?(Xd=i[d],me!==d?fe(d):(Xd="",fe(-1))):(Xd="",fe(-1))}else Kd="",pe(-1),Xd="",fe(-1);var p=Se[2].split(","),h=Ve(0,p.length-2);Zd=p[h],W(h);var v=Se[3].split(","),m=Ve(0,v.length-2);qd=v[m],X(m)}()},children:"Generate Random"}),Object(Ia.jsx)(Oa.a,{variant:"contained",style:{fontSize:c()?"1.5em":"1em",backgroundColor:"orange",position:"relative",marginLeft:"13px"},onClick:function(){Je()},children:"Apply Changes"})]})})]})]})})]})]}))},tp=function(e){return va.a.useMemo((function(){return Object(Ia.jsx)(ep,Object(wn.a)({},e))}),[e.size,e.participant.information.avatarSrc,e.participant.information.color,e.participant.information.name,e.participant.information.textColor])};tp.displayName="MemorizedLocalParticipant";var np=function(e){var t,n,o=e.stores.roomInfo,a=va.a.useState(""),r=Object(i.a)(a,2),s=r[0],c=r[1],l=va.a.useState(""),u=Object(i.a)(l,2),d=u[0],p=u[1];function h(t,n){e.close()}var v=Object.assign({},e);delete v.close;var m=e.participant?e.participant.id:"";return Object(Ia.jsxs)(Va.a,Object(wn.a)(Object(wn.a)({},v),{},{onClose:h,children:[Object(Ia.jsxs)(Ta.a,{children:[null===(t=e.participant)||void 0===t?void 0:t.information.name,Object(Ia.jsx)("span",{style:{float:"right"},children:Object(Ia.jsx)(Ku,{open:e.open,stat:bo(Qo.remotePeers.get(m))})})]}),Object(Ia.jsxs)(ya.a,{children:[Object(Ia.jsx)(Aa.a,{mb:2,children:Object(Ia.jsx)(Oa.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){var t;h(),null===(t=e.participant)||void 0===t||t.call()},children:ee("rsCall")})}),Object(Ia.jsx)(Aa.a,{mb:2,children:Object(Ia.jsx)(Oa.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){e.participant&&(On.yarnPhones.has(e.participant.id)?On.yarnPhones.delete(e.participant.id):On.yarnPhones.add(e.participant.id),h())},children:e.participant&&On.yarnPhones.has(e.participant.id)?ee("rsCutYarnPhone"):ee("rsConnectYarnPhone")})}),Object(Ia.jsx)(Aa.a,{mb:2,children:Object(Ia.jsx)(Oa.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){e.participant&&(Cn.sendTo=e.participant.id,h())},children:ee("rsChatTo",{name:null===(n=e.participant)||void 0===n?void 0:n.information.name})})}),Object(Ia.jsx)(Aa.a,{mb:2,children:Object(Ia.jsx)(Oa.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){e.participant&&e.stores.map.focusOn(e.participant)},children:ee("ctFocus")})}),o.passMatched&&Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsxs)(Aa.a,{mb:2,children:["To kick this user type 'kick' and enter. \u2009",Object(Ia.jsx)(sr.a,{label:"kick",type:"text",style:{marginTop:-22},value:s,onChange:function(e){c(e.currentTarget.value)},onKeyPress:function(t){if("Enter"===t.key&&"kick"===s){if(!e.participant)return;setTimeout((function(){Qo.dataConnection.sendMessage(Rn.KICK,"Kicked by administrator.",e.participant.id)}),5e3),e.close()}}})]}),Object(Ia.jsxs)(Aa.a,{mb:2,children:["Clear this user's contents.\u2009",Object(Ia.jsx)(sr.a,{label:"clear",type:"text",style:{marginTop:-22},value:d,onChange:function(e){p(e.currentTarget.value)},onKeyPress:function(t){if("Enter"===t.key&&"clear"===d){if(!e.participant)return;var n=[];ea.all.forEach((function(t){var i;t.ownerName===(null===(i=e.participant)||void 0===i?void 0:i.information.name)&&n.push(t.id)})),n.forEach((function(e){return ea.removeByLocal(e)})),e.close()}}})]})]})]})]}))},ip="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEhElEQVR4nO2c0XHaQBBAH5n8h1RguQLTQUgFdgfBHZAOcAVxKjDuAFcQXEGgA9yBqED5WGmEsZCEjNhdZ9+MxkaWuRs97Wp1dzDIsozAJ5+0OxB0J+Q5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ5JuQ55rN2B3okAUb5VjAGVkCav97k2/JsvTohgw/2ydibne3Lkf+7BubAAhFqno8gbwhM8+1YYYd4BmYYj0jv8qbIST6VtH1MS/Qqb4ikt29nau83cqGYwqO8ERIJfUXbIdZIwZM2HHc2vD0q3KAjDuAqb3uo0HYlniJvBPzV7gSGItBL5CXYKRqukPutOl7kLdBJlYf4hlShqlhNm8V9JUWqvF+KfanjEsUHeouRN0aGsMaIxJliX5qYaTZuLfImwEP++1ekunw4eLQN1KLPUuTNKUU9UqZM69xoNWxF3hT4sfN6gaTMK53uHMV/LW/M24JkyeupnGO4Q1LuALgFtjXHroHv+bGX+etjOdcQ3VuyLNPchlmWpdlr0vxv0+x45hVtTGqOTyr6s+nQrsr50468qmmcVf6zyzDUvOU+kBmDzd6+FCMP4G3QlFfMw52SpOW+uv1mxi6b0JTXZba7iSlvT/7swLEXyKPJLiNeF06m0VzD0lSlbTq8ZzHyf0/5qFFXUDwgwhZ5fyYd2lRD8yG9ruEBdmYRmnjhcAruFe2C5RAJUrjUlflWWGo1bFVekVI9VH5qfbSaNtdI2hwDf87Sm26opUywG3lXlGtVnnW7UstMs3GrkQfwhKRPq4WLatSBbuS9NPz9mnJu76733hzPRLsDmvLa3OjnlBOyltLnTwysqdGUN29xzMXOcTd0G/U/NY/IIIA6mvJWtIuma0RgiqRRTYG/MZAuC7SrzVnL435QChwhJ/Hc/MTYzL6FNSwLJLra8IRc+SmSRu+R1No3WwzONmhHHoiMtqnwmnJl2QKJwjv6H0YzOdJjQV4RRW0FXCCjLnPKSjRB0lrT40dXkp7e911YSJsFCXKFH7vo6BERuMlfF8Nq4/z3U6XVrxj4fMIuluSBRNI93SZEi48lLymXUuy+7/6CpiES8W3buqXd483ZsCYP5KSueH/EFGtUNnv7N7yWMEIumKZVYM9INJvBojyQk9vHcoQ1UiDtRyb5/hn1F83g5D16BxYKlr7ZIvfF70iUVYkDuWASJD1WVb+WhucAu5G3pN1i1heq17qsKL9f5ZCsJhLKwidFojIKlhbUdWqLnEg335fSFxa/AaluVdkjMkRlKgK0sChvUrHvGZHWNQV+SCzKK8YQt0hqvCekVWLxnlc8UC+V+2Eei/KClvwPz3kflpDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmJDnmH/0ilgyg53pQQAAAABJRU5ErkJggg==",op=Object(Ka.a)({more:function(e){return{position:"absolute",width:.5*e.size,height:.5*e.size,left:e.position[0]+.4*e.size,top:e.position[1]-.8*e.size,opacity:"0"}},hideMenuContainer:function(e){return{display:"flex",position:"absolute",width:350,height:250,overflow:"hidden",userSelect:"none",userDrag:"none",bottom:"auto",backgroundColor:"transparent",transition:"0s ease-out",cursor:"default"}},showMenuContainer:function(e){return{display:"flex",position:"absolute",width:350,height:250,overflow:"hidden",userSelect:"none",userDrag:"none",top:0,left:0,bottom:"auto",backgroundColor:"transparent",transition:"0.3s ease-out",transitionDelay:"0.1s",cursor:"default"}},dashedCircle:function(e){return{position:"relative",width:200,height:200,borderWidth:2,borderStyle:"solid",borderColor:"#9e886c",borderRadius:"50%",opacity:.4,top:25,left:65,background:"radial-gradient(#ffffff, #ffffff, #ffffff, #9e886c, #9e886c)",zIndex:-9999}},callIcon:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:90,left:64,whiteSpace:"pre",cursor:"default",background:"#9e886c",opacity:.2},ap)},yarnPhoneIcon:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:44,left:90,whiteSpace:"pre",cursor:"default",background:On.yarnPhones.size?"#ef4623":"#9e886c"},On.yarnPhones.size>0?rp:ap)},chatIcon:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:23,left:140,whiteSpace:"pre",cursor:"default",background:"#9e886c"},ap)},focusIcon:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:40,left:190,whiteSpace:"pre",cursor:"default",background:"#9e886c"},ap)},kickIcon:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:85,left:217,whiteSpace:"pre",cursor:"default",background:"#9e886c"},ap)}}),ap={"&":{margin:"5px",borderRadius:"50%",width:"35px",height:"35px",padding:"3px"},"&:hover":{backgroundColor:"black",margin:"5px",padding:"3px",borderRadius:"50%"},"&:active":{margin:"5px",padding:"3px",borderRadius:"50%"}},rp={"&":{margin:"5px",borderRadius:"50%",width:"35px",height:"35px",padding:"3px"},"&:hover":{backgroundColor:"#B34700",margin:"5px",padding:"3px",borderRadius:"50%"},"&:active":{margin:"5px",padding:"3px",borderRadius:"50%"}},sp=Object(K.a)((function e(){Object(X.a)(this,e),this.prebThirdPersonView=!1,this.mouseDown=!1,this.dragging=!1,this.upTime=0,this.downTime=0,this.downXpos=0,this.downYpos=0,this.upXpos=0,this.upYpos=0,this.contentX=0,this.contentY=0,this.zoomX=0,this.zoomY=0,this.moveX=0,this.moveY=0,this.clickStatus="",this.userAngle=0,this.clickEnter=!1,this.pingX=0,this.pingY=0,this.hidePinIcon=0,this.cursorX=0,this.cursorY=0}));var cp=!1;function lp(){return cp}var up=function(e){var t=va.a.useRef({}).current,n=va.a.useState(!1),o=Object(i.a)(n,2),a=o[0],r=kr(o[1],t),s=va.a.useState(!1),l=Object(i.a)(s,2),u=l[0],d=l[1],p=e.participant.getColor(),h=Object(i.a)(p,1)[0],v=Object(ha.useRef)(new sp).current,m=va.a.useState(!1),f=Object(i.a)(m,2),b=f[0],g=f[1],j=e.stores.map,A=Object(pa.b)((function(){return{position:e.participant.pose.position,size:e.size}})),O=op(A),y=te().t;function x(){e.stores.map.keyInputUsers.add("remoteForm"),d(!0)}var C=va.a.useRef(null);function w(e){e.stopPropagation(),e.preventDefault()}var S=Object(oc.a)({onDragStart:function(e){var t=e.buttons,n=e.xy;document.body.focus(),v.dragging=!0,v.mouseDown=!0,cp=!0,v.downTime=(new Date).getSeconds(),v.moveX=j.mouseOnMap[0],v.moveY=j.mouseOnMap[1];var i=Ep(),o=Np(),a=Ws();if(!Mp()&&!a&&!o&&(1===t||0===t)){v.downTime=(new Date).getSeconds(),v.downXpos=n[0],v.downYpos=n[1];var r=setTimeout((function(){if(clearTimeout(r),!i){var e=v.downXpos-v.cursorX,t=v.downYpos-v.cursorY;v.mouseDown&&0===e&&0===t&&(v.zoomX=n[0],v.zoomY=n[1],v.contentX=j.mouseOnMap[0],v.contentY=j.mouseOnMap[1],g(!0))}}),500)}},onDrag:function(e){e.down,e.delta;var t=e.xy;e.buttons;v.cursorX=t[0],v.cursorY=t[1]},onDragEnd:function(e){e.event;var t=e.xy;v.upXpos=t[0],v.upYpos=t[1],v.upTime=(new Date).getSeconds();v.upTime,v.downTime;var n=Ws();Mp()||n||(v.dragging=!1,v.mouseDown=!1,cp=!1,g(!1))},onMove:function(e){var t=e.xy;v.zoomX=t[0],v.zoomY=t[1],j.setMouse(t),b||(On.local.mouse.position=Object.assign({},j.mouseOnMap))},onTouchStart:function(e){v.zoomX=e.touches[0].clientX,v.zoomY=e.touches[0].clientY,cp=!0,j.setMouse([e.touches[0].clientX,e.touches[0].clientY]),On.local.mouse.position=Object.assign({},j.mouseOnMap)},onTouchEnd:function(e){var t=e.changedTouches[0],n=document.elementFromPoint(t.clientX,t.clientY);"IMG"===(null===n||void 0===n?void 0:n.nodeName)&&"menuUpload"===(null===n||void 0===n?void 0:n.id)&&g(!1),cp=!1}},{eventOptions:{passive:!1}});return Object(Ia.jsxs)("div",Object(wn.a)(Object(wn.a)(Object(wn.a)({},r),S()),{},{onContextMenu:function(e){e.preventDefault(),x()},children:[Object(Ia.jsx)(Bd,Object(wn.a)(Object(wn.a)({},e),{},{isLocal:!1})),Object(Ia.jsx)(Tr,Object(wn.a)(Object(wn.a)({show:a,className:O.more,htmlColor:h},r),{},{buttonRef:C,onClickMore:function(e){e.stopPropagation(),x()}})),Object(Ia.jsx)(np,{open:u,close:function(){e.stores.map.keyInputUsers.delete("remoteForm"),d(!1)},stores:e.stores,participant:e.participant,anchorEl:C.current,anchorOrigin:{vertical:"top",horizontal:"left"},anchorReference:"anchorEl"}),Object(Ia.jsx)(ka.a,{open:b,onClose:function(){return g(!1)},onExited:function(){return g(!1)},keepMounted:!0,PaperProps:{style:{backgroundColor:"transparent",position:"absolute",boxShadow:"none",overflow:"hidden",width:350,height:250,left:Number(v.downXpos)-200,top:Number(v.downYpos)-160,zIndex:b?999:-999,transform:c()?"scale(2.5)":"scale(1)"}},BackdropProps:{invisible:!0},children:Object(Ia.jsx)(ya.a,{style:b?{transform:"scale(1.1)",transition:"0s ease-out"}:{transform:"scale(0)",transition:"0s ease-out"},children:Object(Ia.jsx)(Sr.a,{in:b,style:{transition:b?"500ms":"0ms"},children:Object(Ia.jsxs)("div",{className:b?O.showMenuContainer:O.hideMenuContainer,children:[Object(Ia.jsx)(Ir.a,{placement:"left",title:b?y("rsCall"):"",children:Object(Ia.jsx)("div",{className:O.callIcon,onTouchStart:w,children:Object(Ia.jsx)("img",{id:"rsCall",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEBUlEQVR4nO2cvWsUQRiHn4iFsVIQVBDEDxArFSwUAhGsBS3kxEYxFtpFrPwLYqH/wVnYiFZqp12CESwEUwg2fgUEbSSpEsXgWswcWTeby9fu7fwuvweW292bfefNPZndnWVmB7Isw2iypekEzPqxPGEsTxjLE8byhLE8YSxPGMsTxvKEsTxhLE8YyxPG8oSxPGEsTxjLE8byhLE8YSxPGMsTxvKEsTxhLE8YyxPG8oSxPGG2Np1ADQwBJ4HzuX3PgLfAZCMZ1cRAH81VaAOXgcEuZeaBR8D1nmRUM/1w2hwF/gAjdBdH/H4klh+tOa/aUW95bYKM9fIA4Vao3PI2Ko54fLuCXBpBteW1gMcVxrsEPKkwXk9QlTfHyte3tTAPbK8wXk9QPG22qVYcMZ7c6VOx5X0H9tQQ9wewt4a4taEor86EB2qMXTlqp826+2ZSfT81eSaH5QljecJYnjCWJ4yavN1NJ5ASavJON51ASqjJMzksTxjLE8byhLE8YdTkPWs6gZRIWd5+wnCHJmnFPJIkVXljwFfCOJU5mvkB52L9X2I+yZGqvBu59UHgQo/rH2NxqMVAIZ9kSFVekeEe1yfxJEdF3s6mE0iRVOX9LGzvi59va673afw8UthfzCcJUpX3rbDduWGZBBZqqnMemI7ru1bIJwlSlVfsz20lTN0CeF1TnS/jZ4ulU9+S7F+mPPTvL/8PxZsCThBa4ReqHaaXAQcILe8jcKjwXZL/5EkmFflc2D5GaH3TwPOK63oe4w4BB1fIIxlSbnlDwKvCvvyo5qpGTn8CDneJmewklJRb3iThh82zh8U5BaeA2Q3WMQucjettloqbJVFxkLY8gKsl+0YII5unCf2/qXXGnorHTxNuUq6VlDm3zti9Icuy1JfxbCl/sywby5UZzbJspqRcGTOxfOfYsRivyIsE/vauS8rXvDwzwI6S/RPAmdz2EHCbcErdltv/C3gD3Of/N0KMU/7oTWLGkIq8/cAHyuflLQD3gDtriNcGrlD+KpN54CiLHfZkUZEH3QVCkPgeeEG4nuVvNFrAceAioSuwXB9RRhxoyevwjiCiavJdBglSv9ss4wRwi+qecS4AdxETB5otL89q3nq0HAvAQ4Tfw6Iur0MLuEl4hFZ2V9phljC84i4Jd75XS7/IK1J81UexS9EXKF7zVsPvphPoBf0qb1NgecJYnjCWJ4zlCWN5wqjLGycMECouxY768DLlxnuUZy2od9KrSF7qZXF51FvepkZd3kTDxzeK+mlzU6Pe8jY1lieM5QljecJYnjCWJ4zlCWN5wlieMJYnjOUJY3nCWJ4wlieM5QljecJYnjCWJ4zlCWN5wlieMJYnjOUJY3nCWJ4wlifMP99fG1KrceiIAAAAAElFTkSuQmCC",height:Yo,width:Yo,style:{transform:"scale(1.2)"},alt:""})})}),Object(Ia.jsx)(Ir.a,{placement:"left",title:b?y("rsConnectYarnPhone"):"",children:Object(Ia.jsx)("div",{className:O.yarnPhoneIcon,onMouseUp:function(t){e.participant&&(On.yarnPhones.has(e.participant.id)?On.yarnPhones.delete(e.participant.id):On.yarnPhones.add(e.participant.id))},onTouchStart:w,children:Object(Ia.jsx)("img",{id:"yarnPhone",src:"data:image/png;base64,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",height:Yo,width:Yo,style:{transform:"scale(1.2)"},alt:""})})}),Object(Ia.jsx)(Ir.a,{placement:"top",title:b?y("rsChatTo"):"",children:Object(Ia.jsx)("div",{className:O.chatIcon,onMouseUp:function(t){e.participant&&(Cn.sendTo=e.participant.id)},onTouchStart:w,children:Object(Ia.jsx)("img",{id:"yarnPhone",src:ip,height:Yo,width:Yo,style:{transform:"scale(1.2)"},alt:""})})}),Object(Ia.jsx)(Ir.a,{placement:"right",title:b?y("ctFocus"):"",children:Object(Ia.jsx)("div",{className:O.focusIcon,onMouseUp:function(t){e.participant&&e.stores.map.focusOn(e.participant)},onTouchStart:w,children:Object(Ia.jsx)("img",{id:"yarnPhone",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAACrElEQVR4nO3c4W3aQByG8TdVv6cblEzQjOARukE7QjZoM0mSDZoJ6hHoBmQDmMD9YE5UKYmxMf7fc/c+EopAEXfwk23gDFdd18kx+xA9ATc944EzHjjjgTMeOOOBMx4444EzHjjjgTMeOOOBMx4444EzHjjjgTMeOOOBMx4444EzHjjjgTMeOOOBMx4444EzHjjjgTMeOOOBywWvkfQoaSOpm3BpB+5/JWk78b7fuzSTH/EMfYwcfN93SQ8XHmOj/oluJV1feKzFit7ybnV5uNRaPeBuofEuXjTe3cLjFQUYjdcEjFkMYPQx7/OR217Uv3gZ02bk/yfAVuBjYDTesTaSfi4wDh4wercZHXoXWjueBAY0Hjjj9e81WwGPe7XjYeGkuvHQcFK9eENwfyTd7P9mW414p8A1OnyYnS1gbXinwm3317fKGLAmvLFwqWwBa8GbCpfKErAGvHPhUtkBlo43F1wqK8CS8YbgXjQOLpUNYI5LQnM0BLeT9FXj4VIJMLQS8U6Ba9SvJpzTVPjZKm23uRRcFpWG915FwUnl4b21sFocnFQenvQ/YJFwUpl40gEwvR0oDk4q89Vmaq3+OwrFVjLenK3Uf6fidY8af87obBnvtFaSfhy5vVUgXqnHvCoyHjjjgTMeOOOBMx4444EzHjjjgTMeOOOBy/GzzU/K4OSeV91GT+BYOeJ9kfQ7ehKEonebz8Hjn1voIm803q/g8c/pScGn/111XRc5vtQvaH6LnsTIdjr8kmBY0Vue1K9Q34vzUxpPygBOymPL+7cmegIDrZUBWio3PDeiHHabbmLGA2c8cMYDZzxwxgNnPHDGA2c8cMYDZzxwxgNnPHDGA2c8cMYDZzxwxgNnPHDGA2c8cMYDZzxwxgNnPHDGA2c8cMYDZzxwxgP3F01fmrDtI5K3AAAAAElFTkSuQmCC",height:Yo,width:Yo,style:{transform:"scale(1.2)"},alt:""})})}),Object(Ia.jsx)(Ir.a,{placement:"right",title:b?y("ctKick"):"",children:Object(Ia.jsx)("div",{className:O.kickIcon,onMouseUp:function(t){e.participant&&setTimeout((function(){Qo.dataConnection.sendMessage(Rn.KICK,"Kicked by Host.",e.participant.id)}),5e3)},onTouchStart:w,children:Object(Ia.jsx)("img",{id:"yarnPhone",src:zr,height:Yo,width:Yo,style:{transform:"scale(1.2)"},alt:""})})}),Object(Ia.jsx)("div",{className:O.dashedCircle})]})})})})]}))};function dp(e,t){var n=e*t;return n>na?na/e:n<ta?ta/e:t}var pp=Object(Ka.a)({root:{position:"absolute",width:"100%",height:"100%",top:0,left:0,userDrag:"none",userSelect:"none",overflow:"hidden"},center:{position:"absolute",margin:"auto",left:0,right:0,top:0,bottom:0,width:0,height:0},transform:function(e){return{position:"absolute",width:0,height:0,transform:e.matrix.toString()}},hideMenuContainer:function(e){return{display:"flex",position:"relative",width:350,height:250,overflow:"hidden",userSelect:"none",userDrag:"none",bottom:"auto",transform:"scale(0)",backgroundColor:"transparent",transition:"0s ease-out",cursor:"default"}},showMenuContainer:function(e){return{display:"flex",position:"relative",width:350,height:250,overflow:"hidden",userSelect:"none",userDrag:"none",top:e.mem.zoomY-125,left:c()?e.mem.zoomX-160:e.mem.zoomX-170,bottom:"auto",transform:c()?"scale(2.8)":"scale(1.2)",backgroundColor:"transparent",transition:"0.3s ease-out",transitionDelay:"0.1s",cursor:"default"}},dashedCircle:function(e){return{position:"relative",width:200,height:200,borderWidth:2,borderStyle:"solid",borderColor:"#9e886c",borderRadius:"50%",opacity:.4,top:25,left:65,background:"radial-gradient(#ffffff, #ffffff, #ffffff, #9e886c, #9e886c)",zIndex:-9999}},uploadZone:function(e){return Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:180,left:145,whiteSpace:"pre",cursor:"default",background:"#9e886c"},hp)},PingLocation:function(e){return{display:"block",height:Yo,position:"absolute",textAlign:"center",top:e.mem.pingY-25,left:e.mem.pingX-17,whiteSpace:"pre"}},PingLocationHide:function(e){return{display:"none",height:Yo,position:"absolute",textAlign:"center",top:e.mem.pingY-25,left:e.mem.pingX-17,whiteSpace:"pre"}}}),hp={"&":{margin:"5px",borderRadius:"50%",width:"35px",height:"35px",padding:"3px"},"&:hover":{backgroundColor:"black",margin:"5px",padding:"3px",borderRadius:"50%"},"&:active":{margin:"5px",padding:"3px",borderRadius:"50%"}},vp=Object(K.a)((function e(){Object(X.a)(this,e),this.prebThirdPersonView=!1,this.mouseDown=!1,this.dragging=!1,this.upTime=0,this.downTime=0,this.downXpos=0,this.downYpos=0,this.upXpos=0,this.upYpos=0,this.contentX=0,this.contentY=0,this.zoomX=0,this.zoomY=0,this.moveX=0,this.moveY=0,this.clickStatus="",this.userAngle=0,this.clickEnter=!1,this.pingX=0,this.pingY=0,this.hidePinIcon=0,this.touchStart=0,this.touchEnd=0}));var mp=!1;function fp(){return mp}var bp=0,gp=function(e){var t=e.stores,n=t.map,o=t.participants,r=Object(pa.b)((function(){return n.matrix})),s=Object(ha.useRef)(null),c=Object(ha.useRef)(null);function l(){return n.offset}var u=Object(pa.b)((function(){return o.local.thirdPersonView})),d=Object(ha.useRef)(new vp).current,v=b(r,o.local.pose.position);if(u!==d.prebThirdPersonView)if(d.prebThirdPersonView=u,u){var O=w(m(r));if(O){var C=P(-O,v);n.setCommittedMatrix(C)}}else{var S=o.local.pose.orientation,k=w(m(r));if(S+k){var T=P(-(S+k),v);n.setCommittedMatrix(T)}}function P(e,t){var i=f(t,(new DOMMatrix).rotateSelf(0,0,e),r);return n.setMatrix(i),i}function M(e,t){var i=o.local,a=t;a||(a=n.mouseOnMap);var r=A(a,i.pose.position);if(x(r)>(t?120:30)){var s=y(20/x(r),r);i.pose.orientation=180*Math.atan2(s[0],-s[1])/Math.PI,e&&(i.pose.position=j(i.pose.position,s)),i.savePhysicsToStorage(!1)}}function R(){if("single"===d.clickStatus||""===d.clickStatus){if(d.clickEnter)return;if(o.local.pingIcon)return;if(function(){var t=!1;if(e.stores.contents.all.length>0)for(var n=0;n<e.stores.contents.all.length;n++)e.stores.contents.all[n].scaleRotateToggle&&(t=!0);return t}())return void function(){if(e.stores.contents.all.length>0)for(var t=0;t<e.stores.contents.all.length;t++)e.stores.contents.all[t].scaleRotateToggle&&(e.stores.contents.all[t].scaleRotateToggle=!e.stores.contents.all[t].scaleRotateToggle),!1===e.stores.contents.all[t].pinned&&(e.stores.contents.all[t].pinned=!0),e.stores.contents.updateByLocal(e.stores.contents.all[t])}();!1,o.local.pingIcon=!1,o.local.pingX=0,o.local.pingY=0,V(!1);var t=setTimeout((function(){clearTimeout(t),function t(n){var i=A([d.moveX,d.moveY],e.stores.participants.local.pose.position);if(x(i)>6){var o=y(x(i)/5/x(i),i);e.stores.participants.local.pose.orientation=180*Math.atan2(o[0],-o[1])/Math.PI,n&&(e.stores.participants.local.pose.position=j(e.stores.participants.local.pose.position,o)),e.stores.participants.local.savePhysicsToStorage(!1);setTimeout((function(){t(!0)}),0)}}(!1)}),0)}else"double"===d.clickStatus&&(window.clearTimeout(d.hidePinIcon),o.local.pingX=d.pingX,o.local.pingY=d.pingY,o.local.pingIcon=!0,!0,V(!0),d.hidePinIcon=window.setTimeout((function(){window.clearTimeout(d.hidePinIcon),d.clickStatus="",o.local.pingIcon=!1,o.local.pingX=0,o.local.pingY=0,!1,V(!1)}),3e3))}var D=Object(oc.a)({onDragStart:function(e){var t=e.buttons,r=e.xy;document.body.focus(),d.dragging=!0,d.mouseDown=!0,d.downTime=(new Date).getSeconds(),d.moveX=n.mouseOnMap[0],d.moveY=n.mouseOnMap[1];var s=Ep(),c=Np(),l=lp(),u=Ws(),p=Mp(),h=Yd(),v=$d();if(!Dp()&&!p&&!u&&!Y&&!c&&!l&&!h&&!v&&(1===t||0===t)){d.downTime=(new Date).getSeconds(),d.downXpos=r[0],d.downYpos=r[1];var m,f=Array.from(o.remote.keys()).filter((function(e){return e!==o.localId})),b=Object(a.a)(f.entries());try{for(b.s();!(m=b.n()).done;){var g,j,A=Object(i.a)(m.value,1)[0],O=Number(null===(g=o.remote.get(f[A]))||void 0===g?void 0:g.pose.position[0]),y=Number(null===(j=o.remote.get(f[A]))||void 0===j?void 0:j.pose.position[1]),x=Number(n.mouseOnMap[0]),C=Number(n.mouseOnMap[1]);if(x>=O-30&&x<=O+30&&C>=y-30&&C<=y+30)return}}catch(S){b.e(S)}finally{b.f()}var w=setTimeout((function(){clearTimeout(w),s||d.mouseDown&&!1===Y&&!1===mp&&(d.zoomX=r[0],d.zoomY=r[1],d.contentX=n.mouseOnMap[0],d.contentY=n.mouseOnMap[1],!0,U(!0),H(!1))}),500)}},onDrag:function(e){var t=e.down,i=e.delta,a=e.xy,s=e.buttons;(i[0]||i[1])&&(d.mouseDown=!1),(i[0]||i[1])&&(d.mouseDown=!1,mp=!0);var h,v=Tp(),f=Ws(),O=Mp(),y=Yd(),x=lp(),C=$d();if(!O&&(!f&&!v&&!L&&!y&&!x&&!C&&d.dragging&&t&&c.current))if(u||2!==s){var S=g(r.inverse(),i),k=r.translate.apply(r,Object(p.a)(S));n.setMatrix(k),(i[0]||i[1])&&M(!1,n.centerOnMap)}else{var T=b(r,o.local.pose.position),R=A(j(a,l()),T),D=A(R,i),B=I(R,D)/(E(R)*E(D)),N=I([(h=R)[1],-h[0]],i)>0?-1:1,z=Math.acos(B)*N;if(isNaN(z))return;var F=P(w(z),T);o.local.pose.orientation=-w(m(F))}},onDragEnd:function(e){var t=e.event,s=e.xy;d.upXpos=s[0],d.upYpos=s[1],d.upTime=(new Date).getSeconds();var c=d.upTime-d.downTime,l=Ws(),u=Mp(),p=$d(),h=Tp(),v=Hd;if(!Dp()&&!v&&!u&&!h&&!l&&!p){if(d.upXpos>=d.downXpos-20&&d.upXpos<=d.downXpos+20&&d.upYpos>=d.downYpos-20&&d.upYpos<=d.downYpos+20&&"DIV"===String(Object(null===t||void 0===t?void 0:t.target).tagName)&&c<1){var m,f=Array.from(o.remote.keys()).filter((function(e){return e!==o.localId})),b=Object(a.a)(f.entries());try{for(b.s();!(m=b.n()).done;){var g,j,A=Object(i.a)(m.value,1)[0],O=Number(null===(g=o.remote.get(f[A]))||void 0===g?void 0:g.pose.position[0]),y=Number(null===(j=o.remote.get(f[A]))||void 0===j?void 0:j.pose.position[1]),x=Number(n.mouseOnMap[0]),C=Number(n.mouseOnMap[1]);if(x>=O-30&&x<=O+30&&C>=y-30&&C<=y+30)return}}catch(S){b.e(S)}finally{b.f()}}1===(null===t||void 0===t?void 0:t.detail)?d.clickStatus="single":2===(null===t||void 0===t?void 0:t.detail)&&(d.clickStatus="double",d.pingX=o.local.mouse.position[0]-o.local.pose.position[0],d.pingY=o.local.mouse.position[1]-o.local.pose.position[1]),d.clickEnter=!0;var w=setTimeout((function(){clearTimeout(w),d.clickEnter&&(d.clickEnter=!1,!1===L&&!1===mp&&R()),mp=!1}),220);r.toString()!==n.committedMatrix.toString()&&(n.setCommittedMatrix(r),M(!1,n.centerOnMap)),d.dragging=!1,d.mouseDown=!1,!1,U(!1)}},onPinch:function(e){var t=Object(i.a)(e.da,2),a=t[0],s=t[1],c=e.origin,d=(e.event,e.memo);if(void 0===d)return[a,s];var p=Object(i.a)(d,2),v=p[0],b=p[1],g=j(c,l()),A=a>10?a/v:a<-10?v/a:1+(a-v)/10;A=dp(h(r),A);var O=f(g,u?(new DOMMatrix).scaleSelf(A,A,1):(new DOMMatrix).scaleSelf(A,A,1).rotateSelf(0,0,s-b),r);return n.setMatrix(O),u||(o.local.pose.orientation=-w(m(O))),[a,s]},onPinchEnd:function(){return n.setCommittedMatrix(r)},onMove:function(e){var t=e.xy;n.setMouse(t),o.local.mouse.position[0]===n.mouseOnMap[0]&&o.local.mouse.position[1]===n.mouseOnMap[1]||(o.local.mouse.position=Object.assign({},n.mouseOnMap))},onTouchStart:function(e){d.zoomX=e.touches[0].clientX,d.zoomY=e.touches[0].clientY,n.setMouse([e.touches[0].clientX,e.touches[0].clientY]),o.local.mouse.position=Object.assign({},n.mouseOnMap)},onTouchEnd:function(e){var t=e.changedTouches[0],n=document.elementFromPoint(t.clientX,t.clientY);bp++;var i=setTimeout((function(){clearTimeout(i),2===bp&&(d.clickStatus="double",d.pingX=o.local.mouse.position[0]-o.local.pose.position[0],d.pingY=o.local.mouse.position[1]-o.local.pose.position[1]),bp=0}),250);"IMG"===(null===n||void 0===n?void 0:n.nodeName)&&"menuUpload"===(null===n||void 0===n?void 0:n.id)&&(H(!0),U(!1))}},{eventOptions:{passive:!1}});Object(ha.useEffect)((function(){B()}),[]),Object(ha.useEffect)((function(){function e(e){e.ctrlKey&&(window.visualViewport&&window.visualViewport.scale>1?e.deltaY<0&&e.preventDefault():e.preventDefault())}return window.document.body.addEventListener("wheel",e,{passive:!1}),function(){window.document.body.removeEventListener("wheel",e)}}),[]);var B=Object(ha.useRef)((function(){if(c.current){for(var e=c.current,t=0;e;)t+=e.offsetLeft,e=e.offsetParent;n.setScreenSize([c.current.clientWidth,c.current.clientHeight]),n.setLeft(t)}})).current,N={matrix:r,props:e,mem:d};var z=Object(ha.useState)(!1),F=Object(i.a)(z,2),L=F[0],U=F[1],Q=Object(ha.useState)(!1),G=Object(i.a)(Q,2),Y=G[0],H=G[1],W=Object(ha.useState)(!1),J=Object(i.a)(W,2),V=(J[0],J[1]),K=pp(N);return Object(Ia.jsxs)("div",Object(wn.a)(Object(wn.a)({className:K.root,ref:c},D()),{},{children:[Object(Ia.jsx)(Ru.a,{onResize:B}),Object(Ia.jsx)("div",{className:K.center,onWheel:function(e){if(!e.ctrlKey){var t,i=Math.pow(1.2,e.deltaY/100);if(1===(i=dp(h(n.matrix),i)))return;var o=(t=n.matrix).scale.apply(t,[i,i,1].concat(Object(p.a)(b(n.matrix.inverse(),n.mouse))));n.setMatrix(o),n.setCommittedMatrix(o)}},children:Object(Ia.jsx)("div",{id:"map-transform",className:K.transform,ref:s,children:e.children})}),Object(Ia.jsxs)("div",{className:L?K.showMenuContainer:K.hideMenuContainer,children:[Object(Ia.jsx)(Ir.a,{placement:"bottom",title:L?ee("ctUploadZone"):"",children:Object(Ia.jsx)("div",{className:K.uploadZone,onMouseUp:function(e){H(!0),U(!1)},onTouchStart:function(e){e.stopPropagation(),e.preventDefault()},children:Object(Ia.jsx)("img",{id:"menuUpload",src:Du,height:Yo,width:Yo,alt:""})})}),Object(Ia.jsx)("div",{className:K.dashedCircle})]}),Object(Ia.jsx)(Js,Object(wn.a)(Object(wn.a)({},e),{},{open:Y,onClose:function(){return H(!1)},cordX:d.contentX,cordY:d.contentY,origin:"contextmenu",_type:"menu"}))]}))};gp.displayName="MapBase";var jp="data:image/png;base64,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",Ap=n(183),Op=n.n(Ap),yp=n(342),xp=n.n(yp),Cp=n(227),wp=n.n(Cp),Sp=Object(K.a)((function e(){Object(X.a)(this,e),this.buttons=0,this.dragCanceled=!1,this._borderTimer=0,this._down=!1,this._item="",this._timer=0,this.downTime=0,this.upTime=0,this.downPos=0,this.downXPos=0,this.movePos=0,this.moveXPos=0,this.onContent=!1,this.onContext=!1,this.moveX=0,this.moveY=0,this.clickStatus="",this.userAngle=0,this.clickEnter=!1,this.pingX=0,this.pingY=0,this.isMoved=!1,this.hidePinIcon=0,this.OnTimerClick=!1,this.intervalStep=0,this._zIndex=0,this._clickX=0,this._clickY=0,this._checkForRotation=!1,this._onContentForEdit=!1,this.touchStart=0,this.touchEnd=0})),kp=!1;function Tp(){return kp}var Ip=!1;function Ep(){return Ip}var Pp=!1;function Mp(){return Pp}var Rp=!1;function Dp(){return Rp}var Bp=!1;function Np(){return Bp}var zp=0,Fp=function(e){var t=Object(ha.useState)(e.content.pose),n=Object(i.a)(t,2),o=n[0],a=n[1],r=Object(ha.useState)(e.content.size),s=Object(i.a)(r,2),l=s[0],u=s[1],d=Object(ha.useState)(l),m=Object(i.a)(d,2),f=m[0],b=m[1],g=Object(ha.useState)(o.position),C=Object(i.a)(g,2),w=C[0],S=C[1],k=Object(ha.useState)(!1),I=Object(i.a)(k,2),E=I[0],P=I[1],M=Object(ha.useState)(!1),R=Object(i.a)(M,2),D=R[0],B=R[1],N=Object(ha.useState)(o.orientation),z=Object(i.a)(N,2),F=z[0],L=z[1],U=Object(ha.useState)(!1),Q=Object(i.a)(U,2),G=Q[0],Y=Q[1],H=Object(ha.useRef)(null),W=e.stores,J=W.contents,V=W.map,K=W.participants,X=Object(pa.b)((function(){return J.editing===e.content.id}));var Z=Object(ha.useRef)(new Sp).current,q=Object(pa.b)((function(){return e.content.showTitle})),_=Object(ha.useState)(!1),$=Object(i.a)(_,2),te=$[0],ne=$[1],ie=Object(ha.useState)(!1),oe=Object(i.a)(ie,2),ae=oe[0],re=oe[1],se=Object(ha.useState)(!1),ce=Object(i.a)(se,2),le=ce[0],ue=ce[1],de=Object(ha.useState)(!1),pe=Object(i.a)(de,2),he=pe[0],ve=pe[1];Pp=te;var me=setTimeout((function(){clearTimeout(me),Rp=le}),500),fe=Object(pa.b)((function(){return e.content.stopWatchToggle})),be=Object(pa.b)((function(){return e.content.stopWatchReset})),ge=Object(pa.b)((function(){return e.content.scaleRotateToggle}));ge;var je=Object(ha.useState)(0),Ae=Object(i.a)(je,2),Oe=Ae[0],ye=Ae[1],xe="img"===e.content.shareType?" Image?":"zoneimg"===e.content.shareType?" Chat Zone?":" Text?",Ce=Object(ha.useState)(!1),we=Object(i.a)(Ce,2),Se=(we[0],we[1]);function Te(){var e,t;H.current&&(H.current.resizable.orientation=o.orientation+V.rotation);var n=E?Yo:0;null===(e=H.current)||void 0===e||e.updatePosition({x:o.position[0],y:o.position[1]-n}),null===(t=H.current)||void 0===t||t.updateSize({width:l[0],height:l[1]+n})}function Ie(e){e.stopPropagation(),e.preventDefault()}function Ee(){Z._down||(Z._down=!1,Z._item="DIV",window.clearTimeout(Z._timer),ze(1))}function Pe(){JSON.stringify(o)===JSON.stringify(e.content.pose)&&JSON.stringify(l)===JSON.stringify(e.content.size)||(e.content.size=Object(p.a)(l),e.content.pose=Object(wn.a)({},o),e.updateAndSend(e.content),ve(!1))}function Me(){if("single"===Z.clickStatus){if(Z.clickEnter)return;if(fp())return;if(le)return;if(he)return;if(ge)return;!1,Z.clickStatus="",K.local.pingIcon=!1,K.local.pingX=0,K.local.pingY=0,Se(!1);var t=setTimeout((function(){clearTimeout(t),Z.isMoved||function e(t){var n=K.local,i=A([Z.moveX,Z.moveY],n.pose.position);if(x(i)>6){var o=y(x(i)/5/x(i),i);n.pose.orientation=180*Math.atan2(o[0],-o[1])/Math.PI,t?n.pose.position=j(n.pose.position,o):(re(!0),window.clearTimeout(Z._borderTimer),function(){var e=setTimeout((function(){clearTimeout(e),re(!1)}),1e3)}()),n.savePhysicsToStorage(!1);setTimeout((function(){e(!0)}),0)}}(!1)}),0)}else if("double"===Z.clickStatus){if(Rp)return;window.clearTimeout(Z.hidePinIcon),!0,Se(!0),K.local.pingX=Z.pingX,K.local.pingY=Z.pingY,K.local.pingIcon=!0,Z.hidePinIcon=window.setTimeout((function(){window.clearTimeout(Z.hidePinIcon),Z.clickStatus="",K.local.pingIcon=!1,K.local.pingX=0,K.local.pingY=0,!1,Se(!1)}),3e3)}else"toggleTimer"===Z.clickStatus?(Z.clickStatus="",e.content.stopWatchToggle?(e.content.stopWatchToggle=!1,e.content.stopWatchReset=!1):(e.content.stopWatchToggle=!0,e.content.stopWatchReset=!1),e.updateAndSend(e.content)):"resetTimer"===Z.clickStatus&&(Z.clickStatus="",e.content.stopWatchToggle=!0,e.content.stopWatchReset=!0,e.updateAndSend(e.content))}void 0===e.content.zone&&("zoneimg"===e.content.shareType?e.content.zone="close":e.content.zone=void 0),Object(ha.useEffect)((function(){if(Z.dragCanceled=!0,(e.content.size[0]<80||e.content.size[1]<80)&&u([e.content.size[0]+(80-e.content.size[0]),e.content.size[1]+(80-e.content.size[1])]),Pe(),e.content.showStopWatch&&!1===fe&&!1===be?Z.intervalStep=window.setInterval((function(){ye((function(e){return e+10}))}),10):be?(ye(0),window.clearInterval(Z.intervalStep)):window.clearInterval(Z.intervalStep),"img"!==e.content.shareType){window.clearTimeout(Z._timer);var t=setTimeout((function(){clearTimeout(t),!0!==E&&(kp=!1,P(!1))}),2)}return ke.a.isEqual(l,e.content.size)||u(ke.a.cloneDeep(e.content.size)),ke.a.isEqual(o,e.content.pose)||a(ke.a.cloneDeep(e.content.pose)),function(){window.clearInterval(Z.intervalStep)}}),[e.content,e.content.showStopWatch,e.content.stopWatchToggle]),Object(ha.useLayoutEffect)((function(){Te()}),[o,l,E,V.rotation]);var Re=e.content.pinned,De=("0"+Math.floor(Oe/6e4%60)).slice(-2)+":"+("0"+Math.floor(Oe/1e3%60)).slice(-2)+":"+("0"+Oe/10%100).slice(-2),Be={onWheel:function(e){Z._down&&E&&(Z._down=!1,Z._item="DIV",window.clearTimeout(Z._timer),ze(0))},onDoubleClick:function(t){var n;Ln(e.content)&&(Ie(t),n=!X,J.setEditing(n?e.content.id:""))},onDrag:function(t){var n=t.down,i=t.delta,r=t.event,s=(t.xy,t.buttons);Ip=e.content.pinned,Bp=!0,Z._down=!1,Re||E||(null===r||void 0===r||r.stopPropagation(),n&&function(e,t,n){if(!Z.dragCanceled)if(2===t){var i;L((F+e[0]+e[1])%360),i=null!==n&&void 0!==n&&n.shiftKey||null!==n&&void 0!==n&&n.ctrlKey?F:F-F%15;var r=j(o.position,O(.5,l));o.position=j(o.position,A(T(o.orientation-i,r),r)),o.orientation=i,a(Object.assign({},o))}else{var s=V.rotateFromWindow(e),c=T(-o.orientation,s);o.position=j(o.position,c),a(Object.assign({},o))}}(i,s,r))},onDragStart:function(t){var n=t.event,i=t.currentTarget,a=(t.delta,t.buttons),r=t.xy;if("touchstart"!==(null===n||void 0===n?void 0:n.type)&&(Bp=!0,!E)){Y(!0),Z.buttons=a,Z.dragCanceled=!1,i instanceof Element&&n instanceof PointerEvent&&i.setPointerCapture(null===n||void 0===n?void 0:n.pointerId),Z._checkForRotation=!0,Z.onContent=!0,Z._down=!0,Z.downTime=(new Date).getSeconds(),Z.moveX=V.mouseOnMap[0],Z.moveY=V.mouseOnMap[1],window.clearTimeout(Z._timer),Z._clickX=r[0],Z._clickY=r[1],Z._zIndex=Number(e.content.zIndex);var s=setTimeout((function(){if(clearTimeout(s),Z._down&&!1===E&&!1===he&&!1===Rp&&0===zp){var e=A(V.mouseOnMap,o.position);Z.downPos=Number(e[1]),Z.downXPos=Number(e[0]),kp=!0,P(!0)}}),500)}},onDragEnd:function(t){var n=t.event,i=t.currentTarget;t.delta,t.buttons,t.xy;if(Bp=!1,Ip=!1,Z._down=!1,Z._item="DIV",window.clearTimeout(Z._timer),"DIV"===String(Object(null===n||void 0===n?void 0:n.target).nodeName)?ze(0):ze(1),console.log(E," ---- ",Ne()),!E)if(Ne())!function(){if(e.stores.contents.all.length>0)for(var t=0;t<e.stores.contents.all.length;t++)e.stores.contents.all[t].scaleRotateToggle&&e.stores.contents.all[t].id!==e.content.id&&(e.stores.contents.all[t].scaleRotateToggle=!e.stores.contents.all[t].scaleRotateToggle),!1===e.stores.contents.all[t].pinned&&e.stores.contents.all[t].id!==e.content.id&&(e.stores.contents.all[t].pinned=!0),e.stores.contents.updateByLocal(e.stores.contents.all[t])}();else{if(Y(!1),Z.dragCanceled||Pe(),Z.dragCanceled=!1,i instanceof Element&&n instanceof PointerEvent&&i.releasePointerCapture(null===n||void 0===n?void 0:n.pointerId),V.keyInputUsers.size||2!==Z.buttons||(B(!0),V.keyInputUsers.add("contentForm")),Z.buttons=0,e.content.scaleRotateToggle&&Z._checkForRotation)return Z._checkForRotation=!1,function(){var e=90;L((F+0+2)%360);var t=o.orientation+e,n=.5,i=j(o.position,O(n,l));o.position=j(o.position,A(T(o.orientation-t,i),i)),o.orientation=t,360===o.orientation&&(o.orientation=0);a(Object.assign({},o))}(),void Pe();var r=e.content.size[1]-(V.mouseOnMap[1]-e.content.pose.position[1]),s=e.content.size[0]-(e.content.size[0]-(V.mouseOnMap[0]-e.content.pose.position[0]));1===(null===n||void 0===n?void 0:n.detail)?r>5&&r<35&&s>e.content.size[0]/2-55&&s<e.content.size[0]/2+55?Z.clickStatus="toggleTimer":Z.clickStatus="single":2===(null===n||void 0===n?void 0:n.detail)&&(r>5&&r<35&&s>e.content.size[0]/2-55&&s<e.content.size[0]/2+55?Z.clickStatus="resetTimer":(Z.clickStatus="double",Z.pingX=K.local.mouse.position[0]-K.local.pose.position[0],Z.pingY=K.local.mouse.position[1]-K.local.pose.position[1])),Z.clickEnter=!0;var c=setTimeout((function(){clearTimeout(c),Z.clickEnter&&(Z.clickEnter=!1,Me())}),220)}},onMove:function(e){var t=e.event,n=e.xy;if(!E){"mousemove"===(null===t||void 0===t?void 0:t.type)&&!0===!c()?Z.isMoved=!0:Z.isMoved=!1;var i=A([n[0],n[1]],o.position);Z.downPos=Number(i[1]),Z.downXPos=Number(i[0]),V.setMouse(n)}},onPointerUp:function(e){X&&e.stopPropagation()},onPointerDown:function(e){X&&e.stopPropagation()},onTouchMove:function(e){Z.isMoved=!0,Z.movePos=Number(V.mouseOnMap[1]),Z.moveXPos=Number(V.mouseOnMap[0]),Z.moveXPos>=Z.downXPos-20&&Z.moveXPos<=Z.downXPos+20&&Z.movePos>=Z.downPos-20&&Z.movePos<=Z.downPos+20?(Z._down=!0,Z._checkForRotation=!0):(Z._down=!1,Z._checkForRotation=!1)},onMouseUp:function(e){if(X)e.stopPropagation();else{if(e.button>0)return;if(Z.onContent=!1,Z.isMoved=!1,Z.upTime=(new Date).getSeconds(),Z.upTime-Z.downTime<2&&"DIV"===String(Object(e.target).tagName)&&!1===E&&(!1===Z._down||E))return}},onMouseMove:function(t){Ip=e.content.pinned,E||(Z.movePos=Number(V.mouseOnMap[1]),Z.moveXPos=Number(V.mouseOnMap[0]),Z.moveXPos>=Z.downXPos-20&&Z.moveXPos<=Z.downXPos+20&&Z.movePos>=Z.downPos-20&&Z.movePos<=Z.downPos+20?(Z._down=!0,Z._checkForRotation=!0):(Z._down=!1,Z._checkForRotation=!1))},onMouseOver:function(e){Bp=!0,Z._onContentForEdit=!0,Z._item=String(Object(e.target).tagName),window.clearTimeout(Z._timer)},onMouseOut:function(e){E||(Bp=!1,Z._onContentForEdit=!1,Z.onContent=!1,Ip=!1)},onTouchStart:function(t){X&&t.stopPropagation();var n=t.touches[0];if(Bp=!0,!E){Y(!0),Z.dragCanceled=!1,Z.isMoved=!1;var i=A([n.clientX,n.clientY],o.position);Z.downPos=Number(i[1]),Z.downXPos=Number(i[0]),V.setMouse([n.clientX,n.clientY]),Z._checkForRotation=!0,Z.onContent=!0,Z._down=!0,Z.downTime=(new Date).getSeconds(),Z.moveX=V.mouseOnMap[0],Z.moveY=V.mouseOnMap[1],window.clearTimeout(Z._timer),Z._clickX=n.clientX,Z._clickY=n.clientY,Z._zIndex=Number(e.content.zIndex);var a=setTimeout((function(){clearTimeout(a);var e=fp();if(!1===E&&!1===ge&&!1===Rp&&0===zp){if(e)return;var t=A(V.mouseOnMap,o.position);Z.downPos=Number(t[1]),Z.downXPos=Number(t[0]),kp=!0,P(!0)}}),500)}},onTouchEnd:function(t){Z._down=!1,Bp=!1,Z.isMoved=!1;var n=t.changedTouches[0],i=document.elementFromPoint(n.clientX,n.clientY);zp++;var o=setTimeout((function(){clearTimeout(o),2===zp&&(Z.clickStatus="double",Z.pingX=K.local.mouse.position[0]-K.local.pose.position[0],Z.pingY=K.local.mouse.position[1]-K.local.pose.position[1]);var e=setTimeout((function(){clearTimeout(e),zp=0}),700)}),250);"IMG"===(null===i||void 0===i?void 0:i.nodeName)&&"contextUpload"===(null===i||void 0===i?void 0:i.id)?(Ee(),ne(!0)):"IMG"===(null===i||void 0===i?void 0:i.nodeName)&&"contextDelete"===(null===i||void 0===i?void 0:i.id)?(Ee(),ue(!0)):"IMG"===(null===i||void 0===i?void 0:i.nodeName)&&"contextMore"===(null===i||void 0===i?void 0:i.id)?(Ee(),V.keyInputUsers.add("contentForm"),B(!0)):"IMG"===(null===i||void 0===i?void 0:i.nodeName)&&"contextProx"===(null===i||void 0===i?void 0:i.id)?(Z._down=!1,"open"===e.content.zone?e.content.zone="close":"img"===e.content.shareType?void 0===e.content.zone?e.content.zone="close":e.content.zone=void 0:e.content.zone="open",e.updateAndSend(e.content),Ee()):"IMG"===(null===i||void 0===i?void 0:i.nodeName)&&"contextFlipBack"===(null===i||void 0===i?void 0:i.id)?(mi(e.content),e.updateAndSend(e.content),Ee()):"IMG"===(null===i||void 0===i?void 0:i.nodeName)&&"contextFlipFront"===(null===i||void 0===i?void 0:i.id)?(vi(e.content),e.updateAndSend(e.content),Ee()):"svg"===(null===i||void 0===i?void 0:i.nodeName)&&"contextScaleRotate"===(null===i||void 0===i?void 0:i.id)?(e.content.scaleRotateToggle=!e.content.scaleRotateToggle,e.content.pinned=!e.content.pinned,e.updateAndSend(e.content),Ee()):"svg"!==(null===i||void 0===i?void 0:i.nodeName)&&"path"!==(null===i||void 0===i?void 0:i.nodeName)&&"svg"!==(null===i||void 0===i?void 0:i.nodeName)&&"DIV"!==(null===i||void 0===i?void 0:i.nodeName)||"contextStopWatch"!==(null===i||void 0===i?void 0:i.id)?"DIV"===(null===i||void 0===i?void 0:i.nodeName)&&ze(0):(Z._down=!1,e.content.showStopWatch?(e.content.showStopWatch=!1,e.content.stopWatchToggle=!0,e.content.stopWatchReset=!0):(e.content.showStopWatch=!0,e.content.stopWatchToggle=!1,e.content.stopWatchReset=!1),e.updateAndSend(e.content),Ee())}};function Ne(){var t=!1;if(e.stores.contents.all.length>0)for(var n=0;n<e.stores.contents.all.length;n++)e.stores.contents.all[n].scaleRotateToggle&&e.stores.contents.all[n].id!==e.content.id&&(t=!0);return t}function ze(e){var t=setTimeout((function(){clearTimeout(t),kp=!1,P(!1)}),1e3*e)}var Fe=Object.assign({},Be);Fe.onDrag=function(t){var n;Re||V.keyInputUsers.has(e.content.id)||null===(n=Be.onDrag)||void 0===n||n.call(undefined,t)};var Le=Gp({props:e,pose:o,size:l,showTitle:E,showBorder:ae,pinned:e.content.pinned,dragging:G,editing:X,downPos:Z.downPos,downXPos:Z.downXPos,_down:Z._down,_title:q,pingX:Z.pingX,pingY:Z.pingY}),Ue=va.a.useRef(null),Qe=va.a.useRef(null),Ge=Object(oc.a)(Fe),Ye=Object(oc.a)(Be),He=Object(Ia.jsxs)("div",Object(wn.a)(Object(wn.a)({className:Le.rndContainer},Ge()),{},{children:[Object(Ia.jsxs)("div",{className:Le.content,ref:Ue,onFocus:function(){Fn(e.content)&&X&&V.keyInputUsers.add(e.content.id)},onBlur:function(){Fn(e.content)&&X&&V.keyInputUsers.delete(e.content.id)},children:[Object(Ia.jsx)(Kl,Object(wn.a)({},e)),Object(Ia.jsx)("div",{className:Le.nameContainerHolder,children:Object(Ia.jsx)("div",{className:Le.nameContainer,children:e.content.name})}),Object(Ia.jsx)("div",{className:Le.stopWatchTitleHolder,children:Object(Ia.jsx)("div",{className:Le.stopWatchTitle,children:De})}),Object(Ia.jsx)("div",{className:ge&&!1===E?Le.dashedInEdit:ae&&"close"===e.content.zone?Le.dashed:void 0}),Object(Ia.jsx)("div",{style:{position:"absolute",width:l[0],height:l[1],top:0,left:0},children:ge&&!1===E?Object(Ia.jsxs)("div",{children:[Object(Ia.jsx)("div",{style:{width:"40px",height:"40px",position:"absolute",left:"-10px",top:"-10px",backgroundColor:"#9e886c",borderRadius:"50%"},children:Object(Ia.jsx)(Ya.Icon,{icon:Pu.a,style:{width:Yo/1.5,height:Yo/1.5,color:"white",position:"absolute",left:"9px",top:"9px"}})}),Object(Ia.jsx)("div",{style:{width:"40px",height:"40px",position:"absolute",left:l[0]-30,top:"-10px",backgroundColor:"#9e886c",borderRadius:"50%"},children:Object(Ia.jsx)(Ya.Icon,{icon:Pu.a,style:{width:Yo/1.5,height:Yo/1.5,color:"white",position:"absolute",left:"8.5px",top:"8px"}})}),Object(Ia.jsx)("div",{style:{width:"40px",height:"40px",position:"absolute",left:l[0]-30+"px",top:l[1]-30+"px",backgroundColor:"#9e886c",borderRadius:"50%"},children:Object(Ia.jsx)(Ya.Icon,{icon:Pu.a,style:{width:Yo/1.5,height:Yo/1.5,color:"white",position:"absolute",left:"8px",top:"9px"}})}),Object(Ia.jsx)("div",{style:{width:"40px",height:"40px",position:"absolute",left:"-10px",top:l[1]-30+"px",backgroundColor:"#9e886c",borderRadius:"50%"},children:Object(Ia.jsx)(Ya.Icon,{icon:Pu.a,style:{width:Yo/1.5,height:Yo/1.5,color:"white",position:"absolute",left:"9px",top:"9px"}})}),Object(Ia.jsx)("div",{style:{width:"40px",height:"40px",position:"absolute",left:l[0]/2-20,top:l[1]/2-20,backgroundColor:"#9e886c",borderRadius:"50%"},children:Object(Ia.jsx)(xp.a,{style:{width:Yo,height:Yo,color:"white",position:"absolute",left:"2px",top:"3px"}})})]}):""})]}),Object(Ia.jsxs)("div",Object(wn.a)(Object(wn.a)({className:Le.titlePosition},Ye()),{},{children:[Object(Ia.jsx)("div",{className:Le.titleContainer,onMouseLeave:function(){},onContextMenu:function(){B(!0),V.keyInputUsers.add("contentForm")},children:Object(Ia.jsx)(Eu,Object(wn.a)(Object(wn.a)({open:D},e),{},{close:function(){B(!1),e.content.pinned&&(kp=!1,P(!1)),V.keyInputUsers.delete("contentForm"),e.updateAndSend(e.content)},anchorEl:Ue.current,anchorOrigin:{vertical:"top",horizontal:"right"}}))}),Object(Ia.jsxs)(ka.a,{open:le,onClose:function(){return ue(!1)},onExited:function(){return ue(!1)},keepMounted:!0,style:le?{zIndex:9999,transform:c()?"scale(2)":"scale(1)"}:{zIndex:-9999,transform:c()?"scale(2)":"scale(1)"},BackdropProps:{invisible:!0},children:[Object(Ia.jsx)(ya.a,{style:{userSelect:"none",fontSize:"25px",fontWeight:"bold"},children:ee("deleteMsg")+xe}),Object(Ia.jsxs)(xc.a,{children:[Object(Ia.jsx)(Oa.a,{variant:"contained",style:{textTransform:"none",marginTop:"0.4em",backgroundColor:"orange",height:"40px",fontSize:"20px",fontWeight:"bold"},onClick:function(e){ue(!1)},children:ee("deleteNo")}),Object(Ia.jsx)(Oa.a,{variant:"contained",style:{textTransform:"none",marginTop:"0.4em",backgroundColor:"#7ececc",height:"40px",fontSize:"20px",fontWeight:"bold"},onClick:function(t){var n;ue(!1),null===(n=e.onClose)||void 0===n||n.call(null,t)},children:ee("deleteYes")})]})]})]}))]}));return Object(Ia.jsxs)("div",{className:Le.container,style:{zIndex:e.content.zIndex},onContextMenu:function(e){e.stopPropagation(),e.preventDefault()},children:["roomimg"!==e.content.shareType&&"appimg"!==e.content.shareType?Object(Ia.jsx)(wc.a,{className:Le.rndCls,enableResizing:E?Hp:ge?Yp:Hp,disableDragging:Re,ref:H,onResizeStart:function(e){E||(Z.dragCanceled=!1,e.stopPropagation(),e.preventDefault(),b(l),S(o.position))},onResize:function(t,n,i,r,s){if(!E)if(t.stopPropagation(),t.preventDefault(),Z.dragCanceled)Te();else{var c=(h(V.matrix)+v(V.matrix))/2,l=[r.width/c,r.height/c],d=!1,p=[0,0];"bottomLeft"===n?(p[0]=-l[0],d=d||0!==l[0]):"topRight"===n&&(p[1]=-l[1],d=d||0!==l[1]),"topLeft"===n&&(p[1]=-l[1],d=d||0!==l[1]),d&&(o.position=j(w,p),a(Object.assign({},o)));var m=j(f,l);if(m[0]>80&&m[1]>80){if(e.content.originalSize[0]){var b=e.content.originalSize[0]/e.content.originalSize[1];m[0]>b*m[1]&&(m[0]=b*m[1]),m[0]<b*m[1]&&(m[1]=m[0]/b)}u(m)}else Pe()}},onResizeStop:function(){E||(Z.dragCanceled||Pe(),Z.dragCanceled=!1)},resizeHandleStyles:{topLeft:Wp,topRight:Wp,bottomLeft:Wp,bottomRight:Wp},dragHandleClassName:Le.cursorStyles,children:He}):"",Object(Ia.jsx)(Js,Object(wn.a)(Object(wn.a)({},e),{},{open:te,onClose:function(){return ne(!1)},cordX:o.position[0]+Z.downXPos,cordY:o.position[1]+Z.downPos,origin:"contextmenu",_type:"menu"})),Object(Ia.jsx)(ka.a,{open:E,onClose:function(){return P(!1)},onExited:function(){return P(!1)},keepMounted:!0,PaperProps:{style:{backgroundColor:"transparent",position:"absolute",boxShadow:"none",overflow:"hidden",left:Number(Z._clickX)-207,top:Number(Z._clickY)-170,zIndex:E?999:-999,transform:c()?"scale(2.5)":"scale(1)"}},BackdropProps:{invisible:!0},children:Object(Ia.jsx)(ya.a,{style:E?{transform:"scale(1.1)",transition:"0s ease-out"}:{transform:"scale(0)",transition:"0s ease-out"},children:Object(Ia.jsx)(Sr.a,{in:E,style:{transition:E?"500ms":"0ms"},children:Object(Ia.jsxs)("div",{className:Le.titleContainer_dialog,onMouseLeave:function(){},onContextMenu:function(){},children:[Object(Ia.jsx)(Ir.a,{placement:"top",title:Z._down?ee("ctMoveTop"):"",children:Object(Ia.jsx)("div",{className:Le.moveTopButton_dialog,onMouseUp:function(t){Ie(t),vi(e.content),e.updateAndSend(e.content),Ee()},onTouchStart:Ie,onMouseLeave:Ee,children:Object(Ia.jsx)("img",{id:"contextFlipFront",src:"data:image/png;base64,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",height:Yo,width:Yo,alt:""})})}),Object(Ia.jsx)(Ir.a,{placement:"top",title:Z._down?ee("ctMoveBottom"):"",children:Object(Ia.jsx)("div",{className:Le.moveBottomButton_dialog,onMouseUp:function(t){Ie(t),mi(e.content),e.updateAndSend(e.content),Ee()},onTouchStart:Ie,onMouseLeave:Ee,children:Object(Ia.jsx)("img",{id:"contextFlipBack",src:"data:image/png;base64,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",height:Yo,width:Yo,alt:""})})}),Object(Ia.jsx)(Ir.a,{placement:"top",title:Z._down?"close"===e.content.zone?ee("ctUnProximity"):ee("ctProximity"):"",children:Object(Ia.jsx)("div",{className:Le.prox_dialog,onMouseUp:function(t){Ie(t),Z._down=!1,"open"===e.content.zone?e.content.zone="close":"img"===e.content.shareType?void 0===e.content.zone?e.content.zone="close":e.content.zone=void 0:e.content.zone="open",e.updateAndSend(e.content),Ee()},onTouchStart:Ie,onMouseLeave:Ee,children:Object(Ia.jsx)("img",{id:"contextProx",src:(e.content.zone,jp),height:Yo,width:Yo,alt:""})})}),Object(Ia.jsx)("div",{className:Le.titleButton_dialog,onMouseUp:function(e){Ie(e),V.keyInputUsers.add("contentForm"),B(!0),Ee()},onTouchStart:Ie,onMouseLeave:Ee,ref:Qe,children:Object(Ia.jsx)("img",{id:"contextMore",src:Nr,height:Yo,width:Yo,alt:""})}),Object(Ia.jsx)("div",{className:Le.close_dialog,onMouseUp:function(e){Ie(e),Ee(),ue(!0)},onTouchStart:Ie,onMouseLeave:Ee,children:Object(Ia.jsx)("img",{id:"contextDelete",src:"data:image/png;base64,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",height:Yo,width:Yo,alt:""})}),Object(Ia.jsx)(Ir.a,{placement:"bottom",title:Z._down?ee("ctUploadZone"):"",children:Object(Ia.jsx)("div",{className:Le.uploadZone_dialog,onMouseUp:function(e){Ee(),ne(!0)},onTouchStart:Ie,onMouseLeave:Ee,children:Object(Ia.jsx)("img",{id:"contextUpload",src:Du,height:Yo,width:Yo,alt:""})})}),Object(Ia.jsx)(Ir.a,{placement:"top",title:Z._down?e.content.showStopWatch?ee("ctStopWatchOff"):ee("ctStopWatchOn"):"",children:Object(Ia.jsx)("div",{className:Le.stopWatch_dialog,onMouseUp:function(t){Ie(t),Z._down=!1,e.content.showStopWatch?(e.content.showStopWatch=!1,e.content.stopWatchToggle=!0,e.content.stopWatchReset=!0):(e.content.showStopWatch=!0,e.content.stopWatchToggle=!1,e.content.stopWatchReset=!1),e.updateAndSend(e.content),Ee()},onTouchStart:Ie,onMouseLeave:Ee,children:(e.content.showStopWatch,Object(Ia.jsx)(Op.a,{id:"contextStopWatch",style:{width:Yo,height:Yo,color:"white"}}))})}),Object(Ia.jsx)(Ir.a,{placement:"top",title:Z._down?e.content.scaleRotateToggle?ee("ctUnScaleRotate"):ee("ctScaleRotate"):"",children:Object(Ia.jsx)("div",{className:Le.scaleRotate_dialog,onMouseUp:function(t){Ie(t),e.content.scaleRotateToggle=!e.content.scaleRotateToggle,e.content.pinned=!e.content.pinned,e.updateAndSend(e.content),Ee()},onTouchStart:Ie,onMouseLeave:Ee,children:(e.content.scaleRotateToggle,Object(Ia.jsx)(wp.a,{id:"contextScaleRotate",style:{width:Yo,height:Yo,color:"white"}}))})}),Object(Ia.jsx)("div",{className:E?Le.dashedCircle_dialog:void 0})]})})})})]})},Lp={"&":{margin:"5px",borderRadius:"50%",width:"35px",height:"35px",padding:"3px"},"&:hover":{backgroundColor:"black",margin:"5px",padding:"3px",borderRadius:"50%"},"&:active":{margin:"5px",padding:"3px",borderRadius:"50%"}},Up={"&":{margin:"5px",borderRadius:"50%",width:"35px",height:"35px",padding:"3px"},"&:hover":{backgroundColor:"#B34700",margin:"5px",padding:"3px",borderRadius:"50%"},"&:active":{margin:"5px",padding:"3px",borderRadius:"50%"}},Qp={"&":{margin:"5px",borderRadius:"50%",width:"35px",height:"35px",padding:"3px"},"&:hover":{backgroundColor:"#9e886c",margin:"5px",padding:"3px",borderRadius:"50%"},"&:active":{margin:"5px",padding:"3px",borderRadius:"50%"}},Gp=Object(Ka.a)({container:function(e){var t=new DOMMatrix;return t.rotateSelf(0,0,e.pose.orientation),{display:e.props.hideAll?"none":"block",width:0,height:0,transform:t.toString(),position:"absolute"}},rndCls:function(e){return{borderRadius:e.showTitle?"0.5em 0.5em 0 0":"0 0 0 0",backgroundColor:e.props.content.noFrame?"rgba(0,0,0,0)":Cc.useTransparent?"rgba(200,200,200,0.5)":"rgba(200,200,200,1)",boxShadow:e.props.content.noFrame?void 0:Cc.useTransparent?"0.2em 0.2em 0.2em 0.2em rgba(0,0,0,0.4)":"0.2em 0.2em 0.2em 0.2em rgba(100,100,100,1)"}},rndContainer:function(e){return{width:"100%",height:"100%"}},dashed:function(e){return{position:e.props.content.showTitle?"absolute":"relative",width:e.size[0]+8,height:e.size[1]+8,borderWidth:2,borderStyle:"dashed",borderColor:"red",borderRadius:0,top:e.props.content.showTitle?"-5px":-e.size[1]-6+"px",left:"-6px"}},dashedInEdit:function(e){return{position:e.props.content.showTitle?"absolute":"relative",width:e.size[0]+8,height:e.size[1]+8,borderWidth:2,borderStyle:"dashed",borderColor:"#9e886c",borderRadius:0,top:e.props.content.showTitle?"-5px":-e.size[1]-6+"px",left:"-6px"}},titlePosition:function(e){return e.showTitle?{}:{width:0,heihgt:0,position:"absolute",top:0}},dashedCircle:function(e){return{position:"relative",width:200,height:200,borderWidth:2,borderStyle:"solid",borderColor:"#9e886c",borderRadius:"50%",opacity:.4,top:20,left:31,background:"radial-gradient(#ffffff, #ffffff, #ffffff, #9e886c, #9e886c)",zIndex:-9999}},dashedCircle_dialog:function(e){return{position:"relative",width:220,height:220,borderWidth:2,borderStyle:"solid",borderColor:"#9e886c",borderRadius:"50%",opacity:.4,top:15,left:35,background:"radial-gradient(#ffffff, #ffffff, #ffffff, #9e886c, #9e886c)",zIndex:-9999}},titleContainer_dialog:function(e){var t={display:"flex",width:"300px",height:"250px",backgroundColor:"transparent",position:"relative",cursor:"default"};return e.showTitle?(t.display="flex",t.position="relative",t.bottom="auto"):(t.display="flex",t.position="relative",t.bottom="auto",t.top="auto",t.left="auto"),t},titleContainer:function(e){var t={display:"flex",position:"relative",width:(e.pinned,350),height:(e.pinned,250),overflow:"hidden",userSelect:"none",userDrag:"none",top:"auto",left:"auto",bottom:"auto",transform:"scale(0)",backgroundColor:"transparent",transition:"0.3s ease-out",cursor:"default"};if(e.showTitle){t.display="flex",t.position="relative",t.bottom="auto";var n=Number(e.props.stores.map.matrix.a),i=1.2/n,o=165+2.7*n,a=0;a=n>=1&&n<5?380-6*n:5===n?382-5*n:n<.34?500-1*n:n>.34&&n<.4?465-1*n:400-1*n,t.top=e.downPos-o/2,t.left="img"===e.props.content.shareType?e.downXPos-180:e.downXPos-a/2,t.transform="scale("+i+")"}else t.display="flex",t.position="relative",t.bottom="auto",t.top="auto",t.left="auto",t.transform="scale(0)";return t},content:function(e){return{position:"absolute",top:(e.showTitle?Yo:0)-(e.editing?3:0),left:e.editing?-3:0,width:e.size[0],height:e.size[1],userDrag:"none",pointerEvents:e.dragging?"none":"auto",borderWidth:3,borderColor:"yellow",borderStyle:e.editing?"solid":"none",cursor:e.editing?"default":void 0,opacity:e.props.content.opacity}},note:function(e){return e.showTitle?Object(wn.a)({visibility:"hidden",whiteSpace:"pre",position:"relative",top:143,left:170},Lp):{visibility:"hidden"}},pin:function(e){return e.showTitle?Object(wn.a)({display:e.props.onShare?"none":"block",height:Yo,position:"absolute",textAlign:"center",top:128,left:86,whiteSpace:"pre",cursor:"default",background:e.pinned?"#ef4623":"#9e886c"},e.pinned?e._down?Lp:Up:e._down?Lp:Qp):{display:"none"}},pin_dialog:function(e){return e.showTitle?Object(wn.a)({display:e.props.onShare?"none":"block",height:Yo,position:"absolute",textAlign:"center",top:150,left:47,whiteSpace:"pre",cursor:"default",background:e.pinned?"#ef4623":"#9e886c"},e.pinned?e._down?Lp:Up:e._down?Lp:Qp):{display:"none"}},prox:function(e){return e.showTitle?Object(wn.a)({display:e.props.onShare?"none":"block",height:Yo,position:"relative",top:78,left:82,whiteSpace:"pre",cursor:"default",background:"close"===e.props.content.zone?"#ef4623":"#9e886c"},"close"===e.props.content.zone?e._down?Lp:Up:e._down?Lp:Qp):{display:"none"}},prox_dialog:function(e){return e.showTitle?Object(wn.a)({display:e.props.onShare?"none":"block",height:Yo,position:"absolute",top:128,left:38,whiteSpace:"pre",cursor:"default",background:"close"===e.props.content.zone?"#ef4623":"#9e886c"},"close"===e.props.content.zone?e._down?Lp:Up:e._down?Lp:Qp):{display:"none"}},titleButton:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,textAlign:"center",whiteSpace:"pre",position:"absolute",cursor:"default",top:127,left:230,background:"#9e886c"},Lp):{display:"none"}},titleButton_dialog:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,textAlign:"center",whiteSpace:"pre",position:"absolute",cursor:"default",top:128,left:205,background:"#9e886c"},Lp):{display:"none"}},uploadZone:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:175,left:160,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Lp):{display:"none"}},uploadZone_dialog:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:190,left:125,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Lp):{display:"none"}},stopWatch:function(e){return e.showTitle?Object(wn.a)({display:e.props.onShare?"none":"block",height:Yo,position:"absolute",textAlign:"center",top:36,left:110,whiteSpace:"pre",cursor:"default",background:e.props.content.showStopWatch?"#ef4623":"#9e886c"},e.props.content.showStopWatch?e._down?Lp:Up:e._down?Lp:Qp):{display:"none"}},stopWatch_dialog:function(e){return e.showTitle?Object(wn.a)({display:e.props.onShare?"none":"block",height:Yo,position:"absolute",textAlign:"center",top:76,left:37,whiteSpace:"pre",cursor:"default",background:e.props.content.showStopWatch?"#ef4623":"#9e886c"},e.props.content.showStopWatch?e._down?Lp:Up:e._down?Lp:Qp):{display:"none"}},scaleRotate_dialog:function(e){return e.showTitle?Object(wn.a)({display:e.props.onShare?"none":"block",height:Yo,position:"absolute",textAlign:"center",top:33,left:68,whiteSpace:"pre",cursor:"default",background:e.props.content.scaleRotateToggle?"#ef4623":"#9e886c"},e.props.content.showStopWatch?e._down?Lp:Up:e._down?Lp:Qp):{display:"none"}},uploadImage:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:190,left:186,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Lp):{display:"none"}},moveTopButton:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:18,left:158,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Lp):{display:"none"}},moveTopButton_dialog:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:14,left:120,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Lp):{display:"none"}},moveBottomButton:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:35,left:206,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Lp):{display:"none"}},moveBottomButton_dialog:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,position:"absolute",textAlign:"center",top:32,left:174,whiteSpace:"pre",cursor:"default",background:"#9e886c"},Lp):{display:"none"}},copyClipButton:function(e){return e.showTitle?Object(wn.a)({display:"block",height:Yo,position:"absolute",top:"0px",left:"185px",whiteSpace:"pre",cursor:"default",background:"#9e886c"},Lp):{display:"none"}},edit:function(e){return e.showTitle?Object(wn.a)({display:e.props.onShare||!Ln(e.props.content)?"none":"block",height:Yo,whiteSpace:"pre",cursor:"default",background:"#9e886c",position:"absolute",top:147,left:217},Lp):{display:"none"}},type:function(e){return Object(wn.a)({display:e.showTitle?"block":"none",height:Yo,position:"absolute",top:105,left:50,background:"#9e886c"},Lp)},close:function(e){return Object(wn.a)({visibility:e.showTitle?"visible":"hidden",position:"absolute",textAlign:"left",top:78,left:234,right:0,margin:0,padding:0,height:Yo,borderRadius:"0 0.5em 0 0",cursor:"default",background:"#9e886c"},Lp)},close_dialog:function(e){return Object(wn.a)({visibility:e.showTitle?"visible":"hidden",position:"absolute",textAlign:"left",top:76,left:205,right:0,margin:0,padding:0,height:Yo,borderRadius:"0 0.5em 0 0",cursor:"default",background:"#9e886c"},Lp)},nameContainerHolder:function(e){return{display:e._title&&""!==e.props.content.name?"block":"none",fontWeight:"bold",fontSize:"1.2em",width:(0===e.pose.orientation||e.pose.orientation,e.size[0]),height:(0===e.pose.orientation||e.pose.orientation,e.size[1]),padding:5,backgroundColor:"#eab67600",textAlign:"center",borderRadius:2,alignContent:"center",position:"absolute",bottom:5,transform:0===e.pose.orientation?"rotate(0deg)":90===e.pose.orientation?"rotate(-90deg)":180===e.pose.orientation?"rotate(-180deg)":270===e.pose.orientation?"rotate(-270deg)":"rotate(0deg)",left:0===e.pose.orientation||180===e.pose.orientation?-5:270===e.pose.orientation?(e.size[0]-e.size[1])/2-10:(e.size[1]-e.size[0])/2,top:0===e.pose.orientation?0:180===e.pose.orientation?-7:-5,transformOrigin:"middle"}},nameContainer:function(e){return{display:e._title&&""!==e.props.content.name?"block":"none",fontWeight:"bold",fontSize:"1.2em",width:24*e.props.content.name.length+"px",height:"20",marginBottom:5,marginLeft:0===e.pose.orientation||180===e.pose.orientation?(e.size[0]-24*e.props.content.name.length)/2-3+"px":(e.size[0]-24*e.props.content.name.length)/2-5+"px",marginTop:-40,padding:5,backgroundColor:"#7ececc",textAlign:"center",borderRadius:2,overflow:"hidden",alignContent:"center",position:"relative",bottom:5}},stopWatchTitleHolder:function(e){return{display:e.props.content.showStopWatch?"block":"none",fontWeight:"bold",fontSize:"1.2em",width:(0===e.pose.orientation||e.pose.orientation,e.size[0]),height:(0===e.pose.orientation||e.pose.orientation,e.size[1]),padding:5,backgroundColor:"#eab67600",textAlign:"center",borderRadius:2,alignContent:"center",position:"absolute",bottom:5,transform:0===e.pose.orientation?"rotate(0deg)":90===e.pose.orientation?"rotate(-90deg)":180===e.pose.orientation?"rotate(-180deg)":270===e.pose.orientation?"rotate(-270deg)":"rotate(0deg)",left:0===e.pose.orientation||180===e.pose.orientation?-5:270===e.pose.orientation?(e.size[0]-e.size[1])/2-10:(e.size[1]-e.size[0])/2,top:0===e.pose.orientation?0:180===e.pose.orientation?-7:-5,transformOrigin:"middle"}},stopWatchTitle:function(e){return{display:e.props.content.showStopWatch?"block":"none",fontWeight:"bold",fontSize:"1.2em",width:"90px",height:"20px",marginLeft:0===e.pose.orientation||180===e.pose.orientation?(e.size[0]-90)/2-3+"px":(e.size[0]-90)/2-5+"px",marginTop:0===e.pose.orientation||180===e.pose.orientation?e.size[1]-30:e.size[0]-30,marginBottom:"5px",padding:5,backgroundColor:"#EEDC82",textAlign:"center",borderRadius:2,overflow:"hidden",alignContent:"center",position:"relative",bottom:0}},PingLocation:function(e){return{display:"block",height:Yo,position:"absolute",textAlign:"center",top:e.pingY-25,left:e.pingX-17,whiteSpace:"pre"}},PingLocationHide:function(e){return{display:"none",height:Yo,position:"absolute",textAlign:"center",top:e.pingY-25,left:e.pingX-17,whiteSpace:"pre"}},cursorStyles:{cursor:"auto"}}),Yp={bottom:!1,bottomLeft:!0,bottomRight:!0,left:!1,right:!1,top:!1,topLeft:!0,topRight:!0},Hp={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},Wp={width:"40px",height:"40px",color:"white",borderRadius:"50%",cursor:"auto"};Fp.displayName="RndContent";var Jp=function(e){return{onClose:function(t){Go("RndContent onClose for ",e.content.id),t.stopPropagation(),e.stores.map.keyInputUsers.delete(e.content.id),e.stores.map.keyInputUsers.delete("contentForm"),e.stores.contents.removeByLocal(e.content.id)},updateAndSend:function(t){e.stores.contents.updateByLocal(Object.assign({},t))},updateOnly:function(t){e.stores.contents.updateLocalOnly(Object.assign({},t))}}},Vp=function(e){return Object(Ia.jsx)(Fp,Object(wn.a)(Object(wn.a)({},e),{},{autoHideTitle:!0},Jp(e)))};Vp.displayName="SharedContent";var Kp=n(176),Xp=n.n(Kp),Zp=["lineHeight","content"];function qp(e){var t;if((t=e)&&t.pose.position[0]!==Qn)return e}var _p=function(e){var t=cc({height:e.lineHeight,fontSize:e.fontSize}),n=va.a.useState(!1),o=Object(i.a)(n,2),a=o[0],r=o[1],s=va.a.useRef(null),l=(e.lineHeight,e.content,Object(be.a)(e,Zp)),u=void 0,d=e.stores.map,p=Object(pa.b)((function(){return e.content.ownerName})),h=Object(pa.b)((function(){return e.content.ownerURL})),v=Object(pa.b)((function(){var t=e.content.color;t.length||(t=null!==p&&void 0!==p&&p.length?L(p):[208,208,224]);var n=e.content.color;n.length||(n=U(t));var i=G(t);return[Y(t),Y(n),Y(i)]})),m="img"===e.content.shareType?"Image":"zoneimg"===e.content.shareType?"Chat Zone":"text"===e.content.shareType?"Text":"screen"===e.content.shareType?"Screen":"";return Object(Ia.jsx)(pa.a,{children:function(){var n,i,o=Hl(e.content.type,e.fontSize),f=H(e.content.ownerName);return null!==(n=e.content.color)&&void 0!==n&&n.length&&(f[0]=Y(e.content.color)),null!==(i=e.content.textColor)&&void 0!==i&&i.length&&(f[1]=Y(e.content.textColor)),a&&(u=qp(e.stores.contents.find(e.content.id))),Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)(Ir.a,{title:Object(Ia.jsxs)(Ia.Fragment,{children:[e.content.name,Object(Ia.jsx)("br",{}),e.content.ownerName]}),placement:"right",children:Object(Ia.jsxs)(Oa.a,{ref:s,className:t.line,style:{color:"#FFFFFF",margin:"1px 0 1px 10px",textTransform:"none",position:"relative",left:"5px",marginTop:"0px",top:"7px",height:c()?"75px":"40px"},onClick:function(){var t=ea.find(e.content.id);if(t)d.focusOn(t);else{ea.requestContent([e.content.id]);var n=Object(fe.c)((function(){var t=ea.find(e.content.id);t&&(d.focusOn(t),n())}))}},onContextMenu:function(){if(qp(ea.find(e.content.id)))r(!0),d.keyInputUsers.add("contentForm");else{ea.requestContent([e.content.id]);var t=Object(fe.c)((function(){qp(ea.find(e.content.id))&&(r(!0),d.keyInputUsers.add("contentForm"),t())}))}},children:[o,Object(Ia.jsxs)("div",{style:{position:"relative",color:"#FFFFFF",left:"5px",display:"flex",fontSize:c()?"2rem":"1rem"},children:[m,Object(Ia.jsx)("div",{style:{position:"relative",left:"5px",color:"#F7A76B"},children:""!==e.content.name?" ("+e.content.name+")":""})]}),""!==p?Object(Ia.jsx)("div",{style:{position:"absolute",width:"100%",right:c()?"25px":"20px",textAlign:"right",top:"5px"},children:Object(Ia.jsx)(vc,{border:!0,colors:v,size:c()?60:30,name:void 0!==p?p:"",avatarSrc:void 0!==h?h:""})}):""]})}),Object(Ia.jsx)(Eu,Object(wn.a)(Object(wn.a)(Object(wn.a)({},l),{},{content:u},Jp(e)),{},{open:a,close:function(){r(!1),d.keyInputUsers.delete("contentForm")},anchorEl:s.current,anchorOrigin:{vertical:"top",horizontal:"right"}}))]})}})},$p=function(e){var t=e.stores.contents,n=Object(pa.b)((function(){var e=Array.from(t.all);return e.sort((function(e,t){var n=e.name.localeCompare(t.name);return 0===n&&(n=e.ownerName.localeCompare(t.ownerName)),0===n&&(n=e.type.localeCompare(t.type)),0===n&&(n=e.id.localeCompare(t.id)),n})),e})),i=0;n.filter((function(e){return"appimg"!==e.shareType})).map((function(e,t){return"appimg"!==e.shareType?i++:0}));var o=Object(pa.b)((function(){return t.editing})),a=cc({height:e.lineHeight,fontSize:e.fontSize}),r=Object(pa.b)((function(){return e.stores.participants})),s=n.map((function(t){return"appimg"!==t.shareType?Object(Ia.jsx)(_p,Object(wn.a)(Object(wn.a)({content:t},e),{},{ap:r}),t.id):Object(Ia.jsx)(Ia.Fragment,{})})),l=te().t;return Object(Ia.jsxs)("div",{className:a.container,children:[Object(Ia.jsxs)("div",{className:a.title,style:{color:"#FFFFFF90",marginLeft:c()?"10px":"8px",padding:"10px",borderRadius:"5px",marginTop:"5px",userSelect:"text",fontWeight:"bold",fontSize:c()?"2rem":"1rem"},children:[l("Contents")," (",i.toString(),")",o?Object(Ia.jsxs)(Oa.a,{variant:"contained",size:"small",color:"secondary",style:{marginLeft:4,padding:3,height:"1.4rem",fontSize:"0.8"},onClick:function(){t.setEditing("")},children:[Object(Ia.jsx)(Xp.a,{style:{fontSize:"1rem"}}),"\xa0",l("shareEditEnd")]}):void 0]}),s]})};$p.displayName="ContentList";var eh=n(554),th=n(558),nh=["close"],ih=function(e){var t=te().t,n=Object(pa.b)((function(){var e,t,n=[],i=null===(e=Qo.sendTransport)||void 0===e||null===(t=e.appData)||void 0===t?void 0:t.stat;i&&n.push(i);var o=Array.from(Qo.remotePeers.values()).map((function(e){var t,n;return null===(t=e.transport)||void 0===t||null===(n=t.appData)||void 0===n?void 0:n.stat})).filter((function(e){return void 0!==e}));n.push.apply(n,Object(p.a)(o));for(var a=[],r={},s=[],c=function(){var e=u[l];for(var t in e)"turn"!==t&&"streams"!==t&&"localServer"!==t&&"remoteServer"!==t&&(r[t]?r[t]=r[t]+e[t]:r[t]=e[t]);if(e.remoteServer){var n=e.remoteServer.lastIndexOf(":"),i=e.remoteServer.substring(0,n),o=a.find((function(t){return t[0]===e.dir&&t[1].substring(0,n)===i}));if(o){var c=e.remoteServer.substring(n+1);o[1]+=",".concat(c)}else a.push([e.dir,e.remoteServer,e.turn]);s.push.apply(s,Object(p.a)(e.streams))}},l=0,u=n;l<u.length;l++)c();if(n.length){var d=r;d.fractionLost=d.fractionLost?d.fractionLost/n.length:void 0,d.jitter=d.jitter?d.jitter/n.length:void 0,d.quality=d.quality?d.quality/n.length:void 0,d.roundTripTime=d.roundTripTime?d.roundTripTime/n.length:void 0}var h=da.types.has("dataConnection")?void 0:config.bmRelayServer;return{transport:n.length?r:void 0,streams:s,servers:a,data:h}})),i=e.close,o=Object(be.a)(e,nh);return Object(Ia.jsx)(th.a,Object(wn.a)(Object(wn.a)({},o),{},{disablePortal:!1,style:{zIndex:2},children:Object(Ia.jsxs)(eh.a,{style:{background:"rgba(255,255,255,1)",padding:"0.4em"},children:[Object(Ia.jsxs)("div",{style:{overflowY:"auto"},children:[Object(Ia.jsx)("strong",{children:t("connectionStatus")}),Object(Ia.jsx)("br",{}),Object(Ia.jsxs)("div",{children:[" Data: ",n.data]}),0===n.servers.length?Object(Ia.jsx)("div",{children:"'No RTC server'"}):n.servers.map((function(e,t){return Object(Ia.jsxs)("div",{children:["RTC","send"===e[0]?"\u21d1":"\u21d3",":",e[1],e[2]?Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)("br",{}),"\xa0 via ",e[2]]}):void 0]},t)})),Object(Ia.jsx)(Wu,{stat:n.transport,streams:n.streams})]}),Object(Ia.jsx)(Oa.a,{variant:"contained",color:"primary",style:{textTransform:"none",marginTop:"0.4em"},onClick:i,children:t("emClose")})]})}))},oh=["lineHeight"],ah=["localId","remoteIds","lineHeight","fontSize"],rh=Object(Ka.a)({iconEmoticon:function(e){return{position:"absolute",width:.6*e.size,height:.6*e.size,left:-.2*e.size,top:-.2*e.size,pointerEvents:"none",transform:"scale(1)",transition:"0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)"}},iconEmoticonNone:function(e){return{position:"absolute",width:.6*e.size,height:.6*e.size,left:.1*e.size,top:0*e.size,pointerEvents:"none",transform:"scale(0)",transition:"0s ease-out"}}}),sh=function(e){var t=e.stores.map,n=Object(pa.b)((function(){return e.participant.information.name})),o=Object(pa.b)((function(){return e.participant.information.avatarSrc})),r=Object(pa.b)((function(){return function(e){var t=e.color;t.length||(t=e.name.length?L(e.name):[208,208,224]);var n=e.textColor;n.length||(n=U(t));var i=G(t);return[Y(t),Y(n),Y(i)]}(e.participant.information)})),s=Object(pa.b)((function(){return e.lineHeight})),l=cc({height:e.lineHeight,fontSize:e.fontSize}),u=va.a.useState(!1),d=Object(i.a)(u,2),p=d[0],h=d[1],v=va.a.useRef(null),m=(e.lineHeight,Object(be.a)(e,oh)),f=rh({size:c()?4*e.lineHeight:2.5*e.lineHeight}),b=Object(pa.b)((function(){return e.participant.quality})),g=Object(pa.b)((function(){var t,n=Array.from(e.stores.participants.remote.keys()).filter((function(t){return t!==e.stores.participants.localId})),o=Object(a.a)(n.entries());try{for(o.s();!(t=o.n()).done;){var r,s,c,l,u,d,p=Object(i.a)(t.value,1)[0];if(void 0===(null===(r=e.stores.participants.remote.get(n[p]))||void 0===r?void 0:r.closedZone))return"";if((null===(s=e.stores.participants.remote.get(n[p]))||void 0===s?void 0:s.id)===e.participant.id&&""!==(null===(c=e.stores.participants.remote.get(n[p]))||void 0===c||null===(l=c.closedZone)||void 0===l?void 0:l.name))return" ("+(null===(u=e.stores.participants.remote.get(n[p]))||void 0===u||null===(d=u.closedZone)||void 0===d?void 0:d.name)+")"}}catch(h){o.e(h)}finally{o.f()}})),j=Object(pa.b)((function(){var t,n=Array.from(e.stores.participants.remote.keys()).filter((function(t){return t!==e.stores.participants.localId})),o=Object(a.a)(n.entries());try{for(o.s();!(t=o.n()).done;){var r,s,c,l,u=Object(i.a)(t.value,1)[0];if(""===(null===(r=e.stores.participants.remote.get(n[u]))||void 0===r?void 0:r.trackStates.emoticon))return"";if((null===(s=e.stores.participants.remote.get(n[u]))||void 0===s?void 0:s.id)===e.participant.id&&""!==(null===(c=e.stores.participants.remote.get(n[u]))||void 0===c?void 0:c.trackStates.emoticon))return null===(l=e.stores.participants.remote.get(n[u]))||void 0===l?void 0:l.trackStates.emoticon}}catch(d){o.e(d)}finally{o.f()}})),A=Object(pa.b)((function(){return e.stores.participants.local.trackStates.emoticon})),O=Object(pa.b)((function(){var t,n,i;return void 0!==(null===(t=e.stores.participants.local.zone)||void 0===t?void 0:t.name)&&""!==(null===(n=e.stores.participants.local.zone)||void 0===n?void 0:n.name)?" ("+(null===(i=e.stores.participants.local.zone)||void 0===i?void 0:i.name)+")":""}));function y(){if(e.participant.physics.located)t.focusOn(e.participant);else{config.bmRelayServer&&Qo.dataConnection.pushOrUpdateMessageViaRelay(Rn.REQUEST_PARTICIPANT_STATES,[e.participant.id]);var n=Object(fe.c)((function(){e.participant.physics.located&&(t.focusOn(e.participant),n())}))}}function x(){if(e.participant.physics.located)h(!0),t.keyInputUsers.add("participantList");else{config.bmRelayServer&&Qo.dataConnection.pushOrUpdateMessageViaRelay(Rn.REQUEST_PARTICIPANT_STATES,[e.participant.id]);var n=Object(fe.c)((function(){e.participant.physics.located&&(h(!0),t.keyInputUsers.add("participantList"),n())}))}}return Object(Ia.jsxs)(Ia.Fragment,{children:[Object(Ia.jsx)(Ir.a,{title:Object(Ia.jsx)("span",{style:{fontSize:c()?"2rem":"1rem"},children:"".concat(e.participant.information.name," (").concat(e.participant.id,")")}),placement:"right",children:Object(Ia.jsxs)("div",{className:l.outer,style:{margin:"1px 0 1px 10px",position:"relative",left:"5px",marginTop:"0px",top:"7px"},children:[Object(Ia.jsxs)(wr.a,{style:{margin:0,padding:0,marginTop:"5px",marginLeft:c()?"10px":"5px"},onClick:y,onContextMenu:x,children:[Object(Ia.jsx)(vc,{border:!0,colors:r,size:c()?3.2*s:2*s,name:n,avatarSrc:o}),Object(Ia.jsx)("img",{src:e.stores.participants.localId===e.participant.id?"smile"===A?Sd:"hand"===A?Td:"clap"===A?kd:void 0:"smile"===j?Sd:"hand"===j?Td:"clap"===j?kd:void 0,className:e.stores.participants.localId===e.participant.id?""===A?f.iconEmoticonNone:f.iconEmoticon:""===j?f.iconEmoticonNone:f.iconEmoticon,alt:""})]}),Object(Ia.jsxs)(Oa.a,{className:l.line,ref:v,style:{color:"#FFFFFF",textTransform:"none",marginLeft:"10px",marginTop:"10px",fontWeight:"bold",fontSize:c()?"2rem":"1rem",height:"30px"},onClick:y,onContextMenu:x,children:[n,Object(Ia.jsx)("div",{style:{color:"#EDA741",letterSpacing:"0px",position:"relative",marginLeft:"5px",fontSize:c()?"1.5rem":"1rem"},children:e.stores.participants.localId===e.participant.id?O:g})]}),Object(Ia.jsx)("div",{style:{position:"absolute",width:"10px",height:"10px",right:c()?"60px":"40px",marginTop:"5px"},children:void 0!==b&&b>80?Object(Ia.jsx)("img",{width:c()?"60px":"40px",height:c()?"60px":"40px",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAABoklEQVR4nO3asc3TUBSA0RvEIP8a6TwKO2QAYIDswCaYKi0jZAQ2MBUSrSOC88E5jRs/+Uqf/Ipnn7ZtG5reHT0AjxMvTLww8cLECxMvTLww8cLECxMvTLww8cLECxMvTLww8cLECxMvTLww8cLECxMvTLww8cLECxMvTLww8cLECxMvTLyw90cPcLTrbXmbmbcdS35czuv350yzz38fb2Y+zMzHHfd/m5nlKZPsZNsMEy9MvDDxwsQLEy9MvDDxwsQLEy9MvLB/4mzzeluWmfm6Z83lvJ6eM83f480LEy9MvDDxwsQLEy9MvDDxwsQLEy9MvDDxwl7qYPp6Wz7tXPLlcl7vTxgl4aXizb4/l2dm1pm5//kxGmybYeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4Ya/2Jf3zzvvvv133rv1lffCZhztt23b0DDzIthkmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKF/QQEgh1Eo89xKgAAAABJRU5ErkJggg==",draggable:!1,style:{userSelect:"none"},alt:""}):void 0!==b&&b<80&&b>50?Object(Ia.jsx)("img",{width:c()?"60px":"40px",height:c()?"60px":"40px",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAABp0lEQVR4nO3csXETURRA0bfYEVUQ0QajCtyCW6ETWnAFVgP0QEYBRASedWAC0m8Q2mvOSZTojd7MHf3g70jbvu9D07trL8DriRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXph4YeKFiRcmXtjttRe4pm3bbmbm/crMvu8/LrTOsv863ryE+7g48/USi7yGYzNMvDDxwsQLEy9MvDDxwsQLEy9MvDDxwt7E3ebTw2n13+9ON3eP50vs8i/55oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhhh7mYfno43c/Mh4WR81u4XP4Th4k3M/cz82lx5vz31+hwbIaJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oUd6Un6l1l7Mv77ez8vfta3X68/Z+b74uxhbPu++rtEjsKxGSZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oWJFyZemHhh4oU9A1m1HKAM8GK/AAAAAElFTkSuQmCC",draggable:!1,style:{userSelect:"none"},alt:""}):Object(Ia.jsx)("img",{width:c()?"60px":"40px",height:c()?"60px":"40px",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAABqElEQVR4nO3ZMUrFQBRG4X9EtLIRGwtL3aa+nbgUN+AGtAlY2Nk8EF4h18YN3PBicvR8TZoZcuGQKSajqiKmk7UH0HzGAzMemPHAjAdmPDDjgRkPzHhgxgMzHpjxwIwHZjww44EZD8x4YMYDMx6Y8cCMB2Y8MOOBGQ/MeGDGAzMemPHAjAdmPDDjgZ2uPcDaxhhnSc4bW76q6nOpeTr+fbwkV0muG+v3SV4WmqXFYxPMeGDGAzMemPHAjAdmPDDjgRkPzHhgxgP7E3ebY4yLJHedPVX1vNA4v8YvD8x4YMYDMx6Y8cCMB2Y8MOOBGQ/MeGDGAzMe2KYupj9ubh+aWx4v316nBUZB2FS8JPfN9U9JpuOPweCxCWY8MOOBGQ/MeGDGAzMemPHAjAdmPDDjgRkPzHhgxgMzHpjxwIwHtrU/6bvm+unneUjyPvOd++b6w8z3HN2oqrVn0Ewem2DGAzMemPHAjAdmPDDjgRkPzHhgxgMzHpjxwIwHZjww44EZD8x4YMYDMx6Y8cCMB2Y8MOOBGQ/MeGDGAzMemPHAjAdmPDDjgRkP7BvKkh4pxeVM2gAAAABJRU5ErkJggg==",draggable:!1,style:{userSelect:"none"},alt:""})})]})}),e.participant.id===e.stores.participants.localId?Object(Ia.jsx)(td,{stores:e.stores,open:p,close:function(){h(!1),t.keyInputUsers.delete("participantList")},anchorEl:v.current,anchorOrigin:{vertical:"top",horizontal:"right"}}):Object(Ia.jsx)(np,Object(wn.a)(Object(wn.a)({},m),{},{open:p,close:function(){h(!1),t.keyInputUsers.delete("participantList")},participant:e.stores.participants.remote.get(e.participant.id),anchorEl:v.current,anchorOrigin:{vertical:"top",horizontal:"right"}}))]})},ch=function(e){var t=va.a.useState(!1),n=Object(i.a)(t,2),o=n[0],a=n[1],r=e.stores.participants,s=cc({height:e.lineHeight,fontSize:e.fontSize}),l=e.localId,u=e.remoteIds,d=e.lineHeight,p=e.fontSize,h=Object(be.a)(e,ah),v=Object(wn.a)({lineHeight:d,fontSize:p},h);u.sort((function(e,t){var n=r.remote.get(e),i=r.remote.get(t),o=n.information.name.localeCompare(i.information.name,void 0,{sensitivity:"accent"});return 0===o&&(o=(n.information.avatarSrc||"").localeCompare(i.information.avatarSrc||"",void 0,{sensitivity:"accent"})),o}));var m=u.map((function(e){return Object(Ia.jsx)(sh,Object(wn.a)({participant:r.remote.get(e)},v),e)})),f=Object(Ia.jsx)(sh,Object(wn.a)({participant:r.local},v),l),b=va.a.useRef(null);return Object(Ia.jsxs)("div",{className:s.container,children:[Object(Ia.jsxs)("div",{className:s.title,style:{color:"#FFFFFF90",marginLeft:c()?"14px":"8px",padding:"10px",borderRadius:"5px",marginTop:"5px",userSelect:"text",fontWeight:"bold",fontSize:c()?"2rem":"1rem"},ref:b,onClick:function(){a(!0)},children:[sessionStorage.getItem("room")," (",(r.remote.size+1).toString(),")"]}),Object(Ia.jsx)(ih,Object(wn.a)(Object(wn.a)({open:o,close:function(){a(!1)}},h),{},{anchorEl:b.current})),f,m]})};ch.displayName="ParticipantList";var lh=va.a.memo((function(e){var t=Object(pa.b)((function(){return e.stores.participants.localId})),n=Object(pa.b)((function(){return Array.from(e.stores.participants.remote.keys())}));return Object(Ia.jsx)(ch,Object(wn.a)(Object(wn.a)({},e),{},{localId:t,remoteIds:n}))})),uh={lineHeight:20,fontSize:16};var dh=Object.assign({},uh),ph=function(e){var t=sc(),n=Object(ha.useState)(1),o=Object(i.a)(n,2),a=o[0],r=o[1],s=Object(pa.b)((function(){return e.stores.contents.all})),c=Object(oc.a)({onPinch:function(e){var t=Object(i.a)(e.da,2),n=t[0],o=t[1],s=(e.origin,e.event,e.memo);if(void 0===s)return[n,o];var c=Object(i.a)(s,1)[0];return function(e){Object.assign(dh,uh),dh.fontSize*=e,dh.lineHeight*=e,r(e)}(function(e,t){var n=e*t;return n>4?4:n<.5?.5:n}(a,n>10?n/c:n<-10?c/n:1+(n-c)/10)),[n,o]}},{eventOptions:{passive:!1}}),l=Object(pa.b)((function(){return Wh})),u=Object(pa.b)((function(){return Jh}));return Object(Ia.jsx)("div",Object(wn.a)(Object(wn.a)({},c()),{},{children:"chat"===e.type?Object(Ia.jsxs)(ma.a,{split:"horizontal",defaultSize:"50%",resizerClassName:t.resizerHorizontal,paneStyle:{overflowY:"auto",overflowX:"hidden",width:"100%",minWidth:"280px"},children:[Object(Ia.jsx)(lh,Object(wn.a)(Object(wn.a)({},e),dh)),Object(Ia.jsx)(yc,Object(wn.a)(Object(wn.a)({},e),dh))]}):"content"===e.type?Object(Ia.jsx)(ma.a,{split:"horizontal",defaultSize:"100%",resizerClassName:t.resizerHorizontal,paneStyle:{overflowY:"auto",overflowX:"hidden",width:"100%",minWidth:"280px"},children:Object(Ia.jsx)($p,Object(wn.a)(Object(wn.a)({},e),dh))}):Object(Ia.jsx)(Ia.Fragment,{children:s.filter((function(e){return"appimg"===e.shareType})).map((function(e){return l===e.type&&-2===u?Object(Ia.jsx)(ma.a,{split:"horizontal",defaultSize:"100%",resizerClassName:t.resizerHorizontal,paneStyle:{overflowY:"auto",overflowX:"hidden",width:"100%",minWidth:"280px"},children:Object(Ia.jsx)("iframe",{src:e.url,title:e.type,allowTransparency:!0,frameBorder:0,style:{width:"100%",height:"100%"}})}):Object(Ia.jsx)(Ia.Fragment,{})}))})}))};ph.displayName="LeftBar";var hh=Object(Ka.a)({videoContainer:{height:"100%",width:"100%",backgroundColor:"none"},video:{marginLeft:"auto",marginRight:"auto",display:"block",width:"100%"}}),vh=function(e,t){e.srcObject=t,e.autoplay=!0},mh=function(e){var t=hh(),n=Object(pa.b)((function(){return e.stores.contents.mainScreenStream})),o=Object(ha.useRef)(null);Object(ha.useEffect)((function(){o&&o.current&&vh(o.current,n||null)}),[n]);var a=Object(ha.useState)(),r=Object(i.a)(a,1)[0],s=Object(ha.useRef)({});s.current.debugVideos=r;var c=Object(ha.useRef)([]);if(e.showAllTracks){for(;c.current.length<(r?r.length:0);)c.current.push(va.a.createRef());c.current.forEach((function(e,t){e.current&&r&&t<r.length&&vh(e.current,r[t].stream)}))}Object(ha.useEffect)((function(){var e;null!==(e=s.current)&&void 0!==e&&e.interval&&(clearInterval(s.current.interval),s.current.interval=void 0)}),[e.showAllTracks]);var l=e.showAllTracks&&r?r.map((function(e,t){return Object(Ia.jsxs)("div",{style:{display:"inline-block",position:"relative",verticalAlign:"top"},children:[Object(Ia.jsx)("video",{style:{width:300},ref:c.current[t]}),Object(Ia.jsx)("div",{style:{position:"absolute",left:0,top:0,color:e.color,whiteSpace:"pre-wrap"},children:e.label})]},t)})):void 0;return Object(Ia.jsxs)("div",{className:t.videoContainer,children:[Object(Ia.jsx)("video",{ref:o,className:t.video,style:{visibility:n?"visible":"hidden"}}),Object(Ia.jsx)("div",{style:{position:"absolute",left:0,top:0},children:l})]})};mh.displayName="MainScreen";var fh=function(e){var t=e.stores.participants,n=t.find(e.participantId),o=Object(pa.b)((function(){return n.mouse.position})),a=Object(pa.b)((function(){return n.information.name})),r=n.getColor(),s=Object(i.a)(r,1)[0];if(!o)return Object(Ia.jsx)("div",{});var c=e.participantId===t.localId,l=Object(Ia.jsx)("div",{style:{width:18,height:30,left:o[0],top:o[1],position:"absolute",pointerEvents:c?"none":"auto",zIndex:c?6e3:n.zIndex+4e3},children:Object(Ia.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 60 100",children:Object(Ia.jsx)("polygon",{points:"32,100 53,92 36,57 60,56 0,0 0,81 16,65 32,100",stroke:"black",fill:s,strokeWidth:"6"})})});return c?l:Object(Ia.jsx)(Ir.a,{title:a,children:l})},bh=function(e){return Object(Ia.jsx)(Bd,Object(wn.a)(Object(wn.a)({},e),{},{isLocal:!1,isPlayback:!0}))},gh=function(e){var t=Math.min(e.start[0],e.end[0]),n=Math.min(e.start[1],e.end[1]),i=Math.abs(e.start[0]-e.end[0]),o=Math.abs(e.start[1]-e.end[1]);return Object(Ia.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",left:t,top:n,width:i,height:o,pointerEvents:"stroke"},viewBox:"0, 0, ".concat(i,", ").concat(o),onClick:function(){e.stores.participants.yarnPhones.delete(e.remote),e.stores.participants.yarnPhoneUpdated=!0},children:Object(Ia.jsx)("line",{x1:e.start[0]-t,y1:e.start[1]-n,x2:e.end[0]-t,y2:e.end[1]-n,stroke:"black"})})},jh=function(e){var t=e.stores.participants,n=Object(pa.b)((function(){var e=Array.from(t.remote.values()).filter((function(e){return e.physics.located})),n=Array.from(e);n.push(t.local),n.sort((function(e,t){return e.pose.position[1]-t.pose.position[1]}));for(var i=0;i<n.length;++i)n[i].zIndex=i+1;return e})),i=Object(pa.b)((function(){return t.localId})),a=n.map((function(t){return Object(Ia.jsx)(up,{stores:e.stores,participant:t,size:ae},t.id)})),r=Object(Ia.jsx)(tp,{participant:t.local,size:ae,stores:e.stores},"local"),s=Object(pa.b)((function(){return Array.from(t.yarnPhones).map((function(n){var i=t.local.pose.position,o=t.remote.get(n);if(o){var a=o.pose.position;return Object(Ia.jsx)(gh,{start:i,end:a,remote:n,stores:e.stores},n)}}))})),c=Object(pa.b)((function(){return Array.from(t.playback.keys())})).map((function(n){return Object(Ia.jsx)(bh,{stores:e.stores,participant:t.playback.get(n),size:ae},n)})),l=Object(pa.b)((function(){return Array.from(t.remote.keys()).filter((function(e){return t.find(e).mouse.show}))})).map((function(t){return Object(Ia.jsx)(fh,{participantId:t,stores:e.stores},"M_".concat(t))})),u=Object(pa.b)((function(){return t.local.mouse.show}))?Object(Ia.jsx)(fh,{participantId:i,stores:e.stores},"M_local"):void 0;return null!==o.testBot?Object(Ia.jsx)("div",{}):Object(Ia.jsxs)("div",{style:{position:"absolute",zIndex:32767},children:[s,c,a,r,l,u]})};jh.displayName="ParticipantsLayer";var Ah=function(e){var t=e.stores.map;function n(e){(function(e,t){return new Promise((function(n,i){null!==e&&void 0!==e&&e.types.includes("Files")?function(){for(var o=Array.from(e.items),a=[],r=[],s=function(){var e=l[c],s=e.getAsFile();if("file"===e.kind&&s){var u=void 0;-1!==e.type.indexOf("image")?u=ai:"application/pdf"===e.type&&(u=ci),u&&u(s,t).then((function(e){e.name=s.name,a.push(e),a.length+r.length===o.length&&(a.length?n(a):i(r))})).catch((function(e){r.push(e),a.length+r.length===o.length&&(a.length?n(a):i(r))}))}else r.push("Creator not found.")},c=0,l=o;c<l.length;c++)s()}():null!==e&&void 0!==e&&e.types.includes("text/plain")?e.items[0].getAsString((function(e){ui(e,t,0,0,"").then((function(e){return n([e])})).catch(i)})):(console.error("Unhandled content types:",null===e||void 0===e?void 0:e.types),i("Unhandled content types:".concat(null===e||void 0===e?void 0:e.types)))}))})(e,t).then((function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;ea.shareContent(i)}}catch(o){n.e(o)}finally{n.f()}}))}Object(ha.useEffect)((function(){window.document.body.addEventListener("paste",(function(e){var i;i=e,ea.pasteEnabled&&0===t.keyInputUsers.size&&i.clipboardData&&(i.preventDefault(),n(i.clipboardData))}),{passive:!1}),window.document.body.addEventListener("drop",(function(e){var t;(t=e).preventDefault(),t.stopPropagation(),t.dataTransfer&&n(t.dataTransfer)}),{passive:!1}),window.document.body.addEventListener("dragover",(function(e){var t;e.preventDefault(),e.stopPropagation(),null!==(t=e.dataTransfer)&&void 0!==t&&t.dropEffect&&(e.dataTransfer.dropEffect="copy")}),{passive:!1})}),[]);var i=Object(pa.b)((function(){return ea.pasted}));return Object(Ia.jsx)(Fp,Object(wn.a)(Object(wn.a)({},e),{},{hideAll:""===i.type,content:i,onShare:function(e){i.zorder=Math.floor(Date.now()/Nn),i.pinned=!0,ea.addLocalContent(ke.a.cloneDeep(i)),ea.setPasted(ti())},onClose:function(e){ea.setPasted(ti()),e.stopPropagation()},updateAndSend:function(e){ea.setPasted(e)},updateOnly:function(e){ea.setPasted(e)}}))},Oh=["transparent"],yh=Object(Ka.a)({slContainer:{userDrag:"none",userSelect:"none"}}),xh=va.a.memo((function(e){var t=e.stores.contents,n=yh(),i=(e.transparent,Object(be.a)(e,Oh));return Object(Ia.jsxs)("div",{className:n.slContainer,children:[Object(Ia.jsx)(pa.a,{children:function(){var n=Array.from(t.all),o=e.transparent?n.filter((function(e){return!Un(e)})):n;return Object(Ia.jsx)(Ia.Fragment,{children:o.map((function(e){return Object(Ia.jsx)(Vp,Object(wn.a)({content:e},i),e.id)}))})}}),Object(Ia.jsx)(Ah,Object(wn.a)({},i))]})}),(function(e,t){return ke.a.isEqual(e.stores.contents.all,t.stores.contents.all)&&e.transparent===t.transparent}));xh.displayName="ShareLayer";var Ch=Object(Ka.a)({img:function(e){return e.transparent?{display:"none"}:{position:"absolute",top:-2500,left:-2500,backgroundColor:Y(e.fill),height:Ce,width:Ce}},logo:function(e){return e.transparent?{display:"none"}:{position:"absolute",top:0,right:0,bottom:0,left:0,margin:"auto",height:"10em",userDrag:"none",userSelect:"none",pointerEvents:"none"}}}),wh=function(e){var t=e.stores.roomInfo,n=Object(wn.a)({color:[0,0,0],fill:[0,0,0]},e);Object(pa.b)((function(){n.color=t.backgroundColor,n.fill=t.backgroundFill}));var i=Ch(n);return Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsx)("div",{className:i.img})}})};wh.displayName="Background";var Sh=function(e){return Object(Ia.jsxs)(gp,Object(wn.a)(Object(wn.a)({},e),{},{children:[Object(Ia.jsx)(wh,Object(wn.a)({},e)),Object(Ia.jsx)(xh,Object(wn.a)({},e)),Object(Ia.jsx)(jh,Object(wn.a)({},e))]}))};Sh.displayName="Map";var kh=n(343),Th=n.n(kh),Ih=n(344),Eh=n.n(Ih),Ph=n(188),Mh=n.n(Ph),Rh=n(187),Dh=n.n(Rh),Bh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAAER0lEQVR4nO2c0ZHbNhCGv8vk/ZgKrFTgSwVHVxClA6aDlOAS7ArCEnQVWOpA6cCuwGIFzAOoOVoWbYCkbvef229Gc/cgCDv4BGAJAbjr+55Ak1+sAwjmE/KECXnChDxhQp4wIU+YkCdMyBMm5AkT8oQJecKEPGFCnjAhT5iQJ0zIEybkCRPyhAl5woQ8YUKeMCFPmJAnTMgTJuQJE/KECXnChDxhQp4wIU+YX60DWIEKqIGH4e8GeHPlfV+Az8AeOA5/TzeP7obcCZ/Pa4At8OeCz3gCdkC7Qjwvjpq8CvhneN2v+Lkd8GF4yfRGJXlbUuNeGxLXoiN9Mdob1rEaCvIqUmMuGR5LOZC+LK57oXd5D6TEYs0hMpeOlAAdDerOwvOjwhY7cQz17kmJkUu89rwG+Nc6iBF/43Ae9CjPcqicwuUQ6k1eRXqQ9iTuTEdaAHCTxHib83b4FAcprp11EGM8yWuAR+sgfsIjjhIYL8Om5+HyEjfDp5eet/Zy1y25J8Vrjpeed0JHHqTeV1kH4eEnoYZ8cV9IScOJlLqvMUceSI8mFWlhIGft9J4Ud7tC/fPp+976tevzOPZ9X12UbTLLTtFcfF411JPDrn+5Nrr6sh42K+Br5nt/43qSsGdeDzyQeu8tYnoRrBOWOvN9B6YbqZ1Z91S501BfDvXMulfBWt6Dcf1LMY3fWl6d+b5Hphtqbto+VW5D/jBcz6x7FazllaTbLalhx2Vb4O3Mut8O5ccxbChbAjN9XLBOWOZU/kRajclN63/G+fHj/KhQ+rx5t0IMs1CU5w0zedbDZrCAkCdMyBPGWt5/xvUvxTR+a3nmv4ktxDR+a3l74/qXsres3Fqeq91YMzCN3/o5r2QF3yOv+leFE2nFpISPwDvWSxY60q8IpXE88crnPCjfTrcjzTVbUsMvoeP5UOb7GXGYYj1sninZw/I7aW0TUqN/WlDvO75NOnIbw8UeFg89D9K5u1ya0f974A/Ke2DH9+LeF5Qvifd2WO/DGO0dOWXuHen7vt9eKd9mlm377/fC1AV1n66Uf5V7WMY05J8Mmjr4Mb5c4IHnzbyfmb5EoPRgi5sTQ57kQdlmojWOINeUnY+Y2rRkgpc570xJBnlP6qkfKE8eqqHcJ/LFdUN8bvDW82De+byO1ANbfrzqsSENz6Xb6+N8XgEN80/Gni/LOfI8v21IjT9324SbeW6MV3mQhqgW2zMMrq/28CwP4jaIH+ItYbnkSBryStcdl3IY6nUrDvzLgzRvbYG/SPPZLelI81uNwA/F3ofNS853jzWse41V3D32wjTErX+y8sbUPC+LVVxfpTmf/NkT920G1igkLMEEIU+YkCdMyBMm5AkT8oQJecKEPGFCnjAhT5iQJ0zIEybkCRPyhAl5woQ8YUKeMCFPmJAnTMgTJuQJE/KECXnChDxhQp4wIU+YkCdMyBMm5AkT8oT5H16yz3SnsLABAAAAAElFTkSuQmCC",Nh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAAFYElEQVR4nO2c7XWjRhRA7+bkv7UVWB2sUoGVCuytIGwFdipYtoIoFYTtQFuBUQVRKgiqIHIFkx8PHRAGBAg086R3z+EYYRjmcDVvPtEH5xyGTn7ynQFjOCZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMSZPMT/7zkAP5kAE7IGV15wEgiZ5K+Ax398Dib+shIGmsDkr7Ue+MhESmuSlpf0HjmXeJJrkrSufn7zkIiBCkbcAlrSXpi2wK302eb4zkLMCXoH/aK/PyqXvkRsPnaHIy0r7f9EsMKl8vunSF4q8an3WJLAaOpcT5UcFIcn7UjnWJDAp7W8nyo8KPgT2TnqESCvzhffhcomEzJfJcxQwocmD7gK7Ms+3LTIyczWEEjbLJNSH0CGNkwj4l6IlmyAir4IQ5UG9wGhAOtUB7N+QEhjTr5sRIyM8KSG1cJ1zPrZFvp06L3IFyYlzl865rXMuy88tX1tH5px76pCHuObapafndrT5uGlSeYAr1y5y7kREW5rzmgfclfTE/dOaa9YjPo/Bm4+wWQ5X98Az8DfFNM+ycn7G6cbKOSMtD/n9Vz3SeSSAutOHvAR4qzl+h9RJr/RvWW6Bj0g9WZd2F56RL0q1+9HUl4wG3mc8PBb7KA8/TcwHpjt3Uvedw9YV9dqi4ZxsYP5G27zH7Xx7clIXZvmD2TvnZvn/Zq4QnbrjRsaydDwuXbPI0ziXtWv/MnRp8Ey2hdhJr7IFPlWOfUbqyNfK8Q1FnfkC/DFSHnZI/VzlBx67DqHLW/JeEEi9lvFeKsA3pF8G0i97GD9bR3zE08hNqJ30U9xRLw7gKzK5C9KoGNqA6Uo0cfqNhC4vG3jdGmn2Z0z/cL0NjmuQ9+eA6+4pQucaqZum4p6ipF+U0OWBPPwhoe+ZovESDUyjK15KX8gNlggZ9bg7I403ZCRkT3vj59ARn9Fcl3a9z+Xw2U9p2WZunH6ac8fjkKvS8b1z7sUVfcNy33FIJz9yl31GwcpbDnh4bRw60zMnAwF71z4YPXP9BV58sFpDnTcGCcfhc0ERKuP8uEP6hYfz+na+H0+fMjKX/rb02M4dn6yS1twjrjlvW/p/0vMeVvJyxm7BPdSkWVe6PlG0UrOR8zAqIctLkaGuMYk57pMNaVk2MWVfspaQ5YE87H9GTO+O6d7riydKt5FQ5c2QkucYt3SQpxcz7nsO3/GwADjUN2PXTDsb8JV2eVnP9OLBOTmDUEve1NM4IMNnTWT533mHdL7hqWETqrxQmJ/4/w6PP24QqryN7wx0JMLjEvpQ5UVMP4naxO70KYBMVaUT5uMkocrL8NQI4Lj+aqp7vxPAG0qhygOpS3yHz2rH+wey+Cm6fFbeE/J8HhRLGc6Z0+tLeQVa0IRc8kAaA9GF76nmbdvQ5cH0a1CqqHkBU4M8kNLXtRV4M2iRd8nwaSVvAlKGLQPsi9V5ExEz7hSRakLvKtSxQF6GnApv7x70RVvJAwlrY8+wH9igRBzoLHkHUsafOvoVz+OVfdBY8g5EjDd4/Ya8Ep2OlN5F0CwvY5zB4R0yHJaMkNZF0Rw2D6wZvuB1gyz/U1PPlbkGeUMHr39H+U/8aw6bBw5L2LvWfxvgF5SLg+uQB9J9mCOTpE3skEbJEkWjKG1cQ9isMkfqsfLSvi3vf01XPdco72a4lrB5k5g8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xZg8xfwPFgG9kH+DJH4AAAAASUVORK5CYII=",zh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAADY0lEQVR4nO3c7VEaURiG4dtM/ksH2oGkAkkFsYOQDkgHSQVqBdEOtAJJBcEOpIJIBeTHyw4fsyxLkN33WZ9rxnECBs54s2fPrgsn8/kc0/Sh7QHY/3M8YY4nzPGEOZ4wxxPmeMIcT5jjCXM8YY4nzPGEOZ4wxxPmeMIcT5jjCXM8YY4nzPGEOZ4wxxPmeMIcT5jjCXM8YY4nzPGEdSneALgDxovvg9ZG0pCTjrxLaAj8Krn9GxGyk7oQrwf83XLfbHF/J3Vh2ryquO+UDk+fH9sewJ7OWcZ6AF4Wt71LSvGGrO/Xrol92rulEq8H3JTcfkNsgXWcEy8AgFdiIfN64LhapbJgGQBPW+6bAmcV//czEW5zNTpbPO7ksKG1R2XB0q+4ryocbN9qT6m/1aakEu+Q5f6ACFXmjOoXRmoq8Q6xK47scWC2BUsPGLE8NhtTPuUZ+eI9AJcr/74kjuuk903Hkilen/VwhQvEl/THkmmfN2h7AGoyxZNdOLQlUzzbk+MJczxhjifM8YQ5njCVeIccRpQd+HeCSryLFp6zOM86AeaLrzGJjkdV4jVtRFwfc836C+eSRCfKM53bzKBHXB7xpeJnqq5Wa5TjrRuze4pOc5Lc0+bSHfX2rXfHHUZ9jheGwNcaP/cM/DjqSPbgaXO/cIOjjmRP3vLqhZsRkdPs78Dx6hqS8PpOx9vtlqTX0DhetSmJFiibHK/akGT7uVWOt90tcdCeluOVm5F4uiw4XrkRiafLQqZ4WZbiv0l0CqxKpnhZXumjtgdQV6Z4GdySZwbYKds7Y9sczIx4B22WGWCnbFvec4vPLbFIWZUt3ril55VZpKzKNm32gT8tPO8nhPZ1hWxb3oTYCpr0E8FwkG/Lg+qP7XhrjyS6oGhf2bY8iP3efQPP88zyQ3UkZYwHsfI75srzntjCpVaXm7LGeyV+uY9v/Lgz4DvJ/9RTV9Z4EL/cK+LD4aZv8Hj3xGo2zRXPh8q4YNlmSMSsupp505S4hOGGuHy9U5TireoTp7KKTzc6Jy5VL5b8k8XXS8PjapRqPCP3Ps92cDxhjifM8YQ5njDHE+Z4whxPmOMJczxhjifM8YQ5njDHE+Z4whxPmOMJczxhjifM8YQ5njDHE+Z4whxPmOMJczxhjifM8YT9AzPOgalOo8+wAAAAAElFTkSuQmCC",Fh={"&":{margin:"5px",borderRadius:"50%",width:c()?"100px":"45px",height:c()?"90px":"45px",textAlign:"center"}},Lh=Object(Ka.a)({emoticon:Object(wn.a)({height:50,position:"relative",cursor:"pointer",backgroundColor:"#9e886c",right:0},Fh),emoticonActive:Object(wn.a)({display:"block",height:50,position:"relative",cursor:"pointer",backgroundColor:"#ef4623",right:0},Fh),container:{position:"absolute",width:"30%",bottom:15,right:0,padding:0,outline:"none",pointerEvents:"none"},wrapper:{width:"100%"},wrapperInner:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-end"}}),Uh=Object(K.a)((function e(){Object(X.a)(this,e),this.timeoutOut=void 0,this.touched=!1})),Qh=function(e){var t=e.stores,n=t.map,o=t.participants,a=va.a.useState(!1),r=Object(i.a)(a,2),s=r[0],l=r[1],u=va.a.useState(!1),d=Object(i.a)(u,2),p=d[0],h=d[1],v=va.a.useState(!1),m=Object(i.a)(v,2),f=m[0],b=m[1],g=Object(ha.useRef)(new Uh).current,j=Object(ha.useRef)(null),A=Lh();function O(){return n.screenSize[1]-(n.mouse[1]-n.offset[1])<90}var y=Object(pa.b)(O);return Object(ha.useEffect)((function(){O()&&(g.touched=!0),function(e){if(e){var t;g.timeoutOut&&(clearTimeout(g.timeoutOut),g.timeoutOut=void 0),null===(t=j.current)||void 0===t||t.focus()}else g.timeoutOut||(g.timeoutOut=setTimeout((function(){g.timeoutOut=void 0}),500))}(y||!g.touched)}),[y,g.touched]),Object(ha.useEffect)((function(){var e=function(e){};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),va.a.useMemo((function(){var e=55;return Object(Ia.jsx)("div",{ref:j,className:A.container,children:Object(Ia.jsxs)(Ha.a,{in:!0,classes:A,children:[Object(Ia.jsx)(Mr,{size:c()?100:45,onClick:function(){!function(){o.local.emoticon="",b(!1),h(!1);var e=setTimeout((function(){clearTimeout(e),s?(o.local.emoticon="",l(!1)):(o.local.emoticon="smile",l(!0))}),100)}()},children:s?Object(Ia.jsx)("div",{className:A.emoticonActive,children:Object(Ia.jsx)("img",{src:Bh,style:{width:e,height:e,position:"relative",top:c()?"17px":"-5px",left:c()?"0px":"-5px",transform:c()?"scale(2)":"scale(1)"},alt:""})}):Object(Ia.jsx)("div",{className:A.emoticon,children:Object(Ia.jsx)("img",{src:Bh,style:{width:55,height:55,position:"relative",top:c()?"17px":"-5px",left:c()?"0px":"-5px",transform:c()?"scale(2)":"scale(1)"},alt:""})})}),Object(Ia.jsx)(Mr,{size:c()?100:45,onClick:function(){!function(){o.local.emoticon="",b(!1),l(!1);var e=setTimeout((function(){clearTimeout(e),p?(o.local.emoticon="",h(!1)):(o.local.emoticon="clap",h(!0))}),100)}()},children:p?Object(Ia.jsx)("div",{className:A.emoticonActive,children:Object(Ia.jsx)("img",{src:Nh,style:{width:e,height:e,position:"relative",top:c()?"17px":"-5px",left:c()?"0px":"-5px",transform:c()?"scale(2)":"scale(1)"},alt:""})}):Object(Ia.jsx)("div",{className:A.emoticon,children:Object(Ia.jsx)("img",{src:Nh,style:{width:55,height:55,position:"relative",top:c()?"17px":"-5px",left:c()?"0px":"-5px",transform:c()?"scale(2)":"scale(1)"},alt:""})})}),Object(Ia.jsx)(Mr,{size:c()?100:45,onClick:function(){!function(){o.local.emoticon="",h(!1),l(!1);var e=setTimeout((function(){clearTimeout(e),f?(o.local.emoticon="",b(!1)):(o.local.emoticon="hand",b(!0))}),100)}()},children:f?Object(Ia.jsx)("div",{className:A.emoticonActive,children:Object(Ia.jsx)("img",{src:zh,style:{width:e,height:e,position:"relative",top:c()?"17px":"-5px",left:c()?"0px":"-5px",transform:c()?"scale(2)":"scale(1)"},alt:""})}):Object(Ia.jsx)("div",{className:A.emoticon,children:Object(Ia.jsx)("img",{src:zh,style:{width:55,height:55,position:"relative",top:c()?"17px":"-5px",left:c()?"0px":"-5px",transform:c()?"scale(2)":"scale(1)"},alt:""})})})]})})}),[s,p,f])};Qh.displayName="Emoticons";var Gh={"&":{margin:"5px",borderRadius:"50%",width:"250px",height:"243px",textAlign:"center",overflow:"hidden",top:"1px",PointerEvent:"none"}},Yh=Object(Ka.a)({tapBroadcast:{display:"block",width:"265px",position:"relative",left:"-10px",textAlign:"center",color:"#FFFFFF",fontWeight:"bold",fontSize:"20px",textShadow:"1px 1px #000, -1px 1px #cdcdcd, -1px -1px #cdcdcd, 1px -1px #cdcdcd"},tapBroadcastText:{display:"block",width:"265px",position:"relative",top:"-20px",left:"-10px",textAlign:"center",color:"#FFFFFF",fontWeight:"bold",fontSize:"20px",textShadow:"1px 1px #000, -1px 1px #cdcdcd, -1px -1px #cdcdcd, 1px -1px #cdcdcd"},hidetapBroadcast:{display:"none"},fab:{display:"none",opacity:0,transition:"opacity 0.3s ease-out"},fabActive:{display:"block",opacity:1,transition:"opacity 0.3s ease-out"},vidicon:Object(wn.a)({display:"none",height:50,position:"relative",backgroundColor:"black",transform:"rotateY(180deg)",right:0},Gh),vidiconActive:Object(wn.a)({display:"block",height:50,position:"relative",alignItems:"center",backgroundColor:"black",transform:"rotateY(180deg)",right:0},Gh),container:{position:"absolute",width:"30%",top:"0%",right:0,padding:0,outline:"none",pointerEvents:"none"},wrapper:{width:"100%"},wrapperInner:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-end"}}),Hh=function(e){var t,n,o=e.stores.participants,r=o.local.getColorRGB(),s=nc,l=Array.from(o.remote.keys()).filter((function(e){return e!==o.localId})),u=0,d=Object(a.a)(l.entries());try{for(d.s();!(n=d.n()).done;){var p,h=Object(i.a)(n.value,1)[0];void 0!==(null===(p=o.remote.get(l[h]))||void 0===p?void 0:p.tracks.avatarStream)&&(u=h)}}catch(V){d.e(V)}finally{d.f()}var v=e.stores.participants,m=Object(pa.b)((function(){return Array.from(v.remote.keys()).filter((function(e){var t=v.find(e);if(void 0!==t.tracks.avatarStream)return t}))})),f=va.a.useState(m),b=Object(i.a)(f,2),g=b[0],j=b[1];if(m.length!==g.length){var A=m.filter(y(g)),O=g.filter(y(m));j(0===m.length?[]:A.concat(O))}function y(e){return function(t){return 0===e.filter((function(e){return e===t})).length}}var x=Object(pa.b)((function(){return Boolean(o.local.showVideo)})),C=Object(pa.b)((function(){var e;return Boolean(null===(e=o.remote.get(g[g.length-1]))||void 0===e?void 0:e.showVideo)})),w=null===(t=o.remote.get(g[g.length-1]))||void 0===t?void 0:t.getColorRGB(),S=Object(pa.b)((function(){return o.local.tracks.avatarStream})),k=Object(pa.b)((function(){var e;return null===(e=o.remote.get(g[g.length-1]))||void 0===e?void 0:e.tracks.avatarStream})),T=!x||o instanceof mn?!C||o instanceof mn?void 0:k:S,I=T&&o instanceof mn?o.videoBlob:void 0,E=va.a.useState(!1!==x||!1!==C),P=Object(i.a)(E,2),M=P[0],R=P[1],D=va.a.useState(!0),B=Object(i.a)(D,2),N=B[0],z=B[1],F=Object(ha.useRef)(null),L=Object(ha.useState)(1),U=Object(i.a)(L,2),Q=U[0],G=U[1],H=Object(ha.useRef)(null);if(void 0===T){var W="";W="GOING LIVE...",!1===s?W="STREAM OFF":x?N&&z(!1):C?W="RECONNECTING...":(W="STREAM OFF",!1===N&&(setTimeout((function(){var e=Q;e<=8&&G(e+=1)}),500),Q>=6&&(G(1),z(!0))))}else W="";var J=Yh();return Object(ha.useEffect)((function(){return null!==(null===F||void 0===F?void 0:F.current)&&(!function(e,t,n,i,o){if(t)e.srcObject=t;else if(n){var a=URL.createObjectURL(n);e.src=a}e.autoplay=!0,e.onloadedmetadata=function(){var t={width:350,height:350};void 0!==t.width&&void 0!==t.height?e.className=t.width>=t.height?i:o:(console.error("video stream width || height is undefined"),e.className=i)}}(F.current,T,I,"300","300"),R(!1!==x||!1!==C)),function(){!1===x&&G(1)}})),Object(ha.useEffect)((function(){return function(){}}),[]),Object(Ia.jsx)(pa.a,{children:function(){var e,t;return Object(Ia.jsx)("div",{ref:H,className:J.container,children:Object(Ia.jsxs)(Ha.a,{in:!0,classes:J,children:[Object(Ia.jsx)(Mr,{size:250,className:!1!==x||!1!==C||!1===N?J.fabActive:J.fab,onClick:function(){},children:Object(Ia.jsx)("div",{className:M?J.vidiconActive:J.vidicon,children:Object(Ia.jsx)("video",{ref:F,style:{width:"350px",height:"350px",position:"absolute",marginTop:"-50px",marginLeft:"-150px"}})})}),Object(Ia.jsx)("div",{style:!1===N&&void 0===T?{width:"240px",height:"243px",borderRadius:"50%",top:"12.5px",right:"20.7px",position:"absolute",backgroundColor:"black",opacity:1,transition:"opacity 0.3s ease-out"}:{width:"240px",height:"243px",borderRadius:"50%",top:"12.5px",right:"20.7px",position:"absolute",backgroundColor:"black",opacity:0,transition:"opacity 0.3s ease-out"},children:Object(Ia.jsx)("p",{style:"GOING LIVE..."===W||void 0!==T?{display:"none"}:{display:"block",position:"absolute",color:"red",top:"235px",width:"250px",textAlign:"center",fontSize:"20px",fontWeight:"bold"},children:"RECONNECTING..."})}),Object(Ia.jsxs)("div",{style:{height:"50px",width:"150px",textAlign:"center",position:"relative",left:"-66px",verticalAlign:"middle",display:"flex",flexDirection:"row",whiteSpace:"nowrap",marginTop:"-50px",color:"white",overflow:"hidden"},children:[Object(Ia.jsx)("img",{style:{position:"relative",display:"STREAM OFF"!==W?"block":"none",width:"25px",height:"25px",marginTop:"0px",marginLeft:"35px",backgroundColor:x?Y(r):void 0!==w?Y(w):void 0,borderRadius:"50%"},src:x?o.local.information.avatarSrc:null===(e=o.remote.get(l[u]))||void 0===e?void 0:e.information.avatarSrc,alt:""}),Object(Ia.jsx)("p",{style:{position:"relative",marginTop:"4px",marginLeft:"4px",overflow:"hidden",display:"STREAM OFF"!==W?"block":"none",fontSize:c()?"2rem":"1rem",fontWeight:"bold"},children:x?o.local.information.name:null===(t=o.remote.get(l[u]))||void 0===t?void 0:t.information.name})]}),Object(Ia.jsx)("div",{className:x||0===m.length||!1===s?J.hidetapBroadcast:J.tapBroadcast,children:"TAP TO GO LIVE"}),Object(Ia.jsx)("p",{className:"STREAM OFF"===W?J.hidetapBroadcast:J.tapBroadcastText,children:W})]})})}})};Hh.displayName="ZoneAvatar";var Wh="";var Jh=-2;var Vh="",Kh="",Xh="",Zh="",qh="",_h="",$h="",ev=function(){var e=rc(),t={map:la,participants:On,contents:ea,chat:Cn,roomInfo:Ki},n=Object(ha.useRef)(null),a=Object(ha.useState)(!1),r=Object(i.a)(a,2),s=r[0],u=r[1],d=Object(ha.useState)(!0),p=Object(i.a)(d,2),h=p[0],v=p[1],m=Object(ha.useState)(""),f=Object(i.a)(m,2),b=f[0],g=f[1],j=Object(ha.useState)(-1),A=Object(i.a)(j,2),O=A[0],y=A[1],x=Object(ha.useState)(-1),C=Object(i.a)(x,2),w=C[0],S=C[1],k=Object(ha.useState)(-1),T=Object(i.a)(k,2),I=T[0],E=T[1],P=Object(ha.useState)(-1),M=Object(i.a)(P,2),R=M[0],D=M[1],B=Object(ha.useState)(-1),N=Object(i.a)(B,2),z=N[0],F=N[1],L=Object(ha.useState)(-1),U=Object(i.a)(L,2),Q=U[0],G=U[1],Y=Object(ha.useState)(-1),H=Object(i.a)(Y,2),W=H[0],J=H[1],V=Object(ha.useState)(!1),K=Object(i.a)(V,2),X=K[0],Z=K[1],q=Object(ha.useState)({x:0,y:0}),_=Object(i.a)(q,2),$=_[0],ee=_[1],te=Object(ha.useState)(-1),ne=Object(i.a)(te,2),ie=ne[0],oe=ne[1],ae=Object(ha.useRef)(null),re=Object(ha.useRef)(null),se=Object(ha.useRef)(null),ce=Object(ha.useRef)(null),le=Object(ha.useRef)(null),ue=Object(ha.useRef)(null),de=Object(ha.useRef)(null),pe=Object(ha.useRef)(null),he=Object(ha.useRef)(null),ve=Object(ha.useRef)(null),me="",fe="",be="",ge=[],je=Object(pa.b)((function(){return t.contents.all}));je.filter((function(e){return"roomimg"===e.shareType})).map((function(e){return me=e.url})),je.filter((function(e){return"roomimg"===e.shareType})).map((function(e){return fe=e.contentDesc})),je.filter((function(e){return"appimg"===e.shareType})).map((function(e,t){return 0===t&&""===b?g(e.type):""})),je.filter((function(e){return"appimg"===e.shareType})).map((function(e,t){return b===e.type?be=e.baseColor:""})),je.filter((function(e){return"appimg"===e.shareType})).map((function(e,t){return ge.push(e.type)}));var Ae=!1,Oe=Object(pa.b)((function(){return t.participants.localId})),ye=sessionStorage.getItem("room"),xe=Object(pa.b)((function(){return La()}));s,Wh=b;var Ce=Object(ha.useState)(""),we=Object(i.a)(Ce,2),Se=we[0],ke=we[1],Te=Object(ha.useState)(""),Ie=Object(i.a)(Te,2),Ee=Ie[0],Pe=Ie[1],Me=[],Re=[];""!==Ee&&(Me=Ee.split(","),(Re=Ee.split(",")).pop()),Object(ha.useEffect)((function(){if(fetch("folderlist.php?folder=avatar_tool/*/*.png").then((function(e){return e.text()})).then((function(e){return ke(e)})),fetch("folderlist.php?folder=ui/help/*.png").then((function(e){return e.text()})).then((function(e){return Pe(e)})),za||Oe){if("N"===xe&&-1===I&&(void 0===t.participants.local.information.randomAvatar||0===t.participants.local.information.randomAvatar.length)){!function(){for(var e=[],t=[],n="",i=Se.split(","),o=0;o<i.length-1;o++)-1===e.indexOf(i[o].split("/")[1])&&void 0!==i[o].split("/")[1]&&e.push(i[o].split("/")[1]);for(var a=0;a<e.length;a++){for(var r=0;r<i.length-1;r++)e[a]===i[r].split("/")[1]&&(n+=i[r]+",");t.push(n),n=""}var s=Le(15,20),c=Le(8,14),l=t[0].split(","),u=l.indexOf("avatar_tool/Colors/es_co_group_x.png");Vh=l[u],z!==u&&F(u);c>=7&&c<15&&(Xh=l[c].split("/")[2].split(".")[0].split("co_")[1],R!==c&&D(c));s>=15&&s<20&&(Kh=l[s],I!==s&&E(s));var d=t[1].split(","),p=[],h=[],v=[],m=[];p.splice(0),h.splice(0),v.splice(0),m.splice(0);for(var f=0;f<d.length-1;f++)if(-1===d.indexOf(Xh.split("_")[1]+"_"+d[f].split("_")[4])&&Xh.split("_")[1]===d[f].split("_")[4]){var b=d[f].split("/")[2].split(".")[0].split("_")[4];"f"===b?(p.push(d[f]),h.push(f)):"b"===b&&(v.push(d[f]),m.push(f))}if(p.length>0){var g=Le(0,p.length-1);Zh=p[g],Q!==h[g]&&G(h[g]);var j=d.indexOf(String(p[g].split("_f.png")[0]+"_b.png"));-1!==j?(qh=d[j],W!==j?J(j):(qh="",J(-1))):(qh="",J(-1))}else Zh="",G(-1),qh="",J(-1);var A=t[2].split(","),x=Le(0,A.length-2);_h=A[x],O!==x&&y(x);var C=t[3].split(","),k=Le(0,C.length-2);$h=C[k],w!==k&&S(k)}();var e=setTimeout((function(){clearTimeout(e),function(){if(null===ae.current)return;zd()(ae.current,{allowTaint:!0}).then((function(e){var n=new FormData;n.append("imgData",e.toDataURL()),fetch("saveAvatarImage.php",{method:"POST",body:n}).then((function(e){return e.text()})).then((function(e){return n=e,t.participants.local.information.avatarSrc=n,t.participants.local.information.randomAvatar=[Kh,Xh,Vh,Zh,_h,$h],t.participants.local.sendInformation(),void t.participants.local.saveInformationToStorage(!0);var n}))})).catch((function(e){console.log(e)}))}()}),50)}var n=setTimeout((function(){clearTimeout(n),v(!1),"N"===La()&&-1===I&&Z(!0)}),5e3)}}));var De=Object(ha.useState)(0),Be=Object(i.a)(De,2),Ne=Be[0],ze=Be[1],Fe=Me.length-1;if(!Array.isArray(Me)||Me.length<=0)return null;function Le(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Ue(e,t,n){ee({x:e.x,y:e.y}),Jh=$.x,Ge(t),Qe(t),oe(t)}function Qe(e){var t,n,i,o,a,r,s;if(0===ge.length){if(0===e)0===Object(null===(t=se.current)||void 0===t?void 0:t.state).x?g("content"):g("blank");else if(1===e){var c;0===Object(null===(c=re.current)||void 0===c?void 0:c.state).x?g("chat"):g("blank")}}else if(0===e)0===Object(null===(n=se.current)||void 0===n?void 0:n.state).x?g("content"):0===Object(null===(i=ce.current)||void 0===i?void 0:i.state).x?(Jh=-2,oe(-1),g(ge[e])):0===Object(null===(o=le.current)||void 0===o?void 0:o.state).x?(Jh=-2,oe(-1),g(ge[e+1])):0===Object(null===(a=ue.current)||void 0===a?void 0:a.state).x?(Jh=-2,oe(-1),g(ge[e+2])):0===Object(null===(r=de.current)||void 0===r?void 0:r.state).x?(Jh=-2,oe(-1),g(ge[e+3])):0===Object(null===(s=pe.current)||void 0===s?void 0:s.state).x?(Jh=-2,oe(-1),g(ge[e+4])):g("blank");else if(1===e){var l,u,d,p,h,v;0===Object(null===(l=re.current)||void 0===l?void 0:l.state).x?g("chat"):0===Object(null===(u=ce.current)||void 0===u?void 0:u.state).x?(Jh=-2,oe(-1),g(ge[e-1])):0===Object(null===(d=le.current)||void 0===d?void 0:d.state).x?(Jh=-2,oe(-1),g(ge[e])):0===Object(null===(p=ue.current)||void 0===p?void 0:p.state).x?(Jh=-2,oe(-1),g(ge[e+1])):0===Object(null===(h=de.current)||void 0===h?void 0:h.state).x?(Jh=-2,oe(-1),g(ge[e+3])):0===Object(null===(v=pe.current)||void 0===v?void 0:v.state).x?(Jh=-2,oe(-1),g(ge[e+4])):g("blank")}else if(e>=2){var m,f,b,j,A,O;0===Object(null===(m=re.current)||void 0===m?void 0:m.state).x?g("chat"):0===Object(null===(f=se.current)||void 0===f?void 0:f.state).x?g("content"):0===Object(null===(b=le.current)||void 0===b?void 0:b.state).x||0===Object(null===(j=ue.current)||void 0===j?void 0:j.state).x||0===Object(null===(A=de.current)||void 0===A?void 0:A.state).x||0===Object(null===(O=pe.current)||void 0===O?void 0:O.state).x?(Jh=-2,oe(-1),g(ge[e-2])):g("blank")}}function Ge(e){if(0===e){var t,n,i,o,a,r,s,l,u,d,p,h,v,m,f,b,g,j,A,O,y,x,C=0;if(Object(null===(t=re.current)||void 0===t?void 0:t.state).x<0||Object(null===(n=re.current)||void 0===n?void 0:n.state).x>0)C+=1;else Object(null===(u=re.current)||void 0===u?void 0:u.state).x=0,Object(null===(d=re.current)||void 0===d?void 0:d.state).y=0;if(Object(null===(i=se.current)||void 0===i?void 0:i.state).x<0)C+=1;else Object(null===(p=se.current)||void 0===p?void 0:p.state).x=0,Object(null===(h=se.current)||void 0===h?void 0:h.state).y=c()?-121*C:-51*C;if(Object(null===(o=ce.current)||void 0===o?void 0:o.state).x<0)C+=1;else Object(null===(v=ce.current)||void 0===v?void 0:v.state).x=0,Object(null===(m=ce.current)||void 0===m?void 0:m.state).y=c()?-121*C:-51*C;if(Object(null===(a=le.current)||void 0===a?void 0:a.state).x<0)C+=1;else Object(null===(f=le.current)||void 0===f?void 0:f.state).x=0,Object(null===(b=le.current)||void 0===b?void 0:b.state).y=c()?-121*C:-51*C;if(Object(null===(r=ue.current)||void 0===r?void 0:r.state).x<0)C+=1;else Object(null===(g=ue.current)||void 0===g?void 0:g.state).x=0,Object(null===(j=ue.current)||void 0===j?void 0:j.state).y=c()?-121*C:-51*C;if(Object(null===(s=de.current)||void 0===s?void 0:s.state).x<0)C+=1;else Object(null===(A=de.current)||void 0===A?void 0:A.state).x=0,Object(null===(O=de.current)||void 0===O?void 0:O.state).y=c()?-121*C:-51*C;if(Object(null===(l=pe.current)||void 0===l?void 0:l.state).x<0)C+=1;else Object(null===(y=pe.current)||void 0===y?void 0:y.state).x=0,Object(null===(x=pe.current)||void 0===x?void 0:x.state).y=c()?-121*C:-51*C}else if(1===e){var w,S,k,T,I,E,P,M,R,D,B,N,z,F,L,U,Q,G,Y,H,W,J=0;if(Object(null===(w=re.current)||void 0===w?void 0:w.state).x<0)J+=1;else Object(null===(D=re.current)||void 0===D?void 0:D.state).x=0,Object(null===(B=re.current)||void 0===B?void 0:B.state).y=0;if(Object(null===(S=se.current)||void 0===S?void 0:S.state).x<0||Object(null===(k=se.current)||void 0===k?void 0:k.state).x>0)J+=1;else if(0===Object(null===(T=se.current)||void 0===T?void 0:T.state).x){var V,K;Object(null===(V=se.current)||void 0===V?void 0:V.state).x=0,Object(null===(K=se.current)||void 0===K?void 0:K.state).y=c()?-121*J:-51*J}if(Object(null===(I=ce.current)||void 0===I?void 0:I.state).x<0)J+=1;else Object(null===(N=ce.current)||void 0===N?void 0:N.state).x=0,Object(null===(z=ce.current)||void 0===z?void 0:z.state).y=c()?-121*J:-51*J;if(Object(null===(E=le.current)||void 0===E?void 0:E.state).x<0)J+=1;else Object(null===(F=le.current)||void 0===F?void 0:F.state).x=0,Object(null===(L=le.current)||void 0===L?void 0:L.state).y=c()?-121*J:-51*J;if(Object(null===(P=ue.current)||void 0===P?void 0:P.state).x<0)J+=1;else Object(null===(U=ue.current)||void 0===U?void 0:U.state).x=0,Object(null===(Q=ue.current)||void 0===Q?void 0:Q.state).y=c()?-121*J:-51*J;if(Object(null===(M=de.current)||void 0===M?void 0:M.state).x<0)J+=1;else Object(null===(G=de.current)||void 0===G?void 0:G.state).x=0,Object(null===(Y=de.current)||void 0===Y?void 0:Y.state).y=c()?-121*J:-51*J;if(Object(null===(R=pe.current)||void 0===R?void 0:R.state).x<0)J+=1;else Object(null===(H=pe.current)||void 0===H?void 0:H.state).x=0,Object(null===(W=pe.current)||void 0===W?void 0:W.state).y=c()?-121*J:-51*J}else if(2===e){var X,Z,q,_,$,ee,te,ne,ie,oe,ae,he,ve,me,fe,be,ge,je,Ae,Oe,ye,xe,Ce=0;if(Object(null===(X=re.current)||void 0===X?void 0:X.state).x<0)Ce+=1;else Object(null===(ie=re.current)||void 0===ie?void 0:ie.state).x=0,Object(null===(oe=re.current)||void 0===oe?void 0:oe.state).y=0;if(Object(null===(Z=se.current)||void 0===Z?void 0:Z.state).x<0)Ce+=1;else Object(null===(ae=se.current)||void 0===ae?void 0:ae.state).x=0,Object(null===(he=se.current)||void 0===he?void 0:he.state).y=c()?-121*Ce:-51*Ce;if(Object(null===(q=ce.current)||void 0===q?void 0:q.state).x<0||Object(null===(_=ce.current)||void 0===_?void 0:_.state).x>0)Ce+=1;else Object(null===(ve=ce.current)||void 0===ve?void 0:ve.state).x=0,Object(null===(me=ce.current)||void 0===me?void 0:me.state).y=c()?-121*Ce:-51*Ce;if(Object(null===($=le.current)||void 0===$?void 0:$.state).x<0)Ce+=1;else Object(null===(fe=le.current)||void 0===fe?void 0:fe.state).x=0,Object(null===(be=le.current)||void 0===be?void 0:be.state).y=c()?-121*Ce:-51*Ce;if(Object(null===(ee=ue.current)||void 0===ee?void 0:ee.state).x<0)Ce+=1;else Object(null===(ge=ue.current)||void 0===ge?void 0:ge.state).x=0,Object(null===(je=ue.current)||void 0===je?void 0:je.state).y=c()?-121*Ce:-51*Ce;if(Object(null===(te=de.current)||void 0===te?void 0:te.state).x<0)Ce+=1;else Object(null===(Ae=de.current)||void 0===Ae?void 0:Ae.state).x=0,Object(null===(Oe=de.current)||void 0===Oe?void 0:Oe.state).y=c()?-121*Ce:-51*Ce;if(Object(null===(ne=pe.current)||void 0===ne?void 0:ne.state).x<0)Ce+=1;else Object(null===(ye=pe.current)||void 0===ye?void 0:ye.state).x=0,Object(null===(xe=pe.current)||void 0===xe?void 0:xe.state).y=c()?-121*Ce:-51*Ce}else if(3===e){var we,Se,ke,Te,Ie,Ee,Pe,Me,Re,De,Be,Ne,ze,Fe,Le,Ue,Qe,Ge,Ye,He,We,Je,Ve=0;if(Object(null===(we=re.current)||void 0===we?void 0:we.state).x<0)Ve+=1;else Object(null===(Re=re.current)||void 0===Re?void 0:Re.state).x=0,Object(null===(De=re.current)||void 0===De?void 0:De.state).y=c()?-121*Ve:-51*Ve;if(Object(null===(Se=se.current)||void 0===Se?void 0:Se.state).x<0)Ve+=1;else Object(null===(Be=se.current)||void 0===Be?void 0:Be.state).x=0,Object(null===(Ne=se.current)||void 0===Ne?void 0:Ne.state).y=c()?-121*Ve:-51*Ve;if(Object(null===(ke=ce.current)||void 0===ke?void 0:ke.state).x<0)Ve+=1;else Object(null===(ze=ce.current)||void 0===ze?void 0:ze.state).x=0,Object(null===(Fe=ce.current)||void 0===Fe?void 0:Fe.state).y=c()?-121*Ve:-51*Ve;if(Object(null===(Te=le.current)||void 0===Te?void 0:Te.state).x<0||Object(null===(Ie=le.current)||void 0===Ie?void 0:Ie.state).x>0)Ve+=1;else Object(null===(Le=le.current)||void 0===Le?void 0:Le.state).x=0,Object(null===(Ue=le.current)||void 0===Ue?void 0:Ue.state).y=c()?-121*Ve:-51*Ve;if(Object(null===(Ee=ue.current)||void 0===Ee?void 0:Ee.state).x<0)Ve+=1;else Object(null===(Qe=ue.current)||void 0===Qe?void 0:Qe.state).x=0,Object(null===(Ge=ue.current)||void 0===Ge?void 0:Ge.state).y=c()?-121*Ve:-51*Ve;if(Object(null===(Pe=de.current)||void 0===Pe?void 0:Pe.state).x<0)Ve+=1;else Object(null===(Ye=de.current)||void 0===Ye?void 0:Ye.state).x=0,Object(null===(He=de.current)||void 0===He?void 0:He.state).y=c()?-121*Ve:-51*Ve;if(Object(null===(Me=pe.current)||void 0===Me?void 0:Me.state).x<0)Ve+=1;else Object(null===(We=pe.current)||void 0===We?void 0:We.state).x=0,Object(null===(Je=pe.current)||void 0===Je?void 0:Je.state).y=c()?-121*Ve:-51*Ve}else if(4===e){var Ke,Xe,Ze,qe,_e,$e,et,tt,nt,it,ot,at,rt,st,ct,lt,ut,dt,pt,ht,vt,mt,ft=0;if(Object(null===(Ke=re.current)||void 0===Ke?void 0:Ke.state).x<0)ft+=1;else Object(null===(nt=re.current)||void 0===nt?void 0:nt.state).x=0,Object(null===(it=re.current)||void 0===it?void 0:it.state).y=c()?-121*ft:-51*ft;if(Object(null===(Xe=se.current)||void 0===Xe?void 0:Xe.state).x<0)ft+=1;else Object(null===(ot=se.current)||void 0===ot?void 0:ot.state).x=0,Object(null===(at=se.current)||void 0===at?void 0:at.state).y=c()?-121*ft:-51*ft;if(Object(null===(Ze=ce.current)||void 0===Ze?void 0:Ze.state).x<0)ft+=1;else Object(null===(rt=ce.current)||void 0===rt?void 0:rt.state).x=0,Object(null===(st=ce.current)||void 0===st?void 0:st.state).y=c()?-121*ft:-51*ft;if(Object(null===(qe=le.current)||void 0===qe?void 0:qe.state).x<0)ft+=1;else Object(null===(ct=le.current)||void 0===ct?void 0:ct.state).x=0,Object(null===(lt=le.current)||void 0===lt?void 0:lt.state).y=c()?-121*ft:-51*ft;if(Object(null===(_e=ue.current)||void 0===_e?void 0:_e.state).x<0||Object(null===($e=ue.current)||void 0===$e?void 0:$e.state).x>0)ft+=1;else Object(null===(ut=ue.current)||void 0===ut?void 0:ut.state).x=0,Object(null===(dt=ue.current)||void 0===dt?void 0:dt.state).y=c()?-121*ft:-51*ft;if(Object(null===(et=de.current)||void 0===et?void 0:et.state).x<0)ft+=1;else Object(null===(pt=de.current)||void 0===pt?void 0:pt.state).x=0,Object(null===(ht=de.current)||void 0===ht?void 0:ht.state).y=c()?-121*ft:-51*ft;if(Object(null===(tt=pe.current)||void 0===tt?void 0:tt.state).x<0)ft+=1;else Object(null===(vt=pe.current)||void 0===vt?void 0:vt.state).x=0,Object(null===(mt=pe.current)||void 0===mt?void 0:mt.state).y=c()?-121*ft:-51*ft}else if(5===e){var bt,gt,jt,At,Ot,yt,xt,Ct,wt,St,kt,Tt,It,Et,Pt,Mt,Rt,Dt,Bt,Nt,zt,Ft,Lt=0;if(Object(null===(bt=re.current)||void 0===bt?void 0:bt.state).x<0)Lt+=1;else Object(null===(wt=re.current)||void 0===wt?void 0:wt.state).x=0,Object(null===(St=re.current)||void 0===St?void 0:St.state).y=c()?-121*Lt:-51*Lt;if(Object(null===(gt=se.current)||void 0===gt?void 0:gt.state).x<0)Lt+=1;else Object(null===(kt=se.current)||void 0===kt?void 0:kt.state).x=0,Object(null===(Tt=se.current)||void 0===Tt?void 0:Tt.state).y=c()?-121*Lt:-51*Lt;if(Object(null===(jt=ce.current)||void 0===jt?void 0:jt.state).x<0)Lt+=1;else Object(null===(It=ce.current)||void 0===It?void 0:It.state).x=0,Object(null===(Et=ce.current)||void 0===Et?void 0:Et.state).y=c()?-121*Lt:-51*Lt;if(Object(null===(At=le.current)||void 0===At?void 0:At.state).x<0)Lt+=1;else Object(null===(Pt=le.current)||void 0===Pt?void 0:Pt.state).x=0,Object(null===(Mt=le.current)||void 0===Mt?void 0:Mt.state).y=c()?-121*Lt:-51*Lt;if(Object(null===(Ot=ue.current)||void 0===Ot?void 0:Ot.state).x<0)Lt+=1;else Object(null===(Rt=ue.current)||void 0===Rt?void 0:Rt.state).x=0,Object(null===(Dt=ue.current)||void 0===Dt?void 0:Dt.state).y=c()?-121*Lt:-51*Lt;if(Object(null===(yt=de.current)||void 0===yt?void 0:yt.state).x<0||Object(null===(xt=de.current)||void 0===xt?void 0:xt.state).x>0)Lt+=1;else Object(null===(Bt=de.current)||void 0===Bt?void 0:Bt.state).x=0,Object(null===(Nt=de.current)||void 0===Nt?void 0:Nt.state).y=c()?-121*Lt:-51*Lt;if(Object(null===(Ct=pe.current)||void 0===Ct?void 0:Ct.state).x<0)Lt+=1;else Object(null===(zt=pe.current)||void 0===zt?void 0:zt.state).x=0,Object(null===(Ft=pe.current)||void 0===Ft?void 0:Ft.state).y=c()?-121*Lt:-51*Lt}else if(6===e){var Ut,Qt,Gt,Yt,Ht,Wt,Jt,Vt,Kt,Xt,Zt,qt,_t,$t,en,tn,nn,on,an,rn,sn,cn,ln=0;if(Object(null===(Ut=re.current)||void 0===Ut?void 0:Ut.state).x<0)ln+=1;else Object(null===(Kt=re.current)||void 0===Kt?void 0:Kt.state).x=0,Object(null===(Xt=re.current)||void 0===Xt?void 0:Xt.state).y=c()?-121*ln:-51*ln;if(Object(null===(Qt=se.current)||void 0===Qt?void 0:Qt.state).x<0)ln+=1;else Object(null===(Zt=se.current)||void 0===Zt?void 0:Zt.state).x=0,Object(null===(qt=se.current)||void 0===qt?void 0:qt.state).y=c()?-121*ln:-51*ln;if(Object(null===(Gt=ce.current)||void 0===Gt?void 0:Gt.state).x<0)ln+=1;else Object(null===(_t=ce.current)||void 0===_t?void 0:_t.state).x=0,Object(null===($t=ce.current)||void 0===$t?void 0:$t.state).y=c()?-121*ln:-51*ln;if(Object(null===(Yt=le.current)||void 0===Yt?void 0:Yt.state).x<0)ln+=1;else Object(null===(en=le.current)||void 0===en?void 0:en.state).x=0,Object(null===(tn=le.current)||void 0===tn?void 0:tn.state).y=c()?-121*ln:-51*ln;if(Object(null===(Ht=ue.current)||void 0===Ht?void 0:Ht.state).x<0)ln+=1;else Object(null===(nn=ue.current)||void 0===nn?void 0:nn.state).x=0,Object(null===(on=ue.current)||void 0===on?void 0:on.state).y=c()?-121*ln:-51*ln;if(Object(null===(Wt=de.current)||void 0===Wt?void 0:Wt.state).x<0)ln+=1;else Object(null===(an=de.current)||void 0===an?void 0:an.state).x=0,Object(null===(rn=de.current)||void 0===rn?void 0:rn.state).y=c()?-121*ln:-51*ln;if(Object(null===(Jt=pe.current)||void 0===Jt?void 0:Jt.state).x<0||Object(null===(Vt=pe.current)||void 0===Vt?void 0:Vt.state).x>0)ln+=1;else Object(null===(sn=pe.current)||void 0===sn?void 0:sn.state).x=0,Object(null===(cn=pe.current)||void 0===cn?void 0:cn.state).y=c()?-121*ln:-51*ln}}function Ye(e,n,i){if(e.y<-51*i||e.y>675+-51*i||e.x<-(t.map.screenSize[0]-40)||e.x>0){var o;if(0===i)Object(null===(o=re.current)||void 0===o?void 0:o.state).x=-99999999;else if(1===i){var a;Object(null===(a=se.current)||void 0===a?void 0:a.state).x=-99999999}else if(2===i){var r;Object(null===(r=ce.current)||void 0===r?void 0:r.state).x=-99999999}else if(3===i){var s;Object(null===(s=le.current)||void 0===s?void 0:s.state).x=-99999999}else if(4===i){var l;Object(null===(l=ue.current)||void 0===l?void 0:l.state).x=-99999999}else if(5===i){var d;Object(null===(d=de.current)||void 0===d?void 0:d.state).x=-99999999}else if(6===i){var p;Object(null===(p=pe.current)||void 0===p?void 0:p.state).x=-99999999}var h=window.open(n,"","width=400,height=650,left=500,top=100"),v=setInterval((function(){if(null!==h&&void 0!==h&&h.closed){if(clearInterval(v),0===i){var e,t,n,o,a,r,s,l,u,d,p,m,f,b,g,j,A,O,y,x,C,w,S=0;if(Object(null===(e=re.current)||void 0===e?void 0:e.state).x<0||Object(null===(t=re.current)||void 0===t?void 0:t.state).x>0)Object(null===(u=re.current)||void 0===u?void 0:u.state).x=0,Object(null===(d=re.current)||void 0===d?void 0:d.state).y=0;else S+=1;if(0===Object(null===(n=se.current)||void 0===n?void 0:n.state).x)Object(null===(p=se.current)||void 0===p?void 0:p.state).x=0,Object(null===(m=se.current)||void 0===m?void 0:m.state).y=c()?-121*S:51*S;else S+=1;if(0===Object(null===(o=ce.current)||void 0===o?void 0:o.state).x)Object(null===(f=ce.current)||void 0===f?void 0:f.state).x=0,Object(null===(b=ce.current)||void 0===b?void 0:b.state).y=c()?-121*S:-51*S;else S+=1;if(0===Object(null===(a=le.current)||void 0===a?void 0:a.state).x)Object(null===(g=le.current)||void 0===g?void 0:g.state).x=0,Object(null===(j=le.current)||void 0===j?void 0:j.state).y=c()?-121*S:-51*S;else S+=1;if(0===Object(null===(r=ue.current)||void 0===r?void 0:r.state).x)Object(null===(A=ue.current)||void 0===A?void 0:A.state).x=0,Object(null===(O=ue.current)||void 0===O?void 0:O.state).y=c()?-121*S:-51*S;else S+=1;if(0===Object(null===(s=de.current)||void 0===s?void 0:s.state).x)Object(null===(y=de.current)||void 0===y?void 0:y.state).x=0,Object(null===(x=de.current)||void 0===x?void 0:x.state).y=c()?-121*S:-51*S;else S+=1;if(0===Object(null===(l=pe.current)||void 0===l?void 0:l.state).x)Object(null===(C=pe.current)||void 0===C?void 0:C.state).x=0,Object(null===(w=pe.current)||void 0===w?void 0:w.state).y=c()?-121*S:-51*S}else if(1===i){var k,T,I,E,P,M,R,D,B,N,z,F,L,U,Q,G,Y,H,W,J,V,K,X=0;if(0===Object(null===(k=re.current)||void 0===k?void 0:k.state).x)Object(null===(B=re.current)||void 0===B?void 0:B.state).x=0,Object(null===(N=re.current)||void 0===N?void 0:N.state).y=0;else X+=1;if(Object(null===(T=se.current)||void 0===T?void 0:T.state).x<0||Object(null===(I=se.current)||void 0===I?void 0:I.state).x>0)Object(null===(z=se.current)||void 0===z?void 0:z.state).x=0,Object(null===(F=se.current)||void 0===F?void 0:F.state).y=c()?-121*X:-51*X;else X+=1;if(0===Object(null===(E=ce.current)||void 0===E?void 0:E.state).x)Object(null===(L=ce.current)||void 0===L?void 0:L.state).x=0,Object(null===(U=ce.current)||void 0===U?void 0:U.state).y=c()?-121*X:-51*X;else X+=1;if(0===Object(null===(P=le.current)||void 0===P?void 0:P.state).x)Object(null===(Q=le.current)||void 0===Q?void 0:Q.state).x=0,Object(null===(G=le.current)||void 0===G?void 0:G.state).y=c()?-121*X:-51*X;else X+=1;if(0===Object(null===(M=ue.current)||void 0===M?void 0:M.state).x)Object(null===(Y=ue.current)||void 0===Y?void 0:Y.state).x=0,Object(null===(H=ue.current)||void 0===H?void 0:H.state).y=c()?-121*X:-51*X;else X+=1;if(0===Object(null===(R=de.current)||void 0===R?void 0:R.state).x)Object(null===(W=de.current)||void 0===W?void 0:W.state).x=0,Object(null===(J=de.current)||void 0===J?void 0:J.state).y=c()?-121*X:-51*X;else X+=1;if(0===Object(null===(D=pe.current)||void 0===D?void 0:D.state).x)Object(null===(V=pe.current)||void 0===V?void 0:V.state).x=0,Object(null===(K=pe.current)||void 0===K?void 0:K.state).y=c()?-121*X:-51*X}else if(2===i){var Z,q,_,$,te,ne,ie,oe,ae,he,ve,me,fe,be,ge,je,Ae,Oe,ye,xe,Ce,we,Se=0;if(0===Object(null===(Z=re.current)||void 0===Z?void 0:Z.state).x)Object(null===(ae=re.current)||void 0===ae?void 0:ae.state).x=0,Object(null===(he=re.current)||void 0===he?void 0:he.state).y=0;else Se+=1;if(0===Object(null===(q=se.current)||void 0===q?void 0:q.state).x)Object(null===(ve=se.current)||void 0===ve?void 0:ve.state).x=0,Object(null===(me=se.current)||void 0===me?void 0:me.state).y=c()?-121*Se:-51*Se;else Se+=1;if(Object(null===(_=ce.current)||void 0===_?void 0:_.state).x<0||Object(null===($=ce.current)||void 0===$?void 0:$.state).x>0)Object(null===(fe=ce.current)||void 0===fe?void 0:fe.state).x=0,Object(null===(be=ce.current)||void 0===be?void 0:be.state).y=c()?-121*Se:-51*Se;else Se+=1;if(0===Object(null===(te=le.current)||void 0===te?void 0:te.state).x)Object(null===(ge=le.current)||void 0===ge?void 0:ge.state).x=0,Object(null===(je=le.current)||void 0===je?void 0:je.state).y=c()?-121*Se:-51*Se;else Se+=1;if(0===Object(null===(ne=ue.current)||void 0===ne?void 0:ne.state).x)Object(null===(Ae=ue.current)||void 0===Ae?void 0:Ae.state).x=0,Object(null===(Oe=ue.current)||void 0===Oe?void 0:Oe.state).y=c()?-121*Se:-51*Se;else Se+=1;if(0===Object(null===(ie=de.current)||void 0===ie?void 0:ie.state).x)Object(null===(ye=de.current)||void 0===ye?void 0:ye.state).x=0,Object(null===(xe=de.current)||void 0===xe?void 0:xe.state).y=c()?-121*Se:-51*Se;else Se+=1;if(0===Object(null===(oe=pe.current)||void 0===oe?void 0:oe.state).x)Object(null===(Ce=pe.current)||void 0===Ce?void 0:Ce.state).x=0,Object(null===(we=pe.current)||void 0===we?void 0:we.state).y=c()?-121*Se:-51*Se}else if(3===i){var ke,Te,Ie,Ee,Pe,Me,Re,De,Be,Ne,ze,Fe,Le,Ue,Qe,Ge,Ye,He,We,Je,Ve,Ke,Xe=0;if(0===Object(null===(ke=re.current)||void 0===ke?void 0:ke.state).x)Object(null===(Be=re.current)||void 0===Be?void 0:Be.state).x=0,Object(null===(Ne=re.current)||void 0===Ne?void 0:Ne.state).y=0;else Xe+=1;if(0===Object(null===(Te=se.current)||void 0===Te?void 0:Te.state).x)Object(null===(ze=se.current)||void 0===ze?void 0:ze.state).x=0,Object(null===(Fe=se.current)||void 0===Fe?void 0:Fe.state).y=0;else Xe+=1;if(0===Object(null===(Ie=ce.current)||void 0===Ie?void 0:Ie.state).x)Object(null===(Le=ce.current)||void 0===Le?void 0:Le.state).x=0,Object(null===(Ue=ce.current)||void 0===Ue?void 0:Ue.state).y=c()?-121*Xe:-51*Xe;else Xe+=1;if(Object(null===(Ee=le.current)||void 0===Ee?void 0:Ee.state).x<0||Object(null===(Pe=le.current)||void 0===Pe?void 0:Pe.state).x>0)Object(null===(Qe=le.current)||void 0===Qe?void 0:Qe.state).x=0,Object(null===(Ge=le.current)||void 0===Ge?void 0:Ge.state).y=c()?-121*Xe:-51*Xe;else Xe+=1;if(0===Object(null===(Me=ue.current)||void 0===Me?void 0:Me.state).x)Object(null===(Ye=ue.current)||void 0===Ye?void 0:Ye.state).x=0,Object(null===(He=ue.current)||void 0===He?void 0:He.state).y=0;else Xe+=1;if(0===Object(null===(Re=de.current)||void 0===Re?void 0:Re.state).x)Object(null===(We=de.current)||void 0===We?void 0:We.state).x=0,Object(null===(Je=de.current)||void 0===Je?void 0:Je.state).y=c()?-121*Xe:-51*Xe;else Xe+=1;if(0===Object(null===(De=pe.current)||void 0===De?void 0:De.state).x)Object(null===(Ve=pe.current)||void 0===Ve?void 0:Ve.state).x=0,Object(null===(Ke=pe.current)||void 0===Ke?void 0:Ke.state).y=c()?-121*Xe:-51*Xe}else if(4===i){var Ze,qe,_e,$e,et,tt,nt,it,ot,at,rt,st,ct,lt,ut,dt,pt,ht,vt,mt,ft,bt,gt=0;if(0===Object(null===(Ze=re.current)||void 0===Ze?void 0:Ze.state).x)Object(null===(ot=re.current)||void 0===ot?void 0:ot.state).x=0,Object(null===(at=re.current)||void 0===at?void 0:at.state).y=0;else gt+=1;if(0===Object(null===(qe=se.current)||void 0===qe?void 0:qe.state).x)Object(null===(rt=se.current)||void 0===rt?void 0:rt.state).x=0,Object(null===(st=se.current)||void 0===st?void 0:st.state).y=0;else gt+=1;if(0===Object(null===(_e=ce.current)||void 0===_e?void 0:_e.state).x)Object(null===(ct=ce.current)||void 0===ct?void 0:ct.state).x=0,Object(null===(lt=ce.current)||void 0===lt?void 0:lt.state).y=0;else gt+=1;if(0===Object(null===($e=le.current)||void 0===$e?void 0:$e.state).x)Object(null===(ut=le.current)||void 0===ut?void 0:ut.state).x=0,Object(null===(dt=le.current)||void 0===dt?void 0:dt.state).y=c()?-121*gt:-51*gt;else gt+=1;if(Object(null===(et=ue.current)||void 0===et?void 0:et.state).x<0||Object(null===(tt=ue.current)||void 0===tt?void 0:tt.state).x>0)Object(null===(pt=ue.current)||void 0===pt?void 0:pt.state).x=0,Object(null===(ht=ue.current)||void 0===ht?void 0:ht.state).y=c()?-121*gt:-51*gt;else gt+=1;if(0===Object(null===(nt=de.current)||void 0===nt?void 0:nt.state).x)Object(null===(vt=de.current)||void 0===vt?void 0:vt.state).x=0,Object(null===(mt=de.current)||void 0===mt?void 0:mt.state).y=c()?-121*gt:-51*gt;else gt+=1;if(0===Object(null===(it=pe.current)||void 0===it?void 0:it.state).x)Object(null===(ft=pe.current)||void 0===ft?void 0:ft.state).x=0,Object(null===(bt=pe.current)||void 0===bt?void 0:bt.state).y=c()?-121*gt:-51*gt}else if(5===i){var jt,At,Ot,yt,xt,Ct,wt,St,kt,Tt,It,Et,Pt,Mt,Rt,Dt,Bt,Nt,zt,Ft,Lt,Ut,Qt=0;if(0===Object(null===(jt=re.current)||void 0===jt?void 0:jt.state).x)Object(null===(kt=re.current)||void 0===kt?void 0:kt.state).x=0,Object(null===(Tt=re.current)||void 0===Tt?void 0:Tt.state).y=0;else Qt+=1;if(0===Object(null===(At=se.current)||void 0===At?void 0:At.state).x)Object(null===(It=se.current)||void 0===It?void 0:It.state).x=0,Object(null===(Et=se.current)||void 0===Et?void 0:Et.state).y=0;else Qt+=1;if(0===Object(null===(Ot=ce.current)||void 0===Ot?void 0:Ot.state).x)Object(null===(Pt=ce.current)||void 0===Pt?void 0:Pt.state).x=0,Object(null===(Mt=ce.current)||void 0===Mt?void 0:Mt.state).y=0;else Qt+=1;if(0===Object(null===(yt=le.current)||void 0===yt?void 0:yt.state).x)Object(null===(Rt=le.current)||void 0===Rt?void 0:Rt.state).x=0,Object(null===(Dt=le.current)||void 0===Dt?void 0:Dt.state).y=c()?-121*Qt:-51*Qt;else Qt+=1;if(0===Object(null===(xt=ue.current)||void 0===xt?void 0:xt.state).x)Object(null===(Bt=ue.current)||void 0===Bt?void 0:Bt.state).x=0,Object(null===(Nt=ue.current)||void 0===Nt?void 0:Nt.state).y=c()?-121*Qt:-51*Qt;else Qt+=1;if(Object(null===(Ct=de.current)||void 0===Ct?void 0:Ct.state).x<0||Object(null===(wt=de.current)||void 0===wt?void 0:wt.state).x>0)Object(null===(zt=de.current)||void 0===zt?void 0:zt.state).x=0,Object(null===(Ft=de.current)||void 0===Ft?void 0:Ft.state).y=c()?-121*Qt:-51*Qt;else Qt+=1;if(0===Object(null===(St=pe.current)||void 0===St?void 0:St.state).x)Object(null===(Lt=pe.current)||void 0===Lt?void 0:Lt.state).x=0,Object(null===(Ut=pe.current)||void 0===Ut?void 0:Ut.state).y=c()?-121*Qt:-51*Qt}else if(6===i){var Gt,Yt,Ht,Wt,Jt,Vt,Kt,Xt,Zt,qt,_t,$t,en,tn,nn,on,an,rn,sn,cn,ln,un,dn=0;if(0===Object(null===(Gt=re.current)||void 0===Gt?void 0:Gt.state).x)Object(null===(Zt=re.current)||void 0===Zt?void 0:Zt.state).x=0,Object(null===(qt=re.current)||void 0===qt?void 0:qt.state).y=0;else dn+=1;if(0===Object(null===(Yt=se.current)||void 0===Yt?void 0:Yt.state).x)Object(null===(_t=se.current)||void 0===_t?void 0:_t.state).x=0,Object(null===($t=se.current)||void 0===$t?void 0:$t.state).y=0;else dn+=1;if(0===Object(null===(Ht=ce.current)||void 0===Ht?void 0:Ht.state).x)Object(null===(en=ce.current)||void 0===en?void 0:en.state).x=0,Object(null===(tn=ce.current)||void 0===tn?void 0:tn.state).y=0;else dn+=1;if(0===Object(null===(Wt=le.current)||void 0===Wt?void 0:Wt.state).x)Object(null===(nn=le.current)||void 0===nn?void 0:nn.state).x=0,Object(null===(on=le.current)||void 0===on?void 0:on.state).y=c()?-121*dn:-51*dn;else dn+=1;if(0===Object(null===(Jt=ue.current)||void 0===Jt?void 0:Jt.state).x)Object(null===(an=ue.current)||void 0===an?void 0:an.state).x=0,Object(null===(rn=ue.current)||void 0===rn?void 0:rn.state).y=c()?-121*dn:-51*dn;else dn+=1;if(0===Object(null===(Vt=de.current)||void 0===Vt?void 0:Vt.state).x)Object(null===(sn=de.current)||void 0===sn?void 0:sn.state).x=0,Object(null===(cn=de.current)||void 0===cn?void 0:cn.state).y=c()?-121*dn:-51*dn;else dn+=1;if(Object(null===(Kt=pe.current)||void 0===Kt?void 0:Kt.state).x<0||Object(null===(Xt=de.current)||void 0===Xt?void 0:Xt.state).x>0)Object(null===(ln=pe.current)||void 0===ln?void 0:ln.state).x=0,Object(null===(un=pe.current)||void 0===un?void 0:un.state).y=c()?-121*dn:-51*dn}ee({x:0,y:0})}}),100);Jh=-2,u(!1)}}function He(e,t){if(0===e){var n,i,o,a,r,s,l,u,d,p,h,v,m,f,b,j,A,O,y,x,C,w=0;if(Object(null===(n=re.current)||void 0===n?void 0:n.state).x<0)Object(null===(u=re.current)||void 0===u?void 0:u.state).x=0,Object(null===(d=re.current)||void 0===d?void 0:d.state).y=0;else w+=1;if(0===Object(null===(i=se.current)||void 0===i?void 0:i.state).x)Object(null===(p=se.current)||void 0===p?void 0:p.state).x=0,Object(null===(h=se.current)||void 0===h?void 0:h.state).y=c()?-121*w:51*w;else w+=1;if(0===Object(null===(o=ce.current)||void 0===o?void 0:o.state).x)Object(null===(v=ce.current)||void 0===v?void 0:v.state).x=0,Object(null===(m=ce.current)||void 0===m?void 0:m.state).y=c()?-121*w:-51*w;else w+=1;if(0===Object(null===(a=le.current)||void 0===a?void 0:a.state).x)Object(null===(f=le.current)||void 0===f?void 0:f.state).x=0,Object(null===(b=le.current)||void 0===b?void 0:b.state).y=c()?-121*w:-51*w;else w+=1;if(0===Object(null===(r=ue.current)||void 0===r?void 0:r.state).x)Object(null===(j=ue.current)||void 0===j?void 0:j.state).x=0,Object(null===(A=ue.current)||void 0===A?void 0:A.state).y=c()?-121*w:-51*w;else w+=1;if(0===Object(null===(s=de.current)||void 0===s?void 0:s.state).x)Object(null===(O=de.current)||void 0===O?void 0:O.state).x=0,Object(null===(y=de.current)||void 0===y?void 0:y.state).y=c()?-121*w:-51*w;else w+=1;if(0===Object(null===(l=pe.current)||void 0===l?void 0:l.state).x)Object(null===(x=pe.current)||void 0===x?void 0:x.state).x=0,Object(null===(C=pe.current)||void 0===C?void 0:C.state).y=c()?-121*w:-51*w}else if(1===e){var S,k,T,I,E,P,M,R,D,B,N,z,F,L,U,Q,G,Y,H,W,J,V=0;if(0===Object(null===(S=re.current)||void 0===S?void 0:S.state).x)Object(null===(R=re.current)||void 0===R?void 0:R.state).x=0,Object(null===(D=re.current)||void 0===D?void 0:D.state).y=0;else V+=1;if(Object(null===(k=se.current)||void 0===k?void 0:k.state).x<0)Object(null===(B=se.current)||void 0===B?void 0:B.state).x=0,Object(null===(N=se.current)||void 0===N?void 0:N.state).y=c()?-121*V:-51*V;else V+=1;if(0===Object(null===(T=ce.current)||void 0===T?void 0:T.state).x)Object(null===(z=ce.current)||void 0===z?void 0:z.state).x=0,Object(null===(F=ce.current)||void 0===F?void 0:F.state).y=c()?-121*V:-51*V;else V+=1;if(0===Object(null===(I=le.current)||void 0===I?void 0:I.state).x)Object(null===(L=le.current)||void 0===L?void 0:L.state).x=0,Object(null===(U=le.current)||void 0===U?void 0:U.state).y=c()?-121*V:-51*V;else V+=1;if(0===Object(null===(E=ue.current)||void 0===E?void 0:E.state).x)Object(null===(Q=ue.current)||void 0===Q?void 0:Q.state).x=0,Object(null===(G=ue.current)||void 0===G?void 0:G.state).y=c()?-121*V:-51*V;else V+=1;if(0===Object(null===(P=de.current)||void 0===P?void 0:P.state).x)Object(null===(Y=de.current)||void 0===Y?void 0:Y.state).x=0,Object(null===(H=de.current)||void 0===H?void 0:H.state).y=c()?-121*V:-51*V;else V+=1;if(0===Object(null===(M=pe.current)||void 0===M?void 0:M.state).x)Object(null===(W=pe.current)||void 0===W?void 0:W.state).x=0,Object(null===(J=pe.current)||void 0===J?void 0:J.state).y=c()?-121*V:-51*V}else if(2===e){var K,X,Z,q,_,$,te,ne,ie,ae,he,ve,me,fe,be,ge,je,Ae,Oe,ye,xe,Ce=0;if(0===Object(null===(K=re.current)||void 0===K?void 0:K.state).x)Object(null===(ne=re.current)||void 0===ne?void 0:ne.state).x=0,Object(null===(ie=re.current)||void 0===ie?void 0:ie.state).y=0;else Ce+=1;if(0===Object(null===(X=se.current)||void 0===X?void 0:X.state).x)Object(null===(ae=se.current)||void 0===ae?void 0:ae.state).x=0,Object(null===(he=se.current)||void 0===he?void 0:he.state).y=c()?-121*Ce:-51*Ce;else Ce+=1;if(Object(null===(Z=ce.current)||void 0===Z?void 0:Z.state).x<0)Object(null===(ve=ce.current)||void 0===ve?void 0:ve.state).x=0,Object(null===(me=ce.current)||void 0===me?void 0:me.state).y=c()?-121*Ce:-51*Ce;else Ce+=1;if(0===Object(null===(q=le.current)||void 0===q?void 0:q.state).x)Object(null===(fe=le.current)||void 0===fe?void 0:fe.state).x=0,Object(null===(be=le.current)||void 0===be?void 0:be.state).y=-51*Ce;else Ce+=1;if(0===Object(null===(_=ue.current)||void 0===_?void 0:_.state).x)Object(null===(ge=ue.current)||void 0===ge?void 0:ge.state).x=0,Object(null===(je=ue.current)||void 0===je?void 0:je.state).y=c()?-121*Ce:-51*Ce;else Ce+=1;if(0===Object(null===($=de.current)||void 0===$?void 0:$.state).x)Object(null===(Ae=de.current)||void 0===Ae?void 0:Ae.state).x=0,Object(null===(Oe=de.current)||void 0===Oe?void 0:Oe.state).y=c()?-121*Ce:-51*Ce;else Ce+=1;if(0===Object(null===(te=pe.current)||void 0===te?void 0:te.state).x)Object(null===(ye=pe.current)||void 0===ye?void 0:ye.state).x=0,Object(null===(xe=pe.current)||void 0===xe?void 0:xe.state).y=c()?-121*Ce:-51*Ce}else if(3===e){var we,Se,ke,Te,Ie,Ee,Pe,Me,Re,De,Be,Ne,ze,Fe,Le,Ue,Qe,Ge,Ye,He,We,Je=0;if(0===Object(null===(we=re.current)||void 0===we?void 0:we.state).x)Object(null===(Me=re.current)||void 0===Me?void 0:Me.state).x=0,Object(null===(Re=re.current)||void 0===Re?void 0:Re.state).y=0;else Je+=1;if(0===Object(null===(Se=se.current)||void 0===Se?void 0:Se.state).x)Object(null===(De=se.current)||void 0===De?void 0:De.state).x=0,Object(null===(Be=se.current)||void 0===Be?void 0:Be.state).y=0;else Je+=1;if(0===Object(null===(ke=ce.current)||void 0===ke?void 0:ke.state).x)Object(null===(Ne=ce.current)||void 0===Ne?void 0:Ne.state).x=0,Object(null===(ze=ce.current)||void 0===ze?void 0:ze.state).y=c()?-121*Je:-51*Je;else Je+=1;if(Object(null===(Te=le.current)||void 0===Te?void 0:Te.state).x<0)Object(null===(Fe=le.current)||void 0===Fe?void 0:Fe.state).x=0,Object(null===(Le=le.current)||void 0===Le?void 0:Le.state).y=c()?-121*Je:-51*Je;else Je+=1;if(0===Object(null===(Ie=ue.current)||void 0===Ie?void 0:Ie.state).x)Object(null===(Ue=ue.current)||void 0===Ue?void 0:Ue.state).x=0,Object(null===(Qe=ue.current)||void 0===Qe?void 0:Qe.state).y=0;else Je+=1;if(0===Object(null===(Ee=de.current)||void 0===Ee?void 0:Ee.state).x)Object(null===(Ge=de.current)||void 0===Ge?void 0:Ge.state).x=0,Object(null===(Ye=de.current)||void 0===Ye?void 0:Ye.state).y=0;else Je+=1;if(0===Object(null===(Pe=pe.current)||void 0===Pe?void 0:Pe.state).x)Object(null===(He=pe.current)||void 0===He?void 0:He.state).x=0,Object(null===(We=pe.current)||void 0===We?void 0:We.state).y=0}else if(4===e){var Ve,Ke,Xe,Ze,qe,_e,$e,et,tt,nt,it,ot,at,rt,st,ct,lt,ut,dt,pt,ht,vt=0;if(0===Object(null===(Ve=re.current)||void 0===Ve?void 0:Ve.state).x)Object(null===(et=re.current)||void 0===et?void 0:et.state).x=0,Object(null===(tt=re.current)||void 0===tt?void 0:tt.state).y=0;else vt+=1;if(0===Object(null===(Ke=se.current)||void 0===Ke?void 0:Ke.state).x)Object(null===(nt=se.current)||void 0===nt?void 0:nt.state).x=0,Object(null===(it=se.current)||void 0===it?void 0:it.state).y=0;else vt+=1;if(0===Object(null===(Xe=ce.current)||void 0===Xe?void 0:Xe.state).x)Object(null===(ot=ce.current)||void 0===ot?void 0:ot.state).x=0,Object(null===(at=ce.current)||void 0===at?void 0:at.state).y=0;else vt+=1;if(0===Object(null===(Ze=le.current)||void 0===Ze?void 0:Ze.state).x)Object(null===(rt=le.current)||void 0===rt?void 0:rt.state).x=0,Object(null===(st=le.current)||void 0===st?void 0:st.state).y=c()?-121*vt:-51*vt;else vt+=1;if(Object(null===(qe=ue.current)||void 0===qe?void 0:qe.state).x<0)Object(null===(ct=ue.current)||void 0===ct?void 0:ct.state).x=0,Object(null===(lt=ue.current)||void 0===lt?void 0:lt.state).y=c()?-121*vt:-51*vt;else vt+=1;if(0===Object(null===(_e=de.current)||void 0===_e?void 0:_e.state).x)Object(null===(ut=de.current)||void 0===ut?void 0:ut.state).x=0,Object(null===(dt=de.current)||void 0===dt?void 0:dt.state).y=c()?-121*vt:-51*vt;else vt+=1;if(0===Object(null===($e=pe.current)||void 0===$e?void 0:$e.state).x)Object(null===(pt=pe.current)||void 0===pt?void 0:pt.state).x=0,Object(null===(ht=pe.current)||void 0===ht?void 0:ht.state).y=c()?-121*vt:-51*vt}else if(5===e){var mt,ft,bt,gt,jt,At,Ot,yt,xt,Ct,wt,St,kt,Tt,It,Et,Pt,Mt,Rt,Dt,Bt,Nt=0;if(0===Object(null===(mt=re.current)||void 0===mt?void 0:mt.state).x)Object(null===(yt=re.current)||void 0===yt?void 0:yt.state).x=0,Object(null===(xt=re.current)||void 0===xt?void 0:xt.state).y=0;else Nt+=1;if(0===Object(null===(ft=se.current)||void 0===ft?void 0:ft.state).x)Object(null===(Ct=se.current)||void 0===Ct?void 0:Ct.state).x=0,Object(null===(wt=se.current)||void 0===wt?void 0:wt.state).y=0;else Nt+=1;if(0===Object(null===(bt=ce.current)||void 0===bt?void 0:bt.state).x)Object(null===(St=ce.current)||void 0===St?void 0:St.state).x=0,Object(null===(kt=ce.current)||void 0===kt?void 0:kt.state).y=0;else Nt+=1;if(0===Object(null===(gt=le.current)||void 0===gt?void 0:gt.state).x)Object(null===(Tt=le.current)||void 0===Tt?void 0:Tt.state).x=0,Object(null===(It=le.current)||void 0===It?void 0:It.state).y=c()?-121*Nt:-51*Nt;else Nt+=1;if(0===Object(null===(jt=ue.current)||void 0===jt?void 0:jt.state).x)Object(null===(Et=ue.current)||void 0===Et?void 0:Et.state).x=0,Object(null===(Pt=ue.current)||void 0===Pt?void 0:Pt.state).y=c()?-121*Nt:-51*Nt;else Nt+=1;if(Object(null===(At=de.current)||void 0===At?void 0:At.state).x<0)Object(null===(Mt=de.current)||void 0===Mt?void 0:Mt.state).x=0,Object(null===(Rt=de.current)||void 0===Rt?void 0:Rt.state).y=c()?-121*Nt:-51*Nt;else Nt+=1;if(0===Object(null===(Ot=pe.current)||void 0===Ot?void 0:Ot.state).x)Object(null===(Dt=pe.current)||void 0===Dt?void 0:Dt.state).x=0,Object(null===(Bt=pe.current)||void 0===Bt?void 0:Bt.state).y=c()?-121*Nt:-51*Nt}else if(6===e){var zt,Ft,Lt,Ut,Qt,Gt,Yt,Ht,Wt,Jt,Vt,Kt,Xt,Zt,qt,_t,$t,en,tn,nn,on,an=0;if(0===Object(null===(zt=re.current)||void 0===zt?void 0:zt.state).x)Object(null===(Ht=re.current)||void 0===Ht?void 0:Ht.state).x=0,Object(null===(Wt=re.current)||void 0===Wt?void 0:Wt.state).y=0;else an+=1;if(0===Object(null===(Ft=se.current)||void 0===Ft?void 0:Ft.state).x)Object(null===(Jt=se.current)||void 0===Jt?void 0:Jt.state).x=0,Object(null===(Vt=se.current)||void 0===Vt?void 0:Vt.state).y=0;else an+=1;if(0===Object(null===(Lt=ce.current)||void 0===Lt?void 0:Lt.state).x)Object(null===(Kt=ce.current)||void 0===Kt?void 0:Kt.state).x=0,Object(null===(Xt=ce.current)||void 0===Xt?void 0:Xt.state).y=0;else an+=1;if(0===Object(null===(Ut=le.current)||void 0===Ut?void 0:Ut.state).x)Object(null===(Zt=le.current)||void 0===Zt?void 0:Zt.state).x=0,Object(null===(qt=le.current)||void 0===qt?void 0:qt.state).y=c()?-121*an:-51*an;else an+=1;if(0===Object(null===(Qt=ue.current)||void 0===Qt?void 0:Qt.state).x)Object(null===(_t=ue.current)||void 0===_t?void 0:_t.state).x=0,Object(null===($t=ue.current)||void 0===$t?void 0:$t.state).y=c()?-121*an:-51*an;else an+=1;if(0===Object(null===(Gt=de.current)||void 0===Gt?void 0:Gt.state).x)Object(null===(en=de.current)||void 0===en?void 0:en.state).x=0,Object(null===(tn=de.current)||void 0===tn?void 0:tn.state).y=c()?-121*an:-51*an;else an+=1;if(Object(null===(Yt=pe.current)||void 0===Yt?void 0:Yt.state).x<0)Object(null===(nn=pe.current)||void 0===nn?void 0:nn.state).x=0,Object(null===(on=pe.current)||void 0===on?void 0:on.state).y=c()?-121*an:-51*an}Jh=-2,ee({x:0,y:0}),oe(-1),g(t)}window.addEventListener("keydown",(function(e){e.ctrlKey||"F3"===e.key&&!1===Ae&&(e.preventDefault(),Ae=!0,!0===s?u(!1):!1===s&&u(!0))}),{}),window.addEventListener("touchmove",(function(e){e.preventDefault()}),{passive:!1,capture:!1}),window.addEventListener("contextmenu",(function(e){e.preventDefault()}),{passive:!1,capture:!1}),window.onerror=function(e,t,n,i,a){return"Ping timeout"!==(null===a||void 0===a?void 0:a.message)&&"Strophe: Websocket error [object Event]"!==(null===a||void 0===a?void 0:a.message)||null!==e||null!==t||null!==n||null!==i?console.warn("Global handler: ".concat(e),t,n,i,a):(da.setType("connection"),null!==o.testBot&&window.location.reload()),!0};var We,Je=[];function Ve(e,n,i,o){e.preventDefault(),Je.push((new Date).getTime()),window.clearTimeout(We),We=window.setTimeout((function(){var a,r;Je.length>1&&Je[Je.length-1]-Je[Je.length-2]<250?function(e,n,i,o){if(0!==o||"chat"!==n&&"content"!==n)if(1!==o||"chat"!==n&&"content"!==n)if(2!==o||"chat"!==n&&"content"!==n)if(3!==o||"chat"!==n&&"content"!==n)if(4!==o||"chat"!==n&&"content"!==n)if(5!==o||"chat"!==n&&"content"!==n)if(6!==o||"chat"!==n&&"content"!==n){if(0===o){var a,r,s;if(Object(null===(a=re.current)||void 0===a?void 0:a.state).x<0||Object(null===(r=re.current)||void 0===r?void 0:r.state).x>0)return;Object(null===(s=re.current)||void 0===s?void 0:s.state).x=-99999999}else if(1===o){var l,d,p;if(Object(null===(l=se.current)||void 0===l?void 0:l.state).x<0||Object(null===(d=se.current)||void 0===d?void 0:d.state).x>0)return;Object(null===(p=se.current)||void 0===p?void 0:p.state).x=-99999999}else if(2===o){var h,v,m;if(Object(null===(h=ce.current)||void 0===h?void 0:h.state).x<0||Object(null===(v=ce.current)||void 0===v?void 0:v.state).x>0)return;Object(null===(m=ce.current)||void 0===m?void 0:m.state).x=-99999999}else if(3===o){var f,b,j;if(Object(null===(f=le.current)||void 0===f?void 0:f.state).x<0||Object(null===(b=le.current)||void 0===b?void 0:b.state).x>0)return;Object(null===(j=le.current)||void 0===j?void 0:j.state).x=-99999999}else if(4===o){var A,O,y;if(Object(null===(A=ue.current)||void 0===A?void 0:A.state).x<0||Object(null===(O=ue.current)||void 0===O?void 0:O.state).x>0)return;Object(null===(y=ue.current)||void 0===y?void 0:y.state).x=-99999999}else if(5===o){var x,C,w;if(Object(null===(x=de.current)||void 0===x?void 0:x.state).x<0||Object(null===(C=de.current)||void 0===C?void 0:C.state).x>0)return;Object(null===(w=de.current)||void 0===w?void 0:w.state).x=-99999999}else if(6===o){var S,k,T;if(Object(null===(S=pe.current)||void 0===S?void 0:S.state).x<0||Object(null===(k=pe.current)||void 0===k?void 0:k.state).x>0)return;Object(null===(T=pe.current)||void 0===T?void 0:T.state).x=-99999999}var I=window.open(i,"","width=400,height=650,left=500,top=100"),E=setInterval((function(){if(null!==I&&void 0!==I&&I.closed){if(clearInterval(E),0===o){var e,t,i,a,r,s,l,u,d,p,h,v,m,f,b,j,A,O,y,x,C,w,S=0;Object(null===(e=re.current)||void 0===e?void 0:e.state).x<0||Object(null===(t=re.current)||void 0===t?void 0:t.state).x>0?(Object(null===(d=re.current)||void 0===d?void 0:d.state).x=0,Object(null===(p=re.current)||void 0===p?void 0:p.state).y=0):S+=1,0===Object(null===(i=se.current)||void 0===i?void 0:i.state).x?(Object(null===(h=se.current)||void 0===h?void 0:h.state).x=0,Object(null===(v=se.current)||void 0===v?void 0:v.state).y=c()?-121*S:-51*S):S+=1,0===Object(null===(a=ce.current)||void 0===a?void 0:a.state).x?(Object(null===(m=ce.current)||void 0===m?void 0:m.state).x=0,Object(null===(f=ce.current)||void 0===f?void 0:f.state).y=c()?-121*S:-51*S):S+=1,0===Object(null===(r=le.current)||void 0===r?void 0:r.state).x?(Object(null===(b=le.current)||void 0===b?void 0:b.state).x=0,Object(null===(j=le.current)||void 0===j?void 0:j.state).y=c()?-121*S:-51*S):S+=1,0===Object(null===(s=ue.current)||void 0===s?void 0:s.state).x?(Object(null===(A=ue.current)||void 0===A?void 0:A.state).x=0,Object(null===(O=ue.current)||void 0===O?void 0:O.state).y=c()?-121*S:-51*S):S+=1,0===Object(null===(l=de.current)||void 0===l?void 0:l.state).x?(Object(null===(y=de.current)||void 0===y?void 0:y.state).x=0,Object(null===(x=de.current)||void 0===x?void 0:x.state).y=c()?-121*S:-51*S):S+=1,0===Object(null===(u=pe.current)||void 0===u?void 0:u.state).x&&(Object(null===(C=pe.current)||void 0===C?void 0:C.state).x=0,Object(null===(w=pe.current)||void 0===w?void 0:w.state).y=c()?-121*S:-51*S)}else if(1===o){var k,T,P,M,R,D,B,N,z,F,L,U,Q,G,Y,H,W,J,V,K,X,Z,q=0;0===Object(null===(k=re.current)||void 0===k?void 0:k.state).x?(Object(null===(z=re.current)||void 0===z?void 0:z.state).x=0,Object(null===(F=re.current)||void 0===F?void 0:F.state).y=0):q+=1,Object(null===(T=se.current)||void 0===T?void 0:T.state).x<0||Object(null===(P=se.current)||void 0===P?void 0:P.state).x>0?(Object(null===(L=se.current)||void 0===L?void 0:L.state).x=0,Object(null===(U=se.current)||void 0===U?void 0:U.state).y=c()?-121*q:-51*q):q+=1,0===Object(null===(M=ce.current)||void 0===M?void 0:M.state).x?(Object(null===(Q=ce.current)||void 0===Q?void 0:Q.state).x=0,Object(null===(G=ce.current)||void 0===G?void 0:G.state).y=c()?-121*q:-51*q):q+=1,0===Object(null===(R=le.current)||void 0===R?void 0:R.state).x?(Object(null===(Y=le.current)||void 0===Y?void 0:Y.state).x=0,Object(null===(H=le.current)||void 0===H?void 0:H.state).y=c()?-121*q:-51*q):q+=1,0===Object(null===(D=ue.current)||void 0===D?void 0:D.state).x?(Object(null===(W=ue.current)||void 0===W?void 0:W.state).x=0,Object(null===(J=ue.current)||void 0===J?void 0:J.state).y=c()?-121*q:-51*q):q+=1,0===Object(null===(B=de.current)||void 0===B?void 0:B.state).x?(Object(null===(V=de.current)||void 0===V?void 0:V.state).x=0,Object(null===(K=de.current)||void 0===K?void 0:K.state).y=c()?-121*q:-51*q):q+=1,0===Object(null===(N=pe.current)||void 0===N?void 0:N.state).x&&(Object(null===(X=pe.current)||void 0===X?void 0:X.state).x=0,Object(null===(Z=pe.current)||void 0===Z?void 0:Z.state).y=c()?-121*q:-51*q)}else if(2===o){var _,$,te,ne,ie,oe,ae,he,ve,me,fe,be,ge,je,Ae,Oe,ye,xe,Ce,we,Se,ke,Te=0;0===Object(null===(_=re.current)||void 0===_?void 0:_.state).x?(Object(null===(ve=re.current)||void 0===ve?void 0:ve.state).x=0,Object(null===(me=re.current)||void 0===me?void 0:me.state).y=0):Te+=1,0===Object(null===($=se.current)||void 0===$?void 0:$.state).x?(Object(null===(fe=se.current)||void 0===fe?void 0:fe.state).x=0,Object(null===(be=se.current)||void 0===be?void 0:be.state).y=c()?-121*Te:-51*Te):Te+=1,Object(null===(te=ce.current)||void 0===te?void 0:te.state).x<0||Object(null===(ne=ce.current)||void 0===ne?void 0:ne.state).x>0?(Object(null===(ge=ce.current)||void 0===ge?void 0:ge.state).x=0,Object(null===(je=ce.current)||void 0===je?void 0:je.state).y=c()?-121*Te:-51*Te):Te+=1,0===Object(null===(ie=le.current)||void 0===ie?void 0:ie.state).x?(Object(null===(Ae=le.current)||void 0===Ae?void 0:Ae.state).x=0,Object(null===(Oe=le.current)||void 0===Oe?void 0:Oe.state).y=c()?-121*Te:-51*Te):Te+=1,0===Object(null===(oe=ue.current)||void 0===oe?void 0:oe.state).x?(Object(null===(ye=ue.current)||void 0===ye?void 0:ye.state).x=0,Object(null===(xe=ue.current)||void 0===xe?void 0:xe.state).y=c()?-121*Te:-51*Te):Te+=1,0===Object(null===(ae=de.current)||void 0===ae?void 0:ae.state).x?(Object(null===(Ce=de.current)||void 0===Ce?void 0:Ce.state).x=0,Object(null===(we=de.current)||void 0===we?void 0:we.state).y=c()?-121*Te:-51*Te):Te+=1,0===Object(null===(he=pe.current)||void 0===he?void 0:he.state).x&&(Object(null===(Se=pe.current)||void 0===Se?void 0:Se.state).x=0,Object(null===(ke=pe.current)||void 0===ke?void 0:ke.state).y=c()?-121*Te:-51*Te)}else if(3===o){var Ie,Ee,Pe,Me,Re,De,Be,Ne,ze,Fe,Le,Ue,Qe,Ge,Ye,He,We,Je,Ve,Ke,Xe,Ze,qe=0;0===Object(null===(Ie=re.current)||void 0===Ie?void 0:Ie.state).x?(Object(null===(ze=re.current)||void 0===ze?void 0:ze.state).x=0,Object(null===(Fe=re.current)||void 0===Fe?void 0:Fe.state).y=0):qe+=1,0===Object(null===(Ee=se.current)||void 0===Ee?void 0:Ee.state).x?(Object(null===(Le=se.current)||void 0===Le?void 0:Le.state).x=0,Object(null===(Ue=se.current)||void 0===Ue?void 0:Ue.state).y=0):qe+=1,0===Object(null===(Pe=ce.current)||void 0===Pe?void 0:Pe.state).x?(Object(null===(Qe=ce.current)||void 0===Qe?void 0:Qe.state).x=0,Object(null===(Ge=ce.current)||void 0===Ge?void 0:Ge.state).y=c()?-121*qe:-51*qe):qe+=1,Object(null===(Me=le.current)||void 0===Me?void 0:Me.state).x<0||Object(null===(Re=le.current)||void 0===Re?void 0:Re.state).x>0?(Object(null===(Ye=le.current)||void 0===Ye?void 0:Ye.state).x=0,Object(null===(He=le.current)||void 0===He?void 0:He.state).y=c()?-121*qe:-51*qe):qe+=1,0===Object(null===(De=ue.current)||void 0===De?void 0:De.state).x?(Object(null===(We=ue.current)||void 0===We?void 0:We.state).x=0,Object(null===(Je=ue.current)||void 0===Je?void 0:Je.state).y=0):qe+=1,0===Object(null===(Be=de.current)||void 0===Be?void 0:Be.state).x?(Object(null===(Ve=de.current)||void 0===Ve?void 0:Ve.state).x=0,Object(null===(Ke=de.current)||void 0===Ke?void 0:Ke.state).y=c()?-121*qe:-51*qe):qe+=1,0===Object(null===(Ne=pe.current)||void 0===Ne?void 0:Ne.state).x&&(Object(null===(Xe=pe.current)||void 0===Xe?void 0:Xe.state).x=0,Object(null===(Ze=pe.current)||void 0===Ze?void 0:Ze.state).y=c()?-121*qe:-51*qe)}else if(4===o){var _e,$e,et,tt,nt,it,ot,at,rt,st,ct,lt,ut,dt,pt,ht,vt,mt,ft,bt,gt,jt,At=0;0===Object(null===(_e=re.current)||void 0===_e?void 0:_e.state).x?(Object(null===(rt=re.current)||void 0===rt?void 0:rt.state).x=0,Object(null===(st=re.current)||void 0===st?void 0:st.state).y=0):At+=1,0===Object(null===($e=se.current)||void 0===$e?void 0:$e.state).x?(Object(null===(ct=se.current)||void 0===ct?void 0:ct.state).x=0,Object(null===(lt=se.current)||void 0===lt?void 0:lt.state).y=0):At+=1,0===Object(null===(et=ce.current)||void 0===et?void 0:et.state).x?(Object(null===(ut=ce.current)||void 0===ut?void 0:ut.state).x=0,Object(null===(dt=ce.current)||void 0===dt?void 0:dt.state).y=0):At+=1,0===Object(null===(tt=le.current)||void 0===tt?void 0:tt.state).x?(Object(null===(pt=le.current)||void 0===pt?void 0:pt.state).x=0,Object(null===(ht=le.current)||void 0===ht?void 0:ht.state).y=c()?-121*At:-51*At):At+=1,Object(null===(nt=ue.current)||void 0===nt?void 0:nt.state).x<0||Object(null===(it=ue.current)||void 0===it?void 0:it.state).x>0?(Object(null===(vt=ue.current)||void 0===vt?void 0:vt.state).x=0,Object(null===(mt=ue.current)||void 0===mt?void 0:mt.state).y=c()?-121*At:-51*At):At+=1,0===Object(null===(ot=de.current)||void 0===ot?void 0:ot.state).x?(Object(null===(ft=de.current)||void 0===ft?void 0:ft.state).x=0,Object(null===(bt=de.current)||void 0===bt?void 0:bt.state).y=c()?-121*At:-51*At):At+=1,0===Object(null===(at=pe.current)||void 0===at?void 0:at.state).x&&(Object(null===(gt=pe.current)||void 0===gt?void 0:gt.state).x=0,Object(null===(jt=pe.current)||void 0===jt?void 0:jt.state).y=c()?-121*At:-51*At)}else if(5===o){var Ot,yt,xt,Ct,wt,St,kt,Tt,It,Et,Pt,Mt,Rt,Dt,Bt,Nt,zt,Ft,Lt,Ut,Qt,Gt,Yt=0;0===Object(null===(Ot=re.current)||void 0===Ot?void 0:Ot.state).x?(Object(null===(It=re.current)||void 0===It?void 0:It.state).x=0,Object(null===(Et=re.current)||void 0===Et?void 0:Et.state).y=0):Yt+=1,0===Object(null===(yt=se.current)||void 0===yt?void 0:yt.state).x?(Object(null===(Pt=se.current)||void 0===Pt?void 0:Pt.state).x=0,Object(null===(Mt=se.current)||void 0===Mt?void 0:Mt.state).y=0):Yt+=1,0===Object(null===(xt=ce.current)||void 0===xt?void 0:xt.state).x?(Object(null===(Rt=ce.current)||void 0===Rt?void 0:Rt.state).x=0,Object(null===(Dt=ce.current)||void 0===Dt?void 0:Dt.state).y=0):Yt+=1,0===Object(null===(Ct=le.current)||void 0===Ct?void 0:Ct.state).x?(Object(null===(Bt=le.current)||void 0===Bt?void 0:Bt.state).x=0,Object(null===(Nt=le.current)||void 0===Nt?void 0:Nt.state).y=c()?-121*Yt:-51*Yt):Yt+=1,0===Object(null===(wt=ue.current)||void 0===wt?void 0:wt.state).x?(Object(null===(zt=ue.current)||void 0===zt?void 0:zt.state).x=0,Object(null===(Ft=ue.current)||void 0===Ft?void 0:Ft.state).y=c()?-121*Yt:-51*Yt):Yt+=1,Object(null===(St=de.current)||void 0===St?void 0:St.state).x<0||Object(null===(kt=de.current)||void 0===kt?void 0:kt.state).x>0?(Object(null===(Lt=de.current)||void 0===Lt?void 0:Lt.state).x=0,Object(null===(Ut=de.current)||void 0===Ut?void 0:Ut.state).y=c()?-121*Yt:-51*Yt):Yt+=1,0===Object(null===(Tt=pe.current)||void 0===Tt?void 0:Tt.state).x&&(Object(null===(Qt=pe.current)||void 0===Qt?void 0:Qt.state).x=0,Object(null===(Gt=pe.current)||void 0===Gt?void 0:Gt.state).y=c()?-121*Yt:-51*Yt)}else if(6===o){var Ht,Wt,Jt,Vt,Kt,Xt,Zt,qt,_t,$t,en,tn,nn,on,an,rn,sn,cn,ln,un,dn,pn,hn=0;0===Object(null===(Ht=re.current)||void 0===Ht?void 0:Ht.state).x?(Object(null===(_t=re.current)||void 0===_t?void 0:_t.state).x=0,Object(null===($t=re.current)||void 0===$t?void 0:$t.state).y=0):hn+=1,0===Object(null===(Wt=se.current)||void 0===Wt?void 0:Wt.state).x?(Object(null===(en=se.current)||void 0===en?void 0:en.state).x=0,Object(null===(tn=se.current)||void 0===tn?void 0:tn.state).y=0):hn+=1,0===Object(null===(Jt=ce.current)||void 0===Jt?void 0:Jt.state).x?(Object(null===(nn=ce.current)||void 0===nn?void 0:nn.state).x=0,Object(null===(on=ce.current)||void 0===on?void 0:on.state).y=0):hn+=1,0===Object(null===(Vt=le.current)||void 0===Vt?void 0:Vt.state).x?(Object(null===(an=le.current)||void 0===an?void 0:an.state).x=0,Object(null===(rn=le.current)||void 0===rn?void 0:rn.state).y=c()?-121*hn:-51*hn):hn+=1,0===Object(null===(Kt=ue.current)||void 0===Kt?void 0:Kt.state).x?(Object(null===(sn=ue.current)||void 0===sn?void 0:sn.state).x=0,Object(null===(cn=ue.current)||void 0===cn?void 0:cn.state).y=c()?-121*hn:-51*hn):hn+=1,0===Object(null===(Xt=de.current)||void 0===Xt?void 0:Xt.state).x?(Object(null===(ln=de.current)||void 0===ln?void 0:ln.state).x=0,Object(null===(un=de.current)||void 0===un?void 0:un.state).y=c()?-121*hn:-51*hn):hn+=1,(Object(null===(Zt=pe.current)||void 0===Zt?void 0:Zt.state).x<0||Object(null===(qt=de.current)||void 0===qt?void 0:qt.state).x>0)&&(Object(null===(dn=pe.current)||void 0===dn?void 0:dn.state).x=0,Object(null===(pn=pe.current)||void 0===pn?void 0:pn.state).y=c()?-121*hn:-51*hn)}Jh=-2,ee({x:0,y:0}),g(n)}}),100)}else{var P,M,R,D;if(Object(null===(P=pe.current)||void 0===P?void 0:P.state).x<0||Object(null===(M=pe.current)||void 0===M?void 0:M.state).x>0)return;Object(null===(R=pe.current)||void 0===R?void 0:R.state).x=-Math.floor(Math.random()*(t.map.screenSize[0]-500+1)+500),Object(null===(D=pe.current)||void 0===D?void 0:D.state).y=Math.floor(101*Math.random()+50)+-25*o}else{var B,N,z,F;if(Object(null===(B=de.current)||void 0===B?void 0:B.state).x<0||Object(null===(N=de.current)||void 0===N?void 0:N.state).x>0)return;Object(null===(z=de.current)||void 0===z?void 0:z.state).x=-Math.floor(Math.random()*(t.map.screenSize[0]-500+1)+500),Object(null===(F=de.current)||void 0===F?void 0:F.state).y=Math.floor(101*Math.random()+50)+-25*o}else{var L,U,Q,G;if(Object(null===(L=ue.current)||void 0===L?void 0:L.state).x<0||Object(null===(U=ue.current)||void 0===U?void 0:U.state).x>0)return;Object(null===(Q=ue.current)||void 0===Q?void 0:Q.state).x=-Math.floor(Math.random()*(t.map.screenSize[0]-500+1)+500),Object(null===(G=ue.current)||void 0===G?void 0:G.state).y=Math.floor(101*Math.random()+50)+-25*o}else{var Y,H,W,J;if(Object(null===(Y=le.current)||void 0===Y?void 0:Y.state).x<0||Object(null===(H=le.current)||void 0===H?void 0:H.state).x>0)return;Object(null===(W=le.current)||void 0===W?void 0:W.state).x=-Math.floor(Math.random()*(t.map.screenSize[0]-500+1)+500),Object(null===(J=le.current)||void 0===J?void 0:J.state).y=Math.floor(101*Math.random()+50)+-25*o}else{var V,K,X,Z;if(Object(null===(V=ce.current)||void 0===V?void 0:V.state).x<0||Object(null===(K=ce.current)||void 0===K?void 0:K.state).x>0)return;Object(null===(X=ce.current)||void 0===X?void 0:X.state).x=-Math.floor(Math.random()*(t.map.screenSize[0]-500+1)+500),Object(null===(Z=ce.current)||void 0===Z?void 0:Z.state).y=Math.floor(101*Math.random()+50)+-25*o}else{var q,_,$,te;if(Object(null===(q=se.current)||void 0===q?void 0:q.state).x<0||Object(null===(_=se.current)||void 0===_?void 0:_.state).x>0)return;Object(null===($=se.current)||void 0===$?void 0:$.state).x=-Math.floor(Math.random()*(t.map.screenSize[0]-500+1)+500),Object(null===(te=se.current)||void 0===te?void 0:te.state).y=Math.floor(101*Math.random()+50)+-25*o}else{var ne,ie,ae,he;if(Object(null===(ne=re.current)||void 0===ne?void 0:ne.state).x<0||Object(null===(ie=re.current)||void 0===ie?void 0:ie.state).x>0)return;Object(null===(ae=re.current)||void 0===ae?void 0:ae.state).x=-Math.floor(Math.random()*(t.map.screenSize[0]-500+1)+500),Object(null===(he=re.current)||void 0===he?void 0:he.state).y=Math.floor(101*Math.random()+50)+-25*o}Ge(o),Qe(o),oe(o),u(!1)}(e.target,n,i,o):(e.target,a=n,r=o,($.x<0||$.x>0)&&ie===r||(Ae=!0,!0===s?b===a&&u(!1):!1===s&&u(!0),g(a),oe(r)))}),250)}return Object(Ia.jsx)(pa.a,{children:function(){var i,o,a,r;return Object(Ia.jsxs)("div",{ref:n,className:e.back,style:{backgroundColor:"#0f5c81"},children:[Object(Ia.jsxs)(ma.a,{pane2Style:!0===s?{display:"block",backgroundColor:"chat"===b?"#0f5c81":"content"===b?"#8b5e3c":"blank"!==b?be:"white",boxShadow:"blank"!==b?"5px 10px 10px 3px black":"5px 10px 10px 3px white"}:{display:"none",backgroundColor:"#FFF"},className:e.fill,split:"vertical",minSize:0,defaultSize:!0===s?c()?"40%":"73%":"100%",children:[Object(Ia.jsxs)(ha.Fragment,{children:[Object(Ia.jsx)(mh,{showAllTracks:false,stores:t}),Object(Ia.jsx)(pa.a,{children:function(){return Object(Ia.jsx)(Sh,{transparent:void 0!==ea.mainScreenStream||false,stores:t})}}),Object(Ia.jsx)(Dh.a,{bounds:{top:-0,left:-(t.map.screenSize[0]-40),right:-40,bottom:t.map.screenSize[1]-50},ref:re,onDrag:function(e,t){return Ue(t,0)},onStop:function(e,t){return Ye(t,"",0)},defaultPosition:{x:0,y:0},children:Object(Ia.jsxs)("div",{style:{position:"absolute",right:"0%",top:(c(),0),borderRadius:"5px",display:"flex",zIndex:h?0:"chat"===b||0===ie?19:16,height:"100%"},children:[Object(Ia.jsxs)("div",{style:{position:"absolute",right:"0%",top:"0px",borderRadius:"5px",display:"flex",zIndex:h?0:"chat"===b?19:16},onClick:function(e){Ve(e,"chat","",0)},onTouchEnd:function(e){Ve(e,"chat","",0)},children:[Object(Ia.jsx)("img",{src:"data:image/png;base64,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",style:{width:c()?120:50,height:"auto",position:"relative",top:"0px",left:(c(),"1px"),userSelect:"none",zIndex:h?0:"chat"===b?19:16},draggable:!1,alt:""}),Object(Ia.jsx)("img",{src:ip,style:{width:c()?120:50,height:c()?120:50,color:"white",position:"absolute",top:"2px",left:c()?"10px":"5px",userSelect:"none",zIndex:h?0:99},draggable:!1,alt:""})]}),Object(Ia.jsxs)("div",{style:{position:"absolute",width:"405px",height:"70%",left:"0px",backgroundColor:"#0f5c81",borderRadius:"2px",minWidth:"280px",top:"0px",display:Object(null===(i=re.current)||void 0===i?void 0:i.state).x<0||Object(null===(o=re.current)||void 0===o?void 0:o.state).x>0?"block":"none",zIndex:-9999},children:[Object(Ia.jsx)(Mh.a,{style:{width:"40px",height:"50px",position:"absolute",right:"25px",color:"white",padding:c()?"10px":"1px",transform:c()?"scale(2)":"scale(1)",zIndex:9999},onClick:function(){He(0,"chat")},onTouchEnd:function(){He(0,"chat")}}),Object(Ia.jsx)(ph,{stores:t,type:"chat"})]})]})},0),Object(Ia.jsx)(Dh.a,{bounds:{top:-51,left:-(t.map.screenSize[0]-40),right:-40,bottom:t.map.screenSize[1]-101},ref:se,onDrag:function(e,t){return Ue(t,1)},onStop:function(e,t){return Ye(t,"",1)},defaultPosition:{x:0,y:0},children:Object(Ia.jsxs)("div",{style:{position:"absolute",right:"0%",top:c()?119:51,borderRadius:"5px",display:"flex",zIndex:h?0:"content"===b||1===ie?19:15,height:"100%"},children:[Object(Ia.jsxs)("div",{style:{position:"absolute",right:"0%",top:"0px",borderRadius:"5px",display:"flex",zIndex:h?0:"content"===b?19:15},onClick:function(e){Ve(e,"content","",1)},onTouchEnd:function(e){Ve(e,"content","",1)},children:[Object(Ia.jsx)("img",{src:"data:image/png;base64,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",style:{width:c()?120:50,height:"auto",position:"relative",top:"0px",left:(c(),"1px"),userSelect:"none",zIndex:h?0:"content"===b?19:15},draggable:!1,alt:""}),Object(Ia.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABvCAYAAADixZ5gAAAACXBIWXMAAC4jAAAuIwF4pT92AAADeUlEQVR4nO2c0W3bMBRFj4v+1xtUmaDeIOoEzQZ1N8gGyQjpBHU36AZ1J6izAbOBM0H6QRtxVMVNY1J6F7oHEGIIwiPhEz3yUaJnDw8PGE3ejN0B83osTxjLE8byhLE8YSxPGMsTxvKEsTxhLE8YyxPG8oSxPGEsTxjLE8byhLE8YSxPGMsTxvKEsTxhLE8YyxPG8oSxPGEsTxjLE8byhHk7dgeOMAcWhWK1u7+b3ZEKxR2ViPIWwDXwqWIbX4HLivEHYRZsi9cS+DZQW9937ckSSd4C+D1wm9ICI01Yrkdo8zOwGqHdIkSRN+fvMe4e+AKcAbMTjjPg9kjbsgKjyOubVV6Sv9R0YuwE/PjHNZICo8jrYzNwe3ICpyzvvueclMDI8mrTIi5wyvI2iAucsjwQFzh1eSAscCrytj3n5gefJQVORV7fzPWm55oWIYFR1jZb4Gfn3KxwG1vgXefcHY+LAAlodsf7Z2KEWgudkrxr4KpAnI/AukCck5lK2oQs71eBOMsCMYowJXkAF+QHsafQFOhHESI+Sa/JlrzgfUMW2fJ01tml4fnxb3SmJm9PIgvszjifuzakwKmlzdeQxu7Ac6jdeQse011J9m+VrQrHrYqSvIY8Re/WaiU4P/i8qhC/Ckpps6GOuEPayvGLoiQvDdDG0E/vT0IpbSby6kZL+TskkVPyqnDcqijJg/wFr0fuQxiU0qbpYHnCqKVN13kHKMlrqF/nzXnZklkIlNJmQ/0679gidTiU5KUB2uh71yUsSmkzkeu8C8rtmN2zJadkmZQJWvLAdd4TlNKm6WB5wqilzQX5NYamcNw1ZfYCDoqSvIa6dd4VgV7rewlKabOhfp3XVI5fFCV5qXL8e1znVSOR09ol5VdC0i6u5VVkjdCYVBultGk6WJ4wkeW1Y3dgR3d8DTMuRpHX94W0Q3eihwXwoXMuzBtmUSYsG/JU/bCOuyLXXWmE/kC+45Y958PIi7K5EsptfqzJHYEK+Ujy5uT/6pA7cnaEWj6LMuZBHvdajv9C31jsf4FwPXI/nhDpzjtkuTvOj19WnVsen7CnUXvSQ1R55gVESpvmP7E8YSxPGMsTxvKEsTxhLE8YyxPG8oSxPGEsTxjLE8byhLE8YSxPGMsTxvKEsTxhLE8YyxPG8oSxPGEsTxjLE8byhLE8YSxPGMsT5g9FnpQ4jUiu6wAAAABJRU5ErkJggg==",style:{width:c()?120:50,height:c()?120:50,color:"white",position:"absolute",top:"2px",left:c()?"10px":"5px",userSelect:"none",zIndex:h?0:99},draggable:!1,alt:""})]}),Object(Ia.jsxs)("div",{style:{position:"absolute",width:"405px",height:"70%",left:"0px",backgroundColor:"#8b5e3c",borderRadius:"2px",minWidth:"280px",top:"0px",display:Object(null===(a=se.current)||void 0===a?void 0:a.state).x<0||Object(null===(r=se.current)||void 0===r?void 0:r.state).x>0?"block":"none",zIndex:-9999},children:[Object(Ia.jsx)(Mh.a,{style:{width:"40px",height:"50px",position:"absolute",right:"25px",color:"white",padding:c()?"10px":"1px",transform:c()?"scale(2)":"scale(1)",zIndex:9999},onClick:function(){He(1,"content")},onTouchEnd:function(){He(1,"content")}}),Object(Ia.jsx)(ph,{stores:t,type:"content"})]})]})},1),Object(Ia.jsx)(Ia.Fragment,{children:je.filter((function(e){return"appimg"===e.shareType})).map((function(e,n){var i,o,a,r,s,l,u,d,p,v;return Object(Ia.jsx)(Dh.a,{bounds:""===e.url?{top:-51*(n+2),left:-(t.map.screenSize[0]-40),right:-40,bottom:t.map.screenSize[1]-(50+51*(n+2))}:{},ref:n+2===2?ce:3===n?le:4===n?ue:5===n?de:6===n?pe:7===n?he:ve,onDrag:function(t,i){return Ue(i,n+2,e.type)},onStop:function(t,i){return Ye(i,e.url,n+2)},defaultPosition:{x:0,y:0},children:Object(Ia.jsxs)("div",{style:{position:"absolute",right:"0%",top:c()?0+119*(n+2):0+51*(n+2),borderRadius:"5px",display:"flex",zIndex:h?0:b===e.type||ie===n+2?19:18-(n+2+2),height:"100%"},children:[Object(Ia.jsxs)("div",{style:{position:"absolute",right:"0%",top:"0px",borderRadius:"5px",display:"flex",zIndex:h?0:b===e.type?19:18-(n+2+2)},onClick:function(t){Ve(t,e.type,e.url,n+2)},onTouchEnd:function(t){Ve(t,e.type,e.url,n+2)},children:[Object(Ia.jsx)("img",{src:e.baseImage,style:{width:c()?120:50,height:"auto",position:"relative",top:"0px",left:(c(),"1px"),userSelect:"none",zIndex:h?0:b===e.type?19:18-(n+2+2)},draggable:!1,alt:""}),Object(Ia.jsx)("img",{src:e.baseIcon,style:{width:c()?120:50,height:c()?120:50,color:"white",position:"absolute",top:"2px",left:c()?"10px":"5px",userSelect:"none",zIndex:h?0:99},draggable:!1,alt:""})]}),Object(Ia.jsxs)("div",{style:{position:"absolute",width:"405px",height:"70%",left:"0px",backgroundColor:e.baseColor,borderRadius:"2px",minWidth:"280px",top:"0px",display:(Object(null===(i=ce.current)||void 0===i?void 0:i.state).x<0||Object(null===(o=ce.current)||void 0===o?void 0:o.state).x>0)&&n+2===2||(Object(null===(a=le.current)||void 0===a?void 0:a.state).x<0||Object(null===(r=le.current)||void 0===r?void 0:r.state).x>0)&&n+2===3||(Object(null===(s=ue.current)||void 0===s?void 0:s.state).x<0||Object(null===(l=ue.current)||void 0===l?void 0:l.state).x>0)&&n+2===4||(Object(null===(u=de.current)||void 0===u?void 0:u.state).x<0||Object(null===(d=de.current)||void 0===d?void 0:d.state).x>0)&&n+2===5||(Object(null===(p=pe.current)||void 0===p?void 0:p.state).x<0||Object(null===(v=pe.current)||void 0===v?void 0:v.state).x>0)&&n+2===6?"block":"none",zIndex:-9999},children:[Object(Ia.jsx)(Mh.a,{style:{width:"40px",height:"50px",position:"absolute",right:"25px",color:"white",padding:c()?"10px":"1px",transform:c()?"scale(2)":"scale(1)",zIndex:9999},onClick:function(){He(n+2,e.type)},onTouchEnd:function(){He(n+2,e.type)}}),Object(Ia.jsx)("iframe",{src:e.url,title:e.type,allowTransparency:!0,frameBorder:0,style:{width:"100%",height:"100%"}})]})]})},n+2)}))}),Object(Ia.jsx)(ic,{stores:t,height:c()&&l()?100:void 0}),Object(Ia.jsx)(Hh,{stores:t,height:c()&&l()?100:void 0}),Object(Ia.jsx)(Qh,{stores:t,height:c()&&l()?100:void 0})]}),Object(Ia.jsx)("div",{style:{display:!0===s?"block":"none",minWidth:"280px",width:"100%",maxWidth:"280px"},children:Object(Ia.jsx)(ph,{stores:t,type:Wh})})]}),Object(Ia.jsxs)("div",{style:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",verticalAlign:"center",position:"absolute",backgroundColor:"#5f7ca0",textAlign:"center",display:h?"block":"none"},children:[Object(Ia.jsx)("p",{style:{textAlign:"right",color:"white",position:"relative",right:"24.5px",top:"20px",fontSize:c()?"2.4rem":"1rem",fontWeight:"normal"},children:"Version 2.0.5"}),Object(Ia.jsxs)("div",{style:{position:"relative",top:""===me?"20%":"0%"},children:[Object(Ia.jsx)("p",{style:{textAlign:"center",color:"white",fontSize:c()?"3rem":"1.2rem",fontWeight:"normal"},children:"Welcome To"}),Object(Ia.jsx)("p",{style:ye?{textAlign:"center",color:"white",marginTop:"-0.8rem",fontSize:c()?"2.8rem":"1.2rem",fontWeight:"bold",opacity:1,transition:"opacity 300ms"}:{textAlign:"center",color:"white",marginTop:"-0.8rem",fontSize:c()?"3rem":"1.2rem",fontWeight:"bold",opacity:0},children:ye}),Object(Ia.jsx)("img",{src:me,style:me?{height:"250px",transform:"scale(1)",opacity:1,transition:"opacity 300ms, transform: 300ms",userSelect:"none"}:{height:"0px",transform:"scale(0)",opacity:0,transition:"0.3s ease-out",userSelect:"none"},draggable:!1,alt:""}),Object(Ia.jsx)("p",{style:{textAlign:"center",color:"#cdcdcd",fontSize:c()?"2.8rem":"1rem",overflow:"hidden",position:"relative",marginTop:"0.5rem",width:"80%",marginLeft:"10%",fontWeight:"normal"},children:fe}),Object(Ia.jsx)("img",{style:{width:c()?"8rem":"4rem",backgroundColor:"#00000020",borderRadius:"50%",position:"relative",marginTop:""!==me?"20px":"-15px",userSelect:"none"},src:t.participants.local.information.avatarSrc,draggable:!1,alt:""}),Object(Ia.jsx)("p",{style:{textAlign:"center",color:"black",marginTop:"0.5rem",fontSize:c()?"3rem":"1.2rem",fontWeight:"normal"},children:t.participants.local.information.name}),Object(Ia.jsx)("p",{style:{textAlign:"center",color:"black",marginTop:"1.5rem",fontSize:c()?"3rem":"1.2rem",fontWeight:"normal"},children:"Give your web browser permissions"}),Object(Ia.jsx)("p",{style:{textAlign:"center",color:"black",marginTop:"-0.9rem",fontSize:c()?"3rem":"1.2rem",fontWeight:"normal"},children:"to access the mic and camera if necessary."}),Object(Ia.jsx)("img",{style:{width:c()?"18rem":"8rem",position:"relative",userSelect:"none"},src:ja,draggable:!1,alt:""})]})]}),Object(Ia.jsxs)("div",{ref:ae,style:{position:"relative",width:"130px",height:"130px",maxWidth:"130px",zIndex:-999},children:[Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==Vh?"block":"none"},src:Vh,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==qh?"block":"none"},src:qh,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==Kh?"block":"none"},src:Kh,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==Zh?"block":"none"},src:Zh,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"-3px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==_h?"block":"none"},src:_h,width:"130px",height:"130px",draggable:!1,alt:""})}),Object(Ia.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px"},children:Object(Ia.jsx)("img",{style:{display:""!==$h?"block":"none"},src:$h,width:"130px",height:"130px",draggable:!1,alt:""})})]}),Object(Ia.jsx)(ka.a,{open:X,onClose:function(){return Z(!1)},onExited:function(){return Z(!1)},keepMounted:!0,PaperProps:{style:{backgroundColor:"white",position:"relative",overflow:"hidden",borderRadius:"20px",width:300,height:350,zIndex:0,left:"250px",transform:c()?"scale(1.5)":"scale(1)"}},BackdropProps:{invisible:!0},children:Object(Ia.jsx)(ya.a,{style:{overflow:"hidden"},children:Object(Ia.jsxs)("div",{children:[Object(Ia.jsx)("div",{style:{position:"relative",left:"0px"},children:Object(Ia.jsx)(Ia.Fragment,{children:Me.map((function(t,n){return Object(Ia.jsx)("div",{className:n===Ne?e.activeSlide:e.slide,children:n===Ne&&Object(Ia.jsx)("img",{src:t,width:"250px",height:"250px",alt:""})},n)}))})}),Object(Ia.jsx)("div",{style:{width:"100%",height:"1px",backgroundColor:"lightgrey",position:"relative",top:"5px"}}),Object(Ia.jsxs)("div",{style:{display:"flex",position:"relative",top:"15px",width:"100%"},children:[Object(Ia.jsx)("div",{onClick:function(){ze(0===Ne?Fe-1:Ne-1)},children:Object(Ia.jsx)(Th.a,{className:e.previous})}),Object(Ia.jsx)("div",{onClick:function(){ze(Ne===Fe-1?0:Ne+1)},children:Object(Ia.jsx)(Eh.a,{className:e.next})}),Object(Ia.jsx)("div",{style:{display:"flex",width:"80%",justifyContent:"center",position:"relative",top:"15px",left:"10%"},children:Re.map((function(e,t){return Object(Ia.jsx)("div",{style:{position:"relative",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:t===Ne?"green":"lightgray",alignItems:"center",margin:"3px"}})}))})]})]})})})]})}})};ev.displayName="App";var tv=Tl,nv=function(){};function iv(e,t,n){var i=ke.a.cloneDeep(t?t.pose:n?n.pose:{position:[0,0],orientation:0});return n&&e.position.forEach((function(t,o){if(e.position[o]>i.position[o]){var a=e.position[o]-i.position[o];i.position[o]+=Math.min(n.size[o],a>0?a:0)}})),S(e,i)}var ov=function(){function e(t,n,i,o){Object(X.a)(this,e),this.disposers=[],this.disposers.push(Object(fe.c)((function(){var e=t.get(),a=ke.a.clone(e.pose);"user"===e.soundLocalizationBase&&(a.orientation=0);var r=iv(a,i,n);if(i){var s=!1,c=!1;if(On.yarnPhones.has(i.id)?s=!0:i.closedZone&&(i.closedZone===e.zone?s=!0:c=!0),!c&&!s&&e.zone){var l,u=P(e.zone.pose,e.zone.size);c=!(s=M(i.pose.position,30,u))&&("close"===e.zone.zone||"close"===(null===(l=i.closedZone)||void 0===l?void 0:l.zone))}if(!i.physics.located||c)o.updatePose(k({orientation:0,position:[Ce,Ce]})),nv("mute ".concat(i.id," loc:").concat(i.physics.located," other:").concat(c," rInL:").concat(s));else{if(s){nv("In zone: cid:".concat(i.id));var d=x(r.position);d>1e-10&&(r.position=y(1/d,r.position))}o.updatePose(k(r))}}else if(n){var p=!!e.zone&&(n.overlapZones.includes(e.zone)||n.surroundingZones.includes(e.zone)),h=!p&&n.surroundingZones.find((function(e){return"close"===e.zone}));if(p){nv("In zone: cid:".concat(n.id));var v=x(r.position);v>1e-10&&(r.position=y(1/v,r.position))}else h&&(o.updatePose(k({orientation:0,position:[Ce,Ce]})),nv("mute ".concat(n.id," other:").concat(h," cInL:").concat(p)));var m=k(r);o.updatePose(m)}else console.error("participant or content must be specified")}))),this.disposers.push(Object(fe.c)((function(){var e=i?i.tracks.audio:ea.getContentTrack(n.id,"audio"),t=new MediaStream;e&&(t.addTrack(e),o.updateStream(t))}))),this.disposers.push(Object(fe.c)((function(){return o.updatePannerConfig(tv)}))),this.disposers.push(Object(fe.c)((function(){return o.updateBroadcast(!(null===i||void 0===i||!i.physics.onStage))})))}return Object(K.a)(e,[{key:"dispose",value:function(){var e,t=Object(a.a)(this.disposers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}}]),e}(),av=function(){function e(t,n,i,o){Object(X.a)(this,e),this.disposers=[],this.disposers.push(Object(fe.c)((function(){var e,a=t.get(),r=ke.a.clone(a.pose);"user"===a.soundLocalizationBase&&(r.orientation=0),!i&&o&&(e=ea.findPlayback(o));var s=k(iv(r,i,e));n.updatePose(s)}))),this.disposers.push(Object(fe.c)((function(){var e,t;!i&&o&&(t=ea.findPlayback(o)),n.playBlob(i?i.audioBlob:null===(e=t)||void 0===e?void 0:e.audioBlob)}))),this.disposers.push(Object(fe.c)((function(){return n.updatePannerConfig(tv)})))}return Object(K.a)(e,[{key:"dispose",value:function(){var e,t=Object(a.a)(this.disposers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}}]),e}(),rv=function(){function e(){Object(X.a)(this,e),this.audioContext=new window.AudioContext,this.audioDestination=this.audioContext.createMediaStreamDestination(),this.audioElement=new Audio,this.playMode="Pause",this.nodes={},this.audioElement.srcObject=this.audioDestination.stream}return Object(K.a)(e,[{key:"addSpeaker",value:function(e){return r(void 0===this.nodes[e]),this.nodes[e]=new wl(this.audioContext,this.audioDestination,this.playMode,!this.audioOutputMuted),this.nodes[e]}},{key:"addPlayback",value:function(e){r(void 0===this.nodes[e]);var t=new Sl(this.audioContext,this.audioDestination,this.playMode,!this.audioOutputMuted);return this.nodes[e]=t,t}},{key:"removeSpeaker",value:function(e){this.nodes[e].disconnect(),delete this.nodes[e]}},{key:"switchPlayMode",value:function(e,t){var n=this;if(r("Pause"!==e),"Pause"===this.playMode&&Object(fe.c)((function(){var e=new Set(Qo.priorityCalculator.tracksToConsume.audios.map((function(e){return"avatar"===e.producer.role?e.producer.peer.peer:e.producer.role})));for(var t in n.nodes)e.has(t)||n.nodes[t]instanceof Sl?n.nodes[t].setPlayMode(n.playMode):n.nodes[t].setPlayMode("Pause")})),e!==this.playMode||t!==this.audioOutputMuted){switch(this.playMode=e,e){case"Context":var i=setInterval((function(){da.type||("suspended"!==n.audioContext.state&&clearInterval(i),n.audioContext.resume(),n.audioElement.play())}),1e3);for(var o in this.nodes)this.nodes[o].setPlayMode(e);break;case"Element":for(var a in this.audioContext.suspend(),this.audioElement.pause(),this.nodes)this.nodes[a].setPlayMode(e);break;default:console.error("Unsupported play mode: ".concat(e))}this.audioOutputMuted=t}}},{key:"setAudioOutput",value:function(e){for(var t in vl(this.audioElement,e),this.nodes)this.nodes[t].setAudioOutput(e)}},{key:"audioOutputMuted",get:function(){return!(this.audioDestination.stream.getTracks().length>0&&this.audioDestination.stream.getTracks()[0].enabled)},set:function(e){for(var t in this.nodes)this.nodes[t].updateAudibility(!e);this.audioDestination.stream.getTracks().forEach((function(t){t.enabled=!e}))}}]),e}(),sv=new(function(){function e(){var t=this;Object(X.a)(this,e),this.manager=new rv,this.connectedGroups={},this.remotesMemo=new Map,this.playbacksMemo=new Map,this.contentsMemo=new Map,this.playbackContentsMemo=new Map,this.onRemotesChange=function(){var e=new Map(On.remote),n=s(e,t.remotesMemo);s(t.remotesMemo,e).forEach(t.removeRemote),n.forEach(t.addRemote),t.remotesMemo=e},this.onPlaybacksChange=function(){var e=new Map(On.playback),n=s(e,t.playbacksMemo);s(t.playbacksMemo,e).forEach(t.removePlayback),n.forEach(t.addPlayback),t.playbacksMemo=e},this.onPlaybackContentsChange=function(){var e=new Map(ea.playbackContents),n=s(e,t.playbackContentsMemo);s(t.playbackContentsMemo,e).forEach(t.removePlayback),n.forEach(t.addPlaybackContent),t.playbackContentsMemo=e},this.onScreenContentsChange=function(){var e=ea.getRemoteRtcContentIds().filter((function(e){return ea.getContentTrack(e,"audio")})),n=new Map(e.map((function(e){return[e,ea.find(e)]}))),i=s(n,t.contentsMemo);s(t.contentsMemo,n).forEach(t.removeContent),i.forEach(t.addContent),t.contentsMemo=n},this.removePlayback=function(e){var n=e.id;t.connectedGroups[n].dispose(),delete t.connectedGroups[n],t.manager.removeSpeaker(n)},this.addPlayback=function(e){var n=e.id,i=t.manager.addPlayback(n);t.connectedGroups[n]=new av(On.local_,i,e)},this.addPlaybackContent=function(e){var n=e.id,i=t.manager.addPlayback(n);t.connectedGroups[n]=new av(On.local_,i,void 0,e.id)},this.removeRemote=function(e){var n=e.id;t.connectedGroups[n].dispose(),delete t.connectedGroups[n],t.manager.removeSpeaker(n)},this.addRemote=function(e){var n=t.manager.addSpeaker(e.id);t.connectedGroups[e.id]=new ov(On.local_,void 0,e,n)},this.removeContent=function(e){t.connectedGroups[e.id].dispose(),delete t.connectedGroups[e.id],t.manager.removeSpeaker(e.id)},this.addContent=function(e){var n=t.manager.addSpeaker(e.id);t.connectedGroups[e.id]=new ov(On.local_,e,void 0,n)},null===o.testBot&&(Object(fe.c)(this.onRemotesChange),Object(fe.c)(this.onPlaybacksChange),Object(fe.c)(this.onPlaybackContentsChange),Object(fe.c)(this.onScreenContentsChange),Object(fe.c)((function(){var e=On.local.muteSpeaker||On.local.physics.awayFromKeyboard;t.manager.switchPlayMode(On.local.useStereoAudio?"Context":"Element",e)})))}return Object(K.a)(e,[{key:"setAudioOutput",value:function(e){this.manager.setAudioOutput(e)}}]),e}()),cv=n(36),lv=n.n(cv),uv=n(345),dv=n(346),pv=new uv.Holistic({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/holistic/".concat(e)}});pv.setOptions({modelComplexity:1,smoothLandmarks:!0,minDetectionConfidence:.7,minTrackingConfidence:.7,refineFaceLandmarks:!0});var hv,vv=new dv.FaceMesh({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/".concat(e)}});vv.setOptions({maxNumFaces:1,refineLandmarks:!0});var mv=!1;function fv(){hv&&(hv.srcObject=null,hv.remove(),hv=void 0),mv=!1}function bv(){return On.local.muteAudio||On.local.physics.awayFromKeyboard||!On.localId||null!==o.testBot}Object(fe.c)((function(){var e=On.local.devicePreference.audioInputDevice;if(bv())Qo.setLocalMicTrack(void 0).then((function(){On.local.audioLevel=0}));else{var t=Qo.getLocalMicTrack();if(t&&t.deviceId===e)return;new Promise((function(e,t){var n=On.local.devicePreference.audioInputDevice;navigator.mediaDevices.getUserMedia({audio:{deviceId:n}}).then((function(t){var n=t.getAudioTracks()[0];n&&e({track:n,peer:On.local.id,role:"avatar"})})).catch(t)})).then((function(e){var t;bv()?null===(t=e.track)||void 0===t||t.stop():Qo.setLocalMicTrack(e)})).finally(Xi)}})),Object(fe.c)((function(){var e=On.local.devicePreference.audioOutputDevice;e&&sv.setAudioOutput(e)}));function gv(){return On.local.muteVideo||On.local.physics.awayFromKeyboard||!On.localId||null!==o.testBot}function jv(){}function Av(){lv.a.render(Object(Ia.jsx)(ev,{}),document.getElementById("root"))}Object(fe.c)((function(){var e=On.local.devicePreference.videoInputDevice,t=On.local.information.faceTrack;if(gv())fv(),ls(),Qo.setLocalCameraTrack(void 0).then((function(e){return null===e||void 0===e?void 0:e.track.stop()}));else if(".vrm"===On.local.information.avatarSrc.slice(-4))ls(),function(e,t){fv(),new Promise((function(n,i){t||(t=On.local.devicePreference.videoInputDevice);var o=Object(wn.a)(Object(wn.a)({},config.rtc.videoConstraints.video),{},{width:{ideal:320},height:{ideal:240},frameRate:{ideal:10}});navigator.mediaDevices.getUserMedia({video:Object(wn.a)({deviceId:t},o)}).then((function(t){(hv=window.document.createElement("video")).srcObject=t,hv.autoplay=!0,e?vv.onResults((function(e){var t=e.multiFaceLandmarks[0],n={face:t&&bd.a.solve(t,{runtime:"mediapipe",video:hv})};On.local.vrmRigs=n})):pv.onResults((function(e){var t=e.faceLandmarks,n=e.poseLandmarks,i=e.za,o=e.rightHandLandmarks,a=e.leftHandLandmarks,r={face:t&&bd.a.solve(t,{runtime:"mediapipe",video:hv}),pose:i&&n&&bd.c.solve(i,n,{runtime:"mediapipe",video:hv,imageSize:{height:0,width:0},enableLegs:!0}),leftHand:a&&bd.b.solve(a,"Left"),rightHand:o&&bd.b.solve(o,"Right")};On.local.vrmRigs=r})),mv=!0,function e(t){var n;mv&&(null!==(n=hv)&&void 0!==n&&n.videoWidth?t.send({image:hv}).then((function(){window.setTimeout((function(){e(t)}),to)})):window.setTimeout((function(){e(t)}),to))}(e?vv:pv),n()})).catch(i)}))}(!t);else{fv();var n=Qo.getLocalCameraTrack();if(n&&n.deviceId===e)return;us(t).then((function(e){gv()?null===e||void 0===e||e.track.stop():Qo.setLocalCameraTrack(e)})).finally(Xi)}})),Object(fe.e)({enforceActions:"never"}),Z.a.use($.e).use(q.a).init(oe).then((function(){var e=F(jv)();e.then(F(Av)),e.then(F(yv))}));var Ov="";function yv(){window.addEventListener("beforeunload",(function(e){if(Ov="".concat(Ov,"beforeunload called. ").concat(Date()," "),localStorage.setItem("log",Ov),!da.type&&(ea.getLocalRtcContentIds().length||ea.mainScreenOwner===On.localId))return Ov+="Ask user. ",e.preventDefault(),e.stopImmediatePropagation(),e.returnValue="",localStorage.setItem("log",Ov),e.returnValue;Qo.leave()})),da.connectionStart(),Object(fe.j)((function(){return""===da.type}),(function(){var e=o.room||"_";Qo.enter(e)}))}}},[[553,1,2]]]);
//# sourceMappingURL=main.360cdbfa.chunk.js.map